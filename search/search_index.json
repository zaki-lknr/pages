{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u622f\u8853memo \u30e1\u30e2\u7f6e\u304d\u5834\u306e\u4e88\u5b9a link zaki work log zaki-lknr - Qiita author @zaki_hmkc","title":"\u622f\u8853memo"},{"location":"#memo","text":"\u30e1\u30e2\u7f6e\u304d\u5834\u306e\u4e88\u5b9a","title":"\u622f\u8853memo"},{"location":"#link","text":"zaki work log zaki-lknr - Qiita","title":"link"},{"location":"#author","text":"@zaki_hmkc","title":"author"},{"location":"Ansible/","text":"\u57fa\u672c\u30fb\u30cd\u30bf\u5e33 \u30b3\u30f3\u30bb\u30d7\u30c8 Ansible concepts \u2014 Ansible Documentation \u30ea\u30ea\u30fc\u30b9\u3068\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u60c5\u5831 Releases and maintenance \u2014 Ansible Documentation Red Hat Ansible Automation Platform \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb - Red Hat Customer Portal \u30ed\u30fc\u30c9\u30de\u30c3\u30d7 Ansible Roadmap \u2014 Ansible Documentation \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210 Sample Ansible setup \u2014 Ansible Documentation \u300cSample directory layout\u300d\u3084\u300cAlternative directory layout\u300d\u3092\u53c2\u7167\u3002 Tips and trics \u65e7\u300c\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u300d\u306e\u30da\u30fc\u30b8\u306f\u3053\u3061\u3089\u3002 Tips and tricks \u2014 Ansible Documentation \u30cd\u30c3\u30c8\u30ef\u30fc\u30af Ansible Network Examples \u2014 Ansible Documentation Network Debug and Troubleshooting Guide \u2014 Ansible Documentation venv\u4f5c\u308b\u30bf\u30b9\u30af venv\u306bopenshift\u30d1\u30c3\u30b1\u30fc\u30b8\u5165\u308c\u308b - name : install openshift ansible.builtin.pip : name : openshift virtualenv : /root/venv virtualenv_command : python3 -m venv \u3053\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306evenv\u3092\u4f7f\u3063\u3066Ansible\u5b9f\u884c\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u3002 [Ansible] \u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306evenv\u306ePython\u3092\u6307\u5b9a\u3057\u3066\u5b9f\u884c\u3059\u308b (interpreter_python / ansible_python_interpreter / PYTHONPATH) - zaki work log \u3053\u306e\u8fba\u306e\u8a2d\u5b9a\u3092\u3069\u3053\u304b\u306b\u5165\u308c\u308c\u3070OK ansible_python_interpreter : /root/venv/bin/python pip\u306f\u6700\u65b0\u306b\u3057\u3064\u3064\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3082\u5165\u308c\u308b\u306a\u3089\u3053\u3093\u306a\u611f\u3058\u3002 \u6700\u65b0\u3060\u3068 ansible==4.2.0 \u304c\u5165\u308b\u5834\u5408\u3067\u3082\u3001 4.1.0 \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3002 - name : create venv ansible.builtin.pip : name : - pip - ansible==4.1.0 state : latest virtualenv : ~/venv/ansible4.1.0 virtualenv_command : python3 -m venv \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u7d22\u5f15 Index \u2014 Ansible Documentation ansible-doc $ ansible-doc <module-name> $ ansible-doc <module-fqcn> \u30e2\u30b8\u30e5\u30fc\u30eb\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f $ ansible-doc -M /path/to/collection-path/ansible_collections/namespace/collectionname/plugins/modules hogehoge \u30d1\u30b9\u304c\u5408\u308f\u306a\u3044\u5834\u5408\u306f\u3001\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u300c\u3053\u308c\u3089\u306e\u30d1\u30b9\u306b\u305d\u3093\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u306a\u3044\u3093\u3060\u304c\uff1f\u300d\u3068\u30d1\u30b9\u4e00\u89a7\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u305d\u3053\u304b\u3089\u8abf\u6574\u3059\u308b\u3002 Automation Hub \u30c8\u30fc\u30af\u30f3\u306e\u4f5c\u6210 Hub \u3078\u306e\u63a5\u7d9a","title":"\u57fa\u672c\u30fb\u30cd\u30bf\u5e33"},{"location":"Ansible/#_1","text":"","title":"\u57fa\u672c\u30fb\u30cd\u30bf\u5e33"},{"location":"Ansible/#_2","text":"Ansible concepts \u2014 Ansible Documentation","title":"\u30b3\u30f3\u30bb\u30d7\u30c8"},{"location":"Ansible/#_3","text":"Releases and maintenance \u2014 Ansible Documentation Red Hat Ansible Automation Platform \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb - Red Hat Customer Portal","title":"\u30ea\u30ea\u30fc\u30b9\u3068\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u60c5\u5831"},{"location":"Ansible/#_4","text":"Ansible Roadmap \u2014 Ansible Documentation","title":"\u30ed\u30fc\u30c9\u30de\u30c3\u30d7"},{"location":"Ansible/#_5","text":"Sample Ansible setup \u2014 Ansible Documentation \u300cSample directory layout\u300d\u3084\u300cAlternative directory layout\u300d\u3092\u53c2\u7167\u3002","title":"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210"},{"location":"Ansible/#tips-and-trics","text":"\u65e7\u300c\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u300d\u306e\u30da\u30fc\u30b8\u306f\u3053\u3061\u3089\u3002 Tips and tricks \u2014 Ansible Documentation","title":"Tips and trics"},{"location":"Ansible/#_6","text":"Ansible Network Examples \u2014 Ansible Documentation Network Debug and Troubleshooting Guide \u2014 Ansible Documentation","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af"},{"location":"Ansible/#venv","text":"venv\u306bopenshift\u30d1\u30c3\u30b1\u30fc\u30b8\u5165\u308c\u308b - name : install openshift ansible.builtin.pip : name : openshift virtualenv : /root/venv virtualenv_command : python3 -m venv \u3053\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306evenv\u3092\u4f7f\u3063\u3066Ansible\u5b9f\u884c\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u3002 [Ansible] \u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306evenv\u306ePython\u3092\u6307\u5b9a\u3057\u3066\u5b9f\u884c\u3059\u308b (interpreter_python / ansible_python_interpreter / PYTHONPATH) - zaki work log \u3053\u306e\u8fba\u306e\u8a2d\u5b9a\u3092\u3069\u3053\u304b\u306b\u5165\u308c\u308c\u3070OK ansible_python_interpreter : /root/venv/bin/python pip\u306f\u6700\u65b0\u306b\u3057\u3064\u3064\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3082\u5165\u308c\u308b\u306a\u3089\u3053\u3093\u306a\u611f\u3058\u3002 \u6700\u65b0\u3060\u3068 ansible==4.2.0 \u304c\u5165\u308b\u5834\u5408\u3067\u3082\u3001 4.1.0 \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3002 - name : create venv ansible.builtin.pip : name : - pip - ansible==4.1.0 state : latest virtualenv : ~/venv/ansible4.1.0 virtualenv_command : python3 -m venv","title":"venv\u4f5c\u308b\u30bf\u30b9\u30af"},{"location":"Ansible/#_7","text":"","title":"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"},{"location":"Ansible/#_8","text":"Index \u2014 Ansible Documentation","title":"\u7d22\u5f15"},{"location":"Ansible/#ansible-doc","text":"$ ansible-doc <module-name> $ ansible-doc <module-fqcn> \u30e2\u30b8\u30e5\u30fc\u30eb\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f $ ansible-doc -M /path/to/collection-path/ansible_collections/namespace/collectionname/plugins/modules hogehoge \u30d1\u30b9\u304c\u5408\u308f\u306a\u3044\u5834\u5408\u306f\u3001\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u300c\u3053\u308c\u3089\u306e\u30d1\u30b9\u306b\u305d\u3093\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u306a\u3044\u3093\u3060\u304c\uff1f\u300d\u3068\u30d1\u30b9\u4e00\u89a7\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u305d\u3053\u304b\u3089\u8abf\u6574\u3059\u308b\u3002","title":"ansible-doc"},{"location":"Ansible/#automation-hub","text":"","title":"Automation Hub"},{"location":"Ansible/#_9","text":"Hub \u3078\u306e\u63a5\u7d9a","title":"\u30c8\u30fc\u30af\u30f3\u306e\u4f5c\u6210"},{"location":"Ansible/awx/","text":"AWX arm64\u7248\u30d3\u30eb\u30c9 arm64\u7248\u306f\u30a4\u30e1\u30fc\u30b8\u304c\u516c\u958b\u3055\u308c\u3066\u306a\u3044\u306e\u3067\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002 2022.02.15\u6642\u70b9\u306e\u5185\u5bb9\u30022.16\u306bAWX 2.0.0\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u3066\u308b\u3002 awx-operator 0.16.1 (devel)\u3067\u5b9f\u65bd $ make docker-build IMAGE_TAG_BASE = zakihmkc/awx-operator VERSION =0 .16.1-arm \u3053\u308c\u3067\u30d3\u30eb\u30c9\u3055\u308c\u308b\u30a4\u30e1\u30fc\u30b8\u540d\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 : : Step 5/8 : RUN ansible-galaxy collection install -r ${HOME}/requirements.yml && chmod -R ug+rwx ${HOME}/.ansible ---> Running in bb9cc8cc61ee Process install dependency map Starting collection install process Installing 'kubernetes.core:1.2.1' to '/opt/ansible/.ansible/collections/ansible_collections/kubernetes/core' Installing 'operator_sdk.util:0.2.0' to '/opt/ansible/.ansible/collections/ansible_collections/operator_sdk/util' Removing intermediate container bb9cc8cc61ee ---> 7346f9bc9f4e Step 6/8 : COPY watches.yaml ${HOME}/watches.yaml ---> fdba769a7d2f Step 7/8 : COPY roles/ ${HOME}/roles/ ---> 5326e818c7ed Step 8/8 : COPY playbooks/ ${HOME}/playbooks/ ---> 28538a5f08b7 Successfully built 28538a5f08b7 Successfully tagged zakihmkc/awx-operator:0.16.1-arm $ docker image ls zakihmkc/awx-operator REPOSITORY TAG IMAGE ID CREATED SIZE zakihmkc/awx-operator 0.16.1-arm 28538a5f08b7 45 seconds ago 516MB \u30a4\u30e1\u30fc\u30b8\u304c\u3067\u304d\u305f\u3089 push \u3059\u308b\u3002 $ make docker-push IMG = zakihmkc/awx-operator:0.16.1-arm \u30d3\u30eb\u30c9\u3057\u305f\u30ab\u30b9\u30bf\u30e0\u30a4\u30e1\u30fc\u30b8\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306b\u306f $ make deploy IMG = zakihmkc/awx-operator:0.16.1-arm awx 19.5.1\u3067\u5b9f\u65bd\u3002 Makefile\u3042\u308b\u3051\u3069\u4f7f\u3044\u65b9\u304c\u3088\u304f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u3002 tools/ansible/build.yml\u304c\u3042\u308b\u306e\u3067\u3001\u3053\u3063\u3061\u3067\u30d3\u30eb\u30c9\u3067\u304d\u305f\u3002 $ cd tools/ansible/ $ ansible-playbook build.yml $ docker images ansible/awx REPOSITORY TAG IMAGE ID CREATED SIZE ansible/awx 19.5.2.dev117 5c0f58543bbc 5 minutes ago 696MB \u30d3\u30eb\u30c9\u3067\u304d\u305f\u3089push $ docker tag ansible/awx:19.5.2.dev117 zakihmkc/awx:19.5.2.dev117-arm $ docker push zakihmkc/awx:19.5.2.dev117-arm \u3053\u306e\u72b6\u614b\u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3068\u3001 $ cat awx-demo.yml --- apiVersion: awx.ansible.com/v1beta1 kind: AWX metadata: name: awx-demo spec: service_type: nodeport image: zakihmkc/awx image_version: 19.5.2.dev117-arm $ kubectl apply -f awx-demo.yml -n awx awx.awx.ansible.com/awx-demo created $ kubectl get pod -n awx NAME READY STATUS RESTARTS AGE awx-operator-controller-manager-59584d6d-cfvcw 2/2 Running 0 60m awx-demo-postgres-0 1/1 Running 0 83s awx-demo-64b6ddfbb5-td57c 3/4 Error 3 (30s ago) 73s \u3042\u30fc\u3001\u3001 (awx-build) ubuntu@oci-g-a1-ubuntu:~/src/awx-operator$ kubectl logs -n awx awx-demo-64b6ddfbb5-td57c -c awx-demo-ee standard_init_linux.go:228: exec user process caused: exec format error \u3053\u306e\u30a4\u30e1\u30fc\u30b8\u3082arm\u7248\u5fc5\u8981\u3060\u3063\u305f\u3002 awx-ee\u3082arm\u7248\u3092build&push\u3057\u3066\u2026 $ cat awx-demo.yml --- apiVersion: awx.ansible.com/v1beta1 kind: AWX metadata: name: awx-demo spec: service_type: nodeport image: zakihmkc/awx image_version: 19.5.2.dev117-arm ee_images: - name: awx-demo-ee image: zakihmkc/awx-ee $ kubectl apply -f awx-demo.yml -n awx awx.awx.ansible.com/awx-demo created \u53cd\u6620\u3055\u308c\u306a\u3044\u3002\u3002 ee_images \u306e\u8a2d\u5b9a\u65b9\u6cd5\u308f\u304b\u3089\u305a\u3002\u3002 \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3088\u304f\u898b\u308b\u3068\u3001\u3059\u3050\u8fd1\u304f\u306b control_plane_ee_image \u306b\u3064\u3044\u3066\u66f8\u304b\u308c\u3066\u3044\u308b\u3002 $ cat awx-demo.yml --- apiVersion: awx.ansible.com/v1beta1 kind: AWX metadata: name: awx-demo spec: service_type: nodeport image: zakihmkc/awx image_version: 19.5.2.dev117-arm ee_images: - name: awx-ee-arm64 image: zakihmkc/awx-ee control_plane_ee_image: zakihmkc/awx-ee \u3053\u308c\u3067arm\u7528\u306b\u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3092pull\u3067\u304d\u305f\u3002 \u304c\u2026 $ kubectl logs -n awx awx-demo-5888cdc5cc-dtqtt -c awx-demo-ee /usr/bin/receptor: /usr/bin/receptor: cannot execute binary file \u4e2d\u3067\u4f7f\u3063\u3066\u308b\u5b9f\u884c\u30d0\u30a4\u30ca\u30ea\u304carm\u3058\u3083\u306a\u3044\uff1f $ docker run -it --rm zakihmkc/awx-ee cat /usr/bin/receptor | file - /dev/stdin: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, Go BuildID=dzUF3PWwMDDpxbzJG4PA/ROcMoX3MTms06DLSdROU/2q0gqTdR4VkvLhOjbFwW/_sKtclM7e0bA3VOTpJ50, not stripped \u3042\u3041\u3001\u3001\u306a\u308b\u307b\u3069\u2026 \u30d3\u30eb\u30c9\u30ed\u30b0\u3092\u898b\u8fd4\u3059\u3068\u3001 Step 21/26 : COPY --from=quay.io/ansible/receptor:devel /usr/bin/receptor /usr/bin/receptor devel: Pulling from ansible/receptor \u3063\u3066\u306e\u304c\u51fa\u529b\u3055\u308c\u3066\u305f\u3002(awx-ee) awx-ee 0.6.0\u3067\u5b9f\u65bd $ pip install tox $ tox -edocker \u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u3002\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u304c\u3053\u308c\u3082amd64\u3057\u304b\u306a\u3044\u3063\u307d\u3044\u3002 Digest: sha256:67164fe74446b5cc40f7ff48d69c2cf5a09d234103982a870e8dd90f0cce4fcf Status: Downloaded newer image for quay.io/ansible/ansible-runner:latest ---> fe0ebe0eae7f Step 4/26 : ARG ANSIBLE_GALAXY_CLI_COLLECTION_OPTS= ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in ddcc58ce4a3e Removing intermediate container ddcc58ce4a3e ---> 29bdd8b42c78 Step 5/26 : USER root ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in ec96ecc53899 Removing intermediate container ec96ecc53899 ---> 047557a18fd9 Step 6/26 : ADD _build /build ---> 4aae6069de8c Step 7/26 : WORKDIR /build ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in 84bc2b6aa898 Removing intermediate container 84bc2b6aa898 ---> 96ca9bbcffce Step 8/26 : RUN ansible-galaxy role install -r requirements.yml --roles-path /usr/share/ansible/roles ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in 52ab0ab8b6c9 standard_init_linux.go:228: exec user process caused: exec format error The command '/bin/sh -c ansible-galaxy role install -r requirements.yml --roles-path /usr/share/ansible/roles' returned a non-zero code: 1 An error occured (rc=1), see output line(s) above for details. ERROR: InvocationError for command /home/ubuntu/src/awx-ee/.tox/docker/bin/ansible-builder build -v3 -c . -t quay.io/ansible/awx-ee --container-runtime=docker (exited with code 1) runner\u3082builder\u3082arm\u7248\u304c\u5fc5\u8981\u3063\u307d\u3044\u306a runner\u3068builder\u3092\u7528\u610f\u3059\u308b\u3068\u30d3\u30eb\u30c9\u6210\u529f\u3002 Removing intermediate container dcdffc16d888 ---> 5b60adcb5b7b Successfully built 5b60adcb5b7b Successfully tagged quay.io/ansible/awx-ee:latest Complete! The build context can be found at: /home/ubuntu/src/awx/awx-ee ______________________________________________________ summary _______________________________________________________ docker: commands succeeded congratulations :) $ docker image ls quay.io/ansible/awx-ee REPOSITORY TAG IMAGE ID CREATED SIZE quay.io/ansible/awx-ee latest 5b60adcb5b7b 5 minutes ago 1.58GB \u3042\u3001\u30a4\u30e1\u30fc\u30b8\u540d\u2026 $ docker tag quay.io/ansible/awx-ee:latest zakihmkc/awx-ee:latest $ docker push zakihmkc/awx-ee:latest ansible-runner devel\u30d6\u30e9\u30f3\u30c1\u3067\u5b9f\u65bd $ make image Status: Downloaded newer image for quay.io/ansible/python-builder:latest ---> e86f8912b919 Step 6/21 : ARG ANSIBLE_BRANCH ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in 4efe4c1dbf0d Removing intermediate container 4efe4c1dbf0d ---> b29ee85f97c3 Step 7/21 : ARG ZUUL_SIBLINGS ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in e3770bf07693 Removing intermediate container e3770bf07693 ---> 3bc46246a2c3 Step 8/21 : COPY . /tmp/src ---> 5c8193d3adec Step 9/21 : RUN if [ \"$ANSIBLE_BRANCH\" != \"\" ] ; then echo \"Installing requirements.txt / upper-constraints.txt for Ansible $ANSIBLE_BRANCH\" ; cp /tmp/src/tools/requirements-$ANSIBLE_BRANCH.txt /tmp/src/requirements.txt ; cp /tmp/src/tools/upper-constraints-$ANSIBLE_BRANCH.txt /tmp/src/upper-constraints.txt ; else echo \"Installing requirements.txt\" ; cp /tmp/src/tools/requirements.txt /tmp/src/requirements.txt ; fi && cp /tmp/src/tools/build-requirements.txt /tmp/src/build-requirements.txt && cp /tmp/src/tools/bindep.txt /tmp/src/bindep.txt ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in a3b89d0a4b54 standard_init_linux.go:228: exec user process caused: exec format error The command '/bin/sh -c if [ \"$ANSIBLE_BRANCH\" != \"\" ] ; then echo \"Installing requirements.txt / upper-constraints.txt for Ansible $ANSIBLE_BRANCH\" ; cp /tmp/src/tools/requirements-$ANSIBLE_BRANCH.txt /tmp/src/requirements.txt ; cp /tmp/src/tools/upper-constraints-$ANSIBLE_BRANCH.txt /tmp/src/upper-constraints.txt ; else echo \"Installing requirements.txt\" ; cp /tmp/src/tools/requirements.txt /tmp/src/requirements.txt ; fi && cp /tmp/src/tools/build-requirements.txt /tmp/src/build-requirements.txt && cp /tmp/src/tools/bindep.txt /tmp/src/bindep.txt' returned a non-zero code: 1 make: *** [Makefile:95: image] Error 1 \u3053\u308c\u307e\u305f\u30d9\u30fc\u30b9\u3084\u30d3\u30eb\u30c9\u306b\u4f7f\u3046 quay.io/ansible/python-base:latest \u3068 quay.io/ansible/python-builder:latest \u304camd64\u5411\u3051\u3063\u307d\u3044\u3002 \u5f8c\u8ff0\u306e python-base \u3068 python-builder \u3092\u2191\u306e\u30a4\u30e1\u30fc\u30b8\u540d\u3067\u30d3\u30eb\u30c9\u3057\u3066\u518d\u5b9f\u884c\u3059\u308c\u3070OK Step 20/21 : ENTRYPOINT [\"entrypoint\"] ---> Running in efe6471171c6 Removing intermediate container efe6471171c6 ---> 8b899620e92f Step 21/21 : CMD [\"ansible-runner\", \"run\", \"/runner\"] ---> Running in 5486cf162432 Removing intermediate container 5486cf162432 ---> 7db86ada250a Successfully built 7db86ada250a Successfully tagged quay.io/ansible/ansible-runner:latest docker tag quay.io/ansible/ansible-runner quay.io/ansible/ansible-runner:devel python-base main\u30d6\u30e9\u30f3\u30c1\u3067\u5b9f\u65bd ansible/python-base-image: A container image for running python projects \u30d3\u30eb\u30c9\u7528\u306eMakefile\u306e\u985e\u306f\u306a\u306b\u3082\u7121\u3057\u3002 Containerfile \u3042\u308b\u306e\u3067\u3001\u3053\u308c\u3067 docker build \u3057\u305f\u3002 $ docker build -f Containerfile -t quay.io/ansible/python-base . \u3053\u308c\u306f\u3046\u307e\u304f\u884c\u3063\u305f\u3002 : : Step 16/17 : RUN rm -rf $REMOTE_SOURCE_DIR ---> Running in e45372606b30 Removing intermediate container e45372606b30 ---> 1fc6e4db77c4 Step 17/17 : ENTRYPOINT [\"/usr/local/bin/dumb-init\", \"--\"] ---> Running in e711f13da032 Removing intermediate container e711f13da032 ---> 84c14ff10f30 Successfully built 84c14ff10f30 Successfully tagged quay.io/ansible/python-base:latest $ docker image ls quay.io/ansible/python-base REPOSITORY TAG IMAGE ID CREATED SIZE quay.io/ansible/python-base latest 84c14ff10f30 About a minute ago 768MB python-builder main\u30d6\u30e9\u30f3\u30c1\u3067\u5b9f\u65bd ansible/python-builder-image: A container image for building python projects \u3053\u308c\u3082\u7279\u306b\u30d3\u30eb\u30c9\u7528\u306e\u30c4\u30fc\u30eb\u7121\u3057\u3002 $ docker build -f Containerfile -t quay.io/ansible/python-builder:latest . \u3053\u308c\u3082\u3046\u307e\u304f\u3044\u3063\u305f\u3002 : : Step 18/19 : WORKDIR / ---> Running in 561b64ed5ff6 Removing intermediate container 561b64ed5ff6 ---> 756c2f3aab76 Step 19/19 : RUN rm -rf $REMOTE_SOURCE_APP_DIR ---> Running in 0315f4ab8cbc Removing intermediate container 0315f4ab8cbc ---> c832710ee7dd Successfully built c832710ee7dd Successfully tagged quay.io/ansible/python-builder:latest $ docker image ls quay.io/ansible/python-builder REPOSITORY TAG IMAGE ID CREATED SIZE quay.io/ansible/python-builder latest c832710ee7dd 51 seconds ago 854MB $ docker image ls quay.io/ansible/ansible-runner REPOSITORY TAG IMAGE ID CREATED SIZE quay.io/ansible/ansible-runner devel 7db86ada250a About a minute ago 962MB quay.io/ansible/ansible-runner latest 7db86ada250a About a minute ago 962MB ansible-builder release_1.0\u3067\u5b9f\u65bd ansible/ansible-builder: An Ansible execution environment builder \u3053\u308c\u3082runner\u3068\u540c\u3058\u304f\u3001 Makefile \u306b image \u30bf\u30fc\u30b2\u30c3\u30c8\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u5b9f\u884c\u3002 \u30d3\u30eb\u30c9\u4e2d\u306e\u30ed\u30b0\u3092\u898b\u308b\u3068python-base\u3068python-builder\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u3002 $ make image $ docker image ls quay.io/ansible/ansible-builder REPOSITORY TAG IMAGE ID CREATED SIZE quay.io/ansible/ansible-builder 1.0.0a2-99-g38a0104 e0d5adabb6c3 46 seconds ago 858MB quay.io/ansible/ansible-builder latest e0d5adabb6c3 46 seconds ago 858MB receptor 1.0.0a2\u30d6\u30e9\u30f3\u30c1\u3067\u5b9f\u65bd ansible/receptor: Project Receptor is a flexible multi-service relayer with remote execution and orchestration capabilities linking controllers with executors across a mesh of nodes. \u30c7\u30d5\u30a9\u30eb\u30c8\u306f podman \u3092\u4f7f\u3046\u307f\u305f\u3044\u306a\u306e\u3067 docker \u3092\u6307\u5b9a\u3057\u3066\u5b9f\u884c\u3002 $ make container CONTAINERCMD = docker \u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u3002 Exception: Versioning for this project requires either an sdist tarball, or access to an upstream git repository. It's also possible that there is a mismatch between the package name in setup.cfg and the argument given to pbr.version.VersionInfo. Project name receptorctl was given, but was not able to be found. error in setup command: Error parsing /source/receptorctl/setup.cfg: Exception: Versioning for this project requires either an sdist tarball, or access to an upstream git repository. It's also possible that there is a mismatch between the package name in setup.cfg and the argument given to pbr.version.VersionInfo. Project name receptorctl was given, but was not able to be found. make: git: Command not found \u3093\u30fc\u3001devel\u306e\u307e\u307e\u3060\u3063\u305f\u306e\u304c\u60aa\u304b\u3063\u305f\u304b\u306a\u3002 $ git switch release_1.1 Switched to branch 'release_1.1' Your branch is up to date with 'origin/release_1.1'. \u3067\u3082\u3001\u5225\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\u3002\u3088\u304f\u308f\u304b\u3089\u3093\u3002 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u6398\u3063\u305f\u3089 packaging/container/Dockerfile \u304c\u3042\u3063\u305f\u2026\u304c\u3001\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f make \u3067\u30d3\u30eb\u30c9\u3059\u308b\u3068\u304d\u306b\u4f7f\u308f\u308c\u308b\u306e\u3068\u4e00\u7dd2\u3060\u3002\u3002 \u30d3\u30eb\u30c9\u306e\u30ed\u30b0\u3092\u3088\u304f\u307f\u308b\u3068 Step 3/25 : RUN curl -LO https://go.dev/dl/go1.16.13.linux-amd64.tar.gz ---> Using cache ---> b1bf06de576f Step 4/25 : RUN tar -C /usr/local -xzf go1.16.13.linux-amd64.tar.gz ---> Using cache ---> 7b134322bd9b \u307f\u305f\u3044\u306a\u306e\u3042\u3063\u305f\u3002\u3053\u308c\u304b\u3002 \u4ee5\u4e0b\u5909\u66f4 $ git diff diff --git a/packaging/container/Dockerfile b/packaging/container/Dockerfile index ead007a..1fc7416 100644 --- a/packaging/container/Dockerfile +++ b/packaging/container/Dockerfile @@ -2,9 +2,9 @@ FROM quay.io/centos/centos:stream8 as builder RUN dnf -y update && dnf install -y make python3 python3-pip python3-wheel -RUN curl -LO https://go.dev/dl/go1.16.13.linux-amd64.tar.gz +RUN curl -LO https://go.dev/dl/go1.16.13.linux-arm64.tar.gz -RUN tar -C /usr/local -xzf go1.16.13.linux-amd64.tar.gz +RUN tar -C /usr/local -xzf go1.16.13.linux-arm64.tar.gz ADD source.tar.gz /source WORKDIR /source \u3053\u308c\u3067\u30d3\u30eb\u30c9\u3002\u540c\u3058\u30a8\u30e9\u30fc\u306f\u3067\u305f\u304c\u51e6\u7406\u306f\u7d9a\u884c\u3057\u305f\u3002 : : Step 24/25 : ENTRYPOINT [\"/usr/bin/tini\", \"--\"] ---> Running in c19287787c6c Removing intermediate container c19287787c6c ---> d90dae43fbbf Step 25/25 : CMD [\"/usr/bin/receptor\", \"-c\", \"/etc/receptor/receptor.conf\"] ---> Running in e8debaee8c0c Removing intermediate container e8debaee8c0c ---> 376efbc54f61 Successfully built 376efbc54f61 Successfully tagged receptor:latest \u3042\u3001\u30a4\u30e1\u30fc\u30b8\u540d\u2026 $ docker image ls receptor REPOSITORY TAG IMAGE ID CREATED SIZE receptor latest 376efbc54f61 51 seconds ago 777MB \u3068\u308a\u3042\u3048\u305a\u30bb\u30c3\u30c8 $ docker tag receptor:latest quay.io/ansible/receptor:devel AWX\u3067\u30b8\u30e7\u30d6\u304c\u5b9f\u884c\u3067\u304d\u306a\u3044\u4ef6(\u8abf\u67fb\u4e2d) AWX\u3067\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u308b\u3084\u3064\u3002 Traceback (most recent call last): File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/awx/main/tasks/jobs.py\", line 449, in run self.pre_run_hook(self.instance, private_data_dir) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/awx/main/tasks/jobs.py\", line 979, in pre_run_hook RunProjectUpdate.make_local_copy(job.project, private_data_dir, scm_revision=job_revision) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/awx/main/tasks/jobs.py\", line 1380, in make_local_copy source_branch = git_repo.create_head(tmp_branch_name, p.scm_revision) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/git/repo/base.py\", line 386, in create_head return Head.create(self, path, commit, force, logmsg) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/git/refs/symbolic.py\", line 543, in create return cls._create(repo, path, cls._resolve_ref_on_create, reference, force, logmsg) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/git/refs/symbolic.py\", line 510, in _create ref.set_reference(target, logmsg) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/git/refs/symbolic.py\", line 326, in set_reference assure_directory_exists(fpath, is_file=True) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/git/util.py\", line 177, in assure_directory_exists os.makedirs(path, exist_ok=True) File \"/usr/lib64/python3.9/os.py\", line 225, in makedirs mkdir(name, mode) PermissionError: [Errno 13] Permission denied: '/var/lib/awx/projects/_6__demo_project/.git/refs/heads/awx_internal' \u30aa\u30ea\u30b8\u30ca\u30eb\u306eamd64\u7248\u3001Docker\u30a4\u30e1\u30fc\u30b8\u306e\u30e6\u30fc\u30b6\u30fc\u6a29\u9650 [zaki@cloud-dev2 ~]$ docker run -it --rm quay.io/ansible/awx-ee:0.6.0 bash bash-4.4# id uid=0(root) gid=0(root) groups=0(root) bash-4.4# exit [zaki@cloud-dev2 ~]$ docker run -it --rm quay.io/ansible/awx:20.0.0 bash bash-5.1$ id uid=1000 gid=0(root) groups=0(root) bash-5.1$ arm64\u3067\u30d3\u30eb\u30c9\u3057\u305fDocker\u30a4\u30e1\u30fc\u30b8\u306e\u30e6\u30fc\u30b6\u30fc\u6a29\u9650 ubuntu@oci-ap-a1-ubuntu02:~$ docker run -it --rm zakihmkc/awx-ee:0.6.0 bash bash-4.4# id uid=0(root) gid=0(root) groups=0(root) bash-4.4# exit exit ubuntu@oci-ap-a1-ubuntu02:~$ docker run -it --rm zakihmkc/awx:20.0.0 bash bash-5.1$ id uid=1000 gid=0(root) groups=0(root) bash-5.1$ exit exit Docker\u4e0a\u3060\u3068\u540c\u4e00\u3002 \u3058\u3083\u3042k8s\u4e0a\u3060\u3068\u2026 amd64\u7248\u306f\u3053\u308c\u3002 [zaki@cloud-dev2 ~]$ kubectl exec -it -n awx awx-demo-74d8979549-bszp6 -c awx-demo-ee -- bash bash-4.4$ id uid=1000(runner) gid=0(root) groups=0(root) bash-4.4$ exit [zaki@cloud-dev2 ~]$ kubectl exec -it -n awx awx-demo-74d8979549-bszp6 -c awx-demo-task -- bash bash-5.1$ id uid=1000(awx) gid=0(root) groups=0(root) bash-5.1$ exit exit arm64\u7248\u3002 ubuntu@oci-ap-a1-ubuntu02:~$ kubectl exec -n awx -it awx-demo-7847cd4bb-wd4w4 -c awx-demo-ee -- bash bash-4.4# id uid=0(root) gid=0(root) groups=0(root) bash-4.4# exit ubuntu@oci-ap-a1-ubuntu02:~$ kubectl exec -n awx -it awx-demo-7847cd4bb-wd4w4 -c awx-demo-task -- bash bash-5.1$ id uid=1000(awx) gid=0(root) groups=0(root) bash-5.1$ exit ee\u306e\u5b9f\u884c\u6a29\u9650\u304c\u3053\u3053\u3060\u3051 root \u306b\u306a\u3063\u3066\u3044\u308b\u3002 \u5b9f\u884c\u6a29\u9650\u3058\u3083\u306a\u304f\u3066 /etc/passwd \u304b\u3082\u3002 amd64\u306e\u30aa\u30ea\u30b8\u30ca\u30eb\u7248 [zaki@cloud-dev2 ~]$ kubectl exec -it -n awx awx-demo-74d8979549-bszp6 -c awx-demo-ee -- bash bash-4.4$ id uid=1000(runner) gid=0(root) groups=0(root) bash-4.4$ cat /etc/passwd root:x:0:0:root:/root:/bin/bash runner:x:1000:0:,,,:/home/runner:/bin/bash arm64\u5411\u3051\u306b\u30d3\u30eb\u30c9\u3057\u305f\u7248 ubuntu@oci-ap-a1-ubuntu02:~/tmp$ kubectl exec -n awx -it awx-demo-84b4b75d85-9txt2 -c awx-demo-ee -- bash bash-4.4# cat /etc/passwd root:x:0:0:root:/root:/bin/bash runner:x:0:0:,,,:/home/runner:/bin/bash bash-4.4# exit \u305d\u3082\u305d\u3082 runner \u30e6\u30fc\u30b6\u30fc\u306eUID\u304c\u304a\u304b\u3057\u3044\u611f\u3058\u3002 \u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e ansible-runner \u306f\uff1f [zaki@cloud-dev2 ~]$ docker run -it --rm quay.io/ansible/ansible-runner:latest bash bash-4.4# cat /etc/passwd root:x:0:0:root:/root:/bin/bash runner:x:0:0:,,,:/home/runner:/bin/bash bash-4.4# ubuntu@oci-g-a1-ubuntu:~$ docker run -it --rm quay.io/ansible/ansible-runner:latest bash bash-4.4# cat /etc/passwd root:x:0:0:root:/root:/bin/bash runner:x:0:0:,,,:/home/runner:/bin/bash bash-4.4# exit \u3053\u306e\u6642\u70b9\u3067\u306f\u540c\u3058\u6a21\u69d8\u3002 \u3066\u3053\u3068\u306fEE\u306e\u30d3\u30eb\u30c9\u6642\u306b /etc/passwd \u3092\u5909\u66f4\u3059\u308b\u4f55\u304b\u304c\u629c\u3051\u3066\u308b\u306e\u304b\u306a","title":"AWX"},{"location":"Ansible/awx/#awx","text":"","title":"AWX"},{"location":"Ansible/awx/#arm64","text":"arm64\u7248\u306f\u30a4\u30e1\u30fc\u30b8\u304c\u516c\u958b\u3055\u308c\u3066\u306a\u3044\u306e\u3067\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002 2022.02.15\u6642\u70b9\u306e\u5185\u5bb9\u30022.16\u306bAWX 2.0.0\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u3066\u308b\u3002","title":"arm64\u7248\u30d3\u30eb\u30c9"},{"location":"Ansible/awx/#awx-operator","text":"0.16.1 (devel)\u3067\u5b9f\u65bd $ make docker-build IMAGE_TAG_BASE = zakihmkc/awx-operator VERSION =0 .16.1-arm \u3053\u308c\u3067\u30d3\u30eb\u30c9\u3055\u308c\u308b\u30a4\u30e1\u30fc\u30b8\u540d\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 : : Step 5/8 : RUN ansible-galaxy collection install -r ${HOME}/requirements.yml && chmod -R ug+rwx ${HOME}/.ansible ---> Running in bb9cc8cc61ee Process install dependency map Starting collection install process Installing 'kubernetes.core:1.2.1' to '/opt/ansible/.ansible/collections/ansible_collections/kubernetes/core' Installing 'operator_sdk.util:0.2.0' to '/opt/ansible/.ansible/collections/ansible_collections/operator_sdk/util' Removing intermediate container bb9cc8cc61ee ---> 7346f9bc9f4e Step 6/8 : COPY watches.yaml ${HOME}/watches.yaml ---> fdba769a7d2f Step 7/8 : COPY roles/ ${HOME}/roles/ ---> 5326e818c7ed Step 8/8 : COPY playbooks/ ${HOME}/playbooks/ ---> 28538a5f08b7 Successfully built 28538a5f08b7 Successfully tagged zakihmkc/awx-operator:0.16.1-arm $ docker image ls zakihmkc/awx-operator REPOSITORY TAG IMAGE ID CREATED SIZE zakihmkc/awx-operator 0.16.1-arm 28538a5f08b7 45 seconds ago 516MB \u30a4\u30e1\u30fc\u30b8\u304c\u3067\u304d\u305f\u3089 push \u3059\u308b\u3002 $ make docker-push IMG = zakihmkc/awx-operator:0.16.1-arm \u30d3\u30eb\u30c9\u3057\u305f\u30ab\u30b9\u30bf\u30e0\u30a4\u30e1\u30fc\u30b8\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306b\u306f $ make deploy IMG = zakihmkc/awx-operator:0.16.1-arm","title":"awx-operator"},{"location":"Ansible/awx/#awx_1","text":"19.5.1\u3067\u5b9f\u65bd\u3002 Makefile\u3042\u308b\u3051\u3069\u4f7f\u3044\u65b9\u304c\u3088\u304f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u3002 tools/ansible/build.yml\u304c\u3042\u308b\u306e\u3067\u3001\u3053\u3063\u3061\u3067\u30d3\u30eb\u30c9\u3067\u304d\u305f\u3002 $ cd tools/ansible/ $ ansible-playbook build.yml $ docker images ansible/awx REPOSITORY TAG IMAGE ID CREATED SIZE ansible/awx 19.5.2.dev117 5c0f58543bbc 5 minutes ago 696MB \u30d3\u30eb\u30c9\u3067\u304d\u305f\u3089push $ docker tag ansible/awx:19.5.2.dev117 zakihmkc/awx:19.5.2.dev117-arm $ docker push zakihmkc/awx:19.5.2.dev117-arm \u3053\u306e\u72b6\u614b\u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3068\u3001 $ cat awx-demo.yml --- apiVersion: awx.ansible.com/v1beta1 kind: AWX metadata: name: awx-demo spec: service_type: nodeport image: zakihmkc/awx image_version: 19.5.2.dev117-arm $ kubectl apply -f awx-demo.yml -n awx awx.awx.ansible.com/awx-demo created $ kubectl get pod -n awx NAME READY STATUS RESTARTS AGE awx-operator-controller-manager-59584d6d-cfvcw 2/2 Running 0 60m awx-demo-postgres-0 1/1 Running 0 83s awx-demo-64b6ddfbb5-td57c 3/4 Error 3 (30s ago) 73s \u3042\u30fc\u3001\u3001 (awx-build) ubuntu@oci-g-a1-ubuntu:~/src/awx-operator$ kubectl logs -n awx awx-demo-64b6ddfbb5-td57c -c awx-demo-ee standard_init_linux.go:228: exec user process caused: exec format error \u3053\u306e\u30a4\u30e1\u30fc\u30b8\u3082arm\u7248\u5fc5\u8981\u3060\u3063\u305f\u3002 awx-ee\u3082arm\u7248\u3092build&push\u3057\u3066\u2026 $ cat awx-demo.yml --- apiVersion: awx.ansible.com/v1beta1 kind: AWX metadata: name: awx-demo spec: service_type: nodeport image: zakihmkc/awx image_version: 19.5.2.dev117-arm ee_images: - name: awx-demo-ee image: zakihmkc/awx-ee $ kubectl apply -f awx-demo.yml -n awx awx.awx.ansible.com/awx-demo created \u53cd\u6620\u3055\u308c\u306a\u3044\u3002\u3002 ee_images \u306e\u8a2d\u5b9a\u65b9\u6cd5\u308f\u304b\u3089\u305a\u3002\u3002 \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3088\u304f\u898b\u308b\u3068\u3001\u3059\u3050\u8fd1\u304f\u306b control_plane_ee_image \u306b\u3064\u3044\u3066\u66f8\u304b\u308c\u3066\u3044\u308b\u3002 $ cat awx-demo.yml --- apiVersion: awx.ansible.com/v1beta1 kind: AWX metadata: name: awx-demo spec: service_type: nodeport image: zakihmkc/awx image_version: 19.5.2.dev117-arm ee_images: - name: awx-ee-arm64 image: zakihmkc/awx-ee control_plane_ee_image: zakihmkc/awx-ee \u3053\u308c\u3067arm\u7528\u306b\u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3092pull\u3067\u304d\u305f\u3002 \u304c\u2026 $ kubectl logs -n awx awx-demo-5888cdc5cc-dtqtt -c awx-demo-ee /usr/bin/receptor: /usr/bin/receptor: cannot execute binary file \u4e2d\u3067\u4f7f\u3063\u3066\u308b\u5b9f\u884c\u30d0\u30a4\u30ca\u30ea\u304carm\u3058\u3083\u306a\u3044\uff1f $ docker run -it --rm zakihmkc/awx-ee cat /usr/bin/receptor | file - /dev/stdin: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, Go BuildID=dzUF3PWwMDDpxbzJG4PA/ROcMoX3MTms06DLSdROU/2q0gqTdR4VkvLhOjbFwW/_sKtclM7e0bA3VOTpJ50, not stripped \u3042\u3041\u3001\u3001\u306a\u308b\u307b\u3069\u2026 \u30d3\u30eb\u30c9\u30ed\u30b0\u3092\u898b\u8fd4\u3059\u3068\u3001 Step 21/26 : COPY --from=quay.io/ansible/receptor:devel /usr/bin/receptor /usr/bin/receptor devel: Pulling from ansible/receptor \u3063\u3066\u306e\u304c\u51fa\u529b\u3055\u308c\u3066\u305f\u3002(awx-ee)","title":"awx"},{"location":"Ansible/awx/#awx-ee","text":"0.6.0\u3067\u5b9f\u65bd $ pip install tox $ tox -edocker \u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u3002\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u304c\u3053\u308c\u3082amd64\u3057\u304b\u306a\u3044\u3063\u307d\u3044\u3002 Digest: sha256:67164fe74446b5cc40f7ff48d69c2cf5a09d234103982a870e8dd90f0cce4fcf Status: Downloaded newer image for quay.io/ansible/ansible-runner:latest ---> fe0ebe0eae7f Step 4/26 : ARG ANSIBLE_GALAXY_CLI_COLLECTION_OPTS= ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in ddcc58ce4a3e Removing intermediate container ddcc58ce4a3e ---> 29bdd8b42c78 Step 5/26 : USER root ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in ec96ecc53899 Removing intermediate container ec96ecc53899 ---> 047557a18fd9 Step 6/26 : ADD _build /build ---> 4aae6069de8c Step 7/26 : WORKDIR /build ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in 84bc2b6aa898 Removing intermediate container 84bc2b6aa898 ---> 96ca9bbcffce Step 8/26 : RUN ansible-galaxy role install -r requirements.yml --roles-path /usr/share/ansible/roles ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in 52ab0ab8b6c9 standard_init_linux.go:228: exec user process caused: exec format error The command '/bin/sh -c ansible-galaxy role install -r requirements.yml --roles-path /usr/share/ansible/roles' returned a non-zero code: 1 An error occured (rc=1), see output line(s) above for details. ERROR: InvocationError for command /home/ubuntu/src/awx-ee/.tox/docker/bin/ansible-builder build -v3 -c . -t quay.io/ansible/awx-ee --container-runtime=docker (exited with code 1) runner\u3082builder\u3082arm\u7248\u304c\u5fc5\u8981\u3063\u307d\u3044\u306a runner\u3068builder\u3092\u7528\u610f\u3059\u308b\u3068\u30d3\u30eb\u30c9\u6210\u529f\u3002 Removing intermediate container dcdffc16d888 ---> 5b60adcb5b7b Successfully built 5b60adcb5b7b Successfully tagged quay.io/ansible/awx-ee:latest Complete! The build context can be found at: /home/ubuntu/src/awx/awx-ee ______________________________________________________ summary _______________________________________________________ docker: commands succeeded congratulations :) $ docker image ls quay.io/ansible/awx-ee REPOSITORY TAG IMAGE ID CREATED SIZE quay.io/ansible/awx-ee latest 5b60adcb5b7b 5 minutes ago 1.58GB \u3042\u3001\u30a4\u30e1\u30fc\u30b8\u540d\u2026 $ docker tag quay.io/ansible/awx-ee:latest zakihmkc/awx-ee:latest $ docker push zakihmkc/awx-ee:latest","title":"awx-ee"},{"location":"Ansible/awx/#ansible-runner","text":"devel\u30d6\u30e9\u30f3\u30c1\u3067\u5b9f\u65bd $ make image Status: Downloaded newer image for quay.io/ansible/python-builder:latest ---> e86f8912b919 Step 6/21 : ARG ANSIBLE_BRANCH ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in 4efe4c1dbf0d Removing intermediate container 4efe4c1dbf0d ---> b29ee85f97c3 Step 7/21 : ARG ZUUL_SIBLINGS ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in e3770bf07693 Removing intermediate container e3770bf07693 ---> 3bc46246a2c3 Step 8/21 : COPY . /tmp/src ---> 5c8193d3adec Step 9/21 : RUN if [ \"$ANSIBLE_BRANCH\" != \"\" ] ; then echo \"Installing requirements.txt / upper-constraints.txt for Ansible $ANSIBLE_BRANCH\" ; cp /tmp/src/tools/requirements-$ANSIBLE_BRANCH.txt /tmp/src/requirements.txt ; cp /tmp/src/tools/upper-constraints-$ANSIBLE_BRANCH.txt /tmp/src/upper-constraints.txt ; else echo \"Installing requirements.txt\" ; cp /tmp/src/tools/requirements.txt /tmp/src/requirements.txt ; fi && cp /tmp/src/tools/build-requirements.txt /tmp/src/build-requirements.txt && cp /tmp/src/tools/bindep.txt /tmp/src/bindep.txt ---> [Warning] The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested ---> Running in a3b89d0a4b54 standard_init_linux.go:228: exec user process caused: exec format error The command '/bin/sh -c if [ \"$ANSIBLE_BRANCH\" != \"\" ] ; then echo \"Installing requirements.txt / upper-constraints.txt for Ansible $ANSIBLE_BRANCH\" ; cp /tmp/src/tools/requirements-$ANSIBLE_BRANCH.txt /tmp/src/requirements.txt ; cp /tmp/src/tools/upper-constraints-$ANSIBLE_BRANCH.txt /tmp/src/upper-constraints.txt ; else echo \"Installing requirements.txt\" ; cp /tmp/src/tools/requirements.txt /tmp/src/requirements.txt ; fi && cp /tmp/src/tools/build-requirements.txt /tmp/src/build-requirements.txt && cp /tmp/src/tools/bindep.txt /tmp/src/bindep.txt' returned a non-zero code: 1 make: *** [Makefile:95: image] Error 1 \u3053\u308c\u307e\u305f\u30d9\u30fc\u30b9\u3084\u30d3\u30eb\u30c9\u306b\u4f7f\u3046 quay.io/ansible/python-base:latest \u3068 quay.io/ansible/python-builder:latest \u304camd64\u5411\u3051\u3063\u307d\u3044\u3002 \u5f8c\u8ff0\u306e python-base \u3068 python-builder \u3092\u2191\u306e\u30a4\u30e1\u30fc\u30b8\u540d\u3067\u30d3\u30eb\u30c9\u3057\u3066\u518d\u5b9f\u884c\u3059\u308c\u3070OK Step 20/21 : ENTRYPOINT [\"entrypoint\"] ---> Running in efe6471171c6 Removing intermediate container efe6471171c6 ---> 8b899620e92f Step 21/21 : CMD [\"ansible-runner\", \"run\", \"/runner\"] ---> Running in 5486cf162432 Removing intermediate container 5486cf162432 ---> 7db86ada250a Successfully built 7db86ada250a Successfully tagged quay.io/ansible/ansible-runner:latest docker tag quay.io/ansible/ansible-runner quay.io/ansible/ansible-runner:devel","title":"ansible-runner"},{"location":"Ansible/awx/#python-base","text":"main\u30d6\u30e9\u30f3\u30c1\u3067\u5b9f\u65bd ansible/python-base-image: A container image for running python projects \u30d3\u30eb\u30c9\u7528\u306eMakefile\u306e\u985e\u306f\u306a\u306b\u3082\u7121\u3057\u3002 Containerfile \u3042\u308b\u306e\u3067\u3001\u3053\u308c\u3067 docker build \u3057\u305f\u3002 $ docker build -f Containerfile -t quay.io/ansible/python-base . \u3053\u308c\u306f\u3046\u307e\u304f\u884c\u3063\u305f\u3002 : : Step 16/17 : RUN rm -rf $REMOTE_SOURCE_DIR ---> Running in e45372606b30 Removing intermediate container e45372606b30 ---> 1fc6e4db77c4 Step 17/17 : ENTRYPOINT [\"/usr/local/bin/dumb-init\", \"--\"] ---> Running in e711f13da032 Removing intermediate container e711f13da032 ---> 84c14ff10f30 Successfully built 84c14ff10f30 Successfully tagged quay.io/ansible/python-base:latest $ docker image ls quay.io/ansible/python-base REPOSITORY TAG IMAGE ID CREATED SIZE quay.io/ansible/python-base latest 84c14ff10f30 About a minute ago 768MB","title":"python-base"},{"location":"Ansible/awx/#python-builder","text":"main\u30d6\u30e9\u30f3\u30c1\u3067\u5b9f\u65bd ansible/python-builder-image: A container image for building python projects \u3053\u308c\u3082\u7279\u306b\u30d3\u30eb\u30c9\u7528\u306e\u30c4\u30fc\u30eb\u7121\u3057\u3002 $ docker build -f Containerfile -t quay.io/ansible/python-builder:latest . \u3053\u308c\u3082\u3046\u307e\u304f\u3044\u3063\u305f\u3002 : : Step 18/19 : WORKDIR / ---> Running in 561b64ed5ff6 Removing intermediate container 561b64ed5ff6 ---> 756c2f3aab76 Step 19/19 : RUN rm -rf $REMOTE_SOURCE_APP_DIR ---> Running in 0315f4ab8cbc Removing intermediate container 0315f4ab8cbc ---> c832710ee7dd Successfully built c832710ee7dd Successfully tagged quay.io/ansible/python-builder:latest $ docker image ls quay.io/ansible/python-builder REPOSITORY TAG IMAGE ID CREATED SIZE quay.io/ansible/python-builder latest c832710ee7dd 51 seconds ago 854MB $ docker image ls quay.io/ansible/ansible-runner REPOSITORY TAG IMAGE ID CREATED SIZE quay.io/ansible/ansible-runner devel 7db86ada250a About a minute ago 962MB quay.io/ansible/ansible-runner latest 7db86ada250a About a minute ago 962MB","title":"python-builder"},{"location":"Ansible/awx/#ansible-builder","text":"release_1.0\u3067\u5b9f\u65bd ansible/ansible-builder: An Ansible execution environment builder \u3053\u308c\u3082runner\u3068\u540c\u3058\u304f\u3001 Makefile \u306b image \u30bf\u30fc\u30b2\u30c3\u30c8\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u5b9f\u884c\u3002 \u30d3\u30eb\u30c9\u4e2d\u306e\u30ed\u30b0\u3092\u898b\u308b\u3068python-base\u3068python-builder\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u3002 $ make image $ docker image ls quay.io/ansible/ansible-builder REPOSITORY TAG IMAGE ID CREATED SIZE quay.io/ansible/ansible-builder 1.0.0a2-99-g38a0104 e0d5adabb6c3 46 seconds ago 858MB quay.io/ansible/ansible-builder latest e0d5adabb6c3 46 seconds ago 858MB","title":"ansible-builder"},{"location":"Ansible/awx/#receptor","text":"1.0.0a2\u30d6\u30e9\u30f3\u30c1\u3067\u5b9f\u65bd ansible/receptor: Project Receptor is a flexible multi-service relayer with remote execution and orchestration capabilities linking controllers with executors across a mesh of nodes. \u30c7\u30d5\u30a9\u30eb\u30c8\u306f podman \u3092\u4f7f\u3046\u307f\u305f\u3044\u306a\u306e\u3067 docker \u3092\u6307\u5b9a\u3057\u3066\u5b9f\u884c\u3002 $ make container CONTAINERCMD = docker \u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u3002 Exception: Versioning for this project requires either an sdist tarball, or access to an upstream git repository. It's also possible that there is a mismatch between the package name in setup.cfg and the argument given to pbr.version.VersionInfo. Project name receptorctl was given, but was not able to be found. error in setup command: Error parsing /source/receptorctl/setup.cfg: Exception: Versioning for this project requires either an sdist tarball, or access to an upstream git repository. It's also possible that there is a mismatch between the package name in setup.cfg and the argument given to pbr.version.VersionInfo. Project name receptorctl was given, but was not able to be found. make: git: Command not found \u3093\u30fc\u3001devel\u306e\u307e\u307e\u3060\u3063\u305f\u306e\u304c\u60aa\u304b\u3063\u305f\u304b\u306a\u3002 $ git switch release_1.1 Switched to branch 'release_1.1' Your branch is up to date with 'origin/release_1.1'. \u3067\u3082\u3001\u5225\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\u3002\u3088\u304f\u308f\u304b\u3089\u3093\u3002 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u6398\u3063\u305f\u3089 packaging/container/Dockerfile \u304c\u3042\u3063\u305f\u2026\u304c\u3001\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f make \u3067\u30d3\u30eb\u30c9\u3059\u308b\u3068\u304d\u306b\u4f7f\u308f\u308c\u308b\u306e\u3068\u4e00\u7dd2\u3060\u3002\u3002 \u30d3\u30eb\u30c9\u306e\u30ed\u30b0\u3092\u3088\u304f\u307f\u308b\u3068 Step 3/25 : RUN curl -LO https://go.dev/dl/go1.16.13.linux-amd64.tar.gz ---> Using cache ---> b1bf06de576f Step 4/25 : RUN tar -C /usr/local -xzf go1.16.13.linux-amd64.tar.gz ---> Using cache ---> 7b134322bd9b \u307f\u305f\u3044\u306a\u306e\u3042\u3063\u305f\u3002\u3053\u308c\u304b\u3002 \u4ee5\u4e0b\u5909\u66f4 $ git diff diff --git a/packaging/container/Dockerfile b/packaging/container/Dockerfile index ead007a..1fc7416 100644 --- a/packaging/container/Dockerfile +++ b/packaging/container/Dockerfile @@ -2,9 +2,9 @@ FROM quay.io/centos/centos:stream8 as builder RUN dnf -y update && dnf install -y make python3 python3-pip python3-wheel -RUN curl -LO https://go.dev/dl/go1.16.13.linux-amd64.tar.gz +RUN curl -LO https://go.dev/dl/go1.16.13.linux-arm64.tar.gz -RUN tar -C /usr/local -xzf go1.16.13.linux-amd64.tar.gz +RUN tar -C /usr/local -xzf go1.16.13.linux-arm64.tar.gz ADD source.tar.gz /source WORKDIR /source \u3053\u308c\u3067\u30d3\u30eb\u30c9\u3002\u540c\u3058\u30a8\u30e9\u30fc\u306f\u3067\u305f\u304c\u51e6\u7406\u306f\u7d9a\u884c\u3057\u305f\u3002 : : Step 24/25 : ENTRYPOINT [\"/usr/bin/tini\", \"--\"] ---> Running in c19287787c6c Removing intermediate container c19287787c6c ---> d90dae43fbbf Step 25/25 : CMD [\"/usr/bin/receptor\", \"-c\", \"/etc/receptor/receptor.conf\"] ---> Running in e8debaee8c0c Removing intermediate container e8debaee8c0c ---> 376efbc54f61 Successfully built 376efbc54f61 Successfully tagged receptor:latest \u3042\u3001\u30a4\u30e1\u30fc\u30b8\u540d\u2026 $ docker image ls receptor REPOSITORY TAG IMAGE ID CREATED SIZE receptor latest 376efbc54f61 51 seconds ago 777MB \u3068\u308a\u3042\u3048\u305a\u30bb\u30c3\u30c8 $ docker tag receptor:latest quay.io/ansible/receptor:devel","title":"receptor"},{"location":"Ansible/awx/#awx_2","text":"AWX\u3067\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u308b\u3084\u3064\u3002 Traceback (most recent call last): File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/awx/main/tasks/jobs.py\", line 449, in run self.pre_run_hook(self.instance, private_data_dir) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/awx/main/tasks/jobs.py\", line 979, in pre_run_hook RunProjectUpdate.make_local_copy(job.project, private_data_dir, scm_revision=job_revision) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/awx/main/tasks/jobs.py\", line 1380, in make_local_copy source_branch = git_repo.create_head(tmp_branch_name, p.scm_revision) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/git/repo/base.py\", line 386, in create_head return Head.create(self, path, commit, force, logmsg) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/git/refs/symbolic.py\", line 543, in create return cls._create(repo, path, cls._resolve_ref_on_create, reference, force, logmsg) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/git/refs/symbolic.py\", line 510, in _create ref.set_reference(target, logmsg) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/git/refs/symbolic.py\", line 326, in set_reference assure_directory_exists(fpath, is_file=True) File \"/var/lib/awx/venv/awx/lib64/python3.9/site-packages/git/util.py\", line 177, in assure_directory_exists os.makedirs(path, exist_ok=True) File \"/usr/lib64/python3.9/os.py\", line 225, in makedirs mkdir(name, mode) PermissionError: [Errno 13] Permission denied: '/var/lib/awx/projects/_6__demo_project/.git/refs/heads/awx_internal' \u30aa\u30ea\u30b8\u30ca\u30eb\u306eamd64\u7248\u3001Docker\u30a4\u30e1\u30fc\u30b8\u306e\u30e6\u30fc\u30b6\u30fc\u6a29\u9650 [zaki@cloud-dev2 ~]$ docker run -it --rm quay.io/ansible/awx-ee:0.6.0 bash bash-4.4# id uid=0(root) gid=0(root) groups=0(root) bash-4.4# exit [zaki@cloud-dev2 ~]$ docker run -it --rm quay.io/ansible/awx:20.0.0 bash bash-5.1$ id uid=1000 gid=0(root) groups=0(root) bash-5.1$ arm64\u3067\u30d3\u30eb\u30c9\u3057\u305fDocker\u30a4\u30e1\u30fc\u30b8\u306e\u30e6\u30fc\u30b6\u30fc\u6a29\u9650 ubuntu@oci-ap-a1-ubuntu02:~$ docker run -it --rm zakihmkc/awx-ee:0.6.0 bash bash-4.4# id uid=0(root) gid=0(root) groups=0(root) bash-4.4# exit exit ubuntu@oci-ap-a1-ubuntu02:~$ docker run -it --rm zakihmkc/awx:20.0.0 bash bash-5.1$ id uid=1000 gid=0(root) groups=0(root) bash-5.1$ exit exit Docker\u4e0a\u3060\u3068\u540c\u4e00\u3002 \u3058\u3083\u3042k8s\u4e0a\u3060\u3068\u2026 amd64\u7248\u306f\u3053\u308c\u3002 [zaki@cloud-dev2 ~]$ kubectl exec -it -n awx awx-demo-74d8979549-bszp6 -c awx-demo-ee -- bash bash-4.4$ id uid=1000(runner) gid=0(root) groups=0(root) bash-4.4$ exit [zaki@cloud-dev2 ~]$ kubectl exec -it -n awx awx-demo-74d8979549-bszp6 -c awx-demo-task -- bash bash-5.1$ id uid=1000(awx) gid=0(root) groups=0(root) bash-5.1$ exit exit arm64\u7248\u3002 ubuntu@oci-ap-a1-ubuntu02:~$ kubectl exec -n awx -it awx-demo-7847cd4bb-wd4w4 -c awx-demo-ee -- bash bash-4.4# id uid=0(root) gid=0(root) groups=0(root) bash-4.4# exit ubuntu@oci-ap-a1-ubuntu02:~$ kubectl exec -n awx -it awx-demo-7847cd4bb-wd4w4 -c awx-demo-task -- bash bash-5.1$ id uid=1000(awx) gid=0(root) groups=0(root) bash-5.1$ exit ee\u306e\u5b9f\u884c\u6a29\u9650\u304c\u3053\u3053\u3060\u3051 root \u306b\u306a\u3063\u3066\u3044\u308b\u3002 \u5b9f\u884c\u6a29\u9650\u3058\u3083\u306a\u304f\u3066 /etc/passwd \u304b\u3082\u3002 amd64\u306e\u30aa\u30ea\u30b8\u30ca\u30eb\u7248 [zaki@cloud-dev2 ~]$ kubectl exec -it -n awx awx-demo-74d8979549-bszp6 -c awx-demo-ee -- bash bash-4.4$ id uid=1000(runner) gid=0(root) groups=0(root) bash-4.4$ cat /etc/passwd root:x:0:0:root:/root:/bin/bash runner:x:1000:0:,,,:/home/runner:/bin/bash arm64\u5411\u3051\u306b\u30d3\u30eb\u30c9\u3057\u305f\u7248 ubuntu@oci-ap-a1-ubuntu02:~/tmp$ kubectl exec -n awx -it awx-demo-84b4b75d85-9txt2 -c awx-demo-ee -- bash bash-4.4# cat /etc/passwd root:x:0:0:root:/root:/bin/bash runner:x:0:0:,,,:/home/runner:/bin/bash bash-4.4# exit \u305d\u3082\u305d\u3082 runner \u30e6\u30fc\u30b6\u30fc\u306eUID\u304c\u304a\u304b\u3057\u3044\u611f\u3058\u3002 \u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e ansible-runner \u306f\uff1f [zaki@cloud-dev2 ~]$ docker run -it --rm quay.io/ansible/ansible-runner:latest bash bash-4.4# cat /etc/passwd root:x:0:0:root:/root:/bin/bash runner:x:0:0:,,,:/home/runner:/bin/bash bash-4.4# ubuntu@oci-g-a1-ubuntu:~$ docker run -it --rm quay.io/ansible/ansible-runner:latest bash bash-4.4# cat /etc/passwd root:x:0:0:root:/root:/bin/bash runner:x:0:0:,,,:/home/runner:/bin/bash bash-4.4# exit \u3053\u306e\u6642\u70b9\u3067\u306f\u540c\u3058\u6a21\u69d8\u3002 \u3066\u3053\u3068\u306fEE\u306e\u30d3\u30eb\u30c9\u6642\u306b /etc/passwd \u3092\u5909\u66f4\u3059\u308b\u4f55\u304b\u304c\u629c\u3051\u3066\u308b\u306e\u304b\u306a","title":"AWX\u3067\u30b8\u30e7\u30d6\u304c\u5b9f\u884c\u3067\u304d\u306a\u3044\u4ef6(\u8abf\u67fb\u4e2d)"},{"location":"Ansible/builder/","text":"Ansible Builder ansible-builder \u30bf\u30b0\u6307\u5b9a $ ansible-builder build -t net-ee:latest Running command: podman build -f context/Containerfile -t net-ee:latest context Complete! The build context can be found at: /home/zaki/local/ansible-builder/net-runner/context image-name:tag \u306e\u307f\u3060\u3068\u3001 localhost/ \u304c\u81ea\u52d5\u3067\u4ed8\u4e0e\u3055\u308c\u308b\u3002 $ podman image ls | grep net localhost/net-ee latest 119f99382b23 7 minutes ago 819 MB repository-name/image-name:tag \u3092\u6307\u5b9a\u3059\u308b\u3068\u2026 $ ansible-builder build -t zakihmkc/net-ee:latest Running command: podman build -f context/Containerfile -t zakihmkc/net-ee:latest context Complete! The build context can be found at: /home/zaki/local/ansible-builder/net-runner/context $ podman image ls | grep zakihmkc localhost/zakihmkc/net-ee latest 119f99382b23 9 minutes ago 819 MB \u305d\u308c\u3067\u3082 localhost/ \u304c\u4ed8\u4e0e\u3055\u308c\u305f\u3002 \u30ec\u30b8\u30b9\u30c8\u30eaURL\u3092\u4ed8\u4e0e\u3059\u308b\u3068\u3001 $ ansible-builder build -t docker.io/zakihmkc/net-ee:latest Running command: podman build -f context/Containerfile -t docker.io/zakihmkc/net-ee:latest context Complete! The build context can be found at: /home/zaki/local/ansible-builder/net-runner/context $ podman image ls | grep docker docker.io/zakihmkc/net-ee latest 119f99382b23 13 minutes ago 819 MB \u30ec\u30b8\u30b9\u30c8\u30ea\u306eURL\u3092\u7701\u7565\u3059\u308b\u3068 localhost \u304c\u4ed8\u4e0e\u3055\u308c\u308b\u307f\u305f\u3044\u306d\u3002","title":"Ansible Builder"},{"location":"Ansible/builder/#ansible-builder","text":"","title":"Ansible Builder"},{"location":"Ansible/builder/#ansible-builder_1","text":"","title":"ansible-builder"},{"location":"Ansible/builder/#_1","text":"$ ansible-builder build -t net-ee:latest Running command: podman build -f context/Containerfile -t net-ee:latest context Complete! The build context can be found at: /home/zaki/local/ansible-builder/net-runner/context image-name:tag \u306e\u307f\u3060\u3068\u3001 localhost/ \u304c\u81ea\u52d5\u3067\u4ed8\u4e0e\u3055\u308c\u308b\u3002 $ podman image ls | grep net localhost/net-ee latest 119f99382b23 7 minutes ago 819 MB repository-name/image-name:tag \u3092\u6307\u5b9a\u3059\u308b\u3068\u2026 $ ansible-builder build -t zakihmkc/net-ee:latest Running command: podman build -f context/Containerfile -t zakihmkc/net-ee:latest context Complete! The build context can be found at: /home/zaki/local/ansible-builder/net-runner/context $ podman image ls | grep zakihmkc localhost/zakihmkc/net-ee latest 119f99382b23 9 minutes ago 819 MB \u305d\u308c\u3067\u3082 localhost/ \u304c\u4ed8\u4e0e\u3055\u308c\u305f\u3002 \u30ec\u30b8\u30b9\u30c8\u30eaURL\u3092\u4ed8\u4e0e\u3059\u308b\u3068\u3001 $ ansible-builder build -t docker.io/zakihmkc/net-ee:latest Running command: podman build -f context/Containerfile -t docker.io/zakihmkc/net-ee:latest context Complete! The build context can be found at: /home/zaki/local/ansible-builder/net-runner/context $ podman image ls | grep docker docker.io/zakihmkc/net-ee latest 119f99382b23 13 minutes ago 819 MB \u30ec\u30b8\u30b9\u30c8\u30ea\u306eURL\u3092\u7701\u7565\u3059\u308b\u3068 localhost \u304c\u4ed8\u4e0e\u3055\u308c\u308b\u307f\u305f\u3044\u306d\u3002","title":"\u30bf\u30b0\u6307\u5b9a"},{"location":"Ansible/config/","text":"\u8a2d\u5b9a Ansible Configuration Settings \u2014 Ansible Documentation \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u512a\u5148\u9806\u4f4d ANSIBLE_CONFIG \u74b0\u5883\u5909\u6570 ansible.cfg (\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea) ~/.ansible.cfg /etc/ansible/ansible.cfg \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u66f8\u5f0f ansible.cfg \u30b5\u30f3\u30d7\u30eb [defaults] stdout_callback = yaml \u8a2d\u5b9a\u30ad\u30fc \u63a5\u7d9a\u30e6\u30fc\u30b6\u30fc\u540d \u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u540d \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3 -u ( --user ) \u5909\u6570 ansible_user SSH\u79d8\u5bc6\u9375 \u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u540d \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3 --private-key \u74b0\u5883\u5909\u6570 ANSIBLE_PRIVATE_KEY_FILE \u5909\u6570 ansible_private_key_file Python\u30a4\u30f3\u30bf\u30d7\u30ea\u30bf\u30d1\u30b9 \u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u30ad\u30fc ansible.cfg interpreter_python ([defaults]section) \u74b0\u5883\u5909\u6570 ANSIBLE_PYTHON_INTERPRETER \u5909\u6570 ansible_python_interpreter \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u30d7\u30e9\u30b0\u30a4\u30f3 \u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u30ad\u30fc ansible.cfg stdout_callback ([defaults]section) \u74b0\u5883\u5909\u6570 ANSIBLE_STDOUT_CALLBACK \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d1\u30b9(2.10\uff5e) \u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u30ad\u30fc ansible.cfg collections_path ([defaults]section) \u74b0\u5883\u5909\u6570 ANSIBLE_COLLECTIONS_PATH \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d1\u30b9(\u65e7) \u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u30ad\u30fc ansible.cfg collections_paths ([defaults]section) \u74b0\u5883\u5909\u6570 ANSIBLE_COLLECTIONS_PATHS \u5b9f\u884c\u5f8c\u306bAnsiballZ\u30d5\u30a1\u30a4\u30eb\u3092\u6d88\u3055\u306a\u3044 \u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u30ad\u30fc \u74b0\u5883\u5909\u6570 ANSIBLE_KEEP_REMOTE_FILES ANSIBLE_KEEP_REMOTE_FILES=true \u3092\u30bb\u30c3\u30c8\u3057\u3066\u5b9f\u884c\u3059\u308b $ ANSIBLE_KEEP_REMOTE_FILES = true ansible-playbook -i inventory.ini playbook.yml -v ... \u3053\u308c\u3067\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u4e0a\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u308b\u3002 \u57fa\u672c\u7684\u306b\u6d88\u3048\u306a\u3044\u306e\u3067\u624b\u52d5\u3067\u6d88\u3059\u5fc5\u8981\u3042\u308a\u3002 \u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306e\u3069\u3053\u306b\u8ee2\u9001\u3055\u308c\u308b\u304b\u306f\u3001-vvv\u304f\u3089\u3044\u307e\u3067verbose\u30ec\u30d9\u30eb\u3092\u4e0a\u3052\u3066\u304a\u3051\u3070\u5b9f\u884c\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u3002","title":"\u8a2d\u5b9a"},{"location":"Ansible/config/#_1","text":"Ansible Configuration Settings \u2014 Ansible Documentation","title":"\u8a2d\u5b9a"},{"location":"Ansible/config/#_2","text":"ANSIBLE_CONFIG \u74b0\u5883\u5909\u6570 ansible.cfg (\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea) ~/.ansible.cfg /etc/ansible/ansible.cfg","title":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u512a\u5148\u9806\u4f4d"},{"location":"Ansible/config/#_3","text":"ansible.cfg \u30b5\u30f3\u30d7\u30eb [defaults] stdout_callback = yaml","title":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u66f8\u5f0f"},{"location":"Ansible/config/#_4","text":"","title":"\u8a2d\u5b9a\u30ad\u30fc"},{"location":"Ansible/config/#_5","text":"\u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u540d \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3 -u ( --user ) \u5909\u6570 ansible_user","title":"\u63a5\u7d9a\u30e6\u30fc\u30b6\u30fc\u540d"},{"location":"Ansible/config/#ssh","text":"\u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u540d \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3 --private-key \u74b0\u5883\u5909\u6570 ANSIBLE_PRIVATE_KEY_FILE \u5909\u6570 ansible_private_key_file","title":"SSH\u79d8\u5bc6\u9375"},{"location":"Ansible/config/#python","text":"\u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u30ad\u30fc ansible.cfg interpreter_python ([defaults]section) \u74b0\u5883\u5909\u6570 ANSIBLE_PYTHON_INTERPRETER \u5909\u6570 ansible_python_interpreter","title":"Python\u30a4\u30f3\u30bf\u30d7\u30ea\u30bf\u30d1\u30b9"},{"location":"Ansible/config/#_6","text":"\u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u30ad\u30fc ansible.cfg stdout_callback ([defaults]section) \u74b0\u5883\u5909\u6570 ANSIBLE_STDOUT_CALLBACK","title":"\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u30d7\u30e9\u30b0\u30a4\u30f3"},{"location":"Ansible/config/#210","text":"\u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u30ad\u30fc ansible.cfg collections_path ([defaults]section) \u74b0\u5883\u5909\u6570 ANSIBLE_COLLECTIONS_PATH","title":"\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d1\u30b9(2.10\uff5e)"},{"location":"Ansible/config/#_7","text":"\u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u30ad\u30fc ansible.cfg collections_paths ([defaults]section) \u74b0\u5883\u5909\u6570 ANSIBLE_COLLECTIONS_PATHS","title":"\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d1\u30b9(\u65e7)"},{"location":"Ansible/config/#ansiballz","text":"\u8a2d\u5b9a\u5834\u6240 \u8a2d\u5b9a\u30ad\u30fc \u74b0\u5883\u5909\u6570 ANSIBLE_KEEP_REMOTE_FILES ANSIBLE_KEEP_REMOTE_FILES=true \u3092\u30bb\u30c3\u30c8\u3057\u3066\u5b9f\u884c\u3059\u308b $ ANSIBLE_KEEP_REMOTE_FILES = true ansible-playbook -i inventory.ini playbook.yml -v ... \u3053\u308c\u3067\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u4e0a\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u308b\u3002 \u57fa\u672c\u7684\u306b\u6d88\u3048\u306a\u3044\u306e\u3067\u624b\u52d5\u3067\u6d88\u3059\u5fc5\u8981\u3042\u308a\u3002 \u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306e\u3069\u3053\u306b\u8ee2\u9001\u3055\u308c\u308b\u304b\u306f\u3001-vvv\u304f\u3089\u3044\u307e\u3067verbose\u30ec\u30d9\u30eb\u3092\u4e0a\u3052\u3066\u304a\u3051\u3070\u5b9f\u884c\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u3002","title":"\u5b9f\u884c\u5f8c\u306bAnsiballZ\u30d5\u30a1\u30a4\u30eb\u3092\u6d88\u3055\u306a\u3044"},{"location":"Ansible/directives/","text":"\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6 Playbook Keywords \u2014 Ansible Documentation \u30eb\u30fc\u30d7 \u30eb\u30fc\u30d7\u3068block\u306f\u4f75\u7528\u4e0d\u53ef tasks : - name : block with loop loop : \"{{ item_list }}\" block : : \u3053\u3046\u3044\u3046\u306e\u306f\u7121\u7406 ERROR! 'loop' is not a valid attribute for a Block Blocks \u2014 Ansible Documentation Most of what you can apply to a single task (with the exception of loops) can be applied at the block level, so blocks make it much easier to set data or directives common to the tasks. \u30eb\u30fc\u30d7\u3068register\u306e\u4f75\u7528 [Ansible] loop\u3068\u30e2\u30b8\u30e5\u30fc\u30eb\u5b9f\u884c\u306e\u7d50\u679c\u3092\u4fdd\u6301\u3059\u308bregister\u3092\u4f75\u7528\u3059\u308b - zaki work log Registering variables with a loop - name : exec command ansible.builtin.command : \"{{ item }}\" loop : - hostname - pwd - ls /opt register : result_command - name : print result debug : msg : '{{ result_command }}' \u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002 ok : [ localhost ] => msg: changed : true msg : All items completed results : - ansible_loop_var : item changed : true cmd : - hostname delta : '0:00:00.001672' end : '2021-04-06 18:54:28.461799' failed : false invocation : module_args : ... item : hostname rc : 0 start : '2021-04-06 18:54:28.460127' stderr : '' stderr_lines : [] stdout : cloud-dev stdout_lines : - cloud-dev - ansible_loop_var : item changed : true cmd : - pwd delta : '0:00:00.001590' end : '2021-04-06 18:54:28.630725' failed : false invocation : module_args : ... item : pwd rc : 0 start : '2021-04-06 18:54:28.629135' stderr : '' stderr_lines : [] stdout : /home/zaki/src/ansible-sample/file stdout_lines : - /home/zaki/src/ansible-sample/file - ansible_loop_var : item changed : true cmd : - ls - /opt delta : '0:00:00.001935' end : '2021-04-06 18:54:28.798976' failed : false invocation : module_args : ... item : ls /opt rc : 0 start : '2021-04-06 18:54:28.797041' stderr : '' stderr_lines : [] stdout : |- cni containerd stdout_lines : - cni - containerd \u8981\u306f\u3001 ${register\u3067\u6307\u5b9a\u3057\u305f\u5909\u6570\u540d}.results[...] \u3068\u3044\u3046\u914d\u5217\u306b\u306a\u308b\u3002 \u30eb\u30fc\u30d7\u5909\u6570\u306e\u30ab\u30b9\u30bf\u30e0 loop_control.loop_var \u3067\u6307\u5b9a\u3067\u304d\u308b\u3002 - name : loop debug : msg : \"{{ zzz }}\" loop : - foo - bar - baz - qux loop_control : loop_var : zzz {{ item }} \u306f\u4f7f\u7528\u4e0d\u53ef\u3068\u306a\u308b\u3002 \u30eb\u30fc\u30d7\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u53c2\u7167 \u30bf\u30b9\u30af\u5185\u3067\u30eb\u30fc\u30d7\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u53c2\u7167\u3057\u305f\u3044\u5834\u5408\u306f\u3001 extended: true \u3092\u4ed8\u52a0\u3059\u308c\u3070\u53c2\u7167\u3067\u304d\u308b\u3002 - name : loop index sample debug : msg : - \"{{ item }}\" - \"{{ ansible_loop.index }}\" - \"{{ ansible_loop.index0 }}\" loop : - foo - bar - baz loop_control : extended : true \u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 ok: [localhost] => (item=foo) => msg: - foo - '1' - '0' ok: [localhost] => (item=bar) => msg: - bar - '2' - '1' ok: [localhost] => (item=baz) => msg: - baz - '3' - '2' \u4f7f\u7528\u53ef\u80fd\u306a\u5909\u6570\u306f\u3053\u3061\u3089\u2192 Extended loop variables \u30eb\u30fc\u30d7\u3068include\u4f75\u7528\u6642\u306b\u30eb\u30fc\u30d7\u306b\u95a2\u4fc2\u306a\u3044\u30bf\u30b9\u30af\u30921\u56de\u3060\u3051\u5b9f\u884c\u3059\u308b\u3053\u3068\u306f\u2026 run_once \u4f7f\u3063\u3066\u51fa\u6765\u306a\u3044\u304b\u8a66\u3057\u305f\u3051\u3069\u4e88\u60f3\u901a\u308a\u7121\u52b9\u3002 \u305f\u3076\u3093\u7121\u7406\u306a\u306e\u3067\u3001\u305d\u3046\u3044\u3046\u30bf\u30b9\u30af\u306f\u30eb\u30fc\u30d7\u306e\u5916\u3067\u5b9f\u88c5\u3057\u307e\u3057\u3087\u3046\u3002 - name : include with loop include_tasks : dup-loop-included.yml loop : \"{{ users }}\" - name : 1\u56de\u3060\u3051\u5b9f\u884c\u3057\u305f\u3044\u30bf\u30b9\u30af debug : msg : zzz run_once : true \u3053\u306e\u30bf\u30b9\u30af\u306f users \u306e\u8981\u7d20\u306e\u30eb\u30fc\u30d7\u3054\u3068\u306b\u5f53\u7136\u6bce\u56de\u5b9f\u884c\u3055\u308c\u308b\u3002 \u30eb\u30fc\u30d7\u5185\u3067\u6bce\u56de\u5b9f\u884c\u3055\u308c\u308b\u5fc5\u8981\u304c\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001include\u306e\u5916\u3067\u5b9f\u884c\u3057\u307e\u3057\u3087\u3046\u3002 when \u6761\u4ef6\u304cint\u578b tasks : - name : len bool debug : loop : - 1 - 0 - -1 when : item 0 \u306e\u5834\u5408\u306fskip\u3002 1 , -1 \u306f\u51e6\u7406\u5bfe\u8c61\u3002 ansible-core 2.11.3\u3067\u78ba\u8a8d \u6761\u4ef6\u304cstring\u578b - name : str debug : loop : - \"a\" - \"\" when : item \"\" \u306e\u5834\u5408\u306fskip\u3002 \"a\" \u306e\u5834\u5408\u306f\u51e6\u7406\u3055\u308c\u308b\u3002 ansible-core 2.11.3\u3067\u78ba\u8a8d / 2.9\u3060\u3068\u69cb\u6587\u30a8\u30e9\u30fc(\u6587\u5b57\u5217\u306e\u307f\u306e\u5224\u5b9a\u306f\u3067\u304d\u306a\u3044\u3063\u307d\u3044\uff1f\u4f55\u304b\u3068\u6bd4\u8f03\u3059\u308b\u306a\u3069\u8a55\u4fa1\u3059\u308c\u3070\u3082\u3061\u308d\u3093OK) \u30ea\u30b9\u30c8\u3067\u8907\u6570\u6761\u4ef6 when \u306b\u306f\u30ea\u30b9\u30c8\u5f62\u5f0f\u3067\u6761\u4ef6\u3092\u8907\u6570\u6307\u5b9a\u3067\u304d\u308b\u3002\u30ea\u30b9\u30c8\u306e\u5834\u5408\u306f\u300c\u3059\u3079\u3066\u306e\u6761\u4ef6\u304ctrue\u306e\u5834\u5408\u300d\u306b\u30bf\u30b9\u30af\u306f\u5b9f\u884c\u3002 --- - hosts : localhost gather_facts : false vars : cond1 : true cond2 : false tasks : - debug : msg : \"hello\" when : - cond1 - cond2 \u3053\u306e\u5834\u5408\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u308b\u3002 or\u3067\u8907\u6570\u6761\u4ef6 \u30ea\u30b9\u30c8\u5f62\u5f0f\u306fand\u306b\u306a\u308b\u305f\u3081\u3001 or \u3067\u6761\u4ef6\u3092\u7f85\u5217\u3057\u3066\u4e00\u3064\u306e\u6761\u4ef6\u5f0f\u3068\u3057\u3066\u8a18\u8ff0\u3059\u308b\u3002 when : cond == \"foobar\" or cond == \"bazqux\" \u5b9a\u7fa9\u3055\u308c\u3066\u308b\u5834\u5408/\u3055\u308c\u3066\u306a\u3044\u5834\u5408 foobar_value \u304c\u672a\u5b9a\u7fa9\u306e\u5834\u5408\u306b\u30bf\u30b9\u30af\u5b9f\u884c\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u3002 when : foobar_value is not defined include\u3068import Re-using Ansible artifacts \u2014 Ansible Documentation include \u304a\u3088\u3073 import \u2014 Ansible Documentation OSS\u306f\u30a2\u30eb\u30df\u30cb\u30a6\u30e0\u306e\u7ffc\u3067\u98db\u3076: Ansible: include \u306e\u4ee3\u308f\u308a\u306b\u4f7f\u3046 import_xxx, include_yyy \u3068\u306f \u3068\u308a\u3042\u3048\u305a\u30ea\u30f3\u30af check mode ansible-playbook \u5b9f\u884c\u6642\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067 --check \u4ed8\u4e0e\u3067dry run\u306b\u306a\u308b\u304c\u3001 check_mode \u3092\u4f7f\u3046\u3053\u3068\u3067\u30bf\u30b9\u30af\u5358\u4f4d\u3067\u5f37\u5236\u7684\u306b\u30c1\u30a7\u30c3\u30af\u30e2\u30fc\u30c9\u306eon/off\u304c\u3067\u304d\u308b\u3002 - name : command sample copy : src : /home/zaki/tmp.yml dest : /var/tmp mode : '0644' register : result check_mode : false \u3053\u306e\u30d1\u30e9\u30e1\u30bf\u3092 true \u306b\u3059\u308b\u3068\u3001 --check \u3092\u4ed8\u3051\u306a\u304f\u3066\u3082\u30c1\u30a7\u30c3\u30af\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3059\u308b\u3002 false \u306b\u3059\u308b\u3068\u3001 --check \u3067\u52d5\u304b\u3057\u3066\u3082\u30c1\u30a7\u30c3\u30af\u30e2\u30fc\u30c9\u3067\u306a\u304f\u5b9f\u51e6\u7406\u304c\u884c\u308f\u308c\u308b\u3002 --check \u306b\u3064\u3044\u3066\u306f playbook \u53c2\u7167\u3002 \u3061\u306a\u307f\u306b\u3001\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e always_run \u3068\u6a5f\u80fd\u7684\u306b\u306f\u540c\u3058(\u5024\u306f\u9006) Note Prior to version 2.2 only the equivalent of check_mode: no existed. The notation for that was always_run: yes . https://docs.ansible.com/ansible/2.9/user_guide/playbooks_checkmode.html#enabling-or-disabling-check-mode-for-tasks changed_when \u6761\u4ef6\u304ctrue\u306e\u5834\u5408\u306f\u30bf\u30b9\u30af\u306e\u7d50\u679c\u306b\u95a2\u4fc2\u306a\u304f changed \u5224\u5b9a\u306b\u3059\u308b\u3002\u9006\u306bfalse\u306e\u5834\u5408\u306f ok \u5224\u5b9a\u306b\u3059\u308b\u3002 \u30bf\u30b9\u30af\u306e\u7d50\u679c\u3092 register \u3067\u4fdd\u6301\u3057\u3001\u305d\u306e\u5185\u5bb9\u3092\u6761\u4ef6\u5f0f\u306b\u7d44\u307f\u8fbc\u3080\u306e\u3082OK - name : command always run and no change ansible.builtin.shell : cmd : hogehoge changed_when : exec_result.stdout != '' register : exec_result hogehoge \u306e\u5b9f\u884c\u7d50\u679c\u3067\u6a19\u6e96\u51fa\u529b\u304c\u4f55\u3082\u7121\u3044\u5834\u5408\u306f changed \u306b\u306a\u308b\u3002 until [Ansible] until\u3092\u4f7f\u3063\u3066\u975e\u540c\u671f\u51e6\u7406\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u6b21\u306etask\u3092\u5f85\u3064 - zaki work log \u4f7f\u7528\u4f8b - name : install flannel shell : kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/2140ac876ef134e0ed5af15c65e414cf26827915/Documentation/kube-flannel.yml # todo: apply\u306e\u51e6\u7406\u304cunchanged\u306e\u5834\u5408\u3082\u3001ansible\u3067\u306fchanged\u6271\u3044\u306b\u306a\u3063\u3066\u3044\u308b - name : wait for Node-Ready shell : kubectl get node --no-headers | awk '{print $2}' register : node_state until : node_state.stdout == \"Ready\" retries : 10 delay : 5 changed_when : false # \u5f85\u3064\u3060\u3051\u306a\u306e\u3067\u5f37\u5236no changed initialize-kubeadm-ansible/deploy_cni.yaml at e48d1a86ef9f4d94853c18246708490f842b8058 \u00b7 zaki-lknr/initialize-kubeadm-ansible include_tasks\u3068\u306f\u4f75\u7528\u4e0d\u53ef\uff1f \u624b\u5143\u306e2.10.5\u3067\u3059\u3063\u3054\u304f\u96d1\u306b\u78ba\u8a8d\u3057\u305f\u9650\u308a\u3060\u3068\u3001import_tasks\u306f when: \u6709\u52b9 loop: \u300cloop\u3057\u305f\u3051\u308c\u3070include\u4f7f\u3048\u300d\u3068\u30a8\u30e9\u30fc register: \u7121\u8996\u3055\u308c\u308b until: \u7121\u8996\u3055\u308c\u308b \u3063\u3066\u611f\u3058\u3067\u3057\u305f\u3002 include_tasks\u306b\u3060\u3068loop\u3068register\u306f\u4f7f\u3048\u307e\u3057\u305f\u304c\u3001until\u306fnot valid attribute error\u3067\u3084\u3063\u3071\u308a\u30c0\u30e1\u3063\u307d\u3044\u2026 pic.twitter.com/9CNihs7tvh \u2014 z a k i \ud83c\udf08 (@zaki_hmkc) February 18, 2021 async + poll [Ansible] async\u3068poll\u3092\u4f7f\u3063\u305f\u975e\u540c\u671f\u51e6\u7406\u3068\u30eb\u30fc\u30d7\u306e\u4e26\u5217\u5b9f\u884c - zaki work log","title":"\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6"},{"location":"Ansible/directives/#_1","text":"Playbook Keywords \u2014 Ansible Documentation","title":"\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6"},{"location":"Ansible/directives/#_2","text":"","title":"\u30eb\u30fc\u30d7"},{"location":"Ansible/directives/#block","text":"tasks : - name : block with loop loop : \"{{ item_list }}\" block : : \u3053\u3046\u3044\u3046\u306e\u306f\u7121\u7406 ERROR! 'loop' is not a valid attribute for a Block Blocks \u2014 Ansible Documentation Most of what you can apply to a single task (with the exception of loops) can be applied at the block level, so blocks make it much easier to set data or directives common to the tasks.","title":"\u30eb\u30fc\u30d7\u3068block\u306f\u4f75\u7528\u4e0d\u53ef"},{"location":"Ansible/directives/#register","text":"[Ansible] loop\u3068\u30e2\u30b8\u30e5\u30fc\u30eb\u5b9f\u884c\u306e\u7d50\u679c\u3092\u4fdd\u6301\u3059\u308bregister\u3092\u4f75\u7528\u3059\u308b - zaki work log Registering variables with a loop - name : exec command ansible.builtin.command : \"{{ item }}\" loop : - hostname - pwd - ls /opt register : result_command - name : print result debug : msg : '{{ result_command }}' \u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002 ok : [ localhost ] => msg: changed : true msg : All items completed results : - ansible_loop_var : item changed : true cmd : - hostname delta : '0:00:00.001672' end : '2021-04-06 18:54:28.461799' failed : false invocation : module_args : ... item : hostname rc : 0 start : '2021-04-06 18:54:28.460127' stderr : '' stderr_lines : [] stdout : cloud-dev stdout_lines : - cloud-dev - ansible_loop_var : item changed : true cmd : - pwd delta : '0:00:00.001590' end : '2021-04-06 18:54:28.630725' failed : false invocation : module_args : ... item : pwd rc : 0 start : '2021-04-06 18:54:28.629135' stderr : '' stderr_lines : [] stdout : /home/zaki/src/ansible-sample/file stdout_lines : - /home/zaki/src/ansible-sample/file - ansible_loop_var : item changed : true cmd : - ls - /opt delta : '0:00:00.001935' end : '2021-04-06 18:54:28.798976' failed : false invocation : module_args : ... item : ls /opt rc : 0 start : '2021-04-06 18:54:28.797041' stderr : '' stderr_lines : [] stdout : |- cni containerd stdout_lines : - cni - containerd \u8981\u306f\u3001 ${register\u3067\u6307\u5b9a\u3057\u305f\u5909\u6570\u540d}.results[...] \u3068\u3044\u3046\u914d\u5217\u306b\u306a\u308b\u3002","title":"\u30eb\u30fc\u30d7\u3068register\u306e\u4f75\u7528"},{"location":"Ansible/directives/#_3","text":"loop_control.loop_var \u3067\u6307\u5b9a\u3067\u304d\u308b\u3002 - name : loop debug : msg : \"{{ zzz }}\" loop : - foo - bar - baz - qux loop_control : loop_var : zzz {{ item }} \u306f\u4f7f\u7528\u4e0d\u53ef\u3068\u306a\u308b\u3002","title":"\u30eb\u30fc\u30d7\u5909\u6570\u306e\u30ab\u30b9\u30bf\u30e0"},{"location":"Ansible/directives/#_4","text":"\u30bf\u30b9\u30af\u5185\u3067\u30eb\u30fc\u30d7\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u53c2\u7167\u3057\u305f\u3044\u5834\u5408\u306f\u3001 extended: true \u3092\u4ed8\u52a0\u3059\u308c\u3070\u53c2\u7167\u3067\u304d\u308b\u3002 - name : loop index sample debug : msg : - \"{{ item }}\" - \"{{ ansible_loop.index }}\" - \"{{ ansible_loop.index0 }}\" loop : - foo - bar - baz loop_control : extended : true \u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 ok: [localhost] => (item=foo) => msg: - foo - '1' - '0' ok: [localhost] => (item=bar) => msg: - bar - '2' - '1' ok: [localhost] => (item=baz) => msg: - baz - '3' - '2' \u4f7f\u7528\u53ef\u80fd\u306a\u5909\u6570\u306f\u3053\u3061\u3089\u2192 Extended loop variables","title":"\u30eb\u30fc\u30d7\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u53c2\u7167"},{"location":"Ansible/directives/#include1","text":"run_once \u4f7f\u3063\u3066\u51fa\u6765\u306a\u3044\u304b\u8a66\u3057\u305f\u3051\u3069\u4e88\u60f3\u901a\u308a\u7121\u52b9\u3002 \u305f\u3076\u3093\u7121\u7406\u306a\u306e\u3067\u3001\u305d\u3046\u3044\u3046\u30bf\u30b9\u30af\u306f\u30eb\u30fc\u30d7\u306e\u5916\u3067\u5b9f\u88c5\u3057\u307e\u3057\u3087\u3046\u3002 - name : include with loop include_tasks : dup-loop-included.yml loop : \"{{ users }}\" - name : 1\u56de\u3060\u3051\u5b9f\u884c\u3057\u305f\u3044\u30bf\u30b9\u30af debug : msg : zzz run_once : true \u3053\u306e\u30bf\u30b9\u30af\u306f users \u306e\u8981\u7d20\u306e\u30eb\u30fc\u30d7\u3054\u3068\u306b\u5f53\u7136\u6bce\u56de\u5b9f\u884c\u3055\u308c\u308b\u3002 \u30eb\u30fc\u30d7\u5185\u3067\u6bce\u56de\u5b9f\u884c\u3055\u308c\u308b\u5fc5\u8981\u304c\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001include\u306e\u5916\u3067\u5b9f\u884c\u3057\u307e\u3057\u3087\u3046\u3002","title":"\u30eb\u30fc\u30d7\u3068include\u4f75\u7528\u6642\u306b\u30eb\u30fc\u30d7\u306b\u95a2\u4fc2\u306a\u3044\u30bf\u30b9\u30af\u30921\u56de\u3060\u3051\u5b9f\u884c\u3059\u308b\u3053\u3068\u306f\u2026"},{"location":"Ansible/directives/#when","text":"","title":"when"},{"location":"Ansible/directives/#int","text":"tasks : - name : len bool debug : loop : - 1 - 0 - -1 when : item 0 \u306e\u5834\u5408\u306fskip\u3002 1 , -1 \u306f\u51e6\u7406\u5bfe\u8c61\u3002 ansible-core 2.11.3\u3067\u78ba\u8a8d","title":"\u6761\u4ef6\u304cint\u578b"},{"location":"Ansible/directives/#string","text":"- name : str debug : loop : - \"a\" - \"\" when : item \"\" \u306e\u5834\u5408\u306fskip\u3002 \"a\" \u306e\u5834\u5408\u306f\u51e6\u7406\u3055\u308c\u308b\u3002 ansible-core 2.11.3\u3067\u78ba\u8a8d / 2.9\u3060\u3068\u69cb\u6587\u30a8\u30e9\u30fc(\u6587\u5b57\u5217\u306e\u307f\u306e\u5224\u5b9a\u306f\u3067\u304d\u306a\u3044\u3063\u307d\u3044\uff1f\u4f55\u304b\u3068\u6bd4\u8f03\u3059\u308b\u306a\u3069\u8a55\u4fa1\u3059\u308c\u3070\u3082\u3061\u308d\u3093OK)","title":"\u6761\u4ef6\u304cstring\u578b"},{"location":"Ansible/directives/#_5","text":"when \u306b\u306f\u30ea\u30b9\u30c8\u5f62\u5f0f\u3067\u6761\u4ef6\u3092\u8907\u6570\u6307\u5b9a\u3067\u304d\u308b\u3002\u30ea\u30b9\u30c8\u306e\u5834\u5408\u306f\u300c\u3059\u3079\u3066\u306e\u6761\u4ef6\u304ctrue\u306e\u5834\u5408\u300d\u306b\u30bf\u30b9\u30af\u306f\u5b9f\u884c\u3002 --- - hosts : localhost gather_facts : false vars : cond1 : true cond2 : false tasks : - debug : msg : \"hello\" when : - cond1 - cond2 \u3053\u306e\u5834\u5408\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u308b\u3002","title":"\u30ea\u30b9\u30c8\u3067\u8907\u6570\u6761\u4ef6"},{"location":"Ansible/directives/#or","text":"\u30ea\u30b9\u30c8\u5f62\u5f0f\u306fand\u306b\u306a\u308b\u305f\u3081\u3001 or \u3067\u6761\u4ef6\u3092\u7f85\u5217\u3057\u3066\u4e00\u3064\u306e\u6761\u4ef6\u5f0f\u3068\u3057\u3066\u8a18\u8ff0\u3059\u308b\u3002 when : cond == \"foobar\" or cond == \"bazqux\"","title":"or\u3067\u8907\u6570\u6761\u4ef6"},{"location":"Ansible/directives/#_6","text":"foobar_value \u304c\u672a\u5b9a\u7fa9\u306e\u5834\u5408\u306b\u30bf\u30b9\u30af\u5b9f\u884c\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u3002 when : foobar_value is not defined","title":"\u5b9a\u7fa9\u3055\u308c\u3066\u308b\u5834\u5408/\u3055\u308c\u3066\u306a\u3044\u5834\u5408"},{"location":"Ansible/directives/#includeimport","text":"Re-using Ansible artifacts \u2014 Ansible Documentation include \u304a\u3088\u3073 import \u2014 Ansible Documentation OSS\u306f\u30a2\u30eb\u30df\u30cb\u30a6\u30e0\u306e\u7ffc\u3067\u98db\u3076: Ansible: include \u306e\u4ee3\u308f\u308a\u306b\u4f7f\u3046 import_xxx, include_yyy \u3068\u306f \u3068\u308a\u3042\u3048\u305a\u30ea\u30f3\u30af","title":"include\u3068import"},{"location":"Ansible/directives/#check-mode","text":"ansible-playbook \u5b9f\u884c\u6642\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067 --check \u4ed8\u4e0e\u3067dry run\u306b\u306a\u308b\u304c\u3001 check_mode \u3092\u4f7f\u3046\u3053\u3068\u3067\u30bf\u30b9\u30af\u5358\u4f4d\u3067\u5f37\u5236\u7684\u306b\u30c1\u30a7\u30c3\u30af\u30e2\u30fc\u30c9\u306eon/off\u304c\u3067\u304d\u308b\u3002 - name : command sample copy : src : /home/zaki/tmp.yml dest : /var/tmp mode : '0644' register : result check_mode : false \u3053\u306e\u30d1\u30e9\u30e1\u30bf\u3092 true \u306b\u3059\u308b\u3068\u3001 --check \u3092\u4ed8\u3051\u306a\u304f\u3066\u3082\u30c1\u30a7\u30c3\u30af\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3059\u308b\u3002 false \u306b\u3059\u308b\u3068\u3001 --check \u3067\u52d5\u304b\u3057\u3066\u3082\u30c1\u30a7\u30c3\u30af\u30e2\u30fc\u30c9\u3067\u306a\u304f\u5b9f\u51e6\u7406\u304c\u884c\u308f\u308c\u308b\u3002 --check \u306b\u3064\u3044\u3066\u306f playbook \u53c2\u7167\u3002 \u3061\u306a\u307f\u306b\u3001\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e always_run \u3068\u6a5f\u80fd\u7684\u306b\u306f\u540c\u3058(\u5024\u306f\u9006) Note Prior to version 2.2 only the equivalent of check_mode: no existed. The notation for that was always_run: yes . https://docs.ansible.com/ansible/2.9/user_guide/playbooks_checkmode.html#enabling-or-disabling-check-mode-for-tasks","title":"check mode"},{"location":"Ansible/directives/#changed_when","text":"\u6761\u4ef6\u304ctrue\u306e\u5834\u5408\u306f\u30bf\u30b9\u30af\u306e\u7d50\u679c\u306b\u95a2\u4fc2\u306a\u304f changed \u5224\u5b9a\u306b\u3059\u308b\u3002\u9006\u306bfalse\u306e\u5834\u5408\u306f ok \u5224\u5b9a\u306b\u3059\u308b\u3002 \u30bf\u30b9\u30af\u306e\u7d50\u679c\u3092 register \u3067\u4fdd\u6301\u3057\u3001\u305d\u306e\u5185\u5bb9\u3092\u6761\u4ef6\u5f0f\u306b\u7d44\u307f\u8fbc\u3080\u306e\u3082OK - name : command always run and no change ansible.builtin.shell : cmd : hogehoge changed_when : exec_result.stdout != '' register : exec_result hogehoge \u306e\u5b9f\u884c\u7d50\u679c\u3067\u6a19\u6e96\u51fa\u529b\u304c\u4f55\u3082\u7121\u3044\u5834\u5408\u306f changed \u306b\u306a\u308b\u3002","title":"changed_when"},{"location":"Ansible/directives/#until","text":"[Ansible] until\u3092\u4f7f\u3063\u3066\u975e\u540c\u671f\u51e6\u7406\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u6b21\u306etask\u3092\u5f85\u3064 - zaki work log \u4f7f\u7528\u4f8b - name : install flannel shell : kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/2140ac876ef134e0ed5af15c65e414cf26827915/Documentation/kube-flannel.yml # todo: apply\u306e\u51e6\u7406\u304cunchanged\u306e\u5834\u5408\u3082\u3001ansible\u3067\u306fchanged\u6271\u3044\u306b\u306a\u3063\u3066\u3044\u308b - name : wait for Node-Ready shell : kubectl get node --no-headers | awk '{print $2}' register : node_state until : node_state.stdout == \"Ready\" retries : 10 delay : 5 changed_when : false # \u5f85\u3064\u3060\u3051\u306a\u306e\u3067\u5f37\u5236no changed initialize-kubeadm-ansible/deploy_cni.yaml at e48d1a86ef9f4d94853c18246708490f842b8058 \u00b7 zaki-lknr/initialize-kubeadm-ansible include_tasks\u3068\u306f\u4f75\u7528\u4e0d\u53ef\uff1f \u624b\u5143\u306e2.10.5\u3067\u3059\u3063\u3054\u304f\u96d1\u306b\u78ba\u8a8d\u3057\u305f\u9650\u308a\u3060\u3068\u3001import_tasks\u306f when: \u6709\u52b9 loop: \u300cloop\u3057\u305f\u3051\u308c\u3070include\u4f7f\u3048\u300d\u3068\u30a8\u30e9\u30fc register: \u7121\u8996\u3055\u308c\u308b until: \u7121\u8996\u3055\u308c\u308b \u3063\u3066\u611f\u3058\u3067\u3057\u305f\u3002 include_tasks\u306b\u3060\u3068loop\u3068register\u306f\u4f7f\u3048\u307e\u3057\u305f\u304c\u3001until\u306fnot valid attribute error\u3067\u3084\u3063\u3071\u308a\u30c0\u30e1\u3063\u307d\u3044\u2026 pic.twitter.com/9CNihs7tvh \u2014 z a k i \ud83c\udf08 (@zaki_hmkc) February 18, 2021","title":"until"},{"location":"Ansible/directives/#async-poll","text":"[Ansible] async\u3068poll\u3092\u4f7f\u3063\u305f\u975e\u540c\u671f\u51e6\u7406\u3068\u30eb\u30fc\u30d7\u306e\u4e26\u5217\u5b9f\u884c - zaki work log","title":"async + poll"},{"location":"Ansible/filter/","text":"\u30d5\u30a3\u30eb\u30bf \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306fAnsible\u3068Jinja2\u4e21\u65b9\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3002 Using filters to manipulate data \u2014 Ansible Documentation Template Designer Documentation \u2014 Jinja Documentation (3.1.x) \u9805\u76ee\u3084\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u3088\u3063\u3066\u306f\u500b\u5225\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u3042\u308b\u3002 ipaddr filter \u2014 Ansible Documentation community.general Filter Guide \u2014 Ansible Documentation \u5b9f\u88c5\u306f\u3053\u306e\u3042\u305f\u308a ansible.builtin ansible/core.py at devel \u00b7 ansible/ansible core\u4ee5\u5916\u306e\u3082\u306e\u306f\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5225\u30bd\u30fc\u30b9\u306b\u3042\u308b\u304b\u3082 jinja2 jinja/filters.py at main \u00b7 pallets/jinja \u30c7\u30d5\u30a9\u30eb\u30c8\u5024 (default) \u672a\u5b9a\u7fa9\u3060\u3063\u305f\u3089\u3053\u306e\u5024\u306b\u7f6e\u304d\u63db\u3048\u308b\u3001\u3068\u3044\u3046\u3082\u306e\u3002 \u4ee5\u4e0b\u306f foobar_values \u304c\u672a\u5b9a\u7fa9\u306e\u5834\u5408\u306f value \u306f zzz \u3068\u306a\u308b\u3002 vars : value : \"{{ foobar_values | default('zzz') }}\" \u3088\u304f\u4f7f\u3046\u306e\u306f\u521d\u671f\u5024\u304c\u7121\u3044\u5834\u5408\u306b\u30eb\u30fc\u30d7\u3067\u30ea\u30b9\u30c8\u3092\u4f5c\u308b\u3068\u304d\u3002 - name : curry debug : msg : \"{{ item }}\" loop : \"{{ yasai + (niku | default([])) }}\" \u3068\u304b - name : set_fact list value vars : list_values : - item1 - item2 - item3 set_fact : list_items : \"{{ list_items|default([]) + [item] }}\" loop : \"{{ list_values }}\" \u672a\u5b9a\u7fa9\u3067\u306a\u304ffalse\u3060\u3063\u305f\u3089\u7f6e\u304d\u63db\u3048\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u7b2c2\u5f15\u6570\u306b true \u3092\u30bb\u30c3\u30c8\u3059\u308b\u3002 {{ '' | default('the string was empty' , true) }} jinja-filters.default [Ansible] \u7701\u7565\u3057\u305f\u3044\u30d1\u30e9\u30e1\u30bf\u306b\u5909\u6570\u6307\u5b9a\u305b\u3056\u308b\u3092\u5f97\u306a\u3044\u5834\u5408\u306b\u4f7f\u3046\u5909\u6570omit\u3068default\u30d5\u30a3\u30eb\u30bf - zaki work log [Ansible] \u30ea\u30b9\u30c8\u9023\u7d50\u6642\u306bdefault\u3092\u4f7f\u3063\u3066\u672a\u5b9a\u7fa9\u306e\u5834\u5408\u306f\u7a7a\u30ea\u30b9\u30c8\u3068\u3057\u3066\u51e6\u7406\u3059\u308b - zaki work log \u4e09\u9805\u6f14\u7b97\u5b50 ternary \u3092\u4f7f\u3046\u3002 Defining different values for true/false/null (ternary) - name : ternary sample debug : msg : \"{{ (sample_value == 1) | ternary('sample_value\u306f1\u3060\u3088', 'sample_value\u306f1\u3058\u3083\u306a\u3044\u3088') }}\" # \u3084\u3063\u3066\u308b\u3053\u3068\u306f (sample_value == 1) ? 'sample_value\u306f1\u3060\u3088': 'sample_value\u306f1\u3058\u3083\u306a\u3044\u3088' \u3068\u540c\u3058 - name : ternary nest sample debug : msg : \"{{ (sample_value == 1) | ternary('sample_value\u306f1\u3060\u3088', (sample_value == 2) | ternary('sample_value\u306f2\u3060\u3088', 'sample_value\u306f1\u3067\u30822\u3067\u3082\u306a\u3044\u3088') ) }}\" # \u5165\u308c\u5b50\u306b\u3057\u305fternary() - name : ternary nest sample debug : msg : \"{{ (sample_value == 1) | ternary('sample_value\u306f1\u3060\u3088', undefined) | default((sample_value == 2) | ternary('sample_value\u306f2\u3060\u3088', 'sample_value\u306f1\u3067\u30822\u3067\u3082\u306a\u3044\u3088') ) }}\" # \u5165\u308c\u5b50\u306b\u305b\u305a\u306b\u3001default\u30d5\u30a3\u30eb\u30bf\u3092\u4f75\u7528\u3002\u30d4\u30bf\u30b4\u30e9\u30b9\u30a4\u30c3\u30c1\u611f\u3002 # if-elsif-else \u3063\u307d\u304f\u898b\u305b\u308b\u30a4\u30f3\u30c7\u30f3\u30c8\u96e3\u3057\u3044 \u8f9e\u66f8\u3092 { key=\u8f9e\u66f8\u306e\u30ad\u30fc\u540d, value=\u8f9e\u66f8\u306evalue\u30c7\u30fc\u30bf } \u306e\u30ea\u30b9\u30c8\u306b\u5909\u63db dict2items \u3092\u4f7f\u3046\u3002 Transforming dictionaries into lists --- - hosts : localhost gather_facts : false tasks : - name : dict2items sample vars : menu : curry : vegetable : - carrot - potato - onion meat : - cow chicken : pasta : vegetable : - spinach - garlic debug : msg : \"{{ menu | dict2items }}\" \u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 \"msg\" : [ { \"key\" : \"curry\" , \"value\" : { \"chicken\" : null , \"meat\" : [ \"cow\" ], \"vegetable\" : [ \"carrot\" , \"potato\" , \"onion\" ] } }, { \"key\" : \"pasta\" , \"value\" : { \"vegetable\" : [ \"spinach\" , \"garlic\" ] } } ] ansible-sample/dict2items.yml at master \u00b7 zaki-lknr/ansible-sample \u691c\u7d22 (select / selectattr) [Ansible / Jinja2] select / selectattr \u3092\u4f7f\u3063\u305f\u914d\u5217\u3068\u8f9e\u66f8\u306e\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0 - zaki work log \u30ea\u30b9\u30c8\u8981\u7d20\u3078\u306e\u4e00\u5f8b\u51e6\u7406 (map) \u5225\u30d5\u30a3\u30eb\u30bf\u306e\u9069\u7528 \"{{ items | map('length') }}\" \u30ea\u30b9\u30c8 items \u306e\u5404\u8981\u7d20\u306b\u5bfe\u3057\u3066 length \u30d5\u30a3\u30eb\u30bf\u3092\u304b\u307e\u3059 \u8981\u7d20\u629c\u304d\u51fa\u3057 \u8f9e\u66f8\u306e\u30ad\u30fc\u3092 attribute \u3067\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u5404\u8981\u7d20(\u8f9e\u66f8\u578b\u304b\u3089\u306a\u308b)\u306e\u6307\u5b9a\u30ad\u30fc\u306e\u5024\u306e\u307f\u629c\u304d\u51fa\u3059\u3002 \"{{ items | map(attribute='hostname') }}\" \u30ad\u30fc\u304c\u7121\u3044\u5834\u5408\u306f AnsibleUndefined \u306b\u306a\u308b\u304c\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u304b\u66f4\u306b\u30d5\u30a3\u30eb\u30bf\u3059\u308b\u3053\u3068\u3067\u5bfe\u51e6\u3067\u304d\u308b\u3002 default \u3092\u6307\u5b9a\u3059\u308c\u3070\u30ad\u30fc\u304c\u7121\u3044\u5834\u5408\u306f\u305d\u306e\u5024\u306b\u7f6e\u304d\u63db\u3048\u308b\u3002 \"{{ items | map(attribute='hostname', default='no data') }}\" select \u3092\u4f7f\u3063\u305f\u30d5\u30a3\u30eb\u30bf\u306b\u7e4b\u3052\u308c\u3070\u3001undef\u306e\u9805\u76ee\u3092\u9664\u5916\u3082\u3067\u304d\u308b\u3002 \"{{ items | map(attribute='hostname') | select('none') }}\" none \u306f Jinja2\u306eTest \u306e\u4e00\u3064\u3002 \u30ea\u30b9\u30c8\u306e\u5148\u982d\u30fb\u672b\u5c3e\u8981\u7d20 array[0] , array[-1] \u3067\u3082\u4e00\u7dd2\u3068\u3044\u3048\u3070\u4e00\u7dd2\u3060\u3051\u3069\u3002 \u51fa\u5c55\u306fJinja2\u306e\u30d5\u30a3\u30eb\u30bf\u3002 first last - name : first vars : list : - item1 - item2 - item3 foobar : hogehoge debug : msg : - \"{{ list | first }}\" - \"{{ list[0] }}\" - \"{{ list | last }}\" - \"{{ list[-1] }}\" \u7d50\u679c TASK [ first ] ******************************************* ok : [ localhost ] => msg : - item1 - item1 - item3 - item3 \u3061\u306a\u307f\u306b\u3001\u6587\u5b57\u5217\u578b\u306e\u5834\u5408\u3067\u3082iterable\u306a\u306e\u3067\u3001\u4e00\u6587\u5b57\u76ee\u30fb\u6700\u5f8c\u306e\u6587\u5b57\u304c\u53d6\u308c\u308b\u3002 \u30ea\u30b9\u30c8\u304b\u3089\u8981\u7d20\u306e\u9664\u5916(difference) \u30ea\u30b9\u30c8\u304b\u3089\u7279\u5b9a\u8981\u7d20\u3092\u9664\u5916\u3059\u308b\u306b\u306f difference \u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3046\u3002 \u5165\u529b\u306e\u30ea\u30b9\u30c8\u306e\u8981\u7d20\u304b\u3089\u3001 difference \u30d5\u30a3\u30eb\u30bf\u306e\u5f15\u6570\u306b\u6307\u5b9a\u3057\u305f\u30ea\u30b9\u30c8\u306e\u8981\u7d20\u3092\u9664\u5916\u3057\u305f\u30ea\u30b9\u30c8\u3092\u8fd4\u3059\u3002 difference \u306b\u3082\u30ea\u30b9\u30c8\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b(iterable\u306a\u5909\u6570\u3067\u306a\u3051\u308c\u3070\u30a8\u30e9\u30fc\u3068\u306a\u308b) --- - hosts : localhost vars : int_list1 : [ 1 , 2 , 3 ] int_list2 : [ 3 , 4 ] tasks : - name : defference filter sample debug : msg : - \"{{ int_list1 | difference(int_list2) }}\" \u51fa\u529b\u306f [1, 2] \u306b\u306a\u308b\u3002 \u306a\u304a\u3001\u6587\u5b57\u5217\u306e\u5834\u5408\u306f\u5143\u3005iterable\u306e\u305f\u3081\u3001 difference \u306e\u5f15\u6570\u306f\u30ea\u30b9\u30c8\u3067\u306a\u304f\u3066\u3082\u4e00\u5fdc\u52d5\u4f5c\u3059\u308b\u3002 --- - hosts : localhost vars : list1 : [ \"foo\" , \"bar\" , \"baz\" ] list2 : [ \"baz\" , \"qux\" ] str_item : \"baz\" tasks : - name : defference filter sample debug : msg : - \"{{ list1 | difference(list2) }}\" - \"{{ list1 | difference(str_item) }}\" \u3069\u3061\u3089\u306e\u7d50\u679c\u3082 [\"foo\", \"bar\"] \u306b\u306a\u308b\u3002 \u8f9e\u66f8\u306e\u30de\u30fc\u30b8(combine) - name : merge 2 dicts vars : var1 : list1 : - item1 - item2 var2 : list2 : - itemA - itemB debug : msg : \"{{ var1 | combine(var2) }}\" 2\u3064\u306e\u8f9e\u66f8\u3092\u30de\u30fc\u30b8\u3059\u308b\u3002 \u91cd\u8907\u30ad\u30fc\u306e\u7121\u3044\u8f9e\u66f8\u540c\u58eb\u306f\u5358\u7d14\u5408\u6210\u306b\u306a\u308a\u3001\u4e0a\u306e\u30bf\u30b9\u30af\u306e\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 TASK [merge 2 dicts] ********************************************* ok: [localhost] => { \"msg\": { \"list1\": [ \"item1\", \"item2\" ], \"list2\": [ \"itemA\", \"itemB\" ] } } \u540c\u3058\u30ad\u30fc\u3092\u542b\u3080\u5834\u5408\u306f\u4e0a\u66f8\u304d\u3059\u308b\u3002 - name : merge 2 dicts vars : var1 : list1 : - item1 - item2 var2 : list1 : - item3 list2 : - itemA - itemB debug : msg : \"{{ var1 | combine(var2) }}\" combine \u3059\u308b\u8f9e\u66f8\u306b\u540c\u3058 lsit1 \u30ad\u30fc\u3092\u542b\u3080\u5834\u5408\u3001\u3053\u306e\u30bf\u30b9\u30af\u306e\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3001 combine \u306b\u6307\u5b9a\u3057\u305f\u8f9e\u66f8\u5074\u306e list1 \u30ad\u30fc\u306e\u5024\u3067\u4e0a\u66f8\u304d\u3055\u308c\u308b\u3002 TASK [merge 2 dicts] ****************************************************************** ok: [localhost] => { \"msg\": { \"list1\": [ \"item3\" ], \"list2\": [ \"itemA\", \"itemB\" ] } } list_merge \u8f9e\u66f8\u306e\u8981\u7d20\u304c\u30ea\u30b9\u30c8\u306e\u5834\u5408\u3001\u30ad\u30fc\u304c\u540c\u3058\u5834\u5408\u306e\u4e0a\u66f8\u304d\u52d5\u4f5c\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3001 list_merge \u30d1\u30e9\u30e1\u30bf\u3067\u52d5\u4f5c\u3092\u5909\u66f4\u3067\u304d\u308b\u3002 append \u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u8981\u7d20\u306e\u672b\u5c3e\u306b\u8ffd\u52a0\u3002 - name : merge 2 dicts vars : var1 : list1 : - item1 - item2 var2 : list1 : - item3 list2 : - itemA - itemB debug : msg : \"{{ var1 | combine(var2, list_merge='append') }}\" list1 \u30ad\u30fc\u304c\u91cd\u8907\u3057\u305f\u5165\u529b\u3067\u3001 list_merge=append \u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306e\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 TASK [merge 2 dicts] ********************************************* ok: [localhost] => { \"msg\": { \"list1\": [ \"item1\", \"item2\", \"item3\" ], \"list2\": [ \"itemA\", \"itemB\" ] } } list1 \u30ad\u30fc\u306e\u5024\u306e\u30ea\u30b9\u30c8\u3082\u30de\u30fc\u30b8( combime \u306e\u5f15\u6570\u306b\u6307\u5b9a\u3059\u308b\u65b9\u304c\u672b\u5c3e\u306b\u8ffd\u52a0)\u3055\u308c\u3066\u3044\u308b\u3002 list_merge \u306b\u6307\u5b9a\u3067\u304d\u308b\u30d1\u30e9\u30e1\u30bf\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 \u30d1\u30e9\u30e1\u30bf \u52d5\u4f5c append \u672b\u5c3e\u306b\u8ffd\u52a0 prepend \u5148\u982d\u306b\u8ffd\u52a0 append_rp \u672b\u5c3e\u306b\u8ffd\u52a0 (\u91cd\u8907\u6642\u306b\u65e2\u5b58\u8981\u7d20\u306f\u524a\u9664) prepend_rp \u5148\u982d\u306b\u8ffd\u52a0 (\u91cd\u8907\u6642\u306b\u65e2\u5b58\u8981\u7d20\u306f\u524a\u9664) append_rp \u306e\u52d5\u4f5c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 - name : merge 2 dicts vars : var1 : list1 : - item1 - item2 var2 : list1 : - item3 - item1 - item4 list2 : - itemA - itemB debug : msg : \"{{ var1 | combine(var2, list_merge='append_rp') }}\" \u3053\u306e\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u901a\u308a\u3002 \u30ea\u30b9\u30c8\u8981\u7d20\u306b\u3069\u3061\u3089\u3082 item1 \u304c\u542b\u307e\u308c\u308b\u305f\u3081\u3053\u308c\u304c var1 \u304b\u3089\u524a\u9664\u3055\u308c\u3001 var2 \u306e\u8981\u7d20( item3 , item1 , item4 )\u304c\u672b\u5c3e\u3078\u8ffd\u52a0\u3055\u308c\u308b\u3002 TASK [merge 2 dicts] ********************************************* ok: [localhost] => { \"msg\": { \"list1\": [ \"item2\", \"item3\", \"item1\", \"item4\" ], \"list2\": [ \"itemA\", \"itemB\" ] } } prepend_rp \u306e\u52d5\u4f5c\u306f\u3001\u2191\u3068\u540c\u3058\u6761\u4ef6\u3067\u30d1\u30e9\u30e1\u30bf\u306e\u307f\u5909\u66f4\u3057\u3066\u5b9f\u884c\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u901a\u308a\u3002 \u91cd\u8907\u3059\u308b item1 \u304c var1 \u304b\u3089\u524a\u9664\u3055\u308c\u308b\u52d5\u4f5c\u306f\u540c\u3058\u3067\u3001 var2 \u306e\u8981\u7d20( item3 , item1 , item4 )\u304c\u5148\u982d\u3078\u8ffd\u52a0\u3055\u308c\u308b\u3002 TASK [merge 2 dicts] ********************************************* ok: [localhost] => { \"msg\": { \"list1\": [ \"item3\", \"item1\", \"item4\", \"item2\" ], \"list2\": [ \"itemA\", \"itemB\" ] } } \u30d1\u30b9\u51e6\u7406 \u30d1\u30b9\u306e\u5408\u6210 (path_join) path_join \u3092\u4f7f\u3046\u3068\u3001\u30ea\u30b9\u30c8\u306e\u6587\u5b57\u5217\u3092\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30bb\u30d1\u30ec\u30fc\u30bf\u3067\u7e4b\u3050\u3002 - name : create repository url debug : msg : - \"{{ (registry_url, registry_username, 'awx') | path_join }}\" registry_username = zaki-lknr registry_url = ghcr.io \u3068\u3044\u3046\u5909\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 TASK [create repository url] ************************************ ok: [oci-g-a1-ubuntu] => msg: - ghcr.io/zaki-lknr/awx \u6697\u53f7\u5316\u30d1\u30b9\u30ef\u30fc\u30c9 How do I generate encrypted passwords for the user module? Encrypting and checksumming strings and passwords password_hash password : \"{{ password_plain_text | password_hash('sha512') }}\" \u30c7\u30d5\u30a9\u30eb\u30c8\u306f sha512 \u3067\u6697\u53f7\u5316\u3055\u308c\u308b\u3002 https://github.com/ansible/ansible/blob/v2.10.5/lib/ansible/plugins/filter/core.py#L266 def get_encrypted_password (password, hashtype = 'sha512' , salt = None , salt_size = None , rounds = None ): salt\u306e\u6307\u5b9a\u304c\u7121\u3044\u5834\u5408\u306f\u30e9\u30f3\u30c0\u30e0\u306b\u306a\u308b\u305f\u3081\u3001\u5b9f\u884c\u306e\u305f\u3073\u306b\u7d50\u679c\u306e\u5024\u306f\u5909\u5316\u3059\u308b\u3002(\u3064\u307e\u308a\u3001\u3053\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3057\u305f\u308a\u3059\u308c\u3070\u6bce\u56de changed \u306b\u306a\u308b) \u51aa\u7b49\u306b\u3057\u305f\u3051\u308c\u3070\u3001salt\u306b\u56fa\u5b9a\u306e\u5024\u3092\u30bb\u30c3\u30c8\u3059\u308b\u3002 password : \"{{ password_plain_text | password_hash('sha512', 'hoge') }}\" Linux \u306e UNIX \u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u306b\u3064\u3044\u3066\u8abf\u3079\u305f - CUBE SUGAR CONTAINER \u3010CentOS\u3011/etc/shadow\u306e\u30cf\u30c3\u30b7\u30e5\u5316\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u3064\u3044\u3066 - \u3088\u304f\u308f\u304b\u3089\u306a\u3044\u30a8\u30f3\u30b8\u30cb\u30a2 base64 \u30a8\u30f3\u30b3\u30fc\u30c9 - name : base64 enc vars : sample_text : zaki debug : msg : \"{{ sample_text | b64encode }}\" \u2193 ok: [localhost] => msg: emFraQ== \u30c7\u30b3\u30fc\u30c9 - name : base64 dec vars : b64text : emFraQ== debug : msg : \"{{ b64text | b64decode }}\" \u2193 ok: [localhost] => msg: zaki \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u578b\u3092\u8abf\u3079\u308b (type_debug) \u4efb\u610f\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u578b\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u306b\u306f type_debug \u3092\u4f7f\u3046\u3002 - name: type debug debug: msg: \"{{ item }}\" vars: num_val: 1 str_val: zzz list_val: - item1 - item2 - item3 dict_val: key1: val1 key2: val2 key3: val3 loop: - \"{{ num_val | type_debug }}\" - \"{{ str_val | type_debug }}\" - \"{{ list_val | type_debug }}\" - \"{{ dict_val | type_debug }}\" \u7d50\u679c TASK [type debug] *********************************************************** ok: [localhost] => (item=int) => msg: int ok: [localhost] => (item=AnsibleUnicode) => msg: AnsibleUnicode ok: [localhost] => (item=list) => msg: list ok: [localhost] => (item=dict) => msg: dict","title":"\u30d5\u30a3\u30eb\u30bf"},{"location":"Ansible/filter/#_1","text":"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306fAnsible\u3068Jinja2\u4e21\u65b9\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3002 Using filters to manipulate data \u2014 Ansible Documentation Template Designer Documentation \u2014 Jinja Documentation (3.1.x) \u9805\u76ee\u3084\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u3088\u3063\u3066\u306f\u500b\u5225\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u3042\u308b\u3002 ipaddr filter \u2014 Ansible Documentation community.general Filter Guide \u2014 Ansible Documentation \u5b9f\u88c5\u306f\u3053\u306e\u3042\u305f\u308a ansible.builtin ansible/core.py at devel \u00b7 ansible/ansible core\u4ee5\u5916\u306e\u3082\u306e\u306f\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5225\u30bd\u30fc\u30b9\u306b\u3042\u308b\u304b\u3082 jinja2 jinja/filters.py at main \u00b7 pallets/jinja","title":"\u30d5\u30a3\u30eb\u30bf"},{"location":"Ansible/filter/#default","text":"\u672a\u5b9a\u7fa9\u3060\u3063\u305f\u3089\u3053\u306e\u5024\u306b\u7f6e\u304d\u63db\u3048\u308b\u3001\u3068\u3044\u3046\u3082\u306e\u3002 \u4ee5\u4e0b\u306f foobar_values \u304c\u672a\u5b9a\u7fa9\u306e\u5834\u5408\u306f value \u306f zzz \u3068\u306a\u308b\u3002 vars : value : \"{{ foobar_values | default('zzz') }}\" \u3088\u304f\u4f7f\u3046\u306e\u306f\u521d\u671f\u5024\u304c\u7121\u3044\u5834\u5408\u306b\u30eb\u30fc\u30d7\u3067\u30ea\u30b9\u30c8\u3092\u4f5c\u308b\u3068\u304d\u3002 - name : curry debug : msg : \"{{ item }}\" loop : \"{{ yasai + (niku | default([])) }}\" \u3068\u304b - name : set_fact list value vars : list_values : - item1 - item2 - item3 set_fact : list_items : \"{{ list_items|default([]) + [item] }}\" loop : \"{{ list_values }}\" \u672a\u5b9a\u7fa9\u3067\u306a\u304ffalse\u3060\u3063\u305f\u3089\u7f6e\u304d\u63db\u3048\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u7b2c2\u5f15\u6570\u306b true \u3092\u30bb\u30c3\u30c8\u3059\u308b\u3002 {{ '' | default('the string was empty' , true) }} jinja-filters.default [Ansible] \u7701\u7565\u3057\u305f\u3044\u30d1\u30e9\u30e1\u30bf\u306b\u5909\u6570\u6307\u5b9a\u305b\u3056\u308b\u3092\u5f97\u306a\u3044\u5834\u5408\u306b\u4f7f\u3046\u5909\u6570omit\u3068default\u30d5\u30a3\u30eb\u30bf - zaki work log [Ansible] \u30ea\u30b9\u30c8\u9023\u7d50\u6642\u306bdefault\u3092\u4f7f\u3063\u3066\u672a\u5b9a\u7fa9\u306e\u5834\u5408\u306f\u7a7a\u30ea\u30b9\u30c8\u3068\u3057\u3066\u51e6\u7406\u3059\u308b - zaki work log","title":"\u30c7\u30d5\u30a9\u30eb\u30c8\u5024 (default)"},{"location":"Ansible/filter/#_2","text":"ternary \u3092\u4f7f\u3046\u3002 Defining different values for true/false/null (ternary) - name : ternary sample debug : msg : \"{{ (sample_value == 1) | ternary('sample_value\u306f1\u3060\u3088', 'sample_value\u306f1\u3058\u3083\u306a\u3044\u3088') }}\" # \u3084\u3063\u3066\u308b\u3053\u3068\u306f (sample_value == 1) ? 'sample_value\u306f1\u3060\u3088': 'sample_value\u306f1\u3058\u3083\u306a\u3044\u3088' \u3068\u540c\u3058 - name : ternary nest sample debug : msg : \"{{ (sample_value == 1) | ternary('sample_value\u306f1\u3060\u3088', (sample_value == 2) | ternary('sample_value\u306f2\u3060\u3088', 'sample_value\u306f1\u3067\u30822\u3067\u3082\u306a\u3044\u3088') ) }}\" # \u5165\u308c\u5b50\u306b\u3057\u305fternary() - name : ternary nest sample debug : msg : \"{{ (sample_value == 1) | ternary('sample_value\u306f1\u3060\u3088', undefined) | default((sample_value == 2) | ternary('sample_value\u306f2\u3060\u3088', 'sample_value\u306f1\u3067\u30822\u3067\u3082\u306a\u3044\u3088') ) }}\" # \u5165\u308c\u5b50\u306b\u305b\u305a\u306b\u3001default\u30d5\u30a3\u30eb\u30bf\u3092\u4f75\u7528\u3002\u30d4\u30bf\u30b4\u30e9\u30b9\u30a4\u30c3\u30c1\u611f\u3002 # if-elsif-else \u3063\u307d\u304f\u898b\u305b\u308b\u30a4\u30f3\u30c7\u30f3\u30c8\u96e3\u3057\u3044","title":"\u4e09\u9805\u6f14\u7b97\u5b50"},{"location":"Ansible/filter/#key-valuevalue","text":"dict2items \u3092\u4f7f\u3046\u3002 Transforming dictionaries into lists --- - hosts : localhost gather_facts : false tasks : - name : dict2items sample vars : menu : curry : vegetable : - carrot - potato - onion meat : - cow chicken : pasta : vegetable : - spinach - garlic debug : msg : \"{{ menu | dict2items }}\" \u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 \"msg\" : [ { \"key\" : \"curry\" , \"value\" : { \"chicken\" : null , \"meat\" : [ \"cow\" ], \"vegetable\" : [ \"carrot\" , \"potato\" , \"onion\" ] } }, { \"key\" : \"pasta\" , \"value\" : { \"vegetable\" : [ \"spinach\" , \"garlic\" ] } } ] ansible-sample/dict2items.yml at master \u00b7 zaki-lknr/ansible-sample","title":"\u8f9e\u66f8\u3092{ key=\u8f9e\u66f8\u306e\u30ad\u30fc\u540d, value=\u8f9e\u66f8\u306evalue\u30c7\u30fc\u30bf }\u306e\u30ea\u30b9\u30c8\u306b\u5909\u63db"},{"location":"Ansible/filter/#select-selectattr","text":"[Ansible / Jinja2] select / selectattr \u3092\u4f7f\u3063\u305f\u914d\u5217\u3068\u8f9e\u66f8\u306e\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0 - zaki work log","title":"\u691c\u7d22 (select / selectattr)"},{"location":"Ansible/filter/#map","text":"","title":"\u30ea\u30b9\u30c8\u8981\u7d20\u3078\u306e\u4e00\u5f8b\u51e6\u7406 (map)"},{"location":"Ansible/filter/#_3","text":"\"{{ items | map('length') }}\" \u30ea\u30b9\u30c8 items \u306e\u5404\u8981\u7d20\u306b\u5bfe\u3057\u3066 length \u30d5\u30a3\u30eb\u30bf\u3092\u304b\u307e\u3059","title":"\u5225\u30d5\u30a3\u30eb\u30bf\u306e\u9069\u7528"},{"location":"Ansible/filter/#_4","text":"\u8f9e\u66f8\u306e\u30ad\u30fc\u3092 attribute \u3067\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u5404\u8981\u7d20(\u8f9e\u66f8\u578b\u304b\u3089\u306a\u308b)\u306e\u6307\u5b9a\u30ad\u30fc\u306e\u5024\u306e\u307f\u629c\u304d\u51fa\u3059\u3002 \"{{ items | map(attribute='hostname') }}\" \u30ad\u30fc\u304c\u7121\u3044\u5834\u5408\u306f AnsibleUndefined \u306b\u306a\u308b\u304c\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u304b\u66f4\u306b\u30d5\u30a3\u30eb\u30bf\u3059\u308b\u3053\u3068\u3067\u5bfe\u51e6\u3067\u304d\u308b\u3002 default \u3092\u6307\u5b9a\u3059\u308c\u3070\u30ad\u30fc\u304c\u7121\u3044\u5834\u5408\u306f\u305d\u306e\u5024\u306b\u7f6e\u304d\u63db\u3048\u308b\u3002 \"{{ items | map(attribute='hostname', default='no data') }}\" select \u3092\u4f7f\u3063\u305f\u30d5\u30a3\u30eb\u30bf\u306b\u7e4b\u3052\u308c\u3070\u3001undef\u306e\u9805\u76ee\u3092\u9664\u5916\u3082\u3067\u304d\u308b\u3002 \"{{ items | map(attribute='hostname') | select('none') }}\" none \u306f Jinja2\u306eTest \u306e\u4e00\u3064\u3002","title":"\u8981\u7d20\u629c\u304d\u51fa\u3057"},{"location":"Ansible/filter/#_5","text":"array[0] , array[-1] \u3067\u3082\u4e00\u7dd2\u3068\u3044\u3048\u3070\u4e00\u7dd2\u3060\u3051\u3069\u3002 \u51fa\u5c55\u306fJinja2\u306e\u30d5\u30a3\u30eb\u30bf\u3002 first last - name : first vars : list : - item1 - item2 - item3 foobar : hogehoge debug : msg : - \"{{ list | first }}\" - \"{{ list[0] }}\" - \"{{ list | last }}\" - \"{{ list[-1] }}\" \u7d50\u679c TASK [ first ] ******************************************* ok : [ localhost ] => msg : - item1 - item1 - item3 - item3 \u3061\u306a\u307f\u306b\u3001\u6587\u5b57\u5217\u578b\u306e\u5834\u5408\u3067\u3082iterable\u306a\u306e\u3067\u3001\u4e00\u6587\u5b57\u76ee\u30fb\u6700\u5f8c\u306e\u6587\u5b57\u304c\u53d6\u308c\u308b\u3002","title":"\u30ea\u30b9\u30c8\u306e\u5148\u982d\u30fb\u672b\u5c3e\u8981\u7d20"},{"location":"Ansible/filter/#difference","text":"\u30ea\u30b9\u30c8\u304b\u3089\u7279\u5b9a\u8981\u7d20\u3092\u9664\u5916\u3059\u308b\u306b\u306f difference \u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3046\u3002 \u5165\u529b\u306e\u30ea\u30b9\u30c8\u306e\u8981\u7d20\u304b\u3089\u3001 difference \u30d5\u30a3\u30eb\u30bf\u306e\u5f15\u6570\u306b\u6307\u5b9a\u3057\u305f\u30ea\u30b9\u30c8\u306e\u8981\u7d20\u3092\u9664\u5916\u3057\u305f\u30ea\u30b9\u30c8\u3092\u8fd4\u3059\u3002 difference \u306b\u3082\u30ea\u30b9\u30c8\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b(iterable\u306a\u5909\u6570\u3067\u306a\u3051\u308c\u3070\u30a8\u30e9\u30fc\u3068\u306a\u308b) --- - hosts : localhost vars : int_list1 : [ 1 , 2 , 3 ] int_list2 : [ 3 , 4 ] tasks : - name : defference filter sample debug : msg : - \"{{ int_list1 | difference(int_list2) }}\" \u51fa\u529b\u306f [1, 2] \u306b\u306a\u308b\u3002 \u306a\u304a\u3001\u6587\u5b57\u5217\u306e\u5834\u5408\u306f\u5143\u3005iterable\u306e\u305f\u3081\u3001 difference \u306e\u5f15\u6570\u306f\u30ea\u30b9\u30c8\u3067\u306a\u304f\u3066\u3082\u4e00\u5fdc\u52d5\u4f5c\u3059\u308b\u3002 --- - hosts : localhost vars : list1 : [ \"foo\" , \"bar\" , \"baz\" ] list2 : [ \"baz\" , \"qux\" ] str_item : \"baz\" tasks : - name : defference filter sample debug : msg : - \"{{ list1 | difference(list2) }}\" - \"{{ list1 | difference(str_item) }}\" \u3069\u3061\u3089\u306e\u7d50\u679c\u3082 [\"foo\", \"bar\"] \u306b\u306a\u308b\u3002","title":"\u30ea\u30b9\u30c8\u304b\u3089\u8981\u7d20\u306e\u9664\u5916(difference)"},{"location":"Ansible/filter/#combine","text":"- name : merge 2 dicts vars : var1 : list1 : - item1 - item2 var2 : list2 : - itemA - itemB debug : msg : \"{{ var1 | combine(var2) }}\" 2\u3064\u306e\u8f9e\u66f8\u3092\u30de\u30fc\u30b8\u3059\u308b\u3002 \u91cd\u8907\u30ad\u30fc\u306e\u7121\u3044\u8f9e\u66f8\u540c\u58eb\u306f\u5358\u7d14\u5408\u6210\u306b\u306a\u308a\u3001\u4e0a\u306e\u30bf\u30b9\u30af\u306e\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 TASK [merge 2 dicts] ********************************************* ok: [localhost] => { \"msg\": { \"list1\": [ \"item1\", \"item2\" ], \"list2\": [ \"itemA\", \"itemB\" ] } } \u540c\u3058\u30ad\u30fc\u3092\u542b\u3080\u5834\u5408\u306f\u4e0a\u66f8\u304d\u3059\u308b\u3002 - name : merge 2 dicts vars : var1 : list1 : - item1 - item2 var2 : list1 : - item3 list2 : - itemA - itemB debug : msg : \"{{ var1 | combine(var2) }}\" combine \u3059\u308b\u8f9e\u66f8\u306b\u540c\u3058 lsit1 \u30ad\u30fc\u3092\u542b\u3080\u5834\u5408\u3001\u3053\u306e\u30bf\u30b9\u30af\u306e\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3001 combine \u306b\u6307\u5b9a\u3057\u305f\u8f9e\u66f8\u5074\u306e list1 \u30ad\u30fc\u306e\u5024\u3067\u4e0a\u66f8\u304d\u3055\u308c\u308b\u3002 TASK [merge 2 dicts] ****************************************************************** ok: [localhost] => { \"msg\": { \"list1\": [ \"item3\" ], \"list2\": [ \"itemA\", \"itemB\" ] } }","title":"\u8f9e\u66f8\u306e\u30de\u30fc\u30b8(combine)"},{"location":"Ansible/filter/#list_merge","text":"\u8f9e\u66f8\u306e\u8981\u7d20\u304c\u30ea\u30b9\u30c8\u306e\u5834\u5408\u3001\u30ad\u30fc\u304c\u540c\u3058\u5834\u5408\u306e\u4e0a\u66f8\u304d\u52d5\u4f5c\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3001 list_merge \u30d1\u30e9\u30e1\u30bf\u3067\u52d5\u4f5c\u3092\u5909\u66f4\u3067\u304d\u308b\u3002 append \u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u8981\u7d20\u306e\u672b\u5c3e\u306b\u8ffd\u52a0\u3002 - name : merge 2 dicts vars : var1 : list1 : - item1 - item2 var2 : list1 : - item3 list2 : - itemA - itemB debug : msg : \"{{ var1 | combine(var2, list_merge='append') }}\" list1 \u30ad\u30fc\u304c\u91cd\u8907\u3057\u305f\u5165\u529b\u3067\u3001 list_merge=append \u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306e\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 TASK [merge 2 dicts] ********************************************* ok: [localhost] => { \"msg\": { \"list1\": [ \"item1\", \"item2\", \"item3\" ], \"list2\": [ \"itemA\", \"itemB\" ] } } list1 \u30ad\u30fc\u306e\u5024\u306e\u30ea\u30b9\u30c8\u3082\u30de\u30fc\u30b8( combime \u306e\u5f15\u6570\u306b\u6307\u5b9a\u3059\u308b\u65b9\u304c\u672b\u5c3e\u306b\u8ffd\u52a0)\u3055\u308c\u3066\u3044\u308b\u3002 list_merge \u306b\u6307\u5b9a\u3067\u304d\u308b\u30d1\u30e9\u30e1\u30bf\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 \u30d1\u30e9\u30e1\u30bf \u52d5\u4f5c append \u672b\u5c3e\u306b\u8ffd\u52a0 prepend \u5148\u982d\u306b\u8ffd\u52a0 append_rp \u672b\u5c3e\u306b\u8ffd\u52a0 (\u91cd\u8907\u6642\u306b\u65e2\u5b58\u8981\u7d20\u306f\u524a\u9664) prepend_rp \u5148\u982d\u306b\u8ffd\u52a0 (\u91cd\u8907\u6642\u306b\u65e2\u5b58\u8981\u7d20\u306f\u524a\u9664) append_rp \u306e\u52d5\u4f5c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 - name : merge 2 dicts vars : var1 : list1 : - item1 - item2 var2 : list1 : - item3 - item1 - item4 list2 : - itemA - itemB debug : msg : \"{{ var1 | combine(var2, list_merge='append_rp') }}\" \u3053\u306e\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u901a\u308a\u3002 \u30ea\u30b9\u30c8\u8981\u7d20\u306b\u3069\u3061\u3089\u3082 item1 \u304c\u542b\u307e\u308c\u308b\u305f\u3081\u3053\u308c\u304c var1 \u304b\u3089\u524a\u9664\u3055\u308c\u3001 var2 \u306e\u8981\u7d20( item3 , item1 , item4 )\u304c\u672b\u5c3e\u3078\u8ffd\u52a0\u3055\u308c\u308b\u3002 TASK [merge 2 dicts] ********************************************* ok: [localhost] => { \"msg\": { \"list1\": [ \"item2\", \"item3\", \"item1\", \"item4\" ], \"list2\": [ \"itemA\", \"itemB\" ] } } prepend_rp \u306e\u52d5\u4f5c\u306f\u3001\u2191\u3068\u540c\u3058\u6761\u4ef6\u3067\u30d1\u30e9\u30e1\u30bf\u306e\u307f\u5909\u66f4\u3057\u3066\u5b9f\u884c\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u901a\u308a\u3002 \u91cd\u8907\u3059\u308b item1 \u304c var1 \u304b\u3089\u524a\u9664\u3055\u308c\u308b\u52d5\u4f5c\u306f\u540c\u3058\u3067\u3001 var2 \u306e\u8981\u7d20( item3 , item1 , item4 )\u304c\u5148\u982d\u3078\u8ffd\u52a0\u3055\u308c\u308b\u3002 TASK [merge 2 dicts] ********************************************* ok: [localhost] => { \"msg\": { \"list1\": [ \"item3\", \"item1\", \"item4\", \"item2\" ], \"list2\": [ \"itemA\", \"itemB\" ] } }","title":"list_merge"},{"location":"Ansible/filter/#_6","text":"","title":"\u30d1\u30b9\u51e6\u7406"},{"location":"Ansible/filter/#path_join","text":"path_join \u3092\u4f7f\u3046\u3068\u3001\u30ea\u30b9\u30c8\u306e\u6587\u5b57\u5217\u3092\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30bb\u30d1\u30ec\u30fc\u30bf\u3067\u7e4b\u3050\u3002 - name : create repository url debug : msg : - \"{{ (registry_url, registry_username, 'awx') | path_join }}\" registry_username = zaki-lknr registry_url = ghcr.io \u3068\u3044\u3046\u5909\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 TASK [create repository url] ************************************ ok: [oci-g-a1-ubuntu] => msg: - ghcr.io/zaki-lknr/awx","title":"\u30d1\u30b9\u306e\u5408\u6210 (path_join)"},{"location":"Ansible/filter/#_7","text":"How do I generate encrypted passwords for the user module? Encrypting and checksumming strings and passwords","title":"\u6697\u53f7\u5316\u30d1\u30b9\u30ef\u30fc\u30c9"},{"location":"Ansible/filter/#password_hash","text":"password : \"{{ password_plain_text | password_hash('sha512') }}\" \u30c7\u30d5\u30a9\u30eb\u30c8\u306f sha512 \u3067\u6697\u53f7\u5316\u3055\u308c\u308b\u3002 https://github.com/ansible/ansible/blob/v2.10.5/lib/ansible/plugins/filter/core.py#L266 def get_encrypted_password (password, hashtype = 'sha512' , salt = None , salt_size = None , rounds = None ): salt\u306e\u6307\u5b9a\u304c\u7121\u3044\u5834\u5408\u306f\u30e9\u30f3\u30c0\u30e0\u306b\u306a\u308b\u305f\u3081\u3001\u5b9f\u884c\u306e\u305f\u3073\u306b\u7d50\u679c\u306e\u5024\u306f\u5909\u5316\u3059\u308b\u3002(\u3064\u307e\u308a\u3001\u3053\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3057\u305f\u308a\u3059\u308c\u3070\u6bce\u56de changed \u306b\u306a\u308b) \u51aa\u7b49\u306b\u3057\u305f\u3051\u308c\u3070\u3001salt\u306b\u56fa\u5b9a\u306e\u5024\u3092\u30bb\u30c3\u30c8\u3059\u308b\u3002 password : \"{{ password_plain_text | password_hash('sha512', 'hoge') }}\" Linux \u306e UNIX \u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u306b\u3064\u3044\u3066\u8abf\u3079\u305f - CUBE SUGAR CONTAINER \u3010CentOS\u3011/etc/shadow\u306e\u30cf\u30c3\u30b7\u30e5\u5316\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u3064\u3044\u3066 - \u3088\u304f\u308f\u304b\u3089\u306a\u3044\u30a8\u30f3\u30b8\u30cb\u30a2","title":"password_hash"},{"location":"Ansible/filter/#base64","text":"","title":"base64"},{"location":"Ansible/filter/#_8","text":"- name : base64 enc vars : sample_text : zaki debug : msg : \"{{ sample_text | b64encode }}\" \u2193 ok: [localhost] => msg: emFraQ==","title":"\u30a8\u30f3\u30b3\u30fc\u30c9"},{"location":"Ansible/filter/#_9","text":"- name : base64 dec vars : b64text : emFraQ== debug : msg : \"{{ b64text | b64decode }}\" \u2193 ok: [localhost] => msg: zaki","title":"\u30c7\u30b3\u30fc\u30c9"},{"location":"Ansible/filter/#type_debug","text":"\u4efb\u610f\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u578b\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u306b\u306f type_debug \u3092\u4f7f\u3046\u3002 - name: type debug debug: msg: \"{{ item }}\" vars: num_val: 1 str_val: zzz list_val: - item1 - item2 - item3 dict_val: key1: val1 key2: val2 key3: val3 loop: - \"{{ num_val | type_debug }}\" - \"{{ str_val | type_debug }}\" - \"{{ list_val | type_debug }}\" - \"{{ dict_val | type_debug }}\" \u7d50\u679c TASK [type debug] *********************************************************** ok: [localhost] => (item=int) => msg: int ok: [localhost] => (item=AnsibleUnicode) => msg: AnsibleUnicode ok: [localhost] => (item=list) => msg: list ok: [localhost] => (item=dict) => msg: dict","title":"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u578b\u3092\u8abf\u3079\u308b (type_debug)"},{"location":"Ansible/galaxy/","text":"Galaxy ansible-galaxy\u30b3\u30de\u30f3\u30c9 -r | --requirements-file requirements.yml \u30d5\u30a1\u30a4\u30eb\u306e\u6307\u5b9a\u3002 ansible-galaxy collection install -r collections/requirements.yml requirements.yml \u306e\u4e2d\u8eab\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3002 --- collections : - name : zaki_lknr.esxissh \u3068\u304b --- collections : - name : https://github.com/zaki-lknr/esxissh-ansible.git version : main type : git","title":"Galaxy"},{"location":"Ansible/galaxy/#galaxy","text":"","title":"Galaxy"},{"location":"Ansible/galaxy/#ansible-galaxy","text":"","title":"ansible-galaxy\u30b3\u30de\u30f3\u30c9"},{"location":"Ansible/galaxy/#-r-requirements-file","text":"requirements.yml \u30d5\u30a1\u30a4\u30eb\u306e\u6307\u5b9a\u3002 ansible-galaxy collection install -r collections/requirements.yml requirements.yml \u306e\u4e2d\u8eab\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3002 --- collections : - name : zaki_lknr.esxissh \u3068\u304b --- collections : - name : https://github.com/zaki-lknr/esxissh-ansible.git version : main type : git","title":"-r | --requirements-file"},{"location":"Ansible/install/","text":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb pip \u6700\u65b0 $ pip install ansible 2.9\u7cfb\u6700\u65b0 $ pip install ansible ==2 .9.* ansible==2.9 \u3060\u30682.9.0\u304c\u5165\u308b\u306e\u3067\u6ce8\u610f\u3002","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"Ansible/install/#_1","text":"","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"Ansible/install/#pip","text":"\u6700\u65b0 $ pip install ansible 2.9\u7cfb\u6700\u65b0 $ pip install ansible ==2 .9.* ansible==2.9 \u3060\u30682.9.0\u304c\u5165\u308b\u306e\u3067\u6ce8\u610f\u3002","title":"pip"},{"location":"Ansible/inventory/","text":"\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea How to build your inventory \u2014 Ansible Documentation \u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u30fc\u306e\u69cb\u7bc9\u65b9\u6cd5 \u2014 Ansible Documentation \u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30b0\u30eb\u30fc\u30d7\u5909\u6570\u5b9a\u7fa9 [servers] host1 host2 [all:vars] gateway = 192.168.0.1 [servers:vars] db_host = 192.168.0.121 localhost Implicit \u2018localhost\u2019 \u2014 Ansible Documentation \u6697\u9ed9\u7684\u306a \u2018localhost\u2019 \u2014 Ansible Documentation \u30bf\u30fc\u30b2\u30c3\u30c8\u30db\u30b9\u30c8\u3067 localhost \u3092\u6307\u5b9a\u3057\u305f\u5834\u5408 --- - hosts : localhost gather_facts : false tasks : - name : sample ping : \u3053\u306e\u3068\u304d\u3001\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u30d5\u30a1\u30a4\u30eb\u306b localhost \u306e\u5b9a\u7fa9\u304c\u7121\u3044\u5834\u5408(\u3084\u3001\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408)\u306f\u3001\u6697\u9ed9\u306e localhost \u3068\u3057\u3066 hosts : localhost : vars : ansible_connection : local ansible_python_interpreter : \"{{ansible_playbook_python}}\" \u3063\u3066\u306e\u304c\u5185\u90e8\u3067\u7528\u610f\u3055\u308c\u3001\u3053\u306e\u8a2d\u5b9a\u3067\u63a5\u7d9a\u3055\u308c\u308b\u3002\u3088\u3063\u3066\u3001 connection: local \u3068\u3057\u3066\u52d5\u304f\u3002 $ ansible-playbook localhost.yml -vvv : : TASK [sample] ***************************************************** task path: /home/zaki/src/ansible-sample/inventory/localhost.yml:6 <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: zaki : : \u3053\u3093\u306a\u611f\u3058\u3002 \u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u306b localhost \u306e\u8a2d\u5b9a\u304c\u3042\u308c\u3070\u305d\u308c\u304c\u4f7f\u308f\u308c\u308b\u3002\u5f53\u7136 connection: local \u304c\u7121\u3051\u308c\u3070\u3001\u8a2d\u5b9a\u3055\u308c\u305f\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u4f7f\u7528\u3055\u308c\u308b(\u672a\u6307\u5b9a\u306a\u3089\u30c7\u30d5\u30a9\u30eb\u30c8\u306e ssh ) [localhost] localhost \u3053\u3093\u306a localhost.ini \u3068\u3044\u3046\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001 $ ansible-playbook localhost.yml -i localhost.ini -vvv : : TASK [sample] ***************************************************** task path: /home/zaki/src/ansible-sample/inventory/localhost.yml:6 <localhost> ESTABLISH SSH CONNECTION FOR USER: None : : \u3053\u306e\u3088\u3046\u306bssh\u63a5\u7d9a\u3068\u306a\u308b\u3002 ansible-inventory\u30b3\u30de\u30f3\u30c9 ansible-inventory \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u4e00\u89a7\u3084\u305d\u306e\u30db\u30b9\u30c8\u306b\u7d10\u3065\u304f\u5909\u6570\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3002 \u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u306e\u5834\u5408\u306b\u5bfe\u8c61\u30ce\u30fc\u30c9\u304c\u4f55\u306b\u306a\u308b\u304b\u78ba\u8a8d\u3067\u304d\u308b\u3002 --list $ ansible-inventory -i inventory.ini --list \u3053\u306e\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u30d5\u30a1\u30a4\u30eb \u3092\u53c2\u7167\u3057\u305f\u969b\u306e\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\u3084\u30db\u30b9\u30c8\u5909\u6570( group_vars \u306a\u3069\u6709\u308c\u3070\u53c2\u7167 )\u3092\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3002 { \"_meta\" : { \"hostvars\" : { \"master01\" : { \"additional_packages\" : [ \"bash-completion\" , \"open-vm-tools\" ], \"additional_services\" : [ \"vmtoolsd\" ], \"ansible_host\" : \"192.168.0.121\" , \"cluster_name\" : \"my-kubeadm-cluster\" , \"controlplane_endpoint\" : \"k8s-master.esxi.jp-z.jp\" , \"enable_firewalld\" : \"true\" , \"pod_network_cidr\" : \"10.244.0.0/16\" , \"required_ports\" : [ \"6443/tcp\" , \"2379-2380/tcp\" , \"10250/tcp\" , \"10251/tcp\" , \"10252/tcp\" ], \"use_cni_plugin\" : \"calico\" , \"use_cri\" : \"containerd\" }, \"master02\" : { \"additional_packages\" : [ \"bash-completion\" , \"open-vm-tools\" ], \"additional_services\" : [ \"vmtoolsd\" ], \"ansible_host\" : \"192.168.0.122\" , \"cluster_name\" : \"my-kubeadm-cluster\" , \"controlplane_endpoint\" : \"k8s-master.esxi.jp-z.jp\" , \"enable_firewalld\" : \"true\" , \"pod_network_cidr\" : \"10.244.0.0/16\" , \"required_ports\" : [ \"6443/tcp\" , \"2379-2380/tcp\" , \"10250/tcp\" , \"10251/tcp\" , \"10252/tcp\" ], \"use_cni_plugin\" : \"calico\" , \"use_cri\" : \"containerd\" }, \"master03\" : { \"additional_packages\" : [ \"bash-completion\" , \"open-vm-tools\" ], \"additional_services\" : [ \"vmtoolsd\" ], \"ansible_host\" : \"192.168.0.123\" , \"cluster_name\" : \"my-kubeadm-cluster\" , \"controlplane_endpoint\" : \"k8s-master.esxi.jp-z.jp\" , \"enable_firewalld\" : \"true\" , \"pod_network_cidr\" : \"10.244.0.0/16\" , \"required_ports\" : [ \"6443/tcp\" , \"2379-2380/tcp\" , \"10250/tcp\" , \"10251/tcp\" , \"10252/tcp\" ], \"use_cni_plugin\" : \"calico\" , \"use_cri\" : \"containerd\" }, \"worker01\" : { \"additional_packages\" : [ \"bash-completion\" , \"open-vm-tools\" ], \"additional_services\" : [ \"vmtoolsd\" ], \"ansible_host\" : \"192.168.0.125\" , \"cluster_name\" : \"my-kubeadm-cluster\" , \"controlplane_endpoint\" : \"k8s-master.esxi.jp-z.jp\" , \"enable_firewalld\" : \"true\" , \"pod_network_cidr\" : \"10.244.0.0/16\" , \"required_ports\" : [ \"10250/tcp\" , \"30000-32767/tcp\" ], \"use_cni_plugin\" : \"calico\" , \"use_cri\" : \"containerd\" }, \"worker02\" : { \"additional_packages\" : [ \"bash-completion\" , \"open-vm-tools\" ], \"additional_services\" : [ \"vmtoolsd\" ], \"ansible_host\" : \"192.168.0.126\" , \"cluster_name\" : \"my-kubeadm-cluster\" , \"controlplane_endpoint\" : \"k8s-master.esxi.jp-z.jp\" , \"enable_firewalld\" : \"true\" , \"pod_network_cidr\" : \"10.244.0.0/16\" , \"required_ports\" : [ \"10250/tcp\" , \"30000-32767/tcp\" ], \"use_cni_plugin\" : \"calico\" , \"use_cri\" : \"containerd\" } } }, \"all\" : { \"children\" : [ \"master\" , \"ungrouped\" , \"worker\" ] }, \"master\" : { \"hosts\" : [ \"master01\" , \"master02\" , \"master03\" ] }, \"worker\" : { \"hosts\" : [ \"worker01\" , \"worker02\" ] } } --graph --vars \u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u5834\u5408\u306f\u3001\u30b0\u30eb\u30fc\u30d7\u5909\u6570\u5b9a\u7fa9\u304c\u72ec\u7acb\u3057\u3066\u8868\u793a\u3055\u308c\u308b\u3002 $ ansible-inventory -i inventory.ini --graph --vars @all: |--@master: | |--master01 | | |--{additional_packages = ['bash-completion', 'open-vm-tools']} | | |--{additional_services = ['vmtoolsd']} | | |--{ansible_host = 192.168.0.121} | | |--{cluster_name = my-kubeadm-cluster} | | |--{controlplane_endpoint = k8s-master.esxi.jp-z.jp} | | |--{enable_firewalld = true} | | |--{pod_network_cidr = 10.244.0.0/16} | | |--{required_ports = ['6443/tcp', '2379-2380/tcp', '10250/tcp', '10251/tcp', '10252/tcp']} | | |--{use_cni_plugin = calico} | | |--{use_cri = containerd} | |--master02 | | |--{additional_packages = ['bash-completion', 'open-vm-tools']} | | |--{additional_services = ['vmtoolsd']} | | |--{ansible_host = 192.168.0.122} | | |--{cluster_name = my-kubeadm-cluster} | | |--{controlplane_endpoint = k8s-master.esxi.jp-z.jp} | | |--{enable_firewalld = true} | | |--{pod_network_cidr = 10.244.0.0/16} | | |--{required_ports = ['6443/tcp', '2379-2380/tcp', '10250/tcp', '10251/tcp', '10252/tcp']} | | |--{use_cni_plugin = calico} | | |--{use_cri = containerd} | |--master03 | | |--{additional_packages = ['bash-completion', 'open-vm-tools']} | | |--{additional_services = ['vmtoolsd']} | | |--{ansible_host = 192.168.0.123} | | |--{cluster_name = my-kubeadm-cluster} | | |--{controlplane_endpoint = k8s-master.esxi.jp-z.jp} | | |--{enable_firewalld = true} | | |--{pod_network_cidr = 10.244.0.0/16} | | |--{required_ports = ['6443/tcp', '2379-2380/tcp', '10250/tcp', '10251/tcp', '10252/tcp']} | | |--{use_cni_plugin = calico} | | |--{use_cri = containerd} | |--{required_ports = ['6443/tcp', '2379-2380/tcp', '10250/tcp', '10251/tcp', '10252/tcp']} |--@ungrouped: |--@worker: | |--worker01 | | |--{additional_packages = ['bash-completion', 'open-vm-tools']} | | |--{additional_services = ['vmtoolsd']} | | |--{ansible_host = 192.168.0.125} | | |--{cluster_name = my-kubeadm-cluster} | | |--{controlplane_endpoint = k8s-master.esxi.jp-z.jp} | | |--{enable_firewalld = true} | | |--{pod_network_cidr = 10.244.0.0/16} | | |--{required_ports = ['10250/tcp', '30000-32767/tcp']} | | |--{use_cni_plugin = calico} | | |--{use_cri = containerd} | |--worker02 | | |--{additional_packages = ['bash-completion', 'open-vm-tools']} | | |--{additional_services = ['vmtoolsd']} | | |--{ansible_host = 192.168.0.126} | | |--{cluster_name = my-kubeadm-cluster} | | |--{controlplane_endpoint = k8s-master.esxi.jp-z.jp} | | |--{enable_firewalld = true} | | |--{pod_network_cidr = 10.244.0.0/16} | | |--{required_ports = ['10250/tcp', '30000-32767/tcp']} | | |--{use_cni_plugin = calico} | | |--{use_cri = containerd} | |--{required_ports = ['10250/tcp', '30000-32767/tcp']} |--{additional_packages = ['bash-completion', 'open-vm-tools']} |--{additional_services = ['vmtoolsd']} |--{cluster_name = my-kubeadm-cluster} |--{controlplane_endpoint = k8s-master.esxi.jp-z.jp} |--{enable_firewalld = true} |--{pod_network_cidr = 10.244.0.0/16} |--{use_cni_plugin = calico} |--{use_cri = containerd} ansible-inventory -i inventory.ini --graph --vars \u306e\u7d50\u679c\u3002 \u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u5185\u306e\u5909\u6570\u3084 group_vars \u3068\u304b\u306e\u5909\u6570\u5b9a\u7fa9\u3092\u89e3\u91c8\u3057\u3066\u3001\u7d50\u5c40\u305d\u306e\u30db\u30b9\u30c8\u304c\u3069\u3046\u3044\u3046\u5909\u6570\u306e\u5024\u3092\u6301\u3064\u304b\u5206\u304b\u308b\u3002 --list \u3067\u3082\u4f3c\u305f\u3088\u3046\u306a\u60c5\u5831\u306f\u308f\u304b\u308b\uff082\u679a\u76ee\uff09 pic.twitter.com/Y3nW49EP2C \u2014 \u3088\u3053\u3061(yokochi) (@akira6592) June 9, 2021 \u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea EC2 [Ansible / AWS] \u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u3092\u4f7f\u3063\u3066EC2\u63a5\u7d9a\u5148\u3092\u52d5\u7684\u306b\u53d6\u5f97\u3057\u3066Ansible\u5b9f\u884c\u304a\u8a66\u3057 - zaki work log --- plugin : amazon.aws.aws_ec2 regions : - ap-northeast-1 netbox [NetBox / Ansible] \u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u3092\u4f7f\u3063\u3066NetBox\u306b\u767b\u9332\u3055\u308c\u305f\u30db\u30b9\u30c8\u60c5\u5831\u3092\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306bAnsible\u3092\u5b9f\u884c - zaki work log plugin : netbox.netbox.nb_inventory api_endpoint : http://192.168.0.19:28080 token : 0123456789abcdef0123456789abcdef01234567","title":"\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea"},{"location":"Ansible/inventory/#_1","text":"How to build your inventory \u2014 Ansible Documentation \u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u30fc\u306e\u69cb\u7bc9\u65b9\u6cd5 \u2014 Ansible Documentation","title":"\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea"},{"location":"Ansible/inventory/#_2","text":"[servers] host1 host2 [all:vars] gateway = 192.168.0.1 [servers:vars] db_host = 192.168.0.121","title":"\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30b0\u30eb\u30fc\u30d7\u5909\u6570\u5b9a\u7fa9"},{"location":"Ansible/inventory/#localhost","text":"Implicit \u2018localhost\u2019 \u2014 Ansible Documentation \u6697\u9ed9\u7684\u306a \u2018localhost\u2019 \u2014 Ansible Documentation \u30bf\u30fc\u30b2\u30c3\u30c8\u30db\u30b9\u30c8\u3067 localhost \u3092\u6307\u5b9a\u3057\u305f\u5834\u5408 --- - hosts : localhost gather_facts : false tasks : - name : sample ping : \u3053\u306e\u3068\u304d\u3001\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u30d5\u30a1\u30a4\u30eb\u306b localhost \u306e\u5b9a\u7fa9\u304c\u7121\u3044\u5834\u5408(\u3084\u3001\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408)\u306f\u3001\u6697\u9ed9\u306e localhost \u3068\u3057\u3066 hosts : localhost : vars : ansible_connection : local ansible_python_interpreter : \"{{ansible_playbook_python}}\" \u3063\u3066\u306e\u304c\u5185\u90e8\u3067\u7528\u610f\u3055\u308c\u3001\u3053\u306e\u8a2d\u5b9a\u3067\u63a5\u7d9a\u3055\u308c\u308b\u3002\u3088\u3063\u3066\u3001 connection: local \u3068\u3057\u3066\u52d5\u304f\u3002 $ ansible-playbook localhost.yml -vvv : : TASK [sample] ***************************************************** task path: /home/zaki/src/ansible-sample/inventory/localhost.yml:6 <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: zaki : : \u3053\u3093\u306a\u611f\u3058\u3002 \u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u306b localhost \u306e\u8a2d\u5b9a\u304c\u3042\u308c\u3070\u305d\u308c\u304c\u4f7f\u308f\u308c\u308b\u3002\u5f53\u7136 connection: local \u304c\u7121\u3051\u308c\u3070\u3001\u8a2d\u5b9a\u3055\u308c\u305f\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u4f7f\u7528\u3055\u308c\u308b(\u672a\u6307\u5b9a\u306a\u3089\u30c7\u30d5\u30a9\u30eb\u30c8\u306e ssh ) [localhost] localhost \u3053\u3093\u306a localhost.ini \u3068\u3044\u3046\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001 $ ansible-playbook localhost.yml -i localhost.ini -vvv : : TASK [sample] ***************************************************** task path: /home/zaki/src/ansible-sample/inventory/localhost.yml:6 <localhost> ESTABLISH SSH CONNECTION FOR USER: None : : \u3053\u306e\u3088\u3046\u306bssh\u63a5\u7d9a\u3068\u306a\u308b\u3002","title":"localhost"},{"location":"Ansible/inventory/#ansible-inventory","text":"ansible-inventory \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u4e00\u89a7\u3084\u305d\u306e\u30db\u30b9\u30c8\u306b\u7d10\u3065\u304f\u5909\u6570\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3002 \u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u306e\u5834\u5408\u306b\u5bfe\u8c61\u30ce\u30fc\u30c9\u304c\u4f55\u306b\u306a\u308b\u304b\u78ba\u8a8d\u3067\u304d\u308b\u3002","title":"ansible-inventory\u30b3\u30de\u30f3\u30c9"},{"location":"Ansible/inventory/#-list","text":"$ ansible-inventory -i inventory.ini --list \u3053\u306e\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u30d5\u30a1\u30a4\u30eb \u3092\u53c2\u7167\u3057\u305f\u969b\u306e\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\u3084\u30db\u30b9\u30c8\u5909\u6570( group_vars \u306a\u3069\u6709\u308c\u3070\u53c2\u7167 )\u3092\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3002 { \"_meta\" : { \"hostvars\" : { \"master01\" : { \"additional_packages\" : [ \"bash-completion\" , \"open-vm-tools\" ], \"additional_services\" : [ \"vmtoolsd\" ], \"ansible_host\" : \"192.168.0.121\" , \"cluster_name\" : \"my-kubeadm-cluster\" , \"controlplane_endpoint\" : \"k8s-master.esxi.jp-z.jp\" , \"enable_firewalld\" : \"true\" , \"pod_network_cidr\" : \"10.244.0.0/16\" , \"required_ports\" : [ \"6443/tcp\" , \"2379-2380/tcp\" , \"10250/tcp\" , \"10251/tcp\" , \"10252/tcp\" ], \"use_cni_plugin\" : \"calico\" , \"use_cri\" : \"containerd\" }, \"master02\" : { \"additional_packages\" : [ \"bash-completion\" , \"open-vm-tools\" ], \"additional_services\" : [ \"vmtoolsd\" ], \"ansible_host\" : \"192.168.0.122\" , \"cluster_name\" : \"my-kubeadm-cluster\" , \"controlplane_endpoint\" : \"k8s-master.esxi.jp-z.jp\" , \"enable_firewalld\" : \"true\" , \"pod_network_cidr\" : \"10.244.0.0/16\" , \"required_ports\" : [ \"6443/tcp\" , \"2379-2380/tcp\" , \"10250/tcp\" , \"10251/tcp\" , \"10252/tcp\" ], \"use_cni_plugin\" : \"calico\" , \"use_cri\" : \"containerd\" }, \"master03\" : { \"additional_packages\" : [ \"bash-completion\" , \"open-vm-tools\" ], \"additional_services\" : [ \"vmtoolsd\" ], \"ansible_host\" : \"192.168.0.123\" , \"cluster_name\" : \"my-kubeadm-cluster\" , \"controlplane_endpoint\" : \"k8s-master.esxi.jp-z.jp\" , \"enable_firewalld\" : \"true\" , \"pod_network_cidr\" : \"10.244.0.0/16\" , \"required_ports\" : [ \"6443/tcp\" , \"2379-2380/tcp\" , \"10250/tcp\" , \"10251/tcp\" , \"10252/tcp\" ], \"use_cni_plugin\" : \"calico\" , \"use_cri\" : \"containerd\" }, \"worker01\" : { \"additional_packages\" : [ \"bash-completion\" , \"open-vm-tools\" ], \"additional_services\" : [ \"vmtoolsd\" ], \"ansible_host\" : \"192.168.0.125\" , \"cluster_name\" : \"my-kubeadm-cluster\" , \"controlplane_endpoint\" : \"k8s-master.esxi.jp-z.jp\" , \"enable_firewalld\" : \"true\" , \"pod_network_cidr\" : \"10.244.0.0/16\" , \"required_ports\" : [ \"10250/tcp\" , \"30000-32767/tcp\" ], \"use_cni_plugin\" : \"calico\" , \"use_cri\" : \"containerd\" }, \"worker02\" : { \"additional_packages\" : [ \"bash-completion\" , \"open-vm-tools\" ], \"additional_services\" : [ \"vmtoolsd\" ], \"ansible_host\" : \"192.168.0.126\" , \"cluster_name\" : \"my-kubeadm-cluster\" , \"controlplane_endpoint\" : \"k8s-master.esxi.jp-z.jp\" , \"enable_firewalld\" : \"true\" , \"pod_network_cidr\" : \"10.244.0.0/16\" , \"required_ports\" : [ \"10250/tcp\" , \"30000-32767/tcp\" ], \"use_cni_plugin\" : \"calico\" , \"use_cri\" : \"containerd\" } } }, \"all\" : { \"children\" : [ \"master\" , \"ungrouped\" , \"worker\" ] }, \"master\" : { \"hosts\" : [ \"master01\" , \"master02\" , \"master03\" ] }, \"worker\" : { \"hosts\" : [ \"worker01\" , \"worker02\" ] } }","title":"--list"},{"location":"Ansible/inventory/#-graph-vars","text":"\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u5834\u5408\u306f\u3001\u30b0\u30eb\u30fc\u30d7\u5909\u6570\u5b9a\u7fa9\u304c\u72ec\u7acb\u3057\u3066\u8868\u793a\u3055\u308c\u308b\u3002 $ ansible-inventory -i inventory.ini --graph --vars @all: |--@master: | |--master01 | | |--{additional_packages = ['bash-completion', 'open-vm-tools']} | | |--{additional_services = ['vmtoolsd']} | | |--{ansible_host = 192.168.0.121} | | |--{cluster_name = my-kubeadm-cluster} | | |--{controlplane_endpoint = k8s-master.esxi.jp-z.jp} | | |--{enable_firewalld = true} | | |--{pod_network_cidr = 10.244.0.0/16} | | |--{required_ports = ['6443/tcp', '2379-2380/tcp', '10250/tcp', '10251/tcp', '10252/tcp']} | | |--{use_cni_plugin = calico} | | |--{use_cri = containerd} | |--master02 | | |--{additional_packages = ['bash-completion', 'open-vm-tools']} | | |--{additional_services = ['vmtoolsd']} | | |--{ansible_host = 192.168.0.122} | | |--{cluster_name = my-kubeadm-cluster} | | |--{controlplane_endpoint = k8s-master.esxi.jp-z.jp} | | |--{enable_firewalld = true} | | |--{pod_network_cidr = 10.244.0.0/16} | | |--{required_ports = ['6443/tcp', '2379-2380/tcp', '10250/tcp', '10251/tcp', '10252/tcp']} | | |--{use_cni_plugin = calico} | | |--{use_cri = containerd} | |--master03 | | |--{additional_packages = ['bash-completion', 'open-vm-tools']} | | |--{additional_services = ['vmtoolsd']} | | |--{ansible_host = 192.168.0.123} | | |--{cluster_name = my-kubeadm-cluster} | | |--{controlplane_endpoint = k8s-master.esxi.jp-z.jp} | | |--{enable_firewalld = true} | | |--{pod_network_cidr = 10.244.0.0/16} | | |--{required_ports = ['6443/tcp', '2379-2380/tcp', '10250/tcp', '10251/tcp', '10252/tcp']} | | |--{use_cni_plugin = calico} | | |--{use_cri = containerd} | |--{required_ports = ['6443/tcp', '2379-2380/tcp', '10250/tcp', '10251/tcp', '10252/tcp']} |--@ungrouped: |--@worker: | |--worker01 | | |--{additional_packages = ['bash-completion', 'open-vm-tools']} | | |--{additional_services = ['vmtoolsd']} | | |--{ansible_host = 192.168.0.125} | | |--{cluster_name = my-kubeadm-cluster} | | |--{controlplane_endpoint = k8s-master.esxi.jp-z.jp} | | |--{enable_firewalld = true} | | |--{pod_network_cidr = 10.244.0.0/16} | | |--{required_ports = ['10250/tcp', '30000-32767/tcp']} | | |--{use_cni_plugin = calico} | | |--{use_cri = containerd} | |--worker02 | | |--{additional_packages = ['bash-completion', 'open-vm-tools']} | | |--{additional_services = ['vmtoolsd']} | | |--{ansible_host = 192.168.0.126} | | |--{cluster_name = my-kubeadm-cluster} | | |--{controlplane_endpoint = k8s-master.esxi.jp-z.jp} | | |--{enable_firewalld = true} | | |--{pod_network_cidr = 10.244.0.0/16} | | |--{required_ports = ['10250/tcp', '30000-32767/tcp']} | | |--{use_cni_plugin = calico} | | |--{use_cri = containerd} | |--{required_ports = ['10250/tcp', '30000-32767/tcp']} |--{additional_packages = ['bash-completion', 'open-vm-tools']} |--{additional_services = ['vmtoolsd']} |--{cluster_name = my-kubeadm-cluster} |--{controlplane_endpoint = k8s-master.esxi.jp-z.jp} |--{enable_firewalld = true} |--{pod_network_cidr = 10.244.0.0/16} |--{use_cni_plugin = calico} |--{use_cri = containerd} ansible-inventory -i inventory.ini --graph --vars \u306e\u7d50\u679c\u3002 \u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u5185\u306e\u5909\u6570\u3084 group_vars \u3068\u304b\u306e\u5909\u6570\u5b9a\u7fa9\u3092\u89e3\u91c8\u3057\u3066\u3001\u7d50\u5c40\u305d\u306e\u30db\u30b9\u30c8\u304c\u3069\u3046\u3044\u3046\u5909\u6570\u306e\u5024\u3092\u6301\u3064\u304b\u5206\u304b\u308b\u3002 --list \u3067\u3082\u4f3c\u305f\u3088\u3046\u306a\u60c5\u5831\u306f\u308f\u304b\u308b\uff082\u679a\u76ee\uff09 pic.twitter.com/Y3nW49EP2C \u2014 \u3088\u3053\u3061(yokochi) (@akira6592) June 9, 2021","title":"--graph --vars"},{"location":"Ansible/inventory/#_3","text":"","title":"\u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea"},{"location":"Ansible/inventory/#ec2","text":"[Ansible / AWS] \u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u3092\u4f7f\u3063\u3066EC2\u63a5\u7d9a\u5148\u3092\u52d5\u7684\u306b\u53d6\u5f97\u3057\u3066Ansible\u5b9f\u884c\u304a\u8a66\u3057 - zaki work log --- plugin : amazon.aws.aws_ec2 regions : - ap-northeast-1","title":"EC2"},{"location":"Ansible/inventory/#netbox","text":"[NetBox / Ansible] \u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30a4\u30f3\u30d9\u30f3\u30c8\u30ea\u3092\u4f7f\u3063\u3066NetBox\u306b\u767b\u9332\u3055\u308c\u305f\u30db\u30b9\u30c8\u60c5\u5831\u3092\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306bAnsible\u3092\u5b9f\u884c - zaki work log plugin : netbox.netbox.nb_inventory api_endpoint : http://192.168.0.19:28080 token : 0123456789abcdef0123456789abcdef01234567","title":"netbox"},{"location":"Ansible/jinja2/","text":"Jinja2\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8 \u5897\u3048\u305f\u3089Tools\u3068\u304b\u306b\u79fb\u3059\u304b\u3082 Templating (Jinja2) \u2014 Ansible Documentation \u5909\u6570 \u5909\u6570\u5ba3\u8a00 \u5909\u6570 {% set hogehoge = 'foobar' %} \u914d\u5217 {% set array = [] %} \u914d\u5217\u8981\u7d20\u306e\u8ffd\u52a0 \u2191\u306e array \u306b\u8981\u7d20\u3092\u8ffd\u52a0\u3057\u305f\u3044\u5834\u5408\u3001Ansible\u3067\u306f array.append() \u306f\u4f7f\u3048\u308b\u3088\u3046\u306b\u898b\u3048\u3066\u4f7f\u3048\u306a\u3044\u3002 \u2193\u306e\u3088\u3046\u306b\u66f8\u304f\u3002 {% set _ = array.append('item') %} \u3053\u308c\u306b do \u3092\u8ffd\u52a0\u3057\u3066 {% do list.append(1) %} \u3068\u66f8\u3051\u308b\u3088\u3046\u306b\u3059\u308b Expression Statement \u3068\u3044\u3046\u62e1\u5f35\u3082\u3042\u308b\u3089\u3057\u3044\u306e\u3067\u3059\u304c Ansible \u3067\u306f\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u306e\u3067\u3001\u9762\u5012\u3067\u3059\u304c {% if list.append(1) %}{% endif %} \u3084 {% set _ = list.append(1) %} \u306e\u3088\u3046\u306b\u4ed6\u306e\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u306e\u4e2d\u3067\u8a55\u4fa1\u3057\u305f\u3044\u5f0f\u3092\u66f8\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u307b\u3052\u3081\u3082: Ansible \u306e Jinja2 \u3092\u6d3b\u7528\u3059\u308b \u8f9e\u66f8\u3092\u30ea\u30b9\u30c8\u306e\u8981\u7d20\u3068\u3057\u3066\u8ffd\u52a0\u306f\u666e\u901a\u306bOK { % set _ = host_list.append( { 'host' : host , 'name' : hostvars [ host ] .tags. User } ) % } \u5236\u5fa1\u69cb\u6587 \u30eb\u30fc\u30d7 \u30ea\u30b9\u30c8\u306b\u5bfe\u3059\u308b for \u69cb\u6587\u306f\u3001foreach\u5f0f\u3067\u914d\u5217\u8981\u7d20\u3092\u30eb\u30fc\u30d7\u6bce\u306b\u51e6\u7406\u3067\u304d\u308b { % for item in array_value % } ... { % endfor % } array_value \u306e\u914d\u5217\u8981\u7d20\u304c item \u306b\u30bb\u30c3\u30c8\u3055\u308c\u3066\u30eb\u30fc\u30d7\u51e6\u7406\u3055\u308c\u308b\u3002 \u30eb\u30fc\u30d7\u30a4\u30f3\u30c7\u30c3\u30af\u30b9 \u30eb\u30fc\u30d7\u30d6\u30ed\u30c3\u30af\u5185\u3067 loop.index0 \u3068\u3044\u3046\u5909\u6570\u53c2\u7167\u3067\u30eb\u30fc\u30d7\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u53d6\u308a\u51fa\u305b\u308b(\u30bc\u30ed\u30aa\u30ea\u30b8\u30f3) \u30b3\u30e1\u30f3\u30c8 {# comment #} \u8907\u6570\u884c\u3082OK {# { % for item in list % } { % endfor % } #} lookup\u30d7\u30e9\u30b0\u30a4\u30f3\u5b9f\u884c playbook\u7b49\u3067\u66f8\u304f\u3068\u304d\u3068\u540c\u3058\u8981\u9818\u3067\u8a18\u8ff0\u53ef\u80fd {{ lookup ( 'pipe' , 'date +%s' ) }} \u6307\u5b9a\u90e8\u5206\u3078\u306e\u30d5\u30a3\u30eb\u30bf\u306e\u5b9f\u884c indent() {% filter indent (4, true ) %} {{ sample_string }} {% endfilter %} --- - hosts : localhost gather_facts : false vars : sample_string : | int main() { return 0; } tasks : - name : j2 saple template : src : indent_sample.txt.j2 dest : /var/tmp/indent_sample.txt \u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3001\u30b9\u30da\u30fc\u30b94\u6587\u5b57\u5206\u306e\u30a4\u30f3\u30c7\u30f3\u30c8\u304c\u5165\u308b\u3002 int main() { return 0; }","title":"Jinja2\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8"},{"location":"Ansible/jinja2/#jinja2","text":"\u5897\u3048\u305f\u3089Tools\u3068\u304b\u306b\u79fb\u3059\u304b\u3082 Templating (Jinja2) \u2014 Ansible Documentation","title":"Jinja2\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8"},{"location":"Ansible/jinja2/#_1","text":"","title":"\u5909\u6570"},{"location":"Ansible/jinja2/#_2","text":"\u5909\u6570 {% set hogehoge = 'foobar' %} \u914d\u5217 {% set array = [] %}","title":"\u5909\u6570\u5ba3\u8a00"},{"location":"Ansible/jinja2/#_3","text":"\u2191\u306e array \u306b\u8981\u7d20\u3092\u8ffd\u52a0\u3057\u305f\u3044\u5834\u5408\u3001Ansible\u3067\u306f array.append() \u306f\u4f7f\u3048\u308b\u3088\u3046\u306b\u898b\u3048\u3066\u4f7f\u3048\u306a\u3044\u3002 \u2193\u306e\u3088\u3046\u306b\u66f8\u304f\u3002 {% set _ = array.append('item') %} \u3053\u308c\u306b do \u3092\u8ffd\u52a0\u3057\u3066 {% do list.append(1) %} \u3068\u66f8\u3051\u308b\u3088\u3046\u306b\u3059\u308b Expression Statement \u3068\u3044\u3046\u62e1\u5f35\u3082\u3042\u308b\u3089\u3057\u3044\u306e\u3067\u3059\u304c Ansible \u3067\u306f\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u306e\u3067\u3001\u9762\u5012\u3067\u3059\u304c {% if list.append(1) %}{% endif %} \u3084 {% set _ = list.append(1) %} \u306e\u3088\u3046\u306b\u4ed6\u306e\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u306e\u4e2d\u3067\u8a55\u4fa1\u3057\u305f\u3044\u5f0f\u3092\u66f8\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u307b\u3052\u3081\u3082: Ansible \u306e Jinja2 \u3092\u6d3b\u7528\u3059\u308b \u8f9e\u66f8\u3092\u30ea\u30b9\u30c8\u306e\u8981\u7d20\u3068\u3057\u3066\u8ffd\u52a0\u306f\u666e\u901a\u306bOK { % set _ = host_list.append( { 'host' : host , 'name' : hostvars [ host ] .tags. User } ) % }","title":"\u914d\u5217\u8981\u7d20\u306e\u8ffd\u52a0"},{"location":"Ansible/jinja2/#_4","text":"","title":"\u5236\u5fa1\u69cb\u6587"},{"location":"Ansible/jinja2/#_5","text":"\u30ea\u30b9\u30c8\u306b\u5bfe\u3059\u308b for \u69cb\u6587\u306f\u3001foreach\u5f0f\u3067\u914d\u5217\u8981\u7d20\u3092\u30eb\u30fc\u30d7\u6bce\u306b\u51e6\u7406\u3067\u304d\u308b { % for item in array_value % } ... { % endfor % } array_value \u306e\u914d\u5217\u8981\u7d20\u304c item \u306b\u30bb\u30c3\u30c8\u3055\u308c\u3066\u30eb\u30fc\u30d7\u51e6\u7406\u3055\u308c\u308b\u3002","title":"\u30eb\u30fc\u30d7"},{"location":"Ansible/jinja2/#_6","text":"\u30eb\u30fc\u30d7\u30d6\u30ed\u30c3\u30af\u5185\u3067 loop.index0 \u3068\u3044\u3046\u5909\u6570\u53c2\u7167\u3067\u30eb\u30fc\u30d7\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u53d6\u308a\u51fa\u305b\u308b(\u30bc\u30ed\u30aa\u30ea\u30b8\u30f3)","title":"\u30eb\u30fc\u30d7\u30a4\u30f3\u30c7\u30c3\u30af\u30b9"},{"location":"Ansible/jinja2/#_7","text":"{# comment #} \u8907\u6570\u884c\u3082OK {# { % for item in list % } { % endfor % } #}","title":"\u30b3\u30e1\u30f3\u30c8"},{"location":"Ansible/jinja2/#lookup","text":"playbook\u7b49\u3067\u66f8\u304f\u3068\u304d\u3068\u540c\u3058\u8981\u9818\u3067\u8a18\u8ff0\u53ef\u80fd {{ lookup ( 'pipe' , 'date +%s' ) }}","title":"lookup\u30d7\u30e9\u30b0\u30a4\u30f3\u5b9f\u884c"},{"location":"Ansible/jinja2/#_8","text":"","title":"\u6307\u5b9a\u90e8\u5206\u3078\u306e\u30d5\u30a3\u30eb\u30bf\u306e\u5b9f\u884c"},{"location":"Ansible/jinja2/#indent","text":"{% filter indent (4, true ) %} {{ sample_string }} {% endfilter %} --- - hosts : localhost gather_facts : false vars : sample_string : | int main() { return 0; } tasks : - name : j2 saple template : src : indent_sample.txt.j2 dest : /var/tmp/indent_sample.txt \u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3001\u30b9\u30da\u30fc\u30b94\u6587\u5b57\u5206\u306e\u30a4\u30f3\u30c7\u30f3\u30c8\u304c\u5165\u308b\u3002 int main() { return 0; }","title":"indent()"},{"location":"Ansible/lint/","text":"Ansible Lint install $ pip install ansible-lint ==4 .3.7 sample --- - hosts : localhost gather_facts : false vars : value : hello tasks : - name : print result debug : msg : \"{{ value}}\" \"{{ value }}\" \u306e\u53c2\u7167\u3068\u3001\u3042\u3068 tasks \u306e\u524d\u306e\u884c\u306f\u7a7a\u884c\u3067\u306a\u304f2\u6587\u5b57\u30b9\u30da\u30fc\u30b9\u304c\u5165\u3063\u3066\u3044\u308b\u72b6\u614b\u3002 $ ansible-lint sample.yml WARNING Listing 2 violation(s) that are fatal [201] Trailing whitespace sample.yml:6 [206] Variables should have spaces before and after: {{ var_name }} sample.yml:10 msg: \"{{ value}}\" You can skip specific rules or tags by adding them to your configuration file: \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 # .ansible-lint \u2502 \u2502 warn_list: # or 'skip_list' to silence them completely \u2502 \u2502 - '201' # Trailing whitespace \u2502 \u2502 - '206' # Variables should have spaces before and after: {{ var_name }} \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u3082\u3057\u304f\u306f -p \u3092\u4ed8\u3051\u3066 $ ansible-lint sample.yml -p WARNING Listing 2 violation(s) that are fatal sample.yml:6: [E201] Trailing whitespace sample.yml:10: [E206] Variables should have spaces before and after: {{ var_name }} You can skip specific rules or tags by adding them to your configuration file: \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 # .ansible-lint \u2502 \u2502 warn_list: # or 'skip_list' to silence them completely \u2502 \u2502 - '201' # Trailing whitespace \u2502 \u2502 - '206' # Variables should have spaces before and after: {{ var_name }} \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518","title":"Ansible Lint"},{"location":"Ansible/lint/#ansible-lint","text":"","title":"Ansible Lint"},{"location":"Ansible/lint/#install","text":"$ pip install ansible-lint ==4 .3.7","title":"install"},{"location":"Ansible/lint/#sample","text":"--- - hosts : localhost gather_facts : false vars : value : hello tasks : - name : print result debug : msg : \"{{ value}}\" \"{{ value }}\" \u306e\u53c2\u7167\u3068\u3001\u3042\u3068 tasks \u306e\u524d\u306e\u884c\u306f\u7a7a\u884c\u3067\u306a\u304f2\u6587\u5b57\u30b9\u30da\u30fc\u30b9\u304c\u5165\u3063\u3066\u3044\u308b\u72b6\u614b\u3002 $ ansible-lint sample.yml WARNING Listing 2 violation(s) that are fatal [201] Trailing whitespace sample.yml:6 [206] Variables should have spaces before and after: {{ var_name }} sample.yml:10 msg: \"{{ value}}\" You can skip specific rules or tags by adding them to your configuration file: \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 # .ansible-lint \u2502 \u2502 warn_list: # or 'skip_list' to silence them completely \u2502 \u2502 - '201' # Trailing whitespace \u2502 \u2502 - '206' # Variables should have spaces before and after: {{ var_name }} \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u3082\u3057\u304f\u306f -p \u3092\u4ed8\u3051\u3066 $ ansible-lint sample.yml -p WARNING Listing 2 violation(s) that are fatal sample.yml:6: [E201] Trailing whitespace sample.yml:10: [E206] Variables should have spaces before and after: {{ var_name }} You can skip specific rules or tags by adding them to your configuration file: \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 # .ansible-lint \u2502 \u2502 warn_list: # or 'skip_list' to silence them completely \u2502 \u2502 - '201' # Trailing whitespace \u2502 \u2502 - '206' # Variables should have spaces before and after: {{ var_name }} \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518","title":"sample"},{"location":"Ansible/lookup/","text":"Lookup\u30d7\u30e9\u30b0\u30a4\u30f3 Lookup Plugins \u2014 Ansible Documentation Jinja2\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u66f8\u5f0f\u3068\u9023\u643a\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u53c2\u7167\u3084\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u306a\u3069\u5916\u90e8\u30ea\u30bd\u30fc\u30b9\u3092\u5229\u7528\u3067\u304d\u308b\u3002 \u8a55\u4fa1\u3055\u308c\u308b\u306e\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30ce\u30fc\u30c9\u4e0a\u3067\u3042\u3063\u3066\u3001\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306e\u30d5\u30a1\u30a4\u30eb\u3084\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3067\u306f\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u3002 task\u30921\u500b\u6d88\u8cbb\u305b\u305a\u306b\u30a4\u30f3\u30e9\u30a4\u30f3\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u30ed\u30fc\u30c9\u3057\u305f\u308a\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3057\u305f\u308a\u3067\u304d\u308b\u306e\u3067\u4fbf\u5229 \u30d5\u30a1\u30a4\u30eb - name : load ssh public key vars : pubkey : \"{{ lookup('file', '~/.ssh/id_rsa.pub') }}\" debug : msg : \"{{ pubkey }}\" ansible-playbook \u306e\u5b9f\u884c\u30e6\u30fc\u30b6\u306e ~/.ssh/id_rsa.pub \u306e\u5185\u5bb9\u3092\u8aad\u307f\u8fbc\u3093\u3060\u5185\u5bb9\u304c pubkey \u306b\u30bb\u30c3\u30c8\u3055\u308c\u308b\u3002 \u74b0\u5883\u5909\u6570 - name : env lookup debug : msg : \"{{ lookup('env', 'HOSTNAME') }}\" \u74b0\u5883\u5909\u6570 HOSTNAME \u3092\u53d6\u5f97\u3059\u308b\u3002 \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30ce\u30fc\u30c9\u3067\u306e\u8a55\u4fa1\u7d50\u679c\u306b\u306a\u308b\u306e\u3067\u3001\u3069\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306etask\u306e\u5b9f\u884c\u3067\u3082\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30ce\u30fc\u30c9\u306e\u30db\u30b9\u30c8\u540d\u306b\u306a\u308b\u3002 \u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306e\u60c5\u5831\u304c\u6b32\u3057\u3044\u5834\u5408\u306f\u3001 gather_facts: true \u3067fact\u60c5\u5831\u3092\u53c2\u7167\u3059\u308b\u3002 ansible-sample/env.yml at master \u00b7 zaki-lknr/ansible-sample \u30b3\u30de\u30f3\u30c9\u5b9f\u884c - name : get date vars : current_date : \"{{ lookup('pipe', 'date +%Y/%m/%d_%H:%M:%S') }}\" # https://docs.ansible.com/ansible/latest/collections/ansible/builtin/pipe_lookup.html # pipe\u3092\u4f7f\u3046\u3068\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u7d50\u679c\u3092\u53d6\u5f97\u3067\u304d\u308b debug : msg : - \"{{ current_date }}\" \u30d1\u30b9\u30ef\u30fc\u30c9\u6587\u5b57\u5217\u751f\u6210 ansible.builtin.password \u2013 retrieve or generate a random password, stored in a file \u2014 Ansible Documentation tasks : - name : create password debug : msg : \"{{ lookup('password', '/var/tmp/ansible-work/password') }}\" \u5b9f\u884c\u7d50\u679c\u306f TASK [create password] ************************* ok : [localhost] => msg : Uk .9 vigyP2IlQn2q4620 /var/tmp/ansible-work/password \u306e\u4e2d\u8eab\u306f $ cat /var/tmp/ansible-work/password Uk.9vigyP2IlQn2q4620 \u304c\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3051\u308c\u3070\u65b0\u898f\u306b\u4f5c\u6210\u3055\u308c\u308b\u3002 \u30d5\u30a1\u30a4\u30eb\u304c\u65e2\u306b\u5b58\u5728\u3059\u308b\u5834\u5408\u306f\u300c\u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u300d\u304c\u8fd4\u308b\u3002(\u306e\u3067\u3001\u518d\u5b9f\u884c\u3059\u308b\u3068\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u304c\u53d6\u5f97\u3055\u308c\u308b) \u5b9f\u884c\u306e\u305f\u3073\u306b\u7570\u306a\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u751f\u6210\u3059\u308b\u306e\u3067\u3042\u308c\u3070\u3001 /dev/null \u3092\u6307\u5b9a\u3059\u308b - hosts : localhost gather_facts : false vars : create_password : \"{{ lookup('password', '/dev/null') }}\" tasks : - name : create password (1) debug : msg : \"{{ create_password }}\" - name : create password (2) debug : msg : \"{{ create_password }}\" \u5b9f\u884c\u7d50\u679c TASK [create password] ************************************************** ok : [localhost] => msg : sw : oDzMrVtdxy0aOdsEw TASK [create password] ************************************************** ok : [localhost] => msg : 9 imT.elnUhq1.GpALpX3 \u3053\u308c\u3060\u3068\u751f\u6210\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u3001 set_fact \u3067\u4e00\u5ea6\u4f5c\u6210\u6e08\u307f\u306b\u3057\u3066\u3001\u305d\u308c\u3092\u4f7f\u3046\u3088\u3046\u306b\u3059\u308c\u3070\u3001\u300c\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\u300d\u3068\u300c\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30b9\u30c8\u30a2\u300d\u3092\u81ea\u524d\u3067\u7ba1\u7406\u3067\u304d\u308b\u3002 - name: create password set_fact: password: \" {{ create_password }} \" - name: print password debug: msg: \" {{ password }} \" -v \u3064\u3051\u3066\u5b9f\u884c\u3059\u308c\u3070\u4ee5\u4e0b\u306e\u901a\u308a\u3002 TASK [create password] ************************************************** ok : [localhost] => changed = false ansible_facts : password : - StMaxh9fmrGIkMYj_qJ TASK [print password] ************************************************** ok : [localhost] => msg : - StMaxh9fmrGIkMYj_qJ HTTP\u30a2\u30af\u30bb\u30b9\u3059\u308b - name : url lookup plugin vars : response : \"{{ lookup('url', 'https://www.jma.go.jp/bosai/forecast/data/overview_forecast/130000.json') }}\" debug : # msg: \"{{ lookup('url', 'https://www.jma.go.jp/bosai/forecast/data/overview_forecast/130000.json', wantlist=true) }}\" msg : \"{{ response.text }}\" basic\u8a8d\u8a3c\u3059\u308b\u306a\u3089 \"{{ lookup('ansible.builtin.url', 'http://www.example.org/path/to/basicauth/file', username='user', password='pass') }}\" \u3053\u3093\u306a\u611f\u3058","title":"Lookup\u30d7\u30e9\u30b0\u30a4\u30f3"},{"location":"Ansible/lookup/#lookup","text":"Lookup Plugins \u2014 Ansible Documentation Jinja2\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u66f8\u5f0f\u3068\u9023\u643a\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u53c2\u7167\u3084\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u306a\u3069\u5916\u90e8\u30ea\u30bd\u30fc\u30b9\u3092\u5229\u7528\u3067\u304d\u308b\u3002 \u8a55\u4fa1\u3055\u308c\u308b\u306e\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30ce\u30fc\u30c9\u4e0a\u3067\u3042\u3063\u3066\u3001\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306e\u30d5\u30a1\u30a4\u30eb\u3084\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3067\u306f\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u3002 task\u30921\u500b\u6d88\u8cbb\u305b\u305a\u306b\u30a4\u30f3\u30e9\u30a4\u30f3\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u30ed\u30fc\u30c9\u3057\u305f\u308a\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3057\u305f\u308a\u3067\u304d\u308b\u306e\u3067\u4fbf\u5229","title":"Lookup\u30d7\u30e9\u30b0\u30a4\u30f3"},{"location":"Ansible/lookup/#_1","text":"- name : load ssh public key vars : pubkey : \"{{ lookup('file', '~/.ssh/id_rsa.pub') }}\" debug : msg : \"{{ pubkey }}\" ansible-playbook \u306e\u5b9f\u884c\u30e6\u30fc\u30b6\u306e ~/.ssh/id_rsa.pub \u306e\u5185\u5bb9\u3092\u8aad\u307f\u8fbc\u3093\u3060\u5185\u5bb9\u304c pubkey \u306b\u30bb\u30c3\u30c8\u3055\u308c\u308b\u3002","title":"\u30d5\u30a1\u30a4\u30eb"},{"location":"Ansible/lookup/#_2","text":"- name : env lookup debug : msg : \"{{ lookup('env', 'HOSTNAME') }}\" \u74b0\u5883\u5909\u6570 HOSTNAME \u3092\u53d6\u5f97\u3059\u308b\u3002 \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30ce\u30fc\u30c9\u3067\u306e\u8a55\u4fa1\u7d50\u679c\u306b\u306a\u308b\u306e\u3067\u3001\u3069\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306etask\u306e\u5b9f\u884c\u3067\u3082\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30ce\u30fc\u30c9\u306e\u30db\u30b9\u30c8\u540d\u306b\u306a\u308b\u3002 \u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306e\u60c5\u5831\u304c\u6b32\u3057\u3044\u5834\u5408\u306f\u3001 gather_facts: true \u3067fact\u60c5\u5831\u3092\u53c2\u7167\u3059\u308b\u3002 ansible-sample/env.yml at master \u00b7 zaki-lknr/ansible-sample","title":"\u74b0\u5883\u5909\u6570"},{"location":"Ansible/lookup/#_3","text":"- name : get date vars : current_date : \"{{ lookup('pipe', 'date +%Y/%m/%d_%H:%M:%S') }}\" # https://docs.ansible.com/ansible/latest/collections/ansible/builtin/pipe_lookup.html # pipe\u3092\u4f7f\u3046\u3068\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u7d50\u679c\u3092\u53d6\u5f97\u3067\u304d\u308b debug : msg : - \"{{ current_date }}\"","title":"\u30b3\u30de\u30f3\u30c9\u5b9f\u884c"},{"location":"Ansible/lookup/#_4","text":"ansible.builtin.password \u2013 retrieve or generate a random password, stored in a file \u2014 Ansible Documentation tasks : - name : create password debug : msg : \"{{ lookup('password', '/var/tmp/ansible-work/password') }}\" \u5b9f\u884c\u7d50\u679c\u306f TASK [create password] ************************* ok : [localhost] => msg : Uk .9 vigyP2IlQn2q4620 /var/tmp/ansible-work/password \u306e\u4e2d\u8eab\u306f $ cat /var/tmp/ansible-work/password Uk.9vigyP2IlQn2q4620 \u304c\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3051\u308c\u3070\u65b0\u898f\u306b\u4f5c\u6210\u3055\u308c\u308b\u3002 \u30d5\u30a1\u30a4\u30eb\u304c\u65e2\u306b\u5b58\u5728\u3059\u308b\u5834\u5408\u306f\u300c\u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u300d\u304c\u8fd4\u308b\u3002(\u306e\u3067\u3001\u518d\u5b9f\u884c\u3059\u308b\u3068\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u304c\u53d6\u5f97\u3055\u308c\u308b) \u5b9f\u884c\u306e\u305f\u3073\u306b\u7570\u306a\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u751f\u6210\u3059\u308b\u306e\u3067\u3042\u308c\u3070\u3001 /dev/null \u3092\u6307\u5b9a\u3059\u308b - hosts : localhost gather_facts : false vars : create_password : \"{{ lookup('password', '/dev/null') }}\" tasks : - name : create password (1) debug : msg : \"{{ create_password }}\" - name : create password (2) debug : msg : \"{{ create_password }}\" \u5b9f\u884c\u7d50\u679c TASK [create password] ************************************************** ok : [localhost] => msg : sw : oDzMrVtdxy0aOdsEw TASK [create password] ************************************************** ok : [localhost] => msg : 9 imT.elnUhq1.GpALpX3 \u3053\u308c\u3060\u3068\u751f\u6210\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u3001 set_fact \u3067\u4e00\u5ea6\u4f5c\u6210\u6e08\u307f\u306b\u3057\u3066\u3001\u305d\u308c\u3092\u4f7f\u3046\u3088\u3046\u306b\u3059\u308c\u3070\u3001\u300c\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\u300d\u3068\u300c\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30b9\u30c8\u30a2\u300d\u3092\u81ea\u524d\u3067\u7ba1\u7406\u3067\u304d\u308b\u3002 - name: create password set_fact: password: \" {{ create_password }} \" - name: print password debug: msg: \" {{ password }} \" -v \u3064\u3051\u3066\u5b9f\u884c\u3059\u308c\u3070\u4ee5\u4e0b\u306e\u901a\u308a\u3002 TASK [create password] ************************************************** ok : [localhost] => changed = false ansible_facts : password : - StMaxh9fmrGIkMYj_qJ TASK [print password] ************************************************** ok : [localhost] => msg : - StMaxh9fmrGIkMYj_qJ","title":"\u30d1\u30b9\u30ef\u30fc\u30c9\u6587\u5b57\u5217\u751f\u6210"},{"location":"Ansible/lookup/#http","text":"- name : url lookup plugin vars : response : \"{{ lookup('url', 'https://www.jma.go.jp/bosai/forecast/data/overview_forecast/130000.json') }}\" debug : # msg: \"{{ lookup('url', 'https://www.jma.go.jp/bosai/forecast/data/overview_forecast/130000.json', wantlist=true) }}\" msg : \"{{ response.text }}\" basic\u8a8d\u8a3c\u3059\u308b\u306a\u3089 \"{{ lookup('ansible.builtin.url', 'http://www.example.org/path/to/basicauth/file', username='user', password='pass') }}\" \u3053\u3093\u306a\u611f\u3058","title":"HTTP\u30a2\u30af\u30bb\u30b9\u3059\u308b"},{"location":"Ansible/module/","text":"\u30e2\u30b8\u30e5\u30fc\u30eb setup ansible.builtin.setup \u2013 Gathers facts about remote hosts \u2014 Ansible Documentation facts\u5909\u6570\u3092\u53ce\u96c6\u3059\u308b\u3002 ad-hoc\u3067\u5b9f\u884c\u3059\u308b\u65b9\u304c\u591a\u3044\u304b\u3082\uff1f $ ansible -i inventory.ini all -m setup assert ansible.builtin.assert \u2013 Asserts given expressions are true \u2014 Ansible Documentation - name : assert sample vars : hoge : \"zzz\" foo : \"bar\" baz : False ansible.builtin.assert : that : - \"hoge is defined\" - foo is defined - baz is defined and baz fail_msg : \"'hoge','bar' must be defined, 'baz' must be true\" register : assert_result that \u3067\u6307\u5b9a\u3057\u305f\u5404\u5024\u304ctrue\u3067\u306a\u3051\u308c\u3070\u30bf\u30b9\u30af\u304c\u5931\u6557\u3059\u308b\u3002 \u5909\u6570\u3067\u306f\u306a\u304f\u6587\u5b57\u5217\u3067\u6307\u5b9a\u3059\u308b\u306e\u3067\u3001 : \u3092\u542b\u3080\u6587\u5b57\u306fYAML\u306e\u30ad\u30fc\u3068\u3057\u3066parse\u3055\u308c\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u30c0\u30d6\u30eb\u30af\u30a9\u30fc\u30c8\u306a\u3069\u3067\u56f2\u3080\u5fc5\u8981\u304c\u3042\u308b\u3002 - name : assert ansible.builtin.assert : that : - 'sample_text | regex_search(\"could not found: foobar\")' lineinfile ansible.builtin.lineinfile \u2013 Manage lines in text files \u2014 Ansible Documentation lineinfile : path : lineinfile.txt regexp : '^port: 80' line : 'port: 8080' lineinfile.txt\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u306e ^port: 80 \u306b \u6700\u5f8c\u306b \u30de\u30c3\u30c1\u3059\u308b\u884c\u3092 port: 8080 \u306b\u5909\u66f4\u3002 port: 8080 \u304c\u6709\u308b\u5834\u5408\u306f\u3001\u4ed6\u306b ^port: 80 \u306b\u30de\u30c3\u30c1\u3057\u3066\u3082\u305d\u308c\u306f\u5bfe\u8c61\u5916\u3002 \u6700\u521d\u306b \u30de\u30c3\u30c1\u3059\u308b\u884c\u3092\u5bfe\u8c61\u306b\u3059\u308b\u5834\u5408\u306f firstmatch: true \u3092\u6307\u5b9a\u3002 \u30d5\u30a1\u30a4\u30eb\u5185\u306b\u30de\u30c3\u30c1\u3059\u308b\u884c\u304c\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30d5\u30a1\u30a4\u30eb\u672b\u5c3e\u306b\u8ffd\u8a18\u3055\u308c\u308b\u3002 \u30d5\u30a1\u30a4\u30eb\u672b\u5c3e\u4ee5\u5916\u306b\u8ffd\u8a18\u3057\u305f\u3044\u5834\u5408\u306f\u3001 insertafter \u307e\u305f\u306f insertbefore \u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u6307\u5b9a\u884c\u76f4\u4e0b\u30fb\u307e\u305f\u306f\u76f4\u524d\u306b\u633f\u5165\u3067\u304d\u308b\u3002 insertafter \u3068 insertbefore \u306f\u6307\u5b9a\u3067\u304d\u308b\u306e\u306f\u3069\u3061\u3089\u304b\u7247\u65b9\u3002(\u4e21\u65b9\u540c\u6642\u6307\u5b9a\u306f\u4e0d\u53ef) blockinfile ansible.builtin.blockinfile \u2013 Insert/update/remove a text block surrounded by marker lines \u2014 Ansible Documentation \u30de\u30fc\u30ab\u30fc\u884c\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u3001\u300c\u30d5\u30a1\u30a4\u30eb\u5185\u4e00\u756a\u672b\u5c3e\u306e\u958b\u59cb\u30de\u30fc\u30ab\u30fc\u30fb\u7d42\u4e86\u30de\u30fc\u30ab\u30fc\u300d\u306e\u9593\u304c\u51e6\u7406\u5bfe\u8c61\u306b\u306a\u3063\u305f\u3002(ansible 2.10 / ansible 2.11\u3067\u78ba\u8a8d) # /share/www configure begin 1 # /share/www configure end # /share/www configure begin 2 # /share/www configure end <IfModule dir_module> DirectoryIndex index.html </IfModule> # /share/www configure begin 3 # /share/www configure end \u3053\u3093\u306a\u5165\u529b\u30d5\u30a1\u30a4\u30eb\u306b\u5bfe\u3057\u3066 - name : blockinfile sample blockinfile : path : blockinfile-test.txt marker_begin : begin marker_end : end marker : '# /share/www configure {mark}' block : | ... \u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u66f4\u65b0\u3055\u308c\u308b\u306e\u306f 3 \u306e\u90e8\u5206\u306e\u307f\u3002 (\u8907\u6570\u306ebegin\u884c\u304c\u3042\u308b\u5834\u5408\u306f\u6700\u5f8c\u306e\u3082\u306e\u304c\u4f7f\u7528\u3055\u308c\u308b) \u5165\u529b\u30d5\u30a1\u30a4\u30eb\u304c\u4ee5\u4e0b\u306e\u5834\u5408\u306f\u3001 1 \u304b\u3089 3 \u307e\u3067\u306e\u7bc4\u56f2\u304c\u66f4\u65b0\u3055\u308c\u308b\u3002 (end\u884c\u3082\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u6700\u5f8c\u306e\u3082\u306e\u304c\u4f7f\u7528\u3055\u308c\u308b) # /share/www configure begin 1 # /share/www configure end 2 # /share/www configure end <IfModule dir_module> DirectoryIndex index.html </IfModule> 3 # /share/www configure end \u3053\u308c\u306a\u3089\u4e00\u5ea6\u3067\u78ba\u304b\u3081\u3089\u308c\u305f\u3002 \u2193\u306e\u30d5\u30a1\u30a4\u30eb\u306a\u3089\u3001blockinfile\u304c\u66f4\u65b0\u3059\u308b\u306e\u306f 3 \u304b\u3089 5 \u307e\u3067\u3002 # /share/www configure begin 1 # /share/www configure begin 2 # /share/www configure begin 3 # /share/www configure end <IfModule dir_module> DirectoryIndex index.html </IfModule> 4 # /share/www configure end 5 # /share/www configure end replace ansible.builtin.replace \u2013 Replace all instances of a particular string in a file using a back-referenced regular expression \u2014 Ansible Documentation after / before \u3067\u300c\u3053\u3053\u304b\u3089\u3053\u3053\u307e\u3067\u306e\u9593\u300d\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002 - name : replace sample replace : path : duplicate-test.txt regexp : ^[0-9]+$ replace : zzz after : '# /share/www configure begin' before : '# /share/www configure end' \u5165\u529b\u30d5\u30a1\u30a4\u30eb\u304c\u2193\u306e\u3088\u3046\u306b\u8907\u6570\u30de\u30c3\u30c1\u3059\u308b\u5834\u5408\u306f # /share/www configure begin 1 # /share/www configure begin 2 # /share/www configure begin 3 # /share/www configure end <IfModule dir_module> DirectoryIndex index.html </IfModule> 4 # /share/www configure end 5 # /share/www configure end 1 \u304b\u3089 3 \u307e\u3067\u304c\u5bfe\u8c61\u3060\u3063\u305f\u3002( after \u3082 before \u3082\u6700\u521d\u306b\u30de\u30c3\u30c1\u3057\u305f\u90e8\u5206\u304c\u5bfe\u8c61) redhat_subscription community.general.redhat_subscription \u2013 Manage registration and subscriptions to RHSM using the subscription-manager command \u2014 Ansible Documentation RHEL\u306e\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u5272\u308a\u5f53\u3066\u3092\u884c\u3046\u3002 \u958b\u767a\u8005\u30e9\u30a4\u30bb\u30f3\u30b9\u306a\u3089\u30d7\u30fc\u30ebID\u306f1\u500b\u3057\u304b\u306a\u3044\u306e\u3067 - name : subscription community.general.redhat_subscription : state : present username : \"{{ rh_username }}\" password : \"{{ rh_password }}\" auto_attach : true \u3067\u3059\u3079\u3066\u5b8c\u4e86\u3059\u308b\u3002 \u5236\u9650\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u74b0\u5883\u306eRHEL7\u3067proxy\u7d4c\u7531\u3067\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u767b\u9332\u3068Docker\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb - zaki work log \u3053\u308c\u3067\u3044\u3046\u3068 subscription-manager register \u3057\u3066 subscription-manager attach --pool=**** \u307e\u3067\u7d42\u308f\u3063\u305f\u72b6\u614b\u306b\u306a\u308b\u3002 alternatives community.general.alternatives \u2013 Manages alternative programs for common commands \u2014 Ansible Documentation community.general.alternatives \u3067 alternatives \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u305f\u30b3\u30de\u30f3\u30c9\u5207\u308a\u66ff\u3048\u8a2d\u5b9a\u3092\u884c\u3046\u3002 - name : alternatives python community.general.alternatives : name : python link : /usr/bin/python path : /usr/bin/python3 become : true \u3053\u308c\u3067\u3001 /usr/bin/python -> /etc/alternatives/python -> /usr/bin/python3 \u3078\u306e\u30ea\u30f3\u30af\u304c python \u3068\u3044\u3046\u540d\u524d\u3067\u767b\u9332\u3055\u308c\u308b\u3002 \u30b3\u30de\u30f3\u30c9\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u3068\u540c\u7b49\u3002 ( priority \u306f\u30c7\u30d5\u30a9\u30eb\u30c850) # update-alternatives --install /usr/bin/python python /usr/bin/python3 50 \u30d1\u30c3\u30b1\u30fc\u30b8 dnf CentOS7(yum\u74b0\u5883)\u306b\u4f7f\u3048\u308b\uff1f => NG fatal: [cloud - dev]: FAILED ! => changed = false msg: Could not import the dnf python module using / usr / bin / python ( 2.7.5 (default, Nov 16 2020 , 22 : 23 : 17 ) [GCC 4.8.5 20150623 (Red Hat 4.8.5-44 )]) . Please install ` python3 - dnf ` or ` python2 - dnf ` package or ensure you have specified the correct ansible_python_interpreter . (attempted [ '/usr/libexec/platform-python' , '/usr/bin/python3' , '/usr/bin/python2' , '/usr/bin/python' ]) results: [] \u305f\u3060\u3057\u3001CentOS7\u3067 sudo yum install python2-dnf \u3092\u5165\u308c\u308b\u3068\u52d5\u304f\u3002 dnf\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001CentOS7\u4e0a\u3067 rpm -qa \u3068\u304b\u3057\u3066\u3082\u78ba\u8a8d\u3067\u304d\u308b\u3002 yum Fedora34 / RHEL8\u306b\u4f7f\u3048\u308b\uff1f => OK apt_repository - name : add apt repository ansible.builtin.apt_repository : repo : deb [arch=arm64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu focal stable filename : docker \u3053\u308c\u3067\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002 $ cat /etc/apt/sources.list.d/docker.list deb [arch=arm64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu focal stable \u3053\u306e\u3068\u304d\u3001 /etc/apt/sources.list.d/docker.list \u4ee5\u5916\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3067\u306b\u540c\u3058\u8a2d\u5b9a\u304c\u3042\u308b\u5834\u5408\u306f docker.list \u306f\u4f5c\u6210\u3055\u308c\u305a\u306b ok \u3068\u306a\u308b\u3002 \u30d5\u30a1\u30a4\u30eb \u30e2\u30fc\u30c9 - name : create file file : path : /var/tmp/file_permission mode : \"0755\" state : directory \u3053\u308c\u306a\u3089 $ ll -d /var/tmp/file_permission/ drwxr-xr-x. 2 zaki zaki 6 7\u6708 31 10:27 /var/tmp/file_permission/ mode \u5b9f\u4f53 \"0755\" (str) drwxr-xr-x 0755 (int) drwxr-xr-x \"755\" (str) drwxr-xr-x 755 (int) d-wxrw--wt 755 \u306b\u3059\u308b\u3068\u300110\u9032\u6570\u306e755\u5165\u529b\u30928\u9032\u6570\u3068\u89e3\u91c8\u3057 1363 \u3068\u3057\u3066\u30e2\u30fc\u30c9\u8a2d\u5b9a\u3055\u308c\u308b\u52d5\u4f5c\u306b\u306a\u308b\u3002 \u30e2\u30fc\u30c9\u8a2d\u5b9a\u306f8\u9032\u6570\u306e\u6570\u5024\u304b\u6587\u5b57\u5217\u578b\u306e\u6570\u5024\u304c\u5165\u529b\u306a\u306e\u3068\u3001\u5148\u982d\u30bc\u30ed\u306e\u6570\u5024\u306f8\u9032\u6570\u3068\u3057\u3066YAML\u304c\u89e3\u91c8\u3059\u308b\u306e\u3067\u3001\u5148\u982d\u30bc\u30ed\u3092\u4ed8\u3051\u305a\u306bint\u306e\u6570\u5024\u3092\u6307\u5b9a\u3059\u308b\u3068\u60f3\u5b9a\u5916\u306e\u52d5\u4f5c\u306b\u306a\u308b\u3002 fetch \u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30ce\u30fc\u30c9\u3078\u30b3\u30d4\u30fc\u3059\u308b\u3002 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u4e0d\u53ef\u3002( src \u306e\u30d1\u30b9\u304c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5834\u5408\u306f\u5931\u6557\u3059\u308b) fatal: [fedora-node]: FAILED! => changed=false file: /home/zaki/src/docker-images/ msg: remote file is a directory, fetch cannot work on directories \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306esrc\u30d1\u30e9\u30e1\u30bf\u306e\u9805 \u306b\u3082\u8a18\u8f09\u3042\u308a\u3002 This must be a file, not a directory. fetch\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u4f7f\u3044\u65b9\u5168\u822c\u306f\u306f\u3066\u30d6\u306b\u66f8\u3044\u305f\u3002 [Ansible] fetch\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u30ea\u30e2\u30fc\u30c8\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u30ce\u30fc\u30c9\u3078\u8ee2\u9001\u30fb\u96c6\u7d04\u3059\u308b - zaki work log make /path/to/awx-operator \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4e0a\u3067 make deploy IMG=zakihmkc/awx-operator:0.17.0 \u3092\u5b9f\u884c\u3059\u308b\u30bf\u30b9\u30af\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u306e\u901a\u308a\u3002 - name : deploy awx-operator community.general.make : chdir : /path/to/awx-operator target : deploy params : IMG : zakihmkc/awx-operator:0.17.0 \u30bf\u30fc\u30b2\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u6e08\u307f\u3067 make \u304c\u4f55\u3082\u51e6\u7406\u3057\u306a\u3044\u5834\u5408\u306f\u3001\u5b9f\u884c\u30b9\u30c6\u30fc\u30bf\u30b9\u306f ok \u3068\u306a\u308b\u3002 meta \u518d\u63a5\u7d9a \u305f\u3068\u3048\u3070\u3001OS\u30e6\u30fc\u30b6\u30fc\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u66f4\u65b0\u3057\u305f\u5834\u5408\u3001\u901a\u5e38\u3067\u3042\u308c\u3070\u30ed\u30b0\u30a4\u30f3\u3057\u76f4\u3055\u306a\u3051\u308c\u3070\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u306a\u3044\u3002 Ansible\u3082\u540c\u69d8\u3067\u3001\u30bf\u30b9\u30af\u3067\u30b0\u30eb\u30fc\u30d7\u306e\u66f4\u65b0\u3092\u884c\u3063\u3066\u3082\u3001\u5f8c\u7d9a\u306e\u30bf\u30b9\u30af\u306f\u63a5\u7d9a\u304c\u7dad\u6301\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u66f4\u65b0\u3055\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u306e\u72b6\u614b\u3067\u30bf\u30b9\u30af\u304c\u5b9f\u884c\u3055\u308c\u306a\u3044\u3002 \u3053\u306e\u5834\u5408\u3001 meta\u30e2\u30b8\u30e5\u30fc\u30eb \u306e reset_connection \u3092\u4f7f\u3063\u3066\u518d\u63a5\u7d9a\u3092\u884c\u3044\u3001\u5909\u66f4\u3092\u53cd\u6620\u3057\u3066\u5f8c\u7d9a\u306e\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3067\u304d\u308b\u3002 - name : \u30b0\u30eb\u30fc\u30d7\u3092\u5909\u66f4\u3059\u308b\u30bf\u30b9\u30af ... - name : refresh connection ansible.builtin.meta : reset_connection - name : \u5909\u66f4\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u524d\u63d0\u306e\u30bf\u30b9\u30af ... play\u306e\u7d42\u4e86 \u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u304a\u3051\u308b exit(0) \u307f\u305f\u3044\u306a\u3084\u3064\u3002 \u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067play\u3092\u6b63\u5e38\u7d42\u4e86\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002 tasks : - name : task1 debug : msg : task1 - name : task2 debug : msg : task2 - name : end play ansible.builtin.meta : end_play - name : task3 debug : msg : task3 \u3053\u306eplaybook\u306e\u5185\u5bb9\u3067Ansible\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u901a\u308atask3\u306f\u5b9f\u884c\u3055\u308c\u305a\u306b\u7d42\u4e86\u3059\u308b\u3002 PLAY [localhost] **************************************************************** TASK [task1] ******************************************************************** ok: [localhost] => msg: task1 TASK [task2] ******************************************************************** ok: [localhost] => msg: task2 TASK [end play] ***************************************************************** PLAY RECAP ********************************************************************** localhost : ok=2 changed=0 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0 Docker push image docker_image \u3092\u4f7f\u7528\u3057\u30d1\u30e9\u30e1\u30bf\u306b push: true \u3092\u6307\u5b9a\u3002 - name : push container image community.docker.docker_image : name : quay.io/ansible/awx-ee repository : zakihmkc/awx-ee:0.6.0 push : true source : local \u3053\u306e\u30bf\u30b9\u30af\u306e\u5834\u5408\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u306b\u3042\u308b quay.io/ansible/awx-ee \u30a4\u30e1\u30fc\u30b8\u3092Docker Hub\u3078 zakihmkc/awx-ee:0.6.0 \u3068\u3057\u3066 push \u3059\u308b\u3002 \u3053\u306e\u3068\u304d\u3001 zakihmkc/awx-ee:0.6.0 \u304c\u65e2\u306b\u30ed\u30fc\u30ab\u30eb\u306b\u3042\u308b\u5834\u5408\u306ftag\u306e\u4e0a\u66f8\u304d\u304c\u767a\u751f\u3057\u306a\u3044\u305f\u3081\u3001push\u3055\u308c\u306a\u3044\u3002\u3053\u3053\u3067push\u3057\u305f\u3044\u5834\u5408\u306f\u3001tag\u8a2d\u5b9a\u3092\u4e0a\u66f8\u304d\u3059\u308b force_tag: true \u3082\u8ffd\u52a0\u3059\u308b\u3002","title":"\u30e2\u30b8\u30e5\u30fc\u30eb"},{"location":"Ansible/module/#_1","text":"","title":"\u30e2\u30b8\u30e5\u30fc\u30eb"},{"location":"Ansible/module/#setup","text":"ansible.builtin.setup \u2013 Gathers facts about remote hosts \u2014 Ansible Documentation facts\u5909\u6570\u3092\u53ce\u96c6\u3059\u308b\u3002 ad-hoc\u3067\u5b9f\u884c\u3059\u308b\u65b9\u304c\u591a\u3044\u304b\u3082\uff1f $ ansible -i inventory.ini all -m setup","title":"setup"},{"location":"Ansible/module/#assert","text":"ansible.builtin.assert \u2013 Asserts given expressions are true \u2014 Ansible Documentation - name : assert sample vars : hoge : \"zzz\" foo : \"bar\" baz : False ansible.builtin.assert : that : - \"hoge is defined\" - foo is defined - baz is defined and baz fail_msg : \"'hoge','bar' must be defined, 'baz' must be true\" register : assert_result that \u3067\u6307\u5b9a\u3057\u305f\u5404\u5024\u304ctrue\u3067\u306a\u3051\u308c\u3070\u30bf\u30b9\u30af\u304c\u5931\u6557\u3059\u308b\u3002 \u5909\u6570\u3067\u306f\u306a\u304f\u6587\u5b57\u5217\u3067\u6307\u5b9a\u3059\u308b\u306e\u3067\u3001 : \u3092\u542b\u3080\u6587\u5b57\u306fYAML\u306e\u30ad\u30fc\u3068\u3057\u3066parse\u3055\u308c\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u30c0\u30d6\u30eb\u30af\u30a9\u30fc\u30c8\u306a\u3069\u3067\u56f2\u3080\u5fc5\u8981\u304c\u3042\u308b\u3002 - name : assert ansible.builtin.assert : that : - 'sample_text | regex_search(\"could not found: foobar\")'","title":"assert"},{"location":"Ansible/module/#lineinfile","text":"ansible.builtin.lineinfile \u2013 Manage lines in text files \u2014 Ansible Documentation lineinfile : path : lineinfile.txt regexp : '^port: 80' line : 'port: 8080' lineinfile.txt\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u306e ^port: 80 \u306b \u6700\u5f8c\u306b \u30de\u30c3\u30c1\u3059\u308b\u884c\u3092 port: 8080 \u306b\u5909\u66f4\u3002 port: 8080 \u304c\u6709\u308b\u5834\u5408\u306f\u3001\u4ed6\u306b ^port: 80 \u306b\u30de\u30c3\u30c1\u3057\u3066\u3082\u305d\u308c\u306f\u5bfe\u8c61\u5916\u3002 \u6700\u521d\u306b \u30de\u30c3\u30c1\u3059\u308b\u884c\u3092\u5bfe\u8c61\u306b\u3059\u308b\u5834\u5408\u306f firstmatch: true \u3092\u6307\u5b9a\u3002 \u30d5\u30a1\u30a4\u30eb\u5185\u306b\u30de\u30c3\u30c1\u3059\u308b\u884c\u304c\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30d5\u30a1\u30a4\u30eb\u672b\u5c3e\u306b\u8ffd\u8a18\u3055\u308c\u308b\u3002 \u30d5\u30a1\u30a4\u30eb\u672b\u5c3e\u4ee5\u5916\u306b\u8ffd\u8a18\u3057\u305f\u3044\u5834\u5408\u306f\u3001 insertafter \u307e\u305f\u306f insertbefore \u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u6307\u5b9a\u884c\u76f4\u4e0b\u30fb\u307e\u305f\u306f\u76f4\u524d\u306b\u633f\u5165\u3067\u304d\u308b\u3002 insertafter \u3068 insertbefore \u306f\u6307\u5b9a\u3067\u304d\u308b\u306e\u306f\u3069\u3061\u3089\u304b\u7247\u65b9\u3002(\u4e21\u65b9\u540c\u6642\u6307\u5b9a\u306f\u4e0d\u53ef)","title":"lineinfile"},{"location":"Ansible/module/#blockinfile","text":"ansible.builtin.blockinfile \u2013 Insert/update/remove a text block surrounded by marker lines \u2014 Ansible Documentation \u30de\u30fc\u30ab\u30fc\u884c\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u3001\u300c\u30d5\u30a1\u30a4\u30eb\u5185\u4e00\u756a\u672b\u5c3e\u306e\u958b\u59cb\u30de\u30fc\u30ab\u30fc\u30fb\u7d42\u4e86\u30de\u30fc\u30ab\u30fc\u300d\u306e\u9593\u304c\u51e6\u7406\u5bfe\u8c61\u306b\u306a\u3063\u305f\u3002(ansible 2.10 / ansible 2.11\u3067\u78ba\u8a8d) # /share/www configure begin 1 # /share/www configure end # /share/www configure begin 2 # /share/www configure end <IfModule dir_module> DirectoryIndex index.html </IfModule> # /share/www configure begin 3 # /share/www configure end \u3053\u3093\u306a\u5165\u529b\u30d5\u30a1\u30a4\u30eb\u306b\u5bfe\u3057\u3066 - name : blockinfile sample blockinfile : path : blockinfile-test.txt marker_begin : begin marker_end : end marker : '# /share/www configure {mark}' block : | ... \u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u66f4\u65b0\u3055\u308c\u308b\u306e\u306f 3 \u306e\u90e8\u5206\u306e\u307f\u3002 (\u8907\u6570\u306ebegin\u884c\u304c\u3042\u308b\u5834\u5408\u306f\u6700\u5f8c\u306e\u3082\u306e\u304c\u4f7f\u7528\u3055\u308c\u308b) \u5165\u529b\u30d5\u30a1\u30a4\u30eb\u304c\u4ee5\u4e0b\u306e\u5834\u5408\u306f\u3001 1 \u304b\u3089 3 \u307e\u3067\u306e\u7bc4\u56f2\u304c\u66f4\u65b0\u3055\u308c\u308b\u3002 (end\u884c\u3082\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u6700\u5f8c\u306e\u3082\u306e\u304c\u4f7f\u7528\u3055\u308c\u308b) # /share/www configure begin 1 # /share/www configure end 2 # /share/www configure end <IfModule dir_module> DirectoryIndex index.html </IfModule> 3 # /share/www configure end \u3053\u308c\u306a\u3089\u4e00\u5ea6\u3067\u78ba\u304b\u3081\u3089\u308c\u305f\u3002 \u2193\u306e\u30d5\u30a1\u30a4\u30eb\u306a\u3089\u3001blockinfile\u304c\u66f4\u65b0\u3059\u308b\u306e\u306f 3 \u304b\u3089 5 \u307e\u3067\u3002 # /share/www configure begin 1 # /share/www configure begin 2 # /share/www configure begin 3 # /share/www configure end <IfModule dir_module> DirectoryIndex index.html </IfModule> 4 # /share/www configure end 5 # /share/www configure end","title":"blockinfile"},{"location":"Ansible/module/#replace","text":"ansible.builtin.replace \u2013 Replace all instances of a particular string in a file using a back-referenced regular expression \u2014 Ansible Documentation after / before \u3067\u300c\u3053\u3053\u304b\u3089\u3053\u3053\u307e\u3067\u306e\u9593\u300d\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002 - name : replace sample replace : path : duplicate-test.txt regexp : ^[0-9]+$ replace : zzz after : '# /share/www configure begin' before : '# /share/www configure end' \u5165\u529b\u30d5\u30a1\u30a4\u30eb\u304c\u2193\u306e\u3088\u3046\u306b\u8907\u6570\u30de\u30c3\u30c1\u3059\u308b\u5834\u5408\u306f # /share/www configure begin 1 # /share/www configure begin 2 # /share/www configure begin 3 # /share/www configure end <IfModule dir_module> DirectoryIndex index.html </IfModule> 4 # /share/www configure end 5 # /share/www configure end 1 \u304b\u3089 3 \u307e\u3067\u304c\u5bfe\u8c61\u3060\u3063\u305f\u3002( after \u3082 before \u3082\u6700\u521d\u306b\u30de\u30c3\u30c1\u3057\u305f\u90e8\u5206\u304c\u5bfe\u8c61)","title":"replace"},{"location":"Ansible/module/#redhat_subscription","text":"community.general.redhat_subscription \u2013 Manage registration and subscriptions to RHSM using the subscription-manager command \u2014 Ansible Documentation RHEL\u306e\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u5272\u308a\u5f53\u3066\u3092\u884c\u3046\u3002 \u958b\u767a\u8005\u30e9\u30a4\u30bb\u30f3\u30b9\u306a\u3089\u30d7\u30fc\u30ebID\u306f1\u500b\u3057\u304b\u306a\u3044\u306e\u3067 - name : subscription community.general.redhat_subscription : state : present username : \"{{ rh_username }}\" password : \"{{ rh_password }}\" auto_attach : true \u3067\u3059\u3079\u3066\u5b8c\u4e86\u3059\u308b\u3002 \u5236\u9650\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u74b0\u5883\u306eRHEL7\u3067proxy\u7d4c\u7531\u3067\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u767b\u9332\u3068Docker\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb - zaki work log \u3053\u308c\u3067\u3044\u3046\u3068 subscription-manager register \u3057\u3066 subscription-manager attach --pool=**** \u307e\u3067\u7d42\u308f\u3063\u305f\u72b6\u614b\u306b\u306a\u308b\u3002","title":"redhat_subscription"},{"location":"Ansible/module/#alternatives","text":"community.general.alternatives \u2013 Manages alternative programs for common commands \u2014 Ansible Documentation community.general.alternatives \u3067 alternatives \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u305f\u30b3\u30de\u30f3\u30c9\u5207\u308a\u66ff\u3048\u8a2d\u5b9a\u3092\u884c\u3046\u3002 - name : alternatives python community.general.alternatives : name : python link : /usr/bin/python path : /usr/bin/python3 become : true \u3053\u308c\u3067\u3001 /usr/bin/python -> /etc/alternatives/python -> /usr/bin/python3 \u3078\u306e\u30ea\u30f3\u30af\u304c python \u3068\u3044\u3046\u540d\u524d\u3067\u767b\u9332\u3055\u308c\u308b\u3002 \u30b3\u30de\u30f3\u30c9\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u3068\u540c\u7b49\u3002 ( priority \u306f\u30c7\u30d5\u30a9\u30eb\u30c850) # update-alternatives --install /usr/bin/python python /usr/bin/python3 50","title":"alternatives"},{"location":"Ansible/module/#_2","text":"","title":"\u30d1\u30c3\u30b1\u30fc\u30b8"},{"location":"Ansible/module/#dnf","text":"CentOS7(yum\u74b0\u5883)\u306b\u4f7f\u3048\u308b\uff1f => NG fatal: [cloud - dev]: FAILED ! => changed = false msg: Could not import the dnf python module using / usr / bin / python ( 2.7.5 (default, Nov 16 2020 , 22 : 23 : 17 ) [GCC 4.8.5 20150623 (Red Hat 4.8.5-44 )]) . Please install ` python3 - dnf ` or ` python2 - dnf ` package or ensure you have specified the correct ansible_python_interpreter . (attempted [ '/usr/libexec/platform-python' , '/usr/bin/python3' , '/usr/bin/python2' , '/usr/bin/python' ]) results: [] \u305f\u3060\u3057\u3001CentOS7\u3067 sudo yum install python2-dnf \u3092\u5165\u308c\u308b\u3068\u52d5\u304f\u3002 dnf\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001CentOS7\u4e0a\u3067 rpm -qa \u3068\u304b\u3057\u3066\u3082\u78ba\u8a8d\u3067\u304d\u308b\u3002","title":"dnf"},{"location":"Ansible/module/#yum","text":"Fedora34 / RHEL8\u306b\u4f7f\u3048\u308b\uff1f => OK","title":"yum"},{"location":"Ansible/module/#apt_repository","text":"- name : add apt repository ansible.builtin.apt_repository : repo : deb [arch=arm64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu focal stable filename : docker \u3053\u308c\u3067\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002 $ cat /etc/apt/sources.list.d/docker.list deb [arch=arm64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu focal stable \u3053\u306e\u3068\u304d\u3001 /etc/apt/sources.list.d/docker.list \u4ee5\u5916\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3067\u306b\u540c\u3058\u8a2d\u5b9a\u304c\u3042\u308b\u5834\u5408\u306f docker.list \u306f\u4f5c\u6210\u3055\u308c\u305a\u306b ok \u3068\u306a\u308b\u3002","title":"apt_repository"},{"location":"Ansible/module/#_3","text":"","title":"\u30d5\u30a1\u30a4\u30eb"},{"location":"Ansible/module/#_4","text":"- name : create file file : path : /var/tmp/file_permission mode : \"0755\" state : directory \u3053\u308c\u306a\u3089 $ ll -d /var/tmp/file_permission/ drwxr-xr-x. 2 zaki zaki 6 7\u6708 31 10:27 /var/tmp/file_permission/ mode \u5b9f\u4f53 \"0755\" (str) drwxr-xr-x 0755 (int) drwxr-xr-x \"755\" (str) drwxr-xr-x 755 (int) d-wxrw--wt 755 \u306b\u3059\u308b\u3068\u300110\u9032\u6570\u306e755\u5165\u529b\u30928\u9032\u6570\u3068\u89e3\u91c8\u3057 1363 \u3068\u3057\u3066\u30e2\u30fc\u30c9\u8a2d\u5b9a\u3055\u308c\u308b\u52d5\u4f5c\u306b\u306a\u308b\u3002 \u30e2\u30fc\u30c9\u8a2d\u5b9a\u306f8\u9032\u6570\u306e\u6570\u5024\u304b\u6587\u5b57\u5217\u578b\u306e\u6570\u5024\u304c\u5165\u529b\u306a\u306e\u3068\u3001\u5148\u982d\u30bc\u30ed\u306e\u6570\u5024\u306f8\u9032\u6570\u3068\u3057\u3066YAML\u304c\u89e3\u91c8\u3059\u308b\u306e\u3067\u3001\u5148\u982d\u30bc\u30ed\u3092\u4ed8\u3051\u305a\u306bint\u306e\u6570\u5024\u3092\u6307\u5b9a\u3059\u308b\u3068\u60f3\u5b9a\u5916\u306e\u52d5\u4f5c\u306b\u306a\u308b\u3002","title":"\u30e2\u30fc\u30c9"},{"location":"Ansible/module/#fetch","text":"\u30bf\u30fc\u30b2\u30c3\u30c8\u30ce\u30fc\u30c9\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30ce\u30fc\u30c9\u3078\u30b3\u30d4\u30fc\u3059\u308b\u3002 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u4e0d\u53ef\u3002( src \u306e\u30d1\u30b9\u304c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5834\u5408\u306f\u5931\u6557\u3059\u308b) fatal: [fedora-node]: FAILED! => changed=false file: /home/zaki/src/docker-images/ msg: remote file is a directory, fetch cannot work on directories \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306esrc\u30d1\u30e9\u30e1\u30bf\u306e\u9805 \u306b\u3082\u8a18\u8f09\u3042\u308a\u3002 This must be a file, not a directory. fetch\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u4f7f\u3044\u65b9\u5168\u822c\u306f\u306f\u3066\u30d6\u306b\u66f8\u3044\u305f\u3002 [Ansible] fetch\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u30ea\u30e2\u30fc\u30c8\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u30ce\u30fc\u30c9\u3078\u8ee2\u9001\u30fb\u96c6\u7d04\u3059\u308b - zaki work log","title":"fetch"},{"location":"Ansible/module/#make","text":"/path/to/awx-operator \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4e0a\u3067 make deploy IMG=zakihmkc/awx-operator:0.17.0 \u3092\u5b9f\u884c\u3059\u308b\u30bf\u30b9\u30af\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u306e\u901a\u308a\u3002 - name : deploy awx-operator community.general.make : chdir : /path/to/awx-operator target : deploy params : IMG : zakihmkc/awx-operator:0.17.0 \u30bf\u30fc\u30b2\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u6e08\u307f\u3067 make \u304c\u4f55\u3082\u51e6\u7406\u3057\u306a\u3044\u5834\u5408\u306f\u3001\u5b9f\u884c\u30b9\u30c6\u30fc\u30bf\u30b9\u306f ok \u3068\u306a\u308b\u3002","title":"make"},{"location":"Ansible/module/#meta","text":"","title":"meta"},{"location":"Ansible/module/#_5","text":"\u305f\u3068\u3048\u3070\u3001OS\u30e6\u30fc\u30b6\u30fc\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u66f4\u65b0\u3057\u305f\u5834\u5408\u3001\u901a\u5e38\u3067\u3042\u308c\u3070\u30ed\u30b0\u30a4\u30f3\u3057\u76f4\u3055\u306a\u3051\u308c\u3070\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u306a\u3044\u3002 Ansible\u3082\u540c\u69d8\u3067\u3001\u30bf\u30b9\u30af\u3067\u30b0\u30eb\u30fc\u30d7\u306e\u66f4\u65b0\u3092\u884c\u3063\u3066\u3082\u3001\u5f8c\u7d9a\u306e\u30bf\u30b9\u30af\u306f\u63a5\u7d9a\u304c\u7dad\u6301\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u66f4\u65b0\u3055\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u306e\u72b6\u614b\u3067\u30bf\u30b9\u30af\u304c\u5b9f\u884c\u3055\u308c\u306a\u3044\u3002 \u3053\u306e\u5834\u5408\u3001 meta\u30e2\u30b8\u30e5\u30fc\u30eb \u306e reset_connection \u3092\u4f7f\u3063\u3066\u518d\u63a5\u7d9a\u3092\u884c\u3044\u3001\u5909\u66f4\u3092\u53cd\u6620\u3057\u3066\u5f8c\u7d9a\u306e\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3067\u304d\u308b\u3002 - name : \u30b0\u30eb\u30fc\u30d7\u3092\u5909\u66f4\u3059\u308b\u30bf\u30b9\u30af ... - name : refresh connection ansible.builtin.meta : reset_connection - name : \u5909\u66f4\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u524d\u63d0\u306e\u30bf\u30b9\u30af ...","title":"\u518d\u63a5\u7d9a"},{"location":"Ansible/module/#play","text":"\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u304a\u3051\u308b exit(0) \u307f\u305f\u3044\u306a\u3084\u3064\u3002 \u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067play\u3092\u6b63\u5e38\u7d42\u4e86\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002 tasks : - name : task1 debug : msg : task1 - name : task2 debug : msg : task2 - name : end play ansible.builtin.meta : end_play - name : task3 debug : msg : task3 \u3053\u306eplaybook\u306e\u5185\u5bb9\u3067Ansible\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u901a\u308atask3\u306f\u5b9f\u884c\u3055\u308c\u305a\u306b\u7d42\u4e86\u3059\u308b\u3002 PLAY [localhost] **************************************************************** TASK [task1] ******************************************************************** ok: [localhost] => msg: task1 TASK [task2] ******************************************************************** ok: [localhost] => msg: task2 TASK [end play] ***************************************************************** PLAY RECAP ********************************************************************** localhost : ok=2 changed=0 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0","title":"play\u306e\u7d42\u4e86"},{"location":"Ansible/module/#docker","text":"","title":"Docker"},{"location":"Ansible/module/#push-image","text":"docker_image \u3092\u4f7f\u7528\u3057\u30d1\u30e9\u30e1\u30bf\u306b push: true \u3092\u6307\u5b9a\u3002 - name : push container image community.docker.docker_image : name : quay.io/ansible/awx-ee repository : zakihmkc/awx-ee:0.6.0 push : true source : local \u3053\u306e\u30bf\u30b9\u30af\u306e\u5834\u5408\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u306b\u3042\u308b quay.io/ansible/awx-ee \u30a4\u30e1\u30fc\u30b8\u3092Docker Hub\u3078 zakihmkc/awx-ee:0.6.0 \u3068\u3057\u3066 push \u3059\u308b\u3002 \u3053\u306e\u3068\u304d\u3001 zakihmkc/awx-ee:0.6.0 \u304c\u65e2\u306b\u30ed\u30fc\u30ab\u30eb\u306b\u3042\u308b\u5834\u5408\u306ftag\u306e\u4e0a\u66f8\u304d\u304c\u767a\u751f\u3057\u306a\u3044\u305f\u3081\u3001push\u3055\u308c\u306a\u3044\u3002\u3053\u3053\u3067push\u3057\u305f\u3044\u5834\u5408\u306f\u3001tag\u8a2d\u5b9a\u3092\u4e0a\u66f8\u304d\u3059\u308b force_tag: true \u3082\u8ffd\u52a0\u3059\u308b\u3002","title":"push image"},{"location":"Ansible/playbook/","text":"\u30d7\u30ec\u30a4\u30d6\u30c3\u30af \u3053\u308cCLI\u3068\u304b\u30b3\u30de\u30f3\u30c9\u3063\u3066\u30bf\u30a4\u30c8\u30eb\u306e\u65b9\u304c\u3044\u3044\u304b \u5171\u901a -e | --extra-vars \u30b9\u30da\u30fc\u30b9\u3092\u542b\u3080\u5024\u3092\u4e0e\u3048\u308b\u5834\u5408 $ ansible-playbook ... -e 'key=\"foo bar baz\"' \u3042\u308b\u3044\u306fJSON\u5f62\u5f0f\u3067\u3002(JSON\u3060\u3068\u8f9e\u66f8\u3082\u30ea\u30b9\u30c8\u3082\u3044\u3051\u308b) $ ansible-playbook ... -e '{key: \"foo bar baz\"}' \u5909\u6570\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408 --- netbox_url : http://netbox.example.org/ netbox_token : hogehoge \u3053\u3093\u306a\u30d5\u30a1\u30a4\u30eb\u3092 netbox-vars.yml \u3068\u3057\u3066\u7528\u610f\u3057\u3066\u304a\u304d\u3001 ansible-playbook \u5b9f\u884c\u6642\u306b $ ansible-playbook ... -e @/path/to/netbox-vars.yml \u3067\u3001\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3057\u305f\u5909\u6570\u3092\u5b9f\u884c\u6642\u306bextra vars\u3068\u3057\u3066\u53c2\u7167\u3067\u304d\u308b\u3002 -l | --limit playbook\u306e hosts \u3067\u6307\u5b9a\u3057\u3066\u3042\u308b\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\u306e\u5185\u3001\u7279\u5b9a\u306e\u30db\u30b9\u30c8\u3060\u3051\u306b\u51e6\u7406\u3057\u305f\u3044\u5834\u5408\u306b\u4f7f\u3046\u3002 $ ansible-playbook ... -l host1 \u3053\u3046\u3059\u308b\u3068\u3001playbook\u3067\u4f8b\u3048\u3070 hosts: servers \u3068\u6307\u5b9a\u3055\u308c\u3066\u304a\u308a\u3001servers\u30b0\u30eb\u30fc\u30d7\u306b host1 , host2 , host3 \u304c\u6709\u3063\u305f\u3068\u3057\u3066\u3082\u3001\u3053\u306e ansible-playbook \u5b9f\u884c\u306e\u30bf\u30b9\u30af\u306f host1 \u306e\u307f\u304c\u51e6\u7406\u5bfe\u8c61\u3067\u5b9f\u884c\u3055\u308c\u308b\u3002 \u958b\u767a\u3084\u30c7\u30d0\u30c3\u30b0\u306e\u304a\u4f9b\u306b\u3002 ansible-playbook \u30b3\u30de\u30f3\u30c9 --check \u3044\u308f\u3086\u308bDry Run\u3067\u5b9f\u884c\u3059\u308b\u3002 check\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b copy \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 - name : command sample copy : src : /home/zaki/tmp.yml dest : /var/tmp mode : '0644' register : result \u3053\u306eplaybook\u3001\u30b3\u30d4\u30fc\u5148\u304c\u5b58\u5728\u3057\u306a\u3044\u72b6\u614b\u3067\u3001\u5b9f\u969b\u306b\u52d5\u304b\u3059\u3068 changed \u306b\u306a\u308b\u72b6\u614b\u3067 --check \u4ed8\u3051\u3066\u5b9f\u884c\u3059\u308b\u3068 (ansible4) [zaki@cloud-dev shell (master)]$ ls /var/tmp/tmp.yml ls: /var/tmp/tmp.yml \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093: \u305d\u306e\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u3042\u308a\u307e\u305b\u3093 (ansible4) [zaki@cloud-dev shell (master)]$ ansible-playbook copy.yml --check PLAY [localhost] ******************** TASK [command sample] *************** changed: [localhost] TASK [print result] ***************** ok: [localhost] => msg: changed: true diff: [] failed: false : : (ansible4) [zaki@cloud-dev shell (master)]$ ls /var/tmp/tmp.yml ls: /var/tmp/tmp.yml \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093: \u305d\u306e\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u3042\u308a\u307e\u305b\u3093 \u3053\u306e\u3068\u304a\u308a changed \u3068\u3057\u3066\u51e6\u7406\u3055\u308c\u3001result\u3082changed\u306b\u306a\u308b\u3002 \u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u3066 ok \u3068\u306a\u308b\u72b6\u614b\u3067 --check \u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3002 (ansible4) [zaki@cloud-dev shell (master)]$ ls /var/tmp/tmp.yml /var/tmp/tmp.yml (ansible4) [zaki@cloud-dev shell (master)]$ ansible-playbook copy.yml --check PLAY [localhost] ******************** TASK [command sample] *************** ok: [localhost] TASK [print result] ***************** ok: [localhost] => msg: changed: false checksum: e4012c7ec05eb3bd3d27774fa73b772426c02d74 dest: /var/tmp/tmp.yml diff: after: path: /var/tmp/tmp.yml before: path: /var/tmp/tmp.yml failed: false gid: 1000 group: zaki mode: '0644' owner: zaki path: /var/tmp/tmp.yml secontext: unconfined_u:object_r:user_home_t:s0 size: 5447 state: file uid: 1000 \u30bf\u30b9\u30af\u5358\u4f4d\u3067\u30c1\u30a7\u30c3\u30af\u30e2\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b check_mode \u30d1\u30e9\u30e1\u30bf\u306b\u3064\u3044\u3066\u306f directives \u53c2\u7167\u3002 --list-tasks \u540c\u6642\u306b\u6307\u5b9a\u3059\u308b --tags \u306a\u3069\u306e\u5b9f\u884c\u6761\u4ef6\u3092\u8e0f\u307e\u3048\u3066\u3001\u3069\u306e\u30d7\u30ec\u30a4\u3068\u30bf\u30b9\u30af\u304c\u5b9f\u884c\u5bfe\u8c61\u3068\u306a\u308b\u304b\u3092\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3002dry run\u306e\u3082\u30461\u6bb5\u968e\u624b\u524d\u306a\u611f\u3058\u3002 $ ansible-playbook setup.yml --list-tasks playbook: setup.yml play #1 (rhel): rhel TAGS: [] tasks: subscription TAGS: [subscription] install packages TAGS: [packages] play #2 (rhel): rhel TAGS: [] tasks: ssh user config TAGS: [ssh] git config TAGS: [git] get git-prompt.sh TAGS: [git] add prompt with git config TAGS: [git] add source gitprompt TAGS: [git] create venv TAGS: [python] clone repository (linux) TAGS: [repository] clone repository (container) TAGS: [repository] --tags \u6307\u5b9a\u3042\u308a\u306e\u5834\u5408 $ ansible-playbook setup.yml --list-tasks --tags git playbook: setup.yml play #1 (rhel): rhel TAGS: [] tasks: play #2 (rhel): rhel TAGS: [] tasks: git config TAGS: [git] get git-prompt.sh TAGS: [git] add prompt with git config TAGS: [git] add source gitprompt TAGS: [git] --start-at \u6307\u5b9a\u30bf\u30b9\u30af\u304b\u3089\u51e6\u7406\u3092\u958b\u59cb\u3059\u308b\u3002\u958b\u767a\u30fb\u30c7\u30d0\u30c3\u30b0\u306e\u304a\u4f9b\u306b\u3002 --- - hosts : localhost gather_facts : false tasks : - name : exec 1st task debug : msg : \"hello world\" - name : exec 2nd task debug : msg : \"hello worlds\" - name : exec 3rd task debug : msg : \"hello worlds!!\" $ ansible-playbook sample.yml --start-at \"exec 2nd task\" \u5b9f\u884c\u7d50\u679c PLAY [localhost] ***************************************************************************** TASK [exec 2nd task] ************************************************************************* ok: [localhost] => msg: hello worlds TASK [exec 3rd task] ************************************************************************* ok: [localhost] => msg: hello worlds!! role\u306e\u5834\u5408\u306f\u3001\u30ed\u30fc\u30eb\u540d\u542b\u3081\u3066\u6307\u5b9a\u3059\u308c\u3070\u3088\u3044\u3002(\u5b9f\u884c\u6642\u306e TASK [***] \u306e *** \u306e\u90e8\u5206\u3092\u6307\u5b9a\u3059\u308b) $ ansible-playbook -i inventory-oci-l-dev.ini playbook.yml -v : : TASK [build_awx/awx-ee : clone repository] *************************************************** fatal: [oci-l-a1-ubuntu]: FAILED! => {\"before\": \"54de4047be742783f69678f942a515e991c097ab\", \"changed\": false, \"msg\": \"Local modifications exist in repository (force=no).\"} PLAY RECAP *********************************************************************************** oci-l-a1-ubuntu : ok=33 changed=5 unreachable=0 failed=1 skipped=3 rescued=0 ignored=0 : : $ ansible-playbook -i inventory-oci-l-dev.ini playbook.yml -v --start-at \"build_awx/awx-ee : create working directory\" sample playbook - hosts : localhost gather_facts : false tasks : - name : hello debug : msg : hello world inventory [server] 192.168.0.1","title":"\u30d7\u30ec\u30a4\u30d6\u30c3\u30af"},{"location":"Ansible/playbook/#_1","text":"\u3053\u308cCLI\u3068\u304b\u30b3\u30de\u30f3\u30c9\u3063\u3066\u30bf\u30a4\u30c8\u30eb\u306e\u65b9\u304c\u3044\u3044\u304b","title":"\u30d7\u30ec\u30a4\u30d6\u30c3\u30af"},{"location":"Ansible/playbook/#_2","text":"","title":"\u5171\u901a"},{"location":"Ansible/playbook/#-e-extra-vars","text":"\u30b9\u30da\u30fc\u30b9\u3092\u542b\u3080\u5024\u3092\u4e0e\u3048\u308b\u5834\u5408 $ ansible-playbook ... -e 'key=\"foo bar baz\"' \u3042\u308b\u3044\u306fJSON\u5f62\u5f0f\u3067\u3002(JSON\u3060\u3068\u8f9e\u66f8\u3082\u30ea\u30b9\u30c8\u3082\u3044\u3051\u308b) $ ansible-playbook ... -e '{key: \"foo bar baz\"}' \u5909\u6570\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408 --- netbox_url : http://netbox.example.org/ netbox_token : hogehoge \u3053\u3093\u306a\u30d5\u30a1\u30a4\u30eb\u3092 netbox-vars.yml \u3068\u3057\u3066\u7528\u610f\u3057\u3066\u304a\u304d\u3001 ansible-playbook \u5b9f\u884c\u6642\u306b $ ansible-playbook ... -e @/path/to/netbox-vars.yml \u3067\u3001\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3057\u305f\u5909\u6570\u3092\u5b9f\u884c\u6642\u306bextra vars\u3068\u3057\u3066\u53c2\u7167\u3067\u304d\u308b\u3002","title":"-e | --extra-vars"},{"location":"Ansible/playbook/#-l-limit","text":"playbook\u306e hosts \u3067\u6307\u5b9a\u3057\u3066\u3042\u308b\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\u306e\u5185\u3001\u7279\u5b9a\u306e\u30db\u30b9\u30c8\u3060\u3051\u306b\u51e6\u7406\u3057\u305f\u3044\u5834\u5408\u306b\u4f7f\u3046\u3002 $ ansible-playbook ... -l host1 \u3053\u3046\u3059\u308b\u3068\u3001playbook\u3067\u4f8b\u3048\u3070 hosts: servers \u3068\u6307\u5b9a\u3055\u308c\u3066\u304a\u308a\u3001servers\u30b0\u30eb\u30fc\u30d7\u306b host1 , host2 , host3 \u304c\u6709\u3063\u305f\u3068\u3057\u3066\u3082\u3001\u3053\u306e ansible-playbook \u5b9f\u884c\u306e\u30bf\u30b9\u30af\u306f host1 \u306e\u307f\u304c\u51e6\u7406\u5bfe\u8c61\u3067\u5b9f\u884c\u3055\u308c\u308b\u3002 \u958b\u767a\u3084\u30c7\u30d0\u30c3\u30b0\u306e\u304a\u4f9b\u306b\u3002","title":"-l | --limit"},{"location":"Ansible/playbook/#ansible-playbook","text":"","title":"ansible-playbook \u30b3\u30de\u30f3\u30c9"},{"location":"Ansible/playbook/#-check","text":"\u3044\u308f\u3086\u308bDry Run\u3067\u5b9f\u884c\u3059\u308b\u3002 check\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b copy \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 - name : command sample copy : src : /home/zaki/tmp.yml dest : /var/tmp mode : '0644' register : result \u3053\u306eplaybook\u3001\u30b3\u30d4\u30fc\u5148\u304c\u5b58\u5728\u3057\u306a\u3044\u72b6\u614b\u3067\u3001\u5b9f\u969b\u306b\u52d5\u304b\u3059\u3068 changed \u306b\u306a\u308b\u72b6\u614b\u3067 --check \u4ed8\u3051\u3066\u5b9f\u884c\u3059\u308b\u3068 (ansible4) [zaki@cloud-dev shell (master)]$ ls /var/tmp/tmp.yml ls: /var/tmp/tmp.yml \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093: \u305d\u306e\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u3042\u308a\u307e\u305b\u3093 (ansible4) [zaki@cloud-dev shell (master)]$ ansible-playbook copy.yml --check PLAY [localhost] ******************** TASK [command sample] *************** changed: [localhost] TASK [print result] ***************** ok: [localhost] => msg: changed: true diff: [] failed: false : : (ansible4) [zaki@cloud-dev shell (master)]$ ls /var/tmp/tmp.yml ls: /var/tmp/tmp.yml \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093: \u305d\u306e\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u3042\u308a\u307e\u305b\u3093 \u3053\u306e\u3068\u304a\u308a changed \u3068\u3057\u3066\u51e6\u7406\u3055\u308c\u3001result\u3082changed\u306b\u306a\u308b\u3002 \u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u3066 ok \u3068\u306a\u308b\u72b6\u614b\u3067 --check \u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3002 (ansible4) [zaki@cloud-dev shell (master)]$ ls /var/tmp/tmp.yml /var/tmp/tmp.yml (ansible4) [zaki@cloud-dev shell (master)]$ ansible-playbook copy.yml --check PLAY [localhost] ******************** TASK [command sample] *************** ok: [localhost] TASK [print result] ***************** ok: [localhost] => msg: changed: false checksum: e4012c7ec05eb3bd3d27774fa73b772426c02d74 dest: /var/tmp/tmp.yml diff: after: path: /var/tmp/tmp.yml before: path: /var/tmp/tmp.yml failed: false gid: 1000 group: zaki mode: '0644' owner: zaki path: /var/tmp/tmp.yml secontext: unconfined_u:object_r:user_home_t:s0 size: 5447 state: file uid: 1000 \u30bf\u30b9\u30af\u5358\u4f4d\u3067\u30c1\u30a7\u30c3\u30af\u30e2\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b check_mode \u30d1\u30e9\u30e1\u30bf\u306b\u3064\u3044\u3066\u306f directives \u53c2\u7167\u3002","title":"--check"},{"location":"Ansible/playbook/#-list-tasks","text":"\u540c\u6642\u306b\u6307\u5b9a\u3059\u308b --tags \u306a\u3069\u306e\u5b9f\u884c\u6761\u4ef6\u3092\u8e0f\u307e\u3048\u3066\u3001\u3069\u306e\u30d7\u30ec\u30a4\u3068\u30bf\u30b9\u30af\u304c\u5b9f\u884c\u5bfe\u8c61\u3068\u306a\u308b\u304b\u3092\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3002dry run\u306e\u3082\u30461\u6bb5\u968e\u624b\u524d\u306a\u611f\u3058\u3002 $ ansible-playbook setup.yml --list-tasks playbook: setup.yml play #1 (rhel): rhel TAGS: [] tasks: subscription TAGS: [subscription] install packages TAGS: [packages] play #2 (rhel): rhel TAGS: [] tasks: ssh user config TAGS: [ssh] git config TAGS: [git] get git-prompt.sh TAGS: [git] add prompt with git config TAGS: [git] add source gitprompt TAGS: [git] create venv TAGS: [python] clone repository (linux) TAGS: [repository] clone repository (container) TAGS: [repository] --tags \u6307\u5b9a\u3042\u308a\u306e\u5834\u5408 $ ansible-playbook setup.yml --list-tasks --tags git playbook: setup.yml play #1 (rhel): rhel TAGS: [] tasks: play #2 (rhel): rhel TAGS: [] tasks: git config TAGS: [git] get git-prompt.sh TAGS: [git] add prompt with git config TAGS: [git] add source gitprompt TAGS: [git]","title":"--list-tasks"},{"location":"Ansible/playbook/#-start-at","text":"\u6307\u5b9a\u30bf\u30b9\u30af\u304b\u3089\u51e6\u7406\u3092\u958b\u59cb\u3059\u308b\u3002\u958b\u767a\u30fb\u30c7\u30d0\u30c3\u30b0\u306e\u304a\u4f9b\u306b\u3002 --- - hosts : localhost gather_facts : false tasks : - name : exec 1st task debug : msg : \"hello world\" - name : exec 2nd task debug : msg : \"hello worlds\" - name : exec 3rd task debug : msg : \"hello worlds!!\" $ ansible-playbook sample.yml --start-at \"exec 2nd task\" \u5b9f\u884c\u7d50\u679c PLAY [localhost] ***************************************************************************** TASK [exec 2nd task] ************************************************************************* ok: [localhost] => msg: hello worlds TASK [exec 3rd task] ************************************************************************* ok: [localhost] => msg: hello worlds!! role\u306e\u5834\u5408\u306f\u3001\u30ed\u30fc\u30eb\u540d\u542b\u3081\u3066\u6307\u5b9a\u3059\u308c\u3070\u3088\u3044\u3002(\u5b9f\u884c\u6642\u306e TASK [***] \u306e *** \u306e\u90e8\u5206\u3092\u6307\u5b9a\u3059\u308b) $ ansible-playbook -i inventory-oci-l-dev.ini playbook.yml -v : : TASK [build_awx/awx-ee : clone repository] *************************************************** fatal: [oci-l-a1-ubuntu]: FAILED! => {\"before\": \"54de4047be742783f69678f942a515e991c097ab\", \"changed\": false, \"msg\": \"Local modifications exist in repository (force=no).\"} PLAY RECAP *********************************************************************************** oci-l-a1-ubuntu : ok=33 changed=5 unreachable=0 failed=1 skipped=3 rescued=0 ignored=0 : : $ ansible-playbook -i inventory-oci-l-dev.ini playbook.yml -v --start-at \"build_awx/awx-ee : create working directory\"","title":"--start-at"},{"location":"Ansible/playbook/#sample","text":"","title":"sample"},{"location":"Ansible/playbook/#playbook","text":"- hosts : localhost gather_facts : false tasks : - name : hello debug : msg : hello world","title":"playbook"},{"location":"Ansible/playbook/#inventory","text":"[server] 192.168.0.1","title":"inventory"},{"location":"Ansible/role/","text":"Role \u30ed\u30fc\u30eb\u306e\u96db\u5f62\u3092\u4f5c\u308b $ ansible-galaxy role init sample_role \u3053\u3093\u306a\u611f\u3058 $ find . ./sample_role ./sample_role/.travis.yml ./sample_role/README.md ./sample_role/defaults ./sample_role/defaults/main.yml ./sample_role/files ./sample_role/handlers ./sample_role/handlers/main.yml ./sample_role/meta ./sample_role/meta/main.yml ./sample_role/tasks ./sample_role/tasks/main.yml ./sample_role/templates ./sample_role/tests ./sample_role/tests/inventory ./sample_role/tests/test.yml ./sample_role/vars ./sample_role/vars/main.yml \u30ed\u30fc\u30eb\u304b\u3089\u5225\u306e\u30ed\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b \u7279\u306b\u4f55\u4e8b\u3082\u306a\u304f\u53ef\u80fd\u3002 role2 (\u547c\u3070\u308c\u308b\u5074) --- # roles/test2/tasks/main.yml - name : ...\u7701\u7565 role3 (\u547c\u3076\u5074) --- # roles/test3/tasks/main.yml - name : this is test3 debug : msg : \"this is test3\" - name : exec other role import_role : name : test2 playbook --- # playbook.yml - hosts : localhost gather_facts : false roles : - test2 - test3 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210 meta meta/main.yml \u30d5\u30a1\u30a4\u30eb\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5b9a\u7fa9\u3092\u8a18\u8ff0\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u3001\u30ed\u30fc\u30eb\u5b9f\u884c\u6642\u306b builde \u3068 runner \u30ed\u30fc\u30eb\u3092\u4e8b\u524d\u306b\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002 --- dependencies : - role : builder - role : runner \u30ed\u30fc\u30ebA\u304c\u30ed\u30fc\u30ebX\u3068\u30ed\u30fc\u30ebY\u3001\u30ed\u30fc\u30ebB\u3082\u30ed\u30fc\u30ebX\u3068\u30ed\u30fc\u30ebY\u306b\u4f9d\u5b58\u3059\u308b\u8a2d\u5b9a\u306b\u3057\u3066\u308b\u5834\u5408\u3001\u30ed\u30fc\u30ebX\u3068\u30ed\u30fc\u30ebY\u306f1\u56de\u305a\u3064\u547c\u3070\u308c\u308b\u3002(A\u3068B\u306e\u30ed\u30fc\u30eb\u5b9f\u884c\u524d\u3067\u305d\u308c\u305e\u308c\u8a082\u56de\u305a\u3064\u547c\u3070\u308c\u308b\u3053\u3068\u306f\u7121\u3044)","title":"Role"},{"location":"Ansible/role/#role","text":"","title":"Role"},{"location":"Ansible/role/#_1","text":"$ ansible-galaxy role init sample_role \u3053\u3093\u306a\u611f\u3058 $ find . ./sample_role ./sample_role/.travis.yml ./sample_role/README.md ./sample_role/defaults ./sample_role/defaults/main.yml ./sample_role/files ./sample_role/handlers ./sample_role/handlers/main.yml ./sample_role/meta ./sample_role/meta/main.yml ./sample_role/tasks ./sample_role/tasks/main.yml ./sample_role/templates ./sample_role/tests ./sample_role/tests/inventory ./sample_role/tests/test.yml ./sample_role/vars ./sample_role/vars/main.yml","title":"\u30ed\u30fc\u30eb\u306e\u96db\u5f62\u3092\u4f5c\u308b"},{"location":"Ansible/role/#_2","text":"\u7279\u306b\u4f55\u4e8b\u3082\u306a\u304f\u53ef\u80fd\u3002 role2 (\u547c\u3070\u308c\u308b\u5074) --- # roles/test2/tasks/main.yml - name : ...\u7701\u7565 role3 (\u547c\u3076\u5074) --- # roles/test3/tasks/main.yml - name : this is test3 debug : msg : \"this is test3\" - name : exec other role import_role : name : test2 playbook --- # playbook.yml - hosts : localhost gather_facts : false roles : - test2 - test3","title":"\u30ed\u30fc\u30eb\u304b\u3089\u5225\u306e\u30ed\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b"},{"location":"Ansible/role/#_3","text":"","title":"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210"},{"location":"Ansible/role/#meta","text":"meta/main.yml \u30d5\u30a1\u30a4\u30eb\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5b9a\u7fa9\u3092\u8a18\u8ff0\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u3001\u30ed\u30fc\u30eb\u5b9f\u884c\u6642\u306b builde \u3068 runner \u30ed\u30fc\u30eb\u3092\u4e8b\u524d\u306b\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002 --- dependencies : - role : builder - role : runner \u30ed\u30fc\u30ebA\u304c\u30ed\u30fc\u30ebX\u3068\u30ed\u30fc\u30ebY\u3001\u30ed\u30fc\u30ebB\u3082\u30ed\u30fc\u30ebX\u3068\u30ed\u30fc\u30ebY\u306b\u4f9d\u5b58\u3059\u308b\u8a2d\u5b9a\u306b\u3057\u3066\u308b\u5834\u5408\u3001\u30ed\u30fc\u30ebX\u3068\u30ed\u30fc\u30ebY\u306f1\u56de\u305a\u3064\u547c\u3070\u308c\u308b\u3002(A\u3068B\u306e\u30ed\u30fc\u30eb\u5b9f\u884c\u524d\u3067\u305d\u308c\u305e\u308c\u8a082\u56de\u305a\u3064\u547c\u3070\u308c\u308b\u3053\u3068\u306f\u7121\u3044)","title":"meta"},{"location":"Ansible/tower/","text":"Ansible Tower \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3068\u30ea\u30b9\u30c8\u30a2 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u3002 Tower\u306f\u5b9f\u884c\u4e2d\u3067\u826f\u3044\u3002 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306b\u6210\u529f\u3059\u308b\u3068\u3001\u30ab\u30ec\u30f3\u30c8\u306b tower-backup-YYYY-mm-dd-HH:MM:SS.tar.gz \u304c\u4f5c\u6210\u3055\u308c\u308b\u3002(symlink\u306e tower-backup-latest.tar.gz \u3082\u4f5c\u6210\u3055\u308c\u308b) # ./setup.sh -b \u30ea\u30b9\u30c8\u30a2\u306f\u4ee5\u4e0b\u3002 # ./setup.sh -r -e restore_backup_file = /path/to/tower-backup-....tar.gz \u30d7\u30ed\u30b8\u30a7\u30af\u30c8 SCM\u3092\u4f7f\u308f\u306a\u3044\u5834\u5408 Git\u3068\u304b\u4f7f\u308f\u305aTower\u306e\u30db\u30b9\u30c8\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u4e0a\u306eplaybook\u3092\u4f7f\u3046\u5834\u5408\u306f /var/lib/awx/projects \u4ee5\u4e0b\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308a\u3001\u305d\u306e\u914d\u4e0b\u306bplaybook\u985e\u3092\u914d\u7f6e\u3059\u308b\u3002 \u305f\u3068\u3048\u3070 /var/lib/awx/projects/sample-demo/playbook.yml \u306a\u3069\u3002 API \u8a8d\u8a3c \u30d1\u30fc\u30bd\u30ca\u30eb\u30c8\u30fc\u30af\u30f3\u4f5c\u6210 Tower\u306e\u30e6\u30fc\u30b6\u30fc\u30da\u30fc\u30b8\u3067\u3001\u5bfe\u8c61\u30e6\u30fc\u30b6\u30fc\u3092\u9078\u629e\u3001\u300c\u30c8\u30fc\u30af\u30f3\u300d\u62bc\u4e0b\u3057\u3066\u300c\uff0b\u300d\u62bc\u4e0b\u3067\u4f5c\u6210\u3067\u304d\u308b\u3002 \u6a29\u9650\u306fread/write\u306e\u307f\u3002 GUI\u3067\u4f5c\u3063\u305f\u30d1\u30fc\u30bd\u30ca\u30eb\u30c8\u30fc\u30af\u30f3\u3092\u4f7f\u3063\u305fREST\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b Authorization: Bearer {token-string} \u3092\u30d8\u30c3\u30c0\u306b\u8ffd\u52a0\u3059\u308c\u3070OK $ export tower_token = ........ $ curl -sk https://192.168.0.27/api/v2/job_templates/ -H \"Authorization: Bearer $tower_token \" 19.2. \u30d1\u30fc\u30bd\u30ca\u30eb\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3 (PAT) \u5411\u3051\u306e OAuth2 \u30c8\u30fc\u30af\u30f3\u30b7\u30b9\u30c6\u30e0\u306e\u4f7f\u7528 \u30b8\u30e7\u30d6\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4e00\u89a7 $ curl -sk https://192.168.0.27/api/v2/job_templates/?page_size =1000 | python -m json.tool","title":"Ansible Tower"},{"location":"Ansible/tower/#ansible-tower","text":"","title":"Ansible Tower"},{"location":"Ansible/tower/#_1","text":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u3002 Tower\u306f\u5b9f\u884c\u4e2d\u3067\u826f\u3044\u3002 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306b\u6210\u529f\u3059\u308b\u3068\u3001\u30ab\u30ec\u30f3\u30c8\u306b tower-backup-YYYY-mm-dd-HH:MM:SS.tar.gz \u304c\u4f5c\u6210\u3055\u308c\u308b\u3002(symlink\u306e tower-backup-latest.tar.gz \u3082\u4f5c\u6210\u3055\u308c\u308b) # ./setup.sh -b \u30ea\u30b9\u30c8\u30a2\u306f\u4ee5\u4e0b\u3002 # ./setup.sh -r -e restore_backup_file = /path/to/tower-backup-....tar.gz","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3068\u30ea\u30b9\u30c8\u30a2"},{"location":"Ansible/tower/#_2","text":"","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"},{"location":"Ansible/tower/#scm","text":"Git\u3068\u304b\u4f7f\u308f\u305aTower\u306e\u30db\u30b9\u30c8\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u4e0a\u306eplaybook\u3092\u4f7f\u3046\u5834\u5408\u306f /var/lib/awx/projects \u4ee5\u4e0b\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308a\u3001\u305d\u306e\u914d\u4e0b\u306bplaybook\u985e\u3092\u914d\u7f6e\u3059\u308b\u3002 \u305f\u3068\u3048\u3070 /var/lib/awx/projects/sample-demo/playbook.yml \u306a\u3069\u3002","title":"SCM\u3092\u4f7f\u308f\u306a\u3044\u5834\u5408"},{"location":"Ansible/tower/#api","text":"","title":"API"},{"location":"Ansible/tower/#_3","text":"","title":"\u8a8d\u8a3c"},{"location":"Ansible/tower/#_4","text":"Tower\u306e\u30e6\u30fc\u30b6\u30fc\u30da\u30fc\u30b8\u3067\u3001\u5bfe\u8c61\u30e6\u30fc\u30b6\u30fc\u3092\u9078\u629e\u3001\u300c\u30c8\u30fc\u30af\u30f3\u300d\u62bc\u4e0b\u3057\u3066\u300c\uff0b\u300d\u62bc\u4e0b\u3067\u4f5c\u6210\u3067\u304d\u308b\u3002 \u6a29\u9650\u306fread/write\u306e\u307f\u3002 GUI\u3067\u4f5c\u3063\u305f\u30d1\u30fc\u30bd\u30ca\u30eb\u30c8\u30fc\u30af\u30f3\u3092\u4f7f\u3063\u305fREST\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b Authorization: Bearer {token-string} \u3092\u30d8\u30c3\u30c0\u306b\u8ffd\u52a0\u3059\u308c\u3070OK $ export tower_token = ........ $ curl -sk https://192.168.0.27/api/v2/job_templates/ -H \"Authorization: Bearer $tower_token \" 19.2. \u30d1\u30fc\u30bd\u30ca\u30eb\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3 (PAT) \u5411\u3051\u306e OAuth2 \u30c8\u30fc\u30af\u30f3\u30b7\u30b9\u30c6\u30e0\u306e\u4f7f\u7528","title":"\u30d1\u30fc\u30bd\u30ca\u30eb\u30c8\u30fc\u30af\u30f3\u4f5c\u6210"},{"location":"Ansible/tower/#_5","text":"$ curl -sk https://192.168.0.27/api/v2/job_templates/?page_size =1000 | python -m json.tool","title":"\u30b8\u30e7\u30d6\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4e00\u89a7"},{"location":"Ansible/variable/","text":"\u5909\u6570 Using Variables \u2014 Ansible Documentation Special Variables \u2014 Ansible Documentation \u5b9a\u7fa9\u306e\u512a\u5148\u9806\u4f4d Understanding variable precedence Ansible \u5909\u6570\u306e\u512a\u5148\u9806\u4f4d\u3068\u66f8\u304d\u65b9\u3092\u307e\u3068\u3081\u3066\u307f\u305f - Qiita \u63a5\u7d9a\u8a2d\u5b9a SSH\u95a2\u9023\u8a2d\u5b9a \u540c\u4e00playbook\u3067\u3001play\u306b\u3088\u3063\u3066\u63a5\u7d9a\u7528\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5909\u3048\u305f\u3044\u3068\u304d\u306a\u3069\u3002 ansible_user ansible_ssh_private_key_file \u305f\u3068\u3048\u3070\u3001\u6700\u521d\u306f\u7ba1\u7406\u7528\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u63a5\u7d9a\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\u306a\u3069\u884c\u3063\u3066\u3001\u6b21\u306eplay\u3067\u306f\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u3067\u63a5\u7d9a\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3064\u3064\u30a2\u30d7\u30ea\u306e\u30c7\u30d7\u30ed\u30a4\u3092\u884c\u3046\u3001\u306a\u3069\u306a\u3069\u3002 \u30ed\u30b0\u30a4\u30f3\u30d1\u30b9\u30ef\u30fc\u30c9 Connecting to hosts: behavioral inventory parameters \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668\u3084\u516c\u958b\u9375\u8a2d\u5b9a\u3055\u308c\u3066\u306a\u3044\u30b5\u30fc\u30d0\u30fcOS\u3078SSH\u63a5\u7d9a\u306e\u969b\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f ansible_password \u3092\u4f7f\u3046\u3002 [ dev-server ] 192.168.0.211 ansible_user=developer ansible_password=deve1op! \u203b \u2191\u306fplaintext\u3067\u66f8\u3044\u3066\u308b\u306e\u3067\u3001vault\u3067\u6697\u53f7\u5316\u3057\u307e\u3057\u3087\u3046 become\u30d1\u30b9\u30ef\u30fc\u30c9 Become connection variables become: true \u3092\u4f7f\u3046\u5834\u5408\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5fc5\u8981\u306a\u5834\u5408\u3001 -K (--ask-become-pass) \u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u8868\u793a\u3059\u308b\u304b\u3001 ansible_become_password \u3067\u6607\u683c\u7528\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3002 --- - hosts : linux gather_facts : true become : true vars : ansible_become_password : this_is_become_password! tasks : - name : enable sudo with no password (on RHEL) ansible.builtin.copy : ... \u30de\u30b8\u30c3\u30af\u5909\u6570 Special Variables \u2014 Ansible Documentation omit \u7701\u7565\u3057\u305f\u3044\u30d1\u30e9\u30e1\u30bf\u306b\u30bb\u30c3\u30c8\u3059\u308b\u3068\u7121\u8996\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002 [Ansible] \u7701\u7565\u3057\u305f\u3044\u30d1\u30e9\u30e1\u30bf\u306b\u5909\u6570\u6307\u5b9a\u305b\u3056\u308b\u3092\u5f97\u306a\u3044\u5834\u5408\u306b\u4f7f\u3046\u5909\u6570omit\u3068default\u30d5\u30a3\u30eb\u30bf - zaki work log - name : create files by csv ansible.builtin.file : state : \"{{ item.type }}\" path : \"{{ item.path }}\" mode : \"{{ item.mode | default(omit, true) }}\" owner : \"{{ item.owner | default(omit, true) }}\" group : \"{{ item.group | default(omit, true) }}\" loop : \"{{ res_input.list }}\" role_path \u73fe\u5728\u5b9f\u884c\u4e2d\u306e\u30ed\u30fc\u30eb\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3002 \u4f8b\u3048\u3070 /path/to/ansible/roles/sample/tasks/main.yml \u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u306e\u30ed\u30fc\u30eb\u306e\u4e2d\u3067 \"{{ role_path }}\" \u3092\u53c2\u7167\u3059\u308b\u3068\u3001 /path/to/ansible/roles/sample \u3092\u5f97\u3089\u308c\u308b\u3002 \u30ed\u30fc\u30eb\u306e\u4e2d\u3067\u53c2\u7167\u3067\u304d\u308b\u5909\u6570\u306a\u306e\u3067\u3001playbook\u3067\u53c2\u7167\u3057\u3066\u3082 undefined \u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002 \u30ed\u30fc\u30eb\u5185\u306etask\u304b\u3089 import_tasks \u3067\u8aad\u3093\u3060\u5148\u306e\u30d5\u30a1\u30a4\u30eb\u306etask\u3067\u53c2\u7167\u3059\u308b role_path \u3067\u3042\u308c\u3070\u53c2\u7167\u53ef\u80fd\u3002 (\u3042\u304f\u307e\u3067\u547c\u3073\u51fa\u3057\u5143\u30ed\u30fc\u30eb\u57fa\u6e96\u306e\u30d1\u30b9\u306b\u306a\u308b) \u30ce\u30fc\u30c9\u306e\u30d5\u30a1\u30af\u30c8\u5909\u6570 gather_facts : true \u5168\u90e8\u53d6\u308b\u3068\u91cd\u3044\u3051\u3069\u3001 gather_subset \u3092\u6307\u5b9a\u3059\u308b\u3068\u30b5\u30d6\u30bb\u30c3\u30c8\u3060\u3051\u53d6\u308c\u308b\u3002 --- - hosts : all gather_facts : true gather_subset : - network tasks : - debug : msg : \"{{ ansible_facts }}\" \u3053\u308c\u3067 wc -l \u3059\u308b\u3068\u7d04375\u884c\u3002 gather_subset \u306e\u6307\u5b9a\u304c\u7121\u3044\u3068926\u884c\u3002 ansible all -m setup | wc -l \u3060\u3068916\u884c\u3002 ansible -i inventory all -m setup -a \"gather_subset=network\" | wc -l \u3060\u3068365\u884c\u3002 OS\u60c5\u5831\u7a0b\u5ea6\u3067\u3042\u308c\u3070 min \u3067\u53d6\u308c\u308b\u3002 \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u6bce\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u306f network \u3082\u5fc5\u8981\u3063\u307d\u3044\u3002 \u74b0\u5883\u5909\u6570 gather_subset: min \u3067\u78ba\u8a8d\u3002 become \u306a\u3057\u306e\u5834\u5408\u3002 \"ansible_env\" : { \"DBUS_SESSION_BUS_ADDRESS\" : \"unix:path=/run/user/1001/bus\" , \"HOME\" : \"/home/ubuntu\" , \"LANG\" : \"C.UTF-8\" , \"LOGNAME\" : \"ubuntu\" , \"MOTD_SHOWN\" : \"pam\" , \"PATH\" : \"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin\" , \"PWD\" : \"/home/ubuntu\" , \"SHELL\" : \"/bin/bash\" , \"SHLVL\" : \"0\" , \"SSH_CLIENT\" : \"****\" , \"SSH_CONNECTION\" : \"****\" , \"SSH_TTY\" : \"/dev/pts/1\" , \"TERM\" : \"xterm-256color\" , \"USER\" : \"ubuntu\" , \"XDG_RUNTIME_DIR\" : \"/run/user/1001\" , \"XDG_SESSION_CLASS\" : \"user\" , \"XDG_SESSION_ID\" : \"29\" , \"XDG_SESSION_TYPE\" : \"tty\" , \"_\" : \"/bin/sh\" }, become \u3042\u308a\u306e\u5834\u5408\u3002 \"ansible_env\" : { \"HOME\" : \"/root\" , \"LANG\" : \"C.UTF-8\" , \"LOGNAME\" : \"root\" , \"MAIL\" : \"/var/mail/root\" , \"PATH\" : \"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\" , \"PWD\" : \"/home/ubuntu\" , \"SHELL\" : \"/bin/bash\" , \"SUDO_COMMAND\" : \"/bin/sh -c echo BECOME-SUCCESS-****** ; /usr/bin/python3 /home/ubuntu/.ansible/tmp/ansible-tmp-****/AnsiballZ_setup.py\" , \"SUDO_GID\" : \"1001\" , \"SUDO_UID\" : \"1001\" , \"SUDO_USER\" : \"ubuntu\" , \"TERM\" : \"xterm-256color\" , \"USER\" : \"root\" }, \u6607\u683c\u524d\u306e\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306f SUDO_USER \u3068 PWD \u3092\u898b\u308b\u3057\u304b\u7121\u3044\u304b\u306a\uff1f","title":"\u5909\u6570"},{"location":"Ansible/variable/#_1","text":"Using Variables \u2014 Ansible Documentation Special Variables \u2014 Ansible Documentation","title":"\u5909\u6570"},{"location":"Ansible/variable/#_2","text":"Understanding variable precedence Ansible \u5909\u6570\u306e\u512a\u5148\u9806\u4f4d\u3068\u66f8\u304d\u65b9\u3092\u307e\u3068\u3081\u3066\u307f\u305f - Qiita","title":"\u5b9a\u7fa9\u306e\u512a\u5148\u9806\u4f4d"},{"location":"Ansible/variable/#_3","text":"","title":"\u63a5\u7d9a\u8a2d\u5b9a"},{"location":"Ansible/variable/#ssh","text":"\u540c\u4e00playbook\u3067\u3001play\u306b\u3088\u3063\u3066\u63a5\u7d9a\u7528\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5909\u3048\u305f\u3044\u3068\u304d\u306a\u3069\u3002 ansible_user ansible_ssh_private_key_file \u305f\u3068\u3048\u3070\u3001\u6700\u521d\u306f\u7ba1\u7406\u7528\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u63a5\u7d9a\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\u306a\u3069\u884c\u3063\u3066\u3001\u6b21\u306eplay\u3067\u306f\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u3067\u63a5\u7d9a\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3064\u3064\u30a2\u30d7\u30ea\u306e\u30c7\u30d7\u30ed\u30a4\u3092\u884c\u3046\u3001\u306a\u3069\u306a\u3069\u3002","title":"SSH\u95a2\u9023\u8a2d\u5b9a"},{"location":"Ansible/variable/#_4","text":"Connecting to hosts: behavioral inventory parameters \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668\u3084\u516c\u958b\u9375\u8a2d\u5b9a\u3055\u308c\u3066\u306a\u3044\u30b5\u30fc\u30d0\u30fcOS\u3078SSH\u63a5\u7d9a\u306e\u969b\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f ansible_password \u3092\u4f7f\u3046\u3002 [ dev-server ] 192.168.0.211 ansible_user=developer ansible_password=deve1op! \u203b \u2191\u306fplaintext\u3067\u66f8\u3044\u3066\u308b\u306e\u3067\u3001vault\u3067\u6697\u53f7\u5316\u3057\u307e\u3057\u3087\u3046","title":"\u30ed\u30b0\u30a4\u30f3\u30d1\u30b9\u30ef\u30fc\u30c9"},{"location":"Ansible/variable/#become","text":"Become connection variables become: true \u3092\u4f7f\u3046\u5834\u5408\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5fc5\u8981\u306a\u5834\u5408\u3001 -K (--ask-become-pass) \u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u8868\u793a\u3059\u308b\u304b\u3001 ansible_become_password \u3067\u6607\u683c\u7528\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3002 --- - hosts : linux gather_facts : true become : true vars : ansible_become_password : this_is_become_password! tasks : - name : enable sudo with no password (on RHEL) ansible.builtin.copy : ...","title":"become\u30d1\u30b9\u30ef\u30fc\u30c9"},{"location":"Ansible/variable/#_5","text":"Special Variables \u2014 Ansible Documentation","title":"\u30de\u30b8\u30c3\u30af\u5909\u6570"},{"location":"Ansible/variable/#omit","text":"\u7701\u7565\u3057\u305f\u3044\u30d1\u30e9\u30e1\u30bf\u306b\u30bb\u30c3\u30c8\u3059\u308b\u3068\u7121\u8996\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002 [Ansible] \u7701\u7565\u3057\u305f\u3044\u30d1\u30e9\u30e1\u30bf\u306b\u5909\u6570\u6307\u5b9a\u305b\u3056\u308b\u3092\u5f97\u306a\u3044\u5834\u5408\u306b\u4f7f\u3046\u5909\u6570omit\u3068default\u30d5\u30a3\u30eb\u30bf - zaki work log - name : create files by csv ansible.builtin.file : state : \"{{ item.type }}\" path : \"{{ item.path }}\" mode : \"{{ item.mode | default(omit, true) }}\" owner : \"{{ item.owner | default(omit, true) }}\" group : \"{{ item.group | default(omit, true) }}\" loop : \"{{ res_input.list }}\"","title":"omit"},{"location":"Ansible/variable/#role_path","text":"\u73fe\u5728\u5b9f\u884c\u4e2d\u306e\u30ed\u30fc\u30eb\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3002 \u4f8b\u3048\u3070 /path/to/ansible/roles/sample/tasks/main.yml \u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u306e\u30ed\u30fc\u30eb\u306e\u4e2d\u3067 \"{{ role_path }}\" \u3092\u53c2\u7167\u3059\u308b\u3068\u3001 /path/to/ansible/roles/sample \u3092\u5f97\u3089\u308c\u308b\u3002 \u30ed\u30fc\u30eb\u306e\u4e2d\u3067\u53c2\u7167\u3067\u304d\u308b\u5909\u6570\u306a\u306e\u3067\u3001playbook\u3067\u53c2\u7167\u3057\u3066\u3082 undefined \u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002 \u30ed\u30fc\u30eb\u5185\u306etask\u304b\u3089 import_tasks \u3067\u8aad\u3093\u3060\u5148\u306e\u30d5\u30a1\u30a4\u30eb\u306etask\u3067\u53c2\u7167\u3059\u308b role_path \u3067\u3042\u308c\u3070\u53c2\u7167\u53ef\u80fd\u3002 (\u3042\u304f\u307e\u3067\u547c\u3073\u51fa\u3057\u5143\u30ed\u30fc\u30eb\u57fa\u6e96\u306e\u30d1\u30b9\u306b\u306a\u308b)","title":"role_path"},{"location":"Ansible/variable/#_6","text":"gather_facts : true \u5168\u90e8\u53d6\u308b\u3068\u91cd\u3044\u3051\u3069\u3001 gather_subset \u3092\u6307\u5b9a\u3059\u308b\u3068\u30b5\u30d6\u30bb\u30c3\u30c8\u3060\u3051\u53d6\u308c\u308b\u3002 --- - hosts : all gather_facts : true gather_subset : - network tasks : - debug : msg : \"{{ ansible_facts }}\" \u3053\u308c\u3067 wc -l \u3059\u308b\u3068\u7d04375\u884c\u3002 gather_subset \u306e\u6307\u5b9a\u304c\u7121\u3044\u3068926\u884c\u3002 ansible all -m setup | wc -l \u3060\u3068916\u884c\u3002 ansible -i inventory all -m setup -a \"gather_subset=network\" | wc -l \u3060\u3068365\u884c\u3002 OS\u60c5\u5831\u7a0b\u5ea6\u3067\u3042\u308c\u3070 min \u3067\u53d6\u308c\u308b\u3002 \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u6bce\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u306f network \u3082\u5fc5\u8981\u3063\u307d\u3044\u3002","title":"\u30ce\u30fc\u30c9\u306e\u30d5\u30a1\u30af\u30c8\u5909\u6570"},{"location":"Ansible/variable/#_7","text":"gather_subset: min \u3067\u78ba\u8a8d\u3002 become \u306a\u3057\u306e\u5834\u5408\u3002 \"ansible_env\" : { \"DBUS_SESSION_BUS_ADDRESS\" : \"unix:path=/run/user/1001/bus\" , \"HOME\" : \"/home/ubuntu\" , \"LANG\" : \"C.UTF-8\" , \"LOGNAME\" : \"ubuntu\" , \"MOTD_SHOWN\" : \"pam\" , \"PATH\" : \"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin\" , \"PWD\" : \"/home/ubuntu\" , \"SHELL\" : \"/bin/bash\" , \"SHLVL\" : \"0\" , \"SSH_CLIENT\" : \"****\" , \"SSH_CONNECTION\" : \"****\" , \"SSH_TTY\" : \"/dev/pts/1\" , \"TERM\" : \"xterm-256color\" , \"USER\" : \"ubuntu\" , \"XDG_RUNTIME_DIR\" : \"/run/user/1001\" , \"XDG_SESSION_CLASS\" : \"user\" , \"XDG_SESSION_ID\" : \"29\" , \"XDG_SESSION_TYPE\" : \"tty\" , \"_\" : \"/bin/sh\" }, become \u3042\u308a\u306e\u5834\u5408\u3002 \"ansible_env\" : { \"HOME\" : \"/root\" , \"LANG\" : \"C.UTF-8\" , \"LOGNAME\" : \"root\" , \"MAIL\" : \"/var/mail/root\" , \"PATH\" : \"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\" , \"PWD\" : \"/home/ubuntu\" , \"SHELL\" : \"/bin/bash\" , \"SUDO_COMMAND\" : \"/bin/sh -c echo BECOME-SUCCESS-****** ; /usr/bin/python3 /home/ubuntu/.ansible/tmp/ansible-tmp-****/AnsiballZ_setup.py\" , \"SUDO_GID\" : \"1001\" , \"SUDO_UID\" : \"1001\" , \"SUDO_USER\" : \"ubuntu\" , \"TERM\" : \"xterm-256color\" , \"USER\" : \"root\" }, \u6607\u683c\u524d\u306e\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306f SUDO_USER \u3068 PWD \u3092\u898b\u308b\u3057\u304b\u7121\u3044\u304b\u306a\uff1f","title":"\u74b0\u5883\u5909\u6570"},{"location":"Docker/","text":"\u57fa\u672c\u30fb\u30cd\u30bf\u5e33 docker\u30b3\u30de\u30f3\u30c9 docker container / image \u30b3\u30de\u30f3\u30c9\u65b0\u65e7\u6bd4\u8f03 - Qiita run -p | --publish local\u3067listen\u3059\u308b\u30dd\u30fc\u30c8 : \u30b3\u30f3\u30c6\u30ca\u306b\u63a5\u7d9a\u3059\u308b\u30dd\u30fc\u30c8 \u3092\u6307\u5b9a\u3059\u308b\u3002 -p 8081:80 \u3053\u308c\u3067\u30db\u30b9\u30c8\u4e0a\u306f 8081 \u3067Listen\u3057\u3066\u3001\u305d\u306e\u63a5\u7d9a\u3092\u30b3\u30f3\u30c6\u30ca\u306e80\u3078\u8ee2\u9001\u3059\u308b\u3002 \u30dc\u30ea\u30e5\u30fc\u30e0 (-v) \u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u5229\u7528 | Docker \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u30dc\u30ea\u30e5\u30fc\u30e0\u30de\u30a6\u30f3\u30c8 $ docker run --name httpd --rm -d -v webvolume:/var/tmp httpd webvolume \u30dc\u30ea\u30e5\u30fc\u30e0\u3092(\u7121\u3051\u308c\u3070\u81ea\u52d5\u4f5c\u6210\u3057\u3066) /var/tmp \u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\u3002 \u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u30fb\u524a\u9664\u3057\u3066\u3082\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u6b8b\u308b\u306e\u3067\u3001\u3053\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u5225\u30b3\u30f3\u30c6\u30ca\u3067\u30de\u30a6\u30f3\u30c8\u3059\u308c\u3070\u30c7\u30fc\u30bf\u3092\u4fdd\u6301\u3067\u304d\u308b\u3002 save $ docker save imagename:tag > imagename-tag.tar \u307e\u305f\u306f $ docker save imagename:tag -o imagename-tag.tar pull sha256\u30cf\u30c3\u30b7\u30e5\u5024\u6307\u5b9a $ docker pull httpd@sha256:f2179b693cfb49baa6e7500171deea7bef755338bf165b39aedacf2b4ae28455 volume \u30ea\u30b9\u30c8\u3059\u308b\u3002 $ docker volume ls \u53c2\u7167\u3055\u308c\u3066\u306a\u3044\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3002 \u30c0\u30f3\u30b0\u30ea\u30f3\u30b0 $ docker volume ls -f dangling = true prune \u4e0d\u8981\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664\u3059\u308b\u306b\u306f docker prune \u3092\u4f7f\u3046\u3002 \u30b3\u30f3\u30c6\u30ca\u306eprune $ docker container prune \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u505c\u6b62\u3057\u3066\u3044\u308b\u5168\u30b3\u30f3\u30c6\u30ca\u304c\u524a\u9664\u3055\u308c\u308b\u3002 10\u65e5\u4ee5\u524d\u306b \u505c\u6b62\u3057\u3066\u3044\u308b \u4f5c\u6210\u3055\u308c\u3066\u73fe\u5728\u505c\u6b62\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u5834\u5408\u306f\u3001 $ docker container prune --filter \"until=240h\" Go duration strings \u3092\u4f7f\u3063\u3066\u671f\u9593\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002 \u6307\u5b9a\u53ef\u80fd\u306a\u306e\u306f\u4ee5\u4e0b\u3001\u304b\u306a\uff1f Valid time units are \"ns\", \"us\" (or \"\u00b5s\"), \"ms\", \"s\", \"m\", \"h\" \u30a4\u30e1\u30fc\u30b8\u306eprune $ docker image prune \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3001\u30bf\u30b0\u304c\u8a2d\u5b9a\u3055\u308c\u305a\u306b <none> \u306b\u306a\u3063\u3066\u3044\u308b\u30a4\u30e1\u30fc\u30b8\u304c\u524a\u9664\u3055\u308c\u308b\u3002 <none> \u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3060\u3051\u3067\u3042\u308c\u3070 docker image ls -f \"dangling=true\" \u3067\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3067\u304d\u308b\u3002 \u5b9f\u884c\u30b5\u30f3\u30d7\u30eb \u30ed\u30fc\u30ab\u30eb\u306eweb\u30b3\u30f3\u30c6\u30f3\u30c4\u3092httpd\u306b\u6301\u305f\u305b\u308b docker run --name http_sample --rm -p 8081:80 -d -v $PWD:/usr/local/apache2/htdocs httpd:latest centos:stream8 quay\u306b\u3042\u308b\u30a4\u30e1\u30fc\u30b8 \u3092\u4f7f\u3046 docker run --name cent-stream --rm -it quay.io/centos/centos:stream8 bash \u30d3\u30eb\u30c9 \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af 30\u79d2\u5f8c\u306bhttpd\u304c\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3002 FROM httpd:2.4 COPY index.html /usr/local/apache2/htdocs/ RUN apt-get update; apt-get install curl HEALTHCHECK --interval = 5s --timeout = 5s --retries =15 CMD curl -f http://127.0.0.1 || exit 1 #CMD [\"httpd-foreground\"] CMD [ \"sh\" , \"-c\" , \"sleep 30; httpd-foreground\" ] \u8d77\u52d5\u51e6\u7406\u4e2d\u306f [zaki@node slowstart_httpd]$ docker run --rm -d -p 8080 :80 --name slowstart_httpd slowstart_httpd e5c366cb3bbab10284ab41bd3e23fbf24720c9c371c35a8137d78a3c138844c6 [zaki@node slowstart_httpd]$ docker container ls CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e5c366cb3bba slowstart_httpd \"sh -c 'sleep 30; ht\u2026\" 5 seconds ago Up 4 seconds (health: starting) 0.0.0.0:8080->80/tcp, :::8080->80/tcp slowstart_httpd \u8d77\u52d5\u5f8c\u306f [zaki@node slowstart_httpd]$ docker container ls CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e5c366cb3bba slowstart_httpd \"sh -c 'sleep 30; ht\u2026\" 32 seconds ago Up 31 seconds (healthy) 0.0.0.0:8080->80/tcp, :::8080->80/tcp slowstart_httpd GitHub Container Registry \u624b\u9806\u306f\u4ee5\u4e0b\u3002 \u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u5229\u7528 - GitHub Docs \u8a8d\u8a3c\u306b\u4f7f\u7528\u3059\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u3001\u500b\u4eba\u7528\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002 \u500b\u4eba\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u4f7f\u7528\u3059\u308b - GitHub Docs GitHub\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u3001\u5165\u624b\u3057\u305f\u30c8\u30fc\u30af\u30f3\u3092\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u3057\u3066\u3001 $ docker login ghcr.io \u3059\u308c\u3070\u8a8d\u8a3c\u3067\u304d\u308b\u3002 \u3042\u3068\u306f ghcr.io/zaki-lknr/squid:5.0.4-alpine-3.13 \u3068\u304b\u306e\u540d\u524d\u306e\u30bf\u30b0\u3092\u3064\u3051\u308c\u3070 push \u3082\u3067\u304d\u308b\u3002 push\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u306f\u3001GitHub\u306eweb\u753b\u9762\u306e\u300cPackages\u300d\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306fprivate\u8a2d\u5b9a\u3002 ECR (Elastic COntainer Registry) \u8a8d\u8a3c(\u306e\u305f\u3081\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u53d6\u5f97)\u306b\u306f aws CLI\u304c\u5fc5\u8981\u3002 AWS CLI \u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u307e\u305f\u306f\u66f4\u65b0\u3057\u307e\u3059\u3002 - AWS Command Line Interface \u8a2d\u5b9a\u306e\u57fa\u672c - AWS Command Line Interface Linux(x86_64)\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 $ curl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\" $ unzip awscliv2.zip $ sudo ./aws/install \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u3002 $ aws configure AWS Access Key ID [None]: .... AWS Secret Access Key [None]: .... Default region name [None]: ap-northeast-1 Default output format [None]: json \u3053\u308c\u3067\u3001 aws ecr get-login-password \u3092\u5b9f\u884c\u3059\u308b\u3068\u30ec\u30b8\u30b9\u30c8\u30ea\u8a8d\u8a3c\u306b\u4f7f\u7528\u3059\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002 \u30ed\u30b0\u30a4\u30f3\u6642\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u306f AWS \u56fa\u5b9a\u306e\u305f\u3081\u3001\u30b3\u30de\u30f3\u30c9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 $ podman login <registry URL> -u AWS -p $( aws ecr get-login-password )","title":"\u57fa\u672c\u30fb\u30cd\u30bf\u5e33"},{"location":"Docker/#_1","text":"","title":"\u57fa\u672c\u30fb\u30cd\u30bf\u5e33"},{"location":"Docker/#docker","text":"docker container / image \u30b3\u30de\u30f3\u30c9\u65b0\u65e7\u6bd4\u8f03 - Qiita","title":"docker\u30b3\u30de\u30f3\u30c9"},{"location":"Docker/#run","text":"","title":"run"},{"location":"Docker/#-p-publish","text":"local\u3067listen\u3059\u308b\u30dd\u30fc\u30c8 : \u30b3\u30f3\u30c6\u30ca\u306b\u63a5\u7d9a\u3059\u308b\u30dd\u30fc\u30c8 \u3092\u6307\u5b9a\u3059\u308b\u3002 -p 8081:80 \u3053\u308c\u3067\u30db\u30b9\u30c8\u4e0a\u306f 8081 \u3067Listen\u3057\u3066\u3001\u305d\u306e\u63a5\u7d9a\u3092\u30b3\u30f3\u30c6\u30ca\u306e80\u3078\u8ee2\u9001\u3059\u308b\u3002","title":"-p | --publish"},{"location":"Docker/#-v","text":"\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u5229\u7528 | Docker \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u30dc\u30ea\u30e5\u30fc\u30e0\u30de\u30a6\u30f3\u30c8 $ docker run --name httpd --rm -d -v webvolume:/var/tmp httpd webvolume \u30dc\u30ea\u30e5\u30fc\u30e0\u3092(\u7121\u3051\u308c\u3070\u81ea\u52d5\u4f5c\u6210\u3057\u3066) /var/tmp \u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\u3002 \u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u30fb\u524a\u9664\u3057\u3066\u3082\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u6b8b\u308b\u306e\u3067\u3001\u3053\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u5225\u30b3\u30f3\u30c6\u30ca\u3067\u30de\u30a6\u30f3\u30c8\u3059\u308c\u3070\u30c7\u30fc\u30bf\u3092\u4fdd\u6301\u3067\u304d\u308b\u3002","title":"\u30dc\u30ea\u30e5\u30fc\u30e0 (-v)"},{"location":"Docker/#save","text":"$ docker save imagename:tag > imagename-tag.tar \u307e\u305f\u306f $ docker save imagename:tag -o imagename-tag.tar","title":"save"},{"location":"Docker/#pull","text":"sha256\u30cf\u30c3\u30b7\u30e5\u5024\u6307\u5b9a $ docker pull httpd@sha256:f2179b693cfb49baa6e7500171deea7bef755338bf165b39aedacf2b4ae28455","title":"pull"},{"location":"Docker/#volume","text":"\u30ea\u30b9\u30c8\u3059\u308b\u3002 $ docker volume ls \u53c2\u7167\u3055\u308c\u3066\u306a\u3044\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3002 \u30c0\u30f3\u30b0\u30ea\u30f3\u30b0 $ docker volume ls -f dangling = true","title":"volume"},{"location":"Docker/#prune","text":"\u4e0d\u8981\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664\u3059\u308b\u306b\u306f docker prune \u3092\u4f7f\u3046\u3002","title":"prune"},{"location":"Docker/#prune_1","text":"$ docker container prune \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u505c\u6b62\u3057\u3066\u3044\u308b\u5168\u30b3\u30f3\u30c6\u30ca\u304c\u524a\u9664\u3055\u308c\u308b\u3002 10\u65e5\u4ee5\u524d\u306b \u505c\u6b62\u3057\u3066\u3044\u308b \u4f5c\u6210\u3055\u308c\u3066\u73fe\u5728\u505c\u6b62\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u5834\u5408\u306f\u3001 $ docker container prune --filter \"until=240h\" Go duration strings \u3092\u4f7f\u3063\u3066\u671f\u9593\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002 \u6307\u5b9a\u53ef\u80fd\u306a\u306e\u306f\u4ee5\u4e0b\u3001\u304b\u306a\uff1f Valid time units are \"ns\", \"us\" (or \"\u00b5s\"), \"ms\", \"s\", \"m\", \"h\"","title":"\u30b3\u30f3\u30c6\u30ca\u306eprune"},{"location":"Docker/#prune_2","text":"$ docker image prune \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3001\u30bf\u30b0\u304c\u8a2d\u5b9a\u3055\u308c\u305a\u306b <none> \u306b\u306a\u3063\u3066\u3044\u308b\u30a4\u30e1\u30fc\u30b8\u304c\u524a\u9664\u3055\u308c\u308b\u3002 <none> \u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3060\u3051\u3067\u3042\u308c\u3070 docker image ls -f \"dangling=true\" \u3067\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3067\u304d\u308b\u3002","title":"\u30a4\u30e1\u30fc\u30b8\u306eprune"},{"location":"Docker/#_2","text":"","title":"\u5b9f\u884c\u30b5\u30f3\u30d7\u30eb"},{"location":"Docker/#webhttpd","text":"docker run --name http_sample --rm -p 8081:80 -d -v $PWD:/usr/local/apache2/htdocs httpd:latest","title":"\u30ed\u30fc\u30ab\u30eb\u306eweb\u30b3\u30f3\u30c6\u30f3\u30c4\u3092httpd\u306b\u6301\u305f\u305b\u308b"},{"location":"Docker/#centosstream8","text":"quay\u306b\u3042\u308b\u30a4\u30e1\u30fc\u30b8 \u3092\u4f7f\u3046 docker run --name cent-stream --rm -it quay.io/centos/centos:stream8 bash","title":"centos:stream8"},{"location":"Docker/#_3","text":"","title":"\u30d3\u30eb\u30c9"},{"location":"Docker/#_4","text":"30\u79d2\u5f8c\u306bhttpd\u304c\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3002 FROM httpd:2.4 COPY index.html /usr/local/apache2/htdocs/ RUN apt-get update; apt-get install curl HEALTHCHECK --interval = 5s --timeout = 5s --retries =15 CMD curl -f http://127.0.0.1 || exit 1 #CMD [\"httpd-foreground\"] CMD [ \"sh\" , \"-c\" , \"sleep 30; httpd-foreground\" ] \u8d77\u52d5\u51e6\u7406\u4e2d\u306f [zaki@node slowstart_httpd]$ docker run --rm -d -p 8080 :80 --name slowstart_httpd slowstart_httpd e5c366cb3bbab10284ab41bd3e23fbf24720c9c371c35a8137d78a3c138844c6 [zaki@node slowstart_httpd]$ docker container ls CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e5c366cb3bba slowstart_httpd \"sh -c 'sleep 30; ht\u2026\" 5 seconds ago Up 4 seconds (health: starting) 0.0.0.0:8080->80/tcp, :::8080->80/tcp slowstart_httpd \u8d77\u52d5\u5f8c\u306f [zaki@node slowstart_httpd]$ docker container ls CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e5c366cb3bba slowstart_httpd \"sh -c 'sleep 30; ht\u2026\" 32 seconds ago Up 31 seconds (healthy) 0.0.0.0:8080->80/tcp, :::8080->80/tcp slowstart_httpd","title":"\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af"},{"location":"Docker/#github-container-registry","text":"\u624b\u9806\u306f\u4ee5\u4e0b\u3002 \u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u5229\u7528 - GitHub Docs \u8a8d\u8a3c\u306b\u4f7f\u7528\u3059\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u3001\u500b\u4eba\u7528\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002 \u500b\u4eba\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u4f7f\u7528\u3059\u308b - GitHub Docs GitHub\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u3001\u5165\u624b\u3057\u305f\u30c8\u30fc\u30af\u30f3\u3092\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u3057\u3066\u3001 $ docker login ghcr.io \u3059\u308c\u3070\u8a8d\u8a3c\u3067\u304d\u308b\u3002 \u3042\u3068\u306f ghcr.io/zaki-lknr/squid:5.0.4-alpine-3.13 \u3068\u304b\u306e\u540d\u524d\u306e\u30bf\u30b0\u3092\u3064\u3051\u308c\u3070 push \u3082\u3067\u304d\u308b\u3002 push\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u306f\u3001GitHub\u306eweb\u753b\u9762\u306e\u300cPackages\u300d\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306fprivate\u8a2d\u5b9a\u3002","title":"GitHub Container Registry"},{"location":"Docker/#ecr-elastic-container-registry","text":"\u8a8d\u8a3c(\u306e\u305f\u3081\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u53d6\u5f97)\u306b\u306f aws CLI\u304c\u5fc5\u8981\u3002 AWS CLI \u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u307e\u305f\u306f\u66f4\u65b0\u3057\u307e\u3059\u3002 - AWS Command Line Interface \u8a2d\u5b9a\u306e\u57fa\u672c - AWS Command Line Interface Linux(x86_64)\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 $ curl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\" $ unzip awscliv2.zip $ sudo ./aws/install \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u3002 $ aws configure AWS Access Key ID [None]: .... AWS Secret Access Key [None]: .... Default region name [None]: ap-northeast-1 Default output format [None]: json \u3053\u308c\u3067\u3001 aws ecr get-login-password \u3092\u5b9f\u884c\u3059\u308b\u3068\u30ec\u30b8\u30b9\u30c8\u30ea\u8a8d\u8a3c\u306b\u4f7f\u7528\u3059\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002 \u30ed\u30b0\u30a4\u30f3\u6642\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u306f AWS \u56fa\u5b9a\u306e\u305f\u3081\u3001\u30b3\u30de\u30f3\u30c9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 $ podman login <registry URL> -u AWS -p $( aws ecr get-login-password )","title":"ECR (Elastic COntainer Registry)"},{"location":"Docker/build/","text":"\u30a4\u30e1\u30fc\u30b8\u30d3\u30eb\u30c9 \u30ed\u30b1\u30fc\u30eb\u306e\u8ffd\u52a0 Debian\u7cfb\u306e\u5834\u5408\u306f\u3053\u3093\u306a\u611f\u3058\u3002 FROM guacamole/guacamole:1.4.0 USER 0 RUN apt-get update \\ && apt-get install -y locales \\ && sed -i -E 's/# (ja_JP.UTF-8)/\\1/' /etc/locale.gen \\ && locale-gen \\ && update-locale LANG = ja_JP.UTF-8 ENV LANG ja_JP.UTF-8 USER 1001","title":"\u30a4\u30e1\u30fc\u30b8\u30d3\u30eb\u30c9"},{"location":"Docker/build/#_1","text":"","title":"\u30a4\u30e1\u30fc\u30b8\u30d3\u30eb\u30c9"},{"location":"Docker/build/#_2","text":"Debian\u7cfb\u306e\u5834\u5408\u306f\u3053\u3093\u306a\u611f\u3058\u3002 FROM guacamole/guacamole:1.4.0 USER 0 RUN apt-get update \\ && apt-get install -y locales \\ && sed -i -E 's/# (ja_JP.UTF-8)/\\1/' /etc/locale.gen \\ && locale-gen \\ && update-locale LANG = ja_JP.UTF-8 ENV LANG ja_JP.UTF-8 USER 1001","title":"\u30ed\u30b1\u30fc\u30eb\u306e\u8ffd\u52a0"},{"location":"Docker/compose/","text":"Docker Compose command \u8d77\u52d5 docker compose up \u3053\u306e\u5834\u5408\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d77\u52d5\u3059\u308b\u3002 \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d77\u52d5\u3059\u308b\u306b\u306f -d \u3092\u4ed8\u3051\u308b\u3002 docker compose up -d \u505c\u6b62\u3068\u524a\u9664 docker compose down down \u3067\u30b3\u30f3\u30c6\u30ca\u306f\u524a\u9664\u3055\u308c\u308b\u304c\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u6b8b\u308b\u3002 \u30dc\u30ea\u30e5\u30fc\u30e0\u3082\u524a\u9664\u3059\u308b\u306b\u306f -v \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3059\u308b\u3002 docker compose down -v \u7279\u5b9a\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u307f\u505c\u6b62\u30fb\u524a\u9664\u3059\u308b\u306b\u306f\u3001\u5f15\u6570\u306bCompose File\u3067\u6307\u5b9a\u3057\u3066\u3044\u308b\u540d\u79f0\u3092\u6307\u5b9a\u3059\u308b\u3002 \u305f\u3060\u3057 down \u3067\u306f\u3053\u306e\u6307\u5b9a\u306f\u3067\u304d\u306a\u3044\u3002 docker compose stop myapp docker compose rm myapp","title":"Docker Compose"},{"location":"Docker/compose/#docker-compose","text":"","title":"Docker Compose"},{"location":"Docker/compose/#command","text":"","title":"command"},{"location":"Docker/compose/#_1","text":"docker compose up \u3053\u306e\u5834\u5408\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d77\u52d5\u3059\u308b\u3002 \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d77\u52d5\u3059\u308b\u306b\u306f -d \u3092\u4ed8\u3051\u308b\u3002 docker compose up -d","title":"\u8d77\u52d5"},{"location":"Docker/compose/#_2","text":"docker compose down down \u3067\u30b3\u30f3\u30c6\u30ca\u306f\u524a\u9664\u3055\u308c\u308b\u304c\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u6b8b\u308b\u3002 \u30dc\u30ea\u30e5\u30fc\u30e0\u3082\u524a\u9664\u3059\u308b\u306b\u306f -v \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3059\u308b\u3002 docker compose down -v \u7279\u5b9a\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u307f\u505c\u6b62\u30fb\u524a\u9664\u3059\u308b\u306b\u306f\u3001\u5f15\u6570\u306bCompose File\u3067\u6307\u5b9a\u3057\u3066\u3044\u308b\u540d\u79f0\u3092\u6307\u5b9a\u3059\u308b\u3002 \u305f\u3060\u3057 down \u3067\u306f\u3053\u306e\u6307\u5b9a\u306f\u3067\u304d\u306a\u3044\u3002 docker compose stop myapp docker compose rm myapp","title":"\u505c\u6b62\u3068\u524a\u9664"},{"location":"Docker/configure/","text":"\u8a2d\u5b9a DNS \u30b3\u30f3\u30c6\u30ca\u5185\u3067\u4f7f\u7528\u3059\u308bDNS\u8a2d\u5b9a\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f\u3001 --dns \u3092\u6307\u5b9a\u3059\u308b\u304b\u3001\u30db\u30b9\u30c8\u306e /etc/docker/daemon.json \u3067\u4e00\u5f8b\u6307\u5b9a\u3059\u308b\u3002 { \"dns\" : [ \"8.8.8.8\" , \"8.8.4.4\" ] } proxy\u8a2d\u5b9a Docker Engine\u306eproxy\u8a2d\u5b9a HTTP/HTTPS proxy systemd\u306e\u30e6\u30cb\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\u306b\u5909\u6570\u8a2d\u5b9a\u3059\u308b\u3002 $ sudo mkdir -p /etc/systemd/system/docker.service.d $ cat /etc/systemd/system/docker.service.d/http-proxy.conf [Service] Environment=\"HTTP_PROXY=http://proxy.example.com:8080\" Environment=\"HTTPS_PROXY=http://proxy.example.com:8080\" $ sudo systemctl daemon-reload $ sudo systemctl restart docker \u3053\u308c\u3067proxy\u74b0\u5883\u4e0b\u306b\u3042\u308b\u30db\u30b9\u30c8\u30ce\u30fc\u30c9\u4e0a\u3067 docker pull \u306a\u3069\u3067\u304d\u308b\u3002 \u30ea\u30e2\u30fc\u30c8\u304b\u3089\u306eTCP\u63a5\u7d9a /lib/systemd/system/docker.service --- /lib/systemd/system/_docker.service 2021-04-10 07:46:42.000000000 +0900 +++ /lib/systemd/system/docker.service 2021-08-10 09:39:32.451408694 +0900 @@ -10,7 +10,7 @@ # the default is not to use systemd for cgroups because the delegate issues still # exists and systemd currently does not support the cgroup feature set required # for containers run by docker -ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock +ExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0 --containerd=/run/containerd/containerd.sock ExecReload=/bin/kill -s HUP $MAINPID TimeoutSec=0 RestartSec=2 \u3053\u308c\u30672375/TCP\u3067Listen\u3059\u308b\u3002","title":"\u8a2d\u5b9a"},{"location":"Docker/configure/#_1","text":"","title":"\u8a2d\u5b9a"},{"location":"Docker/configure/#dns","text":"\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u4f7f\u7528\u3059\u308bDNS\u8a2d\u5b9a\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f\u3001 --dns \u3092\u6307\u5b9a\u3059\u308b\u304b\u3001\u30db\u30b9\u30c8\u306e /etc/docker/daemon.json \u3067\u4e00\u5f8b\u6307\u5b9a\u3059\u308b\u3002 { \"dns\" : [ \"8.8.8.8\" , \"8.8.4.4\" ] }","title":"DNS"},{"location":"Docker/configure/#proxy","text":"","title":"proxy\u8a2d\u5b9a"},{"location":"Docker/configure/#docker-engineproxy","text":"HTTP/HTTPS proxy systemd\u306e\u30e6\u30cb\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\u306b\u5909\u6570\u8a2d\u5b9a\u3059\u308b\u3002 $ sudo mkdir -p /etc/systemd/system/docker.service.d $ cat /etc/systemd/system/docker.service.d/http-proxy.conf [Service] Environment=\"HTTP_PROXY=http://proxy.example.com:8080\" Environment=\"HTTPS_PROXY=http://proxy.example.com:8080\" $ sudo systemctl daemon-reload $ sudo systemctl restart docker \u3053\u308c\u3067proxy\u74b0\u5883\u4e0b\u306b\u3042\u308b\u30db\u30b9\u30c8\u30ce\u30fc\u30c9\u4e0a\u3067 docker pull \u306a\u3069\u3067\u304d\u308b\u3002","title":"Docker Engine\u306eproxy\u8a2d\u5b9a"},{"location":"Docker/configure/#tcp","text":"/lib/systemd/system/docker.service --- /lib/systemd/system/_docker.service 2021-04-10 07:46:42.000000000 +0900 +++ /lib/systemd/system/docker.service 2021-08-10 09:39:32.451408694 +0900 @@ -10,7 +10,7 @@ # the default is not to use systemd for cgroups because the delegate issues still # exists and systemd currently does not support the cgroup feature set required # for containers run by docker -ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock +ExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0 --containerd=/run/containerd/containerd.sock ExecReload=/bin/kill -s HUP $MAINPID TimeoutSec=0 RestartSec=2 \u3053\u308c\u30672375/TCP\u3067Listen\u3059\u308b\u3002","title":"\u30ea\u30e2\u30fc\u30c8\u304b\u3089\u306eTCP\u63a5\u7d9a"},{"location":"Docker/install/","text":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb Docker Install Docker Engine | Docker Documentation \u5404\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u6bce\u306e\u30da\u30fc\u30b8\u53c2\u7167\u3002 Windows\u3082home\u542b\u3081\u3066OK Windows 10 Home\u3078\u306eDocker Desktop (ver 3.0.0) \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u4f55\u4e8b\u3082\u306a\u304f\u7c21\u5358\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u305f (2020.12\u6642\u70b9) - Qiita Docker Compose v1: Install Docker Compose | Docker Documentation v2: Compose V2 | Docker Documentation docker\u30b0\u30eb\u30fc\u30d7\u3078\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u30a2\u30ec(\u30b3\u30d4\u30da\u7528) $ sudo usermod -aG docker $USER Oracle Linux \u6a19\u6e96 OCI\u3067OL7.9\u306e\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3060\u3068\u3053\u308c\u304c\u30d2\u30c3\u30c8\u3059\u308b\u3002 [ opc@instance-20210801-1151 ~ ] $ yum info docker - engine.aarch64 \u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30e9\u30b0\u30a4\u30f3 :langpacks, ulninfo \u5229\u7528\u53ef\u80fd\u306a\u30d1\u30c3\u30b1\u30fc\u30b8 \u540d\u524d : docker - engine \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30fc : aarch64 \u30d0\u30fc\u30b8\u30e7\u30f3 : 19.03.11 .ol \u30ea\u30ea\u30fc\u30b9 : 13. el7 \u5bb9\u91cf : 14 M \u30ea\u30dd\u30b8\u30c8\u30ea\u30fc : ol7_oci_included / aarch64 \u8981\u7d04 : The open - source application container engine URL : https : // dockerproject.org \u30e9\u30a4\u30bb\u30f3\u30b9 : ASL 2.0 \u8aac\u660e : Docker is an open source project to build, ship and run any application as a : lightweight container. : : Docker containers are both hardware - agnostic and platform - agnostic. This means : they can run anywhere, from your laptop to the largest EC2 compute instance and : everything in between - and they don ' t require you to use a particular : language , framework or packaging system . That makes them great building blocks : for deploying and scaling web apps, databases, and backend services without : depending on a particular stack or provider. centos\u7248 \u4e92\u63db\u6027\u304c\u9ad8\u305d\u3046\u306aCentOS\u7248\u306e\u624b\u9806\u30fb\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30fb\u304a\u8a66\u3057\u306bnginx\u30b3\u30f3\u30c6\u30ca\u30c7\u30d7\u30ed\u30a4\u306f\u3067\u304d\u305f\u3002 Install Docker Engine on CentOS | Docker Documentation \u305f\u3060\u3057\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8( slirp4netns , fuse-overlayfs )\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306b\u3001 ol7_developer \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u6709\u52b9\u306b\u3057\u3066\u304a\u304f\u5fc5\u8981\u3042\u308a\u3002(\u30c7\u30d5\u30a9\u30eb\u30c8\u7121\u52b9) $ sudo yum-config-manager --enable ol7_developer Oracle Linux 7 (aarch64) Development | Oracle, Software. Hardware. Complete.","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"Docker/install/#_1","text":"","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"Docker/install/#docker","text":"Install Docker Engine | Docker Documentation \u5404\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u6bce\u306e\u30da\u30fc\u30b8\u53c2\u7167\u3002 Windows\u3082home\u542b\u3081\u3066OK Windows 10 Home\u3078\u306eDocker Desktop (ver 3.0.0) \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u4f55\u4e8b\u3082\u306a\u304f\u7c21\u5358\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u305f (2020.12\u6642\u70b9) - Qiita","title":"Docker"},{"location":"Docker/install/#docker-compose","text":"v1: Install Docker Compose | Docker Documentation v2: Compose V2 | Docker Documentation","title":"Docker Compose"},{"location":"Docker/install/#docker_1","text":"$ sudo usermod -aG docker $USER","title":"docker\u30b0\u30eb\u30fc\u30d7\u3078\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u30a2\u30ec(\u30b3\u30d4\u30da\u7528)"},{"location":"Docker/install/#oracle-linux","text":"","title":"Oracle Linux"},{"location":"Docker/install/#_2","text":"OCI\u3067OL7.9\u306e\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3060\u3068\u3053\u308c\u304c\u30d2\u30c3\u30c8\u3059\u308b\u3002 [ opc@instance-20210801-1151 ~ ] $ yum info docker - engine.aarch64 \u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30e9\u30b0\u30a4\u30f3 :langpacks, ulninfo \u5229\u7528\u53ef\u80fd\u306a\u30d1\u30c3\u30b1\u30fc\u30b8 \u540d\u524d : docker - engine \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30fc : aarch64 \u30d0\u30fc\u30b8\u30e7\u30f3 : 19.03.11 .ol \u30ea\u30ea\u30fc\u30b9 : 13. el7 \u5bb9\u91cf : 14 M \u30ea\u30dd\u30b8\u30c8\u30ea\u30fc : ol7_oci_included / aarch64 \u8981\u7d04 : The open - source application container engine URL : https : // dockerproject.org \u30e9\u30a4\u30bb\u30f3\u30b9 : ASL 2.0 \u8aac\u660e : Docker is an open source project to build, ship and run any application as a : lightweight container. : : Docker containers are both hardware - agnostic and platform - agnostic. This means : they can run anywhere, from your laptop to the largest EC2 compute instance and : everything in between - and they don ' t require you to use a particular : language , framework or packaging system . That makes them great building blocks : for deploying and scaling web apps, databases, and backend services without : depending on a particular stack or provider.","title":"\u6a19\u6e96"},{"location":"Docker/install/#centos","text":"\u4e92\u63db\u6027\u304c\u9ad8\u305d\u3046\u306aCentOS\u7248\u306e\u624b\u9806\u30fb\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30fb\u304a\u8a66\u3057\u306bnginx\u30b3\u30f3\u30c6\u30ca\u30c7\u30d7\u30ed\u30a4\u306f\u3067\u304d\u305f\u3002 Install Docker Engine on CentOS | Docker Documentation \u305f\u3060\u3057\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8( slirp4netns , fuse-overlayfs )\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306b\u3001 ol7_developer \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u6709\u52b9\u306b\u3057\u3066\u304a\u304f\u5fc5\u8981\u3042\u308a\u3002(\u30c7\u30d5\u30a9\u30eb\u30c8\u7121\u52b9) $ sudo yum-config-manager --enable ol7_developer Oracle Linux 7 (aarch64) Development | Oracle, Software. Hardware. Complete.","title":"centos\u7248"},{"location":"Git/","text":"Git\u57fa\u672c\u64cd\u4f5c gist \u304b\u3089\u5f15\u3063\u8d8a\u3057\u3002 git clone branch\u3092\u6307\u5b9a $ git clone -b <branch-name> <repository-URL> tag\u306e\u5834\u5408\u3082\u540c\u3058\u3088\u3046\u306b $ git clone -b <tag-name> <repository> \u51fa\u529b\u5148\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u6307\u5b9a -l <dirname> \u3092\u4ed8\u3051\u308b $ git clone -b <branch-name> <repository-URL> -l app-src-work \u5b9f\u306f -l \u306f\u7121\u304f\u3066\u3082\u3088\u3044\u3002 $ git clone <repository-url> <local-path> \u30ed\u30fc\u30ab\u30eb\u30ea\u30dd\u30b8\u30c8\u30ea\u4f5c\u6210 \u30ea\u30dd\u30b8\u30c8\u30ea\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066\u305d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4e0a\u3067 git init \u3057\u3066 README.md \u3092initial commit\u3059\u308b\u3002 $ git init $ echo \"# this is hogehgoe repository\" >> README.md $ git add README.md $ git commit -m \"first commit\" commit \u307e\u305a\u5bfe\u8c61\u3092add $ git add path/file commit $ git commit \u3053\u308c\u5b9f\u884c\u3059\u308b\u3068\u30a8\u30c7\u30a3\u30bf\u304c\u8d77\u52d5\u3059\u308b\u3002 \u5148\u982d # \u306b\u306a\u3063\u3066\u308b\u884c\u306f\u5168\u3066\u7121\u8996\u3055\u308c\u308b\u306e\u3067\u3001\u4efb\u610f\u306e\u4f4d\u7f6e\u306b\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u3092\u5165\u529b\u3059\u308b option\u3067\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u4ed8\u304dcommit $ git commit -m \"commit messages\" amend $ git commit --amend \u76f4\u524d\u306e\u30b3\u30df\u30c3\u30c8\u306b\u5185\u5bb9\u3092\u3042\u3068\u304b\u3089\u8ffd\u52a0\u3067\u304d\u308b\u3002 \u30b3\u30df\u30c3\u30c8\u6f0f\u308c\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u3063\u305f\u5834\u5408\u306a\u3069\u306b1\u30b3\u30df\u30c3\u30c8\u306b\u307e\u3068\u3081\u3089\u308c\u308b\u3002 $ git commit --amend --no-edit --no-edit \u3092\u4ed8\u4e0e\u3059\u308c\u3070\u3001\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u306f\u524d\u3068\u540c\u3058\u3082\u306e\u3092\u4f7f\u7528\u3067\u304d\u308b\u3002 \u30de\u30fc\u30b8 hogehoge\u30d6\u30e9\u30f3\u30c1\u3092\u30de\u30fc\u30b8\u3059\u308b $ git merge hogehoge \u30de\u30fc\u30b8\u30b3\u30df\u30c3\u30c8\u3092\u4f5c\u308b (--no-ff) $ git merge features/add_worker_node --no-ff rebase\u3067\u30de\u30fc\u30b8 \u4f5c\u696d\u30d6\u30e9\u30f3\u30c1\u3092master\u306bmerge\u3059\u308b\u524d\u306b\u3001master\u306e\u5909\u66f4\u70b9\u3092\u4f5c\u696d\u30d6\u30e9\u30f3\u30c1\u3067rebase\u3067\u53d6\u308a\u8fbc\u3093\u3067\u304a\u304f\u3001\u304c\u57fa\u672c\u306e\u4f7f\u7528\u6cd5\u3063\u307d\u3044\u3002 \u3088\u304f\u5206\u304b\u308b\uff01git rebase\u3068merge\u306e\u9055\u3044\u3068\u4f7f\u3044\u5206\u3051 | WWW\u30af\u30ea\u30a8\u30a4\u30bf\u30fc\u30ba 3\u5206\u3067\u7406\u89e3\u3067\u304d\u308b\uff01git-rebase\u3068merge\u3068\u306e\u9055\u3044\u307e\u3068\u3081 | CodeCampus 7. rebase\u3067\u30de\u30fc\u30b8\u3059\u308b\uff5c\u30b5\u30eb\u5148\u751f\u306eGit\u5165\u9580\u3010\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7ba1\u7406\u30c4\u30fc\u30ebBacklog\u3011 merge \u306f\u300c\u4ed6\u30d6\u30e9\u30f3\u30c1\u306e\u5185\u5bb9\u3092\u53d6\u308a\u8fbc\u3080\u300d\u3067\u3001 rebase \u306f\u300c\u4ed6\u30d6\u30e9\u30f3\u30c1\u306e\u5185\u5bb9\u3092\u9069\u7528\u6e08\u307f\u3060\u3063\u305f\u3053\u3068\u306b\u3059\u308b\u300d\u304b\u306a\uff1f \u30ea\u30e2\u30fc\u30c8\u30d6\u30e9\u30f3\u30c1\u304b\u3089\u6700\u65b0\u3092\u53d6\u5f97 $ git fetch origin \u6307\u5b9a\u30d6\u30e9\u30f3\u30c1\u306e\u5185\u5bb9\u3092 rebase \u3067\u73fe\u5728\u306e\u30d6\u30e9\u30f3\u30c1\u3078\u53d6\u308a\u8fbc\u307f $ git rebase origin/hogehoge \u5909\u66f4\u304c\u30ed\u30fc\u30ab\u30eb\u306b\u6b8b\u3063\u3066\u308b\u5834\u5408\u306f $ git rebase origin/hogehoge error: cannot rebase: You have unstaged changes. error: Please commit or stash them. \u30a8\u30e9\u30fc\u306b\u306a\u308b\u306e\u3067\u3001\u9000\u907f\u3057\u3066rebase\u3059\u308b $ git stash save $ git rebase origin/hogehoge $ git stash pop origin/main\u304b\u3089\u53d6\u308a\u8fbc\u3080\u3068\u304d\u306b pull \u3059\u308b\u3068merge\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001rebase\u3057\u305f\u3044\u5834\u5408\u306f fetch \u3059\u308b\u3002(\u305f\u3076\u3093) conflict\u3057\u305f\u5834\u5408 \u4fee\u6b63\u3059\u308b\u5834\u5408\u306f\u666e\u901a\u306b \u4fee\u6b63\u3059\u308b add \u3057\u3066 commit \u3059\u308b(\u666e\u901a) (\u300c\u4fee\u6b63\u3059\u308b\u300d\u3092\u3082\u3046\u5c11\u3057\u8a73\u3057\u304f\u3042\u3068\u3067\u66f8\u3053\u3046) merge\u3092\u3084\u3081\u308b\u5834\u5408(\u672a\u4fee\u6b63) $ git merge --abort \u30de\u30fc\u30b8\u524d\u306e\u72b6\u614b\u306b\u623b\u308b add (\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0) \u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u306b\u8ffd\u52a0 $ git add <path> \u30d1\u30b9\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u6307\u5b9a\u306e\u5834\u5408\u306f\u518d\u5e30\u7684\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u8ffd\u52a0\u3055\u308c\u308b \u8ffd\u52a0\u306e\u53d6\u308a\u6d88\u3057 $ git reset HEAD <path> \u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d $ git status \u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u306b\u8ffd\u52a0\u3055\u308c\u305f\u5dee\u5206\u3092\u78ba\u8a8d $ git diff --cached [file] \u30d6\u30e9\u30f3\u30c1\u64cd\u4f5c \u4eca\u3044\u308b\u30d6\u30e9\u30f3\u30c1\u3069\u3053\uff1f $ git branch dev/calico devel features/cni_use_calico features/delete_node features/divide_playbook features/divide_roles features/separate_cni_firewalld_configure features/separate_parameters features/wait_new_node * master \u30d6\u30e9\u30f3\u30c1\u4f5c\u6210 $ git branch features/divide_playbook \u30d6\u30e9\u30f3\u30c1\u5207\u308a\u66ff\u3048 $ git checkout features/divide_playbook Git 2.23\u4ee5\u964d\u306f $ git switch features/divide_playbook \u30d6\u30e9\u30f3\u30c1\u4f5c\u6210\uff06\u5207\u308a\u66ff\u3048 $ git checkout -b features/divide_playbook Git 2.23\u4ee5\u964d\u306f $ git switch -c features/divide_playbook \u30ed\u30fc\u30ab\u30eb\u30d6\u30e9\u30f3\u30c1\u306e\u524a\u9664 $ git branch --delete features/swapoff features/replace-yum-config-manager \u2191\u8907\u6570\u6307\u5b9a\u3057\u305f\u5834\u5408 \u30ed\u30fc\u30ab\u30eb\u30d6\u30e9\u30f3\u30c1\u540d\u306e\u5909\u66f4 # \u73fe\u5728\u306e\u30d6\u30e9\u30f3\u30c1\u540d\u3092\u5909\u66f4 $ git branch -m <new-branch-name> # \u6307\u5b9a\u30d6\u30e9\u30f3\u30c1\u3092\u5909\u66f4 $ git branch -m <current-branch-name> <new-branch-name> # \u5f37\u5236\u5909\u66f4 ( GitHub\u306equick setup\u306e\u8868\u793a\u3060\u3068\u3053\u308c ) $ git branch -M main # --help\u3092\u898b\u308b\u9650\u308a ` --move --force ` \u3063\u307d\u3044 \u30d6\u30e9\u30f3\u30c1\u3092push # \u540c\u3058\u30d6\u30e9\u30f3\u30c1\u540d\u3067push $ git push origin <local-branch-name> # \u7570\u306a\u308b\u30d6\u30e9\u30f3\u30c1\u540d\u3067push $ git push origin <local-branch-name>:<remote-branch-name> # \u8907\u6570\u30d6\u30e9\u30f3\u30c1\u307e\u3068\u3081\u3066push $ git push origin <branch-name-1> <branch-name-2> \u30ea\u30e2\u30fc\u30c8\u306e\u30d6\u30e9\u30f3\u30c1\u4e00\u89a7 $ git branch -r \u30ea\u30e2\u30fc\u30c8\u30d6\u30e9\u30f3\u30c1\u3092fetch $ git fetch origin <remote-branch> \u3053\u308c\u3067 git checkout <remote-branch(local\u306bfetch\u6e08\u307f)> \u3067\u304d\u308b\u3002 \u30ea\u30e2\u30fc\u30c8\u30d6\u30e9\u30f3\u30c1\u3092\u524a\u9664 $ git push origin :<remote-branch-name> tag\u64cd\u4f5c \u30bf\u30b0\u64cd\u4f5c\u306f\u57fa\u672c\u7684\u306b\u30d6\u30e9\u30f3\u30c1\u3068\u540c\u3058\u3002 tag\u3092push\u3059\u308b \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306ftag\u306fpush\u3055\u308c\u306a\u3044 $ git push --tags tag\u3092clone\u3059\u308b \u6307\u5b9atag\u3092clone\u3059\u308b\u306e\u306f\u30d6\u30e9\u30f3\u30c1\u3068\u540c\u3058 $ git clone -b <tag-name> <repository> tag\u4e00\u89a7 $ git tag -l \u306f\u4ed8\u3051\u3066\u3082\u7121\u304f\u3066\u3082tag\u540d\u4e00\u89a7\u304c\u8868\u793a\u3055\u308c\u308b\u3002 $ git tag -n -n \u3092\u4ed8\u3051\u308b\u3068\u30bf\u30b0\u306e\u30b3\u30e1\u30f3\u30c8\u3082\u4e00\u7dd2\u306b\u8868\u793a\u3055\u308c\u308b\u3002 \u6307\u5b9atag\u306b\u30d6\u30e9\u30f3\u30c1\u5207\u308a\u66ff\u3048 (tag\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8) $ git checkout <tag-name> switch\u306e\u5834\u5408\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\uff1f $ git switch --detach <tag-name> \u79fb\u52d5 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u65b0\u898f\u4f5c\u6210\u3057\u305d\u3053\u3078\u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u52d5 $ mkdir dir $ git add dir $ git mv managed.file dir/ \u524a\u9664 \u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664 $ git rm /path/to/file \u5b9f\u30d5\u30a1\u30a4\u30eb\u3082\u6d88\u3048\u308b \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u524a\u9664 $ git rm -r /path/to/directory \u5b9f\u30d5\u30a1\u30a4\u30eb\u3082\u6d88\u3048\u308b \u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u304b\u3089\u5916\u3059\u306e\u307f $ git rm --cached /path/to/file Git\u4e0a\u306f\u524a\u9664\u3055\u308c\u308b\u304c\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306b\u306f\u6b8b\u308b\u3002 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5834\u5408\u306f -r \u3082\u3064\u3051\u308b\u3002 git rm \u76f4\u5f8c\u306f\u3001 git status \u3067\u524a\u9664\u3057\u305f\u3082\u306e\u304c deleted \u3068\u8868\u793a\u3055\u308c\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u72b6\u614b\u306a\u306e\u3067\u3001 commit \u3059\u308c\u3070\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u53cd\u6620\u3055\u308c\u308b\u3002 Untracked\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b -n \u3067\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d $ git clean -n [ path/to ] -f \u3067\u524a\u9664\u3059\u308b\u3002 $ git clean -f [ path/to ] \u30b3\u30df\u30c3\u30c8\u30ed\u30b0 \u30ed\u30b0\u3092\u898b\u308b $ git log k8s\u306e\u30af\u30bb\u3067 logs \u3063\u3066\u5165\u308c\u308b\u3068\u6012\u3089\u308c\u308b 1\u884c\u306e\u30b7\u30f3\u30d7\u30eb\u306a\u30ed\u30b0\u3067\u51fa\u529b $ git log --oneline \u30de\u30fc\u30b8/\u30d6\u30e9\u30f3\u30c1\u306a\u3069\u306e\u30c4\u30ea\u30fc\u3082\u8868\u793a $ git log --oneline --graph \u5225\u30d6\u30e9\u30f3\u30c1\u306e\u30ed\u30b0 $ git log --oneline --first-parent <branch-name> \u30b3\u30df\u30c3\u30c8\u6642\u306e\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u8868\u793a pull \u306e\u3088\u3046\u306b\u5909\u66f4\u91cf\u306a\u3069\u3092\u8868\u793a $ git log --stat : : commit 8331291c45b99411ee14076cc0e73dddfeafa153 ( HEAD -> main, origin/main, origin/HEAD ) Author: zaki-lknr <zaki.hmkc+github@gmail.com> Date: Wed Sep 15 16 :44:39 2021 +0900 add: ansible/directives: when\u3067\u30ea\u30b9\u30c8 docs/Ansible/directives.md | 24 ++++++++++++++++++++++++ 1 file changed, 24 insertions ( + ) status \u306e\u3068\u304d\u306e\u3088\u3046\u306b\u5909\u66f4\u7a2e\u5225\u306e\u8868\u793a $ git log --name-status : : commit 8331291c45b99411ee14076cc0e73dddfeafa153 ( HEAD -> main, origin/main, origin/HEAD ) Author: zaki-lknr <zaki.hmkc+github@gmail.com> Date: Wed Sep 15 16 :44:39 2021 +0900 add: ansible/directives: when\u3067\u30ea\u30b9\u30c8 M docs/Ansible/directives.md --oneline \u3068\u306e\u4f75\u7528\u3082\u53ef \u5dee\u5206 whitespace\u7121\u8996 $ git diff -w - w , -- ignore - all - space Ignore whitespace when comparing lines . This ignores differences even if one line has whitespace where the other line has none . \u305d\u306e\u4ed6 HEAD \u6982\u7565(\u8a9e\u5f0a\u3042\u308b\u304b\u3082) HEAD \u306f\u6700\u65b0(\u30ab\u30ec\u30f3\u30c8) HEAD~ 1\u500b\u524d HEAD~1 \u540c\u4e0a(1\u306f\u7701\u7565\u53ef\u80fd) HEAD~2 2\u500b\u524d git log \u3057\u305f\u6642\u306e\u3001 ec33978 (HEAD -> main) add: docker: \u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30ea\u30f3\u30af\u8ffd\u52a0 bd9aa93 add: ansible/config: ansible.cfg\u30b5\u30f3\u30d7\u30eb bc5eb56 add: git/configure: git-prompt\u8a2d\u5b9a\u5f8c\u306ePS1\u74b0\u5883\u5909\u6570 : \u306b\u5bfe\u3057\u3066\u3001 ec33978 \u304c HEAD bd9aa93 \u304c HEAD~ bc5eb56 \u304c HEAD~2 ^ \u3068 ~ \u306f\u57fa\u672c\u306f\u540c\u3058\u3002 HEAD \u306e\u4e00\u3064\u524d\u306a\u3089 HEAD^ \u307e\u305f\u306f HEAD~ \u30012\u3064\u524d\u306a\u3089 HEAD^^ \u307e\u305f\u306f HEAD~2 \u306b\u306a\u308b\u3002 \u305f\u3060\u3057\u53b3\u5bc6\u306b\u306f\u9055\u3046\u3082\u306e\u3067\u3001 ^ \u306f\u30d6\u30e9\u30f3\u30c1\u306e\u30de\u30fc\u30b8\u3067\u89aa\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306b\u4f7f\u7528\u3059\u308b\u3002 \u30b3\u30df\u30c3\u30c8\u3092\u6307\u5b9a\u3059\u308b\u3068\u304d\u306b\u3001 (\u30c1\u30eb\u30c0)\u3068^(\u30ad\u30e3\u30ec\u30c3\u30c8)\u3092\u4f7f\u3063\u3066\u3042\u308b\u30b3\u30df\u30c3\u30c8\u304b\u3089\u306e\u76f8\u5bfe\u4f4d\u7f6e\u3067\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u6642\u306b\u3001\u3088\u304f\u4f7f\u308f\u308c\u308b\u306e\u304cHEAD\u3067\u3059\u3002 (\u30c1\u30eb\u30c0)\u3092\u5f8c\u308d\u306b\u4ed8\u3051\u52a0\u3048\u308b\u3053\u3068\u3067\u4f55\u4e16\u4ee3\u524d\u306e\u89aa\u304b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002^(\u30ad\u30e3\u30ec\u30c3\u30c8)\u306f\u3001\u30d6\u30e9\u30f3\u30c1\u306e\u30de\u30fc\u30b8\u3067\u89aa\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306b\u3001\u4f55\u756a\u76ee\u306e\u89aa\u304b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u30d6\u30e9\u30f3\u30c1\u306e\u5207\u308a\u66ff\u3048\uff5c\u30b5\u30eb\u5148\u751f\u306eGit\u5165\u9580\u3010\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7ba1\u7406\u30c4\u30fc\u30ebBacklog\u3011","title":"Git\u57fa\u672c\u64cd\u4f5c"},{"location":"Git/#git","text":"gist \u304b\u3089\u5f15\u3063\u8d8a\u3057\u3002","title":"Git\u57fa\u672c\u64cd\u4f5c"},{"location":"Git/#git-clone","text":"","title":"git clone"},{"location":"Git/#branch","text":"$ git clone -b <branch-name> <repository-URL> tag\u306e\u5834\u5408\u3082\u540c\u3058\u3088\u3046\u306b $ git clone -b <tag-name> <repository>","title":"branch\u3092\u6307\u5b9a"},{"location":"Git/#_1","text":"-l <dirname> \u3092\u4ed8\u3051\u308b $ git clone -b <branch-name> <repository-URL> -l app-src-work \u5b9f\u306f -l \u306f\u7121\u304f\u3066\u3082\u3088\u3044\u3002 $ git clone <repository-url> <local-path>","title":"\u51fa\u529b\u5148\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u6307\u5b9a"},{"location":"Git/#_2","text":"\u30ea\u30dd\u30b8\u30c8\u30ea\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066\u305d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4e0a\u3067 git init \u3057\u3066 README.md \u3092initial commit\u3059\u308b\u3002 $ git init $ echo \"# this is hogehgoe repository\" >> README.md $ git add README.md $ git commit -m \"first commit\"","title":"\u30ed\u30fc\u30ab\u30eb\u30ea\u30dd\u30b8\u30c8\u30ea\u4f5c\u6210"},{"location":"Git/#commit","text":"","title":"commit"},{"location":"Git/#add","text":"$ git add path/file","title":"\u307e\u305a\u5bfe\u8c61\u3092add"},{"location":"Git/#commit_1","text":"$ git commit \u3053\u308c\u5b9f\u884c\u3059\u308b\u3068\u30a8\u30c7\u30a3\u30bf\u304c\u8d77\u52d5\u3059\u308b\u3002 \u5148\u982d # \u306b\u306a\u3063\u3066\u308b\u884c\u306f\u5168\u3066\u7121\u8996\u3055\u308c\u308b\u306e\u3067\u3001\u4efb\u610f\u306e\u4f4d\u7f6e\u306b\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u3092\u5165\u529b\u3059\u308b","title":"commit"},{"location":"Git/#optioncommit","text":"$ git commit -m \"commit messages\"","title":"option\u3067\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u4ed8\u304dcommit"},{"location":"Git/#amend","text":"$ git commit --amend \u76f4\u524d\u306e\u30b3\u30df\u30c3\u30c8\u306b\u5185\u5bb9\u3092\u3042\u3068\u304b\u3089\u8ffd\u52a0\u3067\u304d\u308b\u3002 \u30b3\u30df\u30c3\u30c8\u6f0f\u308c\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u3063\u305f\u5834\u5408\u306a\u3069\u306b1\u30b3\u30df\u30c3\u30c8\u306b\u307e\u3068\u3081\u3089\u308c\u308b\u3002 $ git commit --amend --no-edit --no-edit \u3092\u4ed8\u4e0e\u3059\u308c\u3070\u3001\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u306f\u524d\u3068\u540c\u3058\u3082\u306e\u3092\u4f7f\u7528\u3067\u304d\u308b\u3002","title":"amend"},{"location":"Git/#_3","text":"","title":"\u30de\u30fc\u30b8"},{"location":"Git/#hogehoge","text":"$ git merge hogehoge","title":"hogehoge\u30d6\u30e9\u30f3\u30c1\u3092\u30de\u30fc\u30b8\u3059\u308b"},{"location":"Git/#-no-ff","text":"$ git merge features/add_worker_node --no-ff","title":"\u30de\u30fc\u30b8\u30b3\u30df\u30c3\u30c8\u3092\u4f5c\u308b (--no-ff)"},{"location":"Git/#rebase","text":"\u4f5c\u696d\u30d6\u30e9\u30f3\u30c1\u3092master\u306bmerge\u3059\u308b\u524d\u306b\u3001master\u306e\u5909\u66f4\u70b9\u3092\u4f5c\u696d\u30d6\u30e9\u30f3\u30c1\u3067rebase\u3067\u53d6\u308a\u8fbc\u3093\u3067\u304a\u304f\u3001\u304c\u57fa\u672c\u306e\u4f7f\u7528\u6cd5\u3063\u307d\u3044\u3002 \u3088\u304f\u5206\u304b\u308b\uff01git rebase\u3068merge\u306e\u9055\u3044\u3068\u4f7f\u3044\u5206\u3051 | WWW\u30af\u30ea\u30a8\u30a4\u30bf\u30fc\u30ba 3\u5206\u3067\u7406\u89e3\u3067\u304d\u308b\uff01git-rebase\u3068merge\u3068\u306e\u9055\u3044\u307e\u3068\u3081 | CodeCampus 7. rebase\u3067\u30de\u30fc\u30b8\u3059\u308b\uff5c\u30b5\u30eb\u5148\u751f\u306eGit\u5165\u9580\u3010\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7ba1\u7406\u30c4\u30fc\u30ebBacklog\u3011 merge \u306f\u300c\u4ed6\u30d6\u30e9\u30f3\u30c1\u306e\u5185\u5bb9\u3092\u53d6\u308a\u8fbc\u3080\u300d\u3067\u3001 rebase \u306f\u300c\u4ed6\u30d6\u30e9\u30f3\u30c1\u306e\u5185\u5bb9\u3092\u9069\u7528\u6e08\u307f\u3060\u3063\u305f\u3053\u3068\u306b\u3059\u308b\u300d\u304b\u306a\uff1f \u30ea\u30e2\u30fc\u30c8\u30d6\u30e9\u30f3\u30c1\u304b\u3089\u6700\u65b0\u3092\u53d6\u5f97 $ git fetch origin \u6307\u5b9a\u30d6\u30e9\u30f3\u30c1\u306e\u5185\u5bb9\u3092 rebase \u3067\u73fe\u5728\u306e\u30d6\u30e9\u30f3\u30c1\u3078\u53d6\u308a\u8fbc\u307f $ git rebase origin/hogehoge \u5909\u66f4\u304c\u30ed\u30fc\u30ab\u30eb\u306b\u6b8b\u3063\u3066\u308b\u5834\u5408\u306f $ git rebase origin/hogehoge error: cannot rebase: You have unstaged changes. error: Please commit or stash them. \u30a8\u30e9\u30fc\u306b\u306a\u308b\u306e\u3067\u3001\u9000\u907f\u3057\u3066rebase\u3059\u308b $ git stash save $ git rebase origin/hogehoge $ git stash pop origin/main\u304b\u3089\u53d6\u308a\u8fbc\u3080\u3068\u304d\u306b pull \u3059\u308b\u3068merge\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001rebase\u3057\u305f\u3044\u5834\u5408\u306f fetch \u3059\u308b\u3002(\u305f\u3076\u3093)","title":"rebase\u3067\u30de\u30fc\u30b8"},{"location":"Git/#conflict","text":"","title":"conflict\u3057\u305f\u5834\u5408"},{"location":"Git/#_4","text":"\u4fee\u6b63\u3059\u308b add \u3057\u3066 commit \u3059\u308b(\u666e\u901a) (\u300c\u4fee\u6b63\u3059\u308b\u300d\u3092\u3082\u3046\u5c11\u3057\u8a73\u3057\u304f\u3042\u3068\u3067\u66f8\u3053\u3046)","title":"\u4fee\u6b63\u3059\u308b\u5834\u5408\u306f\u666e\u901a\u306b"},{"location":"Git/#merge","text":"$ git merge --abort \u30de\u30fc\u30b8\u524d\u306e\u72b6\u614b\u306b\u623b\u308b","title":"merge\u3092\u3084\u3081\u308b\u5834\u5408(\u672a\u4fee\u6b63)"},{"location":"Git/#add_1","text":"","title":"add (\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0)"},{"location":"Git/#_5","text":"$ git add <path> \u30d1\u30b9\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u6307\u5b9a\u306e\u5834\u5408\u306f\u518d\u5e30\u7684\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u8ffd\u52a0\u3055\u308c\u308b","title":"\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u306b\u8ffd\u52a0"},{"location":"Git/#_6","text":"$ git reset HEAD <path>","title":"\u8ffd\u52a0\u306e\u53d6\u308a\u6d88\u3057"},{"location":"Git/#_7","text":"$ git status","title":"\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d"},{"location":"Git/#_8","text":"$ git diff --cached [file]","title":"\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u306b\u8ffd\u52a0\u3055\u308c\u305f\u5dee\u5206\u3092\u78ba\u8a8d"},{"location":"Git/#_9","text":"","title":"\u30d6\u30e9\u30f3\u30c1\u64cd\u4f5c"},{"location":"Git/#_10","text":"$ git branch dev/calico devel features/cni_use_calico features/delete_node features/divide_playbook features/divide_roles features/separate_cni_firewalld_configure features/separate_parameters features/wait_new_node * master","title":"\u4eca\u3044\u308b\u30d6\u30e9\u30f3\u30c1\u3069\u3053\uff1f"},{"location":"Git/#_11","text":"$ git branch features/divide_playbook","title":"\u30d6\u30e9\u30f3\u30c1\u4f5c\u6210"},{"location":"Git/#_12","text":"$ git checkout features/divide_playbook Git 2.23\u4ee5\u964d\u306f $ git switch features/divide_playbook","title":"\u30d6\u30e9\u30f3\u30c1\u5207\u308a\u66ff\u3048"},{"location":"Git/#_13","text":"$ git checkout -b features/divide_playbook Git 2.23\u4ee5\u964d\u306f $ git switch -c features/divide_playbook","title":"\u30d6\u30e9\u30f3\u30c1\u4f5c\u6210\uff06\u5207\u308a\u66ff\u3048"},{"location":"Git/#_14","text":"$ git branch --delete features/swapoff features/replace-yum-config-manager \u2191\u8907\u6570\u6307\u5b9a\u3057\u305f\u5834\u5408","title":"\u30ed\u30fc\u30ab\u30eb\u30d6\u30e9\u30f3\u30c1\u306e\u524a\u9664"},{"location":"Git/#_15","text":"# \u73fe\u5728\u306e\u30d6\u30e9\u30f3\u30c1\u540d\u3092\u5909\u66f4 $ git branch -m <new-branch-name> # \u6307\u5b9a\u30d6\u30e9\u30f3\u30c1\u3092\u5909\u66f4 $ git branch -m <current-branch-name> <new-branch-name> # \u5f37\u5236\u5909\u66f4 ( GitHub\u306equick setup\u306e\u8868\u793a\u3060\u3068\u3053\u308c ) $ git branch -M main # --help\u3092\u898b\u308b\u9650\u308a ` --move --force ` \u3063\u307d\u3044","title":"\u30ed\u30fc\u30ab\u30eb\u30d6\u30e9\u30f3\u30c1\u540d\u306e\u5909\u66f4"},{"location":"Git/#push","text":"# \u540c\u3058\u30d6\u30e9\u30f3\u30c1\u540d\u3067push $ git push origin <local-branch-name> # \u7570\u306a\u308b\u30d6\u30e9\u30f3\u30c1\u540d\u3067push $ git push origin <local-branch-name>:<remote-branch-name> # \u8907\u6570\u30d6\u30e9\u30f3\u30c1\u307e\u3068\u3081\u3066push $ git push origin <branch-name-1> <branch-name-2>","title":"\u30d6\u30e9\u30f3\u30c1\u3092push"},{"location":"Git/#_16","text":"$ git branch -r","title":"\u30ea\u30e2\u30fc\u30c8\u306e\u30d6\u30e9\u30f3\u30c1\u4e00\u89a7"},{"location":"Git/#fetch","text":"$ git fetch origin <remote-branch> \u3053\u308c\u3067 git checkout <remote-branch(local\u306bfetch\u6e08\u307f)> \u3067\u304d\u308b\u3002","title":"\u30ea\u30e2\u30fc\u30c8\u30d6\u30e9\u30f3\u30c1\u3092fetch"},{"location":"Git/#_17","text":"$ git push origin :<remote-branch-name>","title":"\u30ea\u30e2\u30fc\u30c8\u30d6\u30e9\u30f3\u30c1\u3092\u524a\u9664"},{"location":"Git/#tag","text":"\u30bf\u30b0\u64cd\u4f5c\u306f\u57fa\u672c\u7684\u306b\u30d6\u30e9\u30f3\u30c1\u3068\u540c\u3058\u3002","title":"tag\u64cd\u4f5c"},{"location":"Git/#tagpush","text":"\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306ftag\u306fpush\u3055\u308c\u306a\u3044 $ git push --tags","title":"tag\u3092push\u3059\u308b"},{"location":"Git/#tagclone","text":"\u6307\u5b9atag\u3092clone\u3059\u308b\u306e\u306f\u30d6\u30e9\u30f3\u30c1\u3068\u540c\u3058 $ git clone -b <tag-name> <repository>","title":"tag\u3092clone\u3059\u308b"},{"location":"Git/#tag_1","text":"$ git tag -l \u306f\u4ed8\u3051\u3066\u3082\u7121\u304f\u3066\u3082tag\u540d\u4e00\u89a7\u304c\u8868\u793a\u3055\u308c\u308b\u3002 $ git tag -n -n \u3092\u4ed8\u3051\u308b\u3068\u30bf\u30b0\u306e\u30b3\u30e1\u30f3\u30c8\u3082\u4e00\u7dd2\u306b\u8868\u793a\u3055\u308c\u308b\u3002","title":"tag\u4e00\u89a7"},{"location":"Git/#tag-tag","text":"$ git checkout <tag-name> switch\u306e\u5834\u5408\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\uff1f $ git switch --detach <tag-name>","title":"\u6307\u5b9atag\u306b\u30d6\u30e9\u30f3\u30c1\u5207\u308a\u66ff\u3048 (tag\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8)"},{"location":"Git/#_18","text":"","title":"\u79fb\u52d5"},{"location":"Git/#_19","text":"$ mkdir dir $ git add dir $ git mv managed.file dir/","title":"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u65b0\u898f\u4f5c\u6210\u3057\u305d\u3053\u3078\u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u52d5"},{"location":"Git/#_20","text":"","title":"\u524a\u9664"},{"location":"Git/#_21","text":"$ git rm /path/to/file \u5b9f\u30d5\u30a1\u30a4\u30eb\u3082\u6d88\u3048\u308b","title":"\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664"},{"location":"Git/#_22","text":"$ git rm -r /path/to/directory \u5b9f\u30d5\u30a1\u30a4\u30eb\u3082\u6d88\u3048\u308b","title":"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u524a\u9664"},{"location":"Git/#_23","text":"$ git rm --cached /path/to/file Git\u4e0a\u306f\u524a\u9664\u3055\u308c\u308b\u304c\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306b\u306f\u6b8b\u308b\u3002 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5834\u5408\u306f -r \u3082\u3064\u3051\u308b\u3002 git rm \u76f4\u5f8c\u306f\u3001 git status \u3067\u524a\u9664\u3057\u305f\u3082\u306e\u304c deleted \u3068\u8868\u793a\u3055\u308c\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u72b6\u614b\u306a\u306e\u3067\u3001 commit \u3059\u308c\u3070\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u53cd\u6620\u3055\u308c\u308b\u3002","title":"\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u304b\u3089\u5916\u3059\u306e\u307f"},{"location":"Git/#untracked","text":"-n \u3067\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d $ git clean -n [ path/to ] -f \u3067\u524a\u9664\u3059\u308b\u3002 $ git clean -f [ path/to ]","title":"Untracked\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b"},{"location":"Git/#_24","text":"","title":"\u30b3\u30df\u30c3\u30c8\u30ed\u30b0"},{"location":"Git/#_25","text":"$ git log k8s\u306e\u30af\u30bb\u3067 logs \u3063\u3066\u5165\u308c\u308b\u3068\u6012\u3089\u308c\u308b","title":"\u30ed\u30b0\u3092\u898b\u308b"},{"location":"Git/#1","text":"$ git log --oneline","title":"1\u884c\u306e\u30b7\u30f3\u30d7\u30eb\u306a\u30ed\u30b0\u3067\u51fa\u529b"},{"location":"Git/#_26","text":"$ git log --oneline --graph","title":"\u30de\u30fc\u30b8/\u30d6\u30e9\u30f3\u30c1\u306a\u3069\u306e\u30c4\u30ea\u30fc\u3082\u8868\u793a"},{"location":"Git/#_27","text":"$ git log --oneline --first-parent <branch-name>","title":"\u5225\u30d6\u30e9\u30f3\u30c1\u306e\u30ed\u30b0"},{"location":"Git/#_28","text":"pull \u306e\u3088\u3046\u306b\u5909\u66f4\u91cf\u306a\u3069\u3092\u8868\u793a $ git log --stat : : commit 8331291c45b99411ee14076cc0e73dddfeafa153 ( HEAD -> main, origin/main, origin/HEAD ) Author: zaki-lknr <zaki.hmkc+github@gmail.com> Date: Wed Sep 15 16 :44:39 2021 +0900 add: ansible/directives: when\u3067\u30ea\u30b9\u30c8 docs/Ansible/directives.md | 24 ++++++++++++++++++++++++ 1 file changed, 24 insertions ( + ) status \u306e\u3068\u304d\u306e\u3088\u3046\u306b\u5909\u66f4\u7a2e\u5225\u306e\u8868\u793a $ git log --name-status : : commit 8331291c45b99411ee14076cc0e73dddfeafa153 ( HEAD -> main, origin/main, origin/HEAD ) Author: zaki-lknr <zaki.hmkc+github@gmail.com> Date: Wed Sep 15 16 :44:39 2021 +0900 add: ansible/directives: when\u3067\u30ea\u30b9\u30c8 M docs/Ansible/directives.md --oneline \u3068\u306e\u4f75\u7528\u3082\u53ef","title":"\u30b3\u30df\u30c3\u30c8\u6642\u306e\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u8868\u793a"},{"location":"Git/#_29","text":"","title":"\u5dee\u5206"},{"location":"Git/#whitespace","text":"$ git diff -w - w , -- ignore - all - space Ignore whitespace when comparing lines . This ignores differences even if one line has whitespace where the other line has none .","title":"whitespace\u7121\u8996"},{"location":"Git/#_30","text":"","title":"\u305d\u306e\u4ed6"},{"location":"Git/#head","text":"\u6982\u7565(\u8a9e\u5f0a\u3042\u308b\u304b\u3082) HEAD \u306f\u6700\u65b0(\u30ab\u30ec\u30f3\u30c8) HEAD~ 1\u500b\u524d HEAD~1 \u540c\u4e0a(1\u306f\u7701\u7565\u53ef\u80fd) HEAD~2 2\u500b\u524d git log \u3057\u305f\u6642\u306e\u3001 ec33978 (HEAD -> main) add: docker: \u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30ea\u30f3\u30af\u8ffd\u52a0 bd9aa93 add: ansible/config: ansible.cfg\u30b5\u30f3\u30d7\u30eb bc5eb56 add: git/configure: git-prompt\u8a2d\u5b9a\u5f8c\u306ePS1\u74b0\u5883\u5909\u6570 : \u306b\u5bfe\u3057\u3066\u3001 ec33978 \u304c HEAD bd9aa93 \u304c HEAD~ bc5eb56 \u304c HEAD~2 ^ \u3068 ~ \u306f\u57fa\u672c\u306f\u540c\u3058\u3002 HEAD \u306e\u4e00\u3064\u524d\u306a\u3089 HEAD^ \u307e\u305f\u306f HEAD~ \u30012\u3064\u524d\u306a\u3089 HEAD^^ \u307e\u305f\u306f HEAD~2 \u306b\u306a\u308b\u3002 \u305f\u3060\u3057\u53b3\u5bc6\u306b\u306f\u9055\u3046\u3082\u306e\u3067\u3001 ^ \u306f\u30d6\u30e9\u30f3\u30c1\u306e\u30de\u30fc\u30b8\u3067\u89aa\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306b\u4f7f\u7528\u3059\u308b\u3002 \u30b3\u30df\u30c3\u30c8\u3092\u6307\u5b9a\u3059\u308b\u3068\u304d\u306b\u3001 (\u30c1\u30eb\u30c0)\u3068^(\u30ad\u30e3\u30ec\u30c3\u30c8)\u3092\u4f7f\u3063\u3066\u3042\u308b\u30b3\u30df\u30c3\u30c8\u304b\u3089\u306e\u76f8\u5bfe\u4f4d\u7f6e\u3067\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u6642\u306b\u3001\u3088\u304f\u4f7f\u308f\u308c\u308b\u306e\u304cHEAD\u3067\u3059\u3002 (\u30c1\u30eb\u30c0)\u3092\u5f8c\u308d\u306b\u4ed8\u3051\u52a0\u3048\u308b\u3053\u3068\u3067\u4f55\u4e16\u4ee3\u524d\u306e\u89aa\u304b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002^(\u30ad\u30e3\u30ec\u30c3\u30c8)\u306f\u3001\u30d6\u30e9\u30f3\u30c1\u306e\u30de\u30fc\u30b8\u3067\u89aa\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306b\u3001\u4f55\u756a\u76ee\u306e\u89aa\u304b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u30d6\u30e9\u30f3\u30c1\u306e\u5207\u308a\u66ff\u3048\uff5c\u30b5\u30eb\u5148\u751f\u306eGit\u5165\u9580\u3010\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7ba1\u7406\u30c4\u30fc\u30ebBacklog\u3011","title":"HEAD"},{"location":"Git/configure/","text":"Git\u8a2d\u5b9a \u30e6\u30fc\u30b6\u30fc\u540d\u30fb\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u8a2d\u5b9a git config --global user.name zaki git config --global user.email zaki.hmkc@... \u5171\u7528\u30a2\u30ab\u30a6\u30f3\u30c8\u306a\u3069\u3067$HOME\u306b\u8a18\u9332\u3057\u305f\u304f\u306a\u3044\u5834\u5408 --local \u3092\u4f7f\u3048\u3070\u3001 $HOME/.gitconfig \u3067\u306a\u304f\u3001\u73fe\u5728\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8a2d\u5b9a\u306b\u8a18\u9332\u3055\u308c\u308b\u3002 git config --local user.name zaki git config --local user.email zaki.hmkc@... \u73fe\u5728\u306e\u8a2d\u5b9a\u78ba\u8a8d \u73fe\u5728\u9069\u7528\u3055\u308c\u308b\u8a2d\u5b9a\u5168\u3066 $ git config -l \u30bb\u30af\u30b7\u30e7\u30f3\u3054\u3068\u306e\u8a2d\u5b9a\u5185\u5bb9 $ git config --system -l $ git config --global -l $ git config --local -l Git+SSH .ssh/config \u9375\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u3053\u3093\u306a\u611f\u3058\u3002 Host gitlab-ce.example.org IdentityFile ~/.ssh/id_rsa_git Host github.com IdentityFile ~/.ssh/id_rsa_git clone\u306e\u30d1\u30b9\u304c git@github.com/... \u3068\u30e6\u30fc\u30b6\u30fc\u540d\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001 User git \u306f\u4e0d\u8981 Backlog\u3082\u540c\u69d8\u306bclone\u7528\u6587\u5b57\u5217\u30b3\u30d4\u30fc\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u542b\u3093\u3067\u3044\u308b\u306e\u3067\u4ee5\u4e0b\u3067OK Host <space>.git.backlog.com IdentityFile ~/.ssh/id_rsa_git \u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea \u73fe\u5728\u306e\u8a2d\u5b9a $ git remote -v \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8a2d\u5b9a GitHub\u3068\u304b\u3067README\u7121\u3057\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u4f5c\u308b\u3068\u30b3\u30de\u30f3\u30c9\u304c\u8868\u793a\u3055\u308c\u308b\u30a2\u30ec $ git remote add origin <URI of Repository> \u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5909\u66f4 origin\u3092GitHub\u304b\u3089\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8GitLab\u306b\u5909\u66f4\u3001\u3068\u304b\u3002 $ git remote set-url origin https://my-gitlab.example.org/user/repository.git HTTPS -> SSH\u3082\u3053\u308c $ git remote set-url origin git@github.com:zaki-lknr/ansible-sample.git \u5225\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5225\u540d\u3067\u8ffd\u52a0 $ git remote add hoge <other repository> git prompt curl -L https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh -o .git-prompt.sh chmod 755 .git-prompt.sh .bashrc\u3078\u4ee5\u4e0b\u8ffd\u52a0 [ -f ~/.git-prompt.sh ] && source ~/.git-prompt.sh \u3053\u306e\u72b6\u614b\u3067\u3001 PS1 \u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u3002 \u8a2d\u5b9a\u4f8b # prompt PS1 = '[\\u@\\h \\W$(__git_ps1 \" (%s)\")]\\$ ' \u65e2\u5b58\u306e PS1 \u8a2d\u5b9a\u306b\u8ffd\u52a0\u3059\u308b\u306e\u3067\u3042\u308c\u3070\u3053\u3093\u306a\u611f\u3058\u304c\u826f\u3044\u304b\u3082\u3002 if [ -f ~/.git-prompt.sh ] ; then source ~/.git-prompt.sh PS1 = '$(__git_ps1 \"(%s) \")'\" $PS1 \" fi","title":"Git\u8a2d\u5b9a"},{"location":"Git/configure/#git","text":"","title":"Git\u8a2d\u5b9a"},{"location":"Git/configure/#_1","text":"git config --global user.name zaki git config --global user.email zaki.hmkc@...","title":"\u30e6\u30fc\u30b6\u30fc\u540d\u30fb\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u8a2d\u5b9a"},{"location":"Git/configure/#home","text":"--local \u3092\u4f7f\u3048\u3070\u3001 $HOME/.gitconfig \u3067\u306a\u304f\u3001\u73fe\u5728\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8a2d\u5b9a\u306b\u8a18\u9332\u3055\u308c\u308b\u3002 git config --local user.name zaki git config --local user.email zaki.hmkc@...","title":"\u5171\u7528\u30a2\u30ab\u30a6\u30f3\u30c8\u306a\u3069\u3067$HOME\u306b\u8a18\u9332\u3057\u305f\u304f\u306a\u3044\u5834\u5408"},{"location":"Git/configure/#_2","text":"","title":"\u73fe\u5728\u306e\u8a2d\u5b9a\u78ba\u8a8d"},{"location":"Git/configure/#_3","text":"$ git config -l","title":"\u73fe\u5728\u9069\u7528\u3055\u308c\u308b\u8a2d\u5b9a\u5168\u3066"},{"location":"Git/configure/#_4","text":"$ git config --system -l $ git config --global -l $ git config --local -l","title":"\u30bb\u30af\u30b7\u30e7\u30f3\u3054\u3068\u306e\u8a2d\u5b9a\u5185\u5bb9"},{"location":"Git/configure/#gitssh","text":"","title":"Git+SSH"},{"location":"Git/configure/#sshconfig","text":"\u9375\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u3053\u3093\u306a\u611f\u3058\u3002 Host gitlab-ce.example.org IdentityFile ~/.ssh/id_rsa_git Host github.com IdentityFile ~/.ssh/id_rsa_git clone\u306e\u30d1\u30b9\u304c git@github.com/... \u3068\u30e6\u30fc\u30b6\u30fc\u540d\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001 User git \u306f\u4e0d\u8981 Backlog\u3082\u540c\u69d8\u306bclone\u7528\u6587\u5b57\u5217\u30b3\u30d4\u30fc\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u542b\u3093\u3067\u3044\u308b\u306e\u3067\u4ee5\u4e0b\u3067OK Host <space>.git.backlog.com IdentityFile ~/.ssh/id_rsa_git","title":".ssh/config"},{"location":"Git/configure/#_5","text":"","title":"\u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea"},{"location":"Git/configure/#_6","text":"$ git remote -v","title":"\u73fe\u5728\u306e\u8a2d\u5b9a"},{"location":"Git/configure/#_7","text":"GitHub\u3068\u304b\u3067README\u7121\u3057\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u4f5c\u308b\u3068\u30b3\u30de\u30f3\u30c9\u304c\u8868\u793a\u3055\u308c\u308b\u30a2\u30ec $ git remote add origin <URI of Repository>","title":"\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8a2d\u5b9a"},{"location":"Git/configure/#_8","text":"origin\u3092GitHub\u304b\u3089\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8GitLab\u306b\u5909\u66f4\u3001\u3068\u304b\u3002 $ git remote set-url origin https://my-gitlab.example.org/user/repository.git HTTPS -> SSH\u3082\u3053\u308c $ git remote set-url origin git@github.com:zaki-lknr/ansible-sample.git","title":"\u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5909\u66f4"},{"location":"Git/configure/#_9","text":"$ git remote add hoge <other repository>","title":"\u5225\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5225\u540d\u3067\u8ffd\u52a0"},{"location":"Git/configure/#git-prompt","text":"curl -L https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh -o .git-prompt.sh chmod 755 .git-prompt.sh .bashrc\u3078\u4ee5\u4e0b\u8ffd\u52a0 [ -f ~/.git-prompt.sh ] && source ~/.git-prompt.sh \u3053\u306e\u72b6\u614b\u3067\u3001 PS1 \u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u3002 \u8a2d\u5b9a\u4f8b # prompt PS1 = '[\\u@\\h \\W$(__git_ps1 \" (%s)\")]\\$ ' \u65e2\u5b58\u306e PS1 \u8a2d\u5b9a\u306b\u8ffd\u52a0\u3059\u308b\u306e\u3067\u3042\u308c\u3070\u3053\u3093\u306a\u611f\u3058\u304c\u826f\u3044\u304b\u3082\u3002 if [ -f ~/.git-prompt.sh ] ; then source ~/.git-prompt.sh PS1 = '$(__git_ps1 \"(%s) \")'\" $PS1 \" fi","title":"git prompt"},{"location":"Git/trouble/","text":"\u3084\u3089\u304b\u3057\u305f\u3068\u304d \u30e6\u30fc\u30b6\u30fc\u8a2d\u5b9a\u524d\u306bcommit\u3057\u305f \u30e1\u30c3\u30bb\u30fc\u30b8\u51fa\u308b\u306e\u3067\u305d\u306e\u901a\u308a\u3059\u308c\u3070\u3044\u3044 $ git config --global user.name \"Your Name\" $ git config --global user.email you@example.com $ git commit --amend --reset-author \u203b \u3053\u308c\u306f\u6700\u521d\u306e1\u56de\u306e\u307f( --amend \u306b\u3088\u308b\u76f4\u524d\u306e\u30b3\u30df\u30c3\u30c8\u306e\u307f\u4fee\u6b63) \u8907\u6570\u306ecommit\u304c\u3042\u308b\u5834\u5408\u306f\u4e00\u62ec\u5909\u66f4\u3082\u53ef\u80fd\u3002 \u203b \u6761\u4ef6\u8a2d\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001(fork\u306a\u3069\u3057\u3066\u304d\u305f)\u4ed6\u30e6\u30fc\u30b6\u30fc\u306e\u30b3\u30df\u30c3\u30c8\u3082\u66f8\u304d\u63db\u3048\u308b\u306e\u3067\u6ce8\u610f Git\u306eCommit\u30e6\u30fc\u30b6\u3092\u4fee\u6b63\u3059\u308b\u65b9\u6cd5 - Qiita \u30d6\u30e9\u30f3\u30c1\u306b\u79fb\u52d5\u3059\u308b\u524d\u306b\u7de8\u96c6\u3057\u3066\u3057\u307e\u3063\u305f(\u672a\u30b3\u30df\u30c3\u30c8\u72b6\u614b) stash save \u3067\u5909\u66f4\u3092\u9000\u907f -> \u30d6\u30e9\u30f3\u30c1\u306b\u79fb\u52d5 -> stash pop \u3067\u9000\u907f\u3057\u305f\u5909\u66f4\u70b9\u3092\u53d6\u308a\u51fa\u3059 $ git stash save $ git checkout <branch-name> $ git stash pop --amend\u3092\u5fd8\u308c\u3066commit \u672a\u30b3\u30df\u30c3\u30c8\u306e\u5909\u66f4\u3067\u306a\u304f\u3001\u30b3\u30df\u30c3\u30c8\u6e08\u307fA\u3068B\u3092\u307e\u3068\u3081\u308b\u306b\u306f git rebase \u3092\u4f7f\u3046 \u904e\u53bb\u306e\u30b3\u30df\u30c3\u30c8\u306b\u5bfe\u3059\u308b\u6253\u3061\u6d88\u3057\u30b3\u30df\u30c3\u30c8 \u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u4e0a\u306f\u300c\u904e\u53bb\u30b3\u30df\u30c3\u30c8\u300d\u300c\u6253\u3061\u6d88\u3057\u30b3\u30df\u30c3\u30c8\u300d\u304c\u6b8b\u308b\u3082\u306e $ git revert <\u53d6\u308a\u6d88\u3057\u305f\u3044\u30b3\u30df\u30c3\u30c8ID> \u5bfe\u8c61\u30b3\u30df\u30c3\u30c8\u5f8c\u306b\u5909\u66f4\u304c\u3042\u3063\u305f\u308a\u3059\u308b\u3068\u30b3\u30f3\u30d5\u30ea\u30af\u30c8\u306b\u306a\u308b\u306e\u3067\u3001\u624b\u52d5\u3067\u4fee\u6b63\u3057\u3001 add , commit \u3059\u308b\u3002 \u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u306e\u5909\u66f4 \u76f4\u8fd1\u306e\u30b3\u30df\u30c3\u30c8\u306e\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u5909\u66f4 $ git commit --amend 2\u3064\u4ee5\u4e0a\u524d\u306e\u30b3\u30df\u30c3\u30c8\u306e\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u3092\u5909\u66f4 3\u3064\u524d\u306e\u5834\u5408\u306f $ git rebase -i HEAD~3 \u3053\u308c\u3067\u30a8\u30c7\u30a3\u30bf\u304c\u8d77\u52d5\u3057\u3066\u3069\u306e\u30b3\u30df\u30c3\u30c8\u3092\u5909\u66f4\u3059\u308b\u304b\u306e\u9078\u629e\u306b\u306a\u308b\u306e\u3067\u3001\u5bfe\u8c61\u306e\u884c\u982d\u306e pick \u3092 edit \u306b\u5909\u66f4\u3057\u3066 :wq \u3059\u308b\u3002 \u3053\u306e\u72b6\u614b\u3067 $ git commit --amend \u3092\u5b9f\u884c\u3059\u308b\u3068\u3001 edit \u5bfe\u8c61\u306e\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u306b\u5bfe\u3057\u3066\u306e\u518d\u30b3\u30df\u30c3\u30c8\u3068\u306a\u308b\u306e\u3067\u3001\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u3092\u4fee\u6b63\u3059\u308b\u3002 \u4fee\u6b63\u3057\u305f\u3089 $ git rebase --continue \u5bfe\u8c61\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u6b21\u306e\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u3092 git commit --amend \u3057\u3066 git rebase --continue \u3092\u4ef6\u6570\u5206\u7e70\u308a\u8fd4\u3057\u3002 \u6700\u5f8c\u306e rebase --continue \u3092\u5b9f\u884c\u3059\u308b\u3068\u5b8c\u4e86\u3059\u308b\u3002 \u30b3\u30df\u30c3\u30c8\u306e\u53d6\u308a\u6d88\u3057 \u9593\u9055\u3048\u3066\u30b3\u30df\u30c3\u30c8\u3057\u305f\u6642\u70b9\u3067\u300c\u3042\u300d\u3068\u601d\u3063\u305f\u3089 git reset --soft HEAD^ git commit \u3059\u308b\u524d\u3001 git add \u3057\u305f\u5f8c\u306e\u72b6\u614b\u306b\u623b\u3059 git reset --mixed HEAD^ git add \u3059\u308b\u524d\u3001\u7de8\u96c6\u6e08\u307f\u306e\u72b6\u614b\u306b\u623b\u3059 git reset --hard HEAD^ \u7de8\u96c6\u524d\u3001\u76f4\u524d\u306e git commit \u5b8c\u4e86\u6642\u70b9\u306b\u623b\u3059 (\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u9593\u9055\u3048\u305f\u3068\u304b\u30b3\u30df\u30c3\u30c8\u3092\u9593\u9055\u3048\u305f\u3060\u3051\u3067\u7de8\u96c6\u5185\u5bb9\u306f\u6b63\u3057\u3044\u5834\u5408\u306f\u3053\u308c\u3084\u308b\u3068\u4e8b\u6545\u308b) reset\u306e\u53d6\u308a\u6d88\u3057 $ git reflog \u3053\u308c\u3067reset\u3092\u542b\u3080git\u306e\u64cd\u4f5c\u5c65\u6b74\u304c\u8868\u793a\u3055\u308c\u308b\u3002 \u300c\u3053\u306e\u30b3\u30df\u30c3\u30c8\u306e\u72b6\u614b\u306b\u623b\u3057\u305f\u3044\u300d\u306eHEAD\u756a\u53f7\u3092\u63a2\u3057\u3066 $ git reset --mixed HEAD@ {8} \u306a\u3069\u5b9f\u884c\u3059\u308b\u3002 --mixed \u3084 --soft \u306b\u3064\u3044\u3066\u306f\u3001\u6700\u521d\u306breset\u3057\u305f\u3068\u304d\u3068\u540c\u3058\u306e\u3092\u6307\u5b9a\u3059\u308c\u3070\u3088\u3044\u304b\u306a\uff1f (\u672a\u78ba\u8a8d) $ git reflog de41fb8 ( HEAD -> linux ) HEAD@ {0} : reset: moving to HEAD@ {7} 7379519 HEAD@ {1} : reset: moving to HEAD@ {5} de41fb8 ( HEAD -> linux ) HEAD@ {2} : reset: moving to HEAD@ {5} de41fb8 ( HEAD -> linux ) HEAD@ {3} : reset: moving to HEAD@ {4} 22364c9 HEAD@ {4} : reset: moving to HEAD^ de41fb8 ( HEAD -> linux ) HEAD@ {5} : reset: moving to HEAD^ 7379519 HEAD@ {6} : reset: moving to HEAD 7379519 HEAD@ {7} : .... de41fb8 ( HEAD -> linux ) HEAD@ {8} : .... \u3053\u308c\u3067 HEAD@{8} \u306b reset \u3059\u308c\u3070\u3001 de41fb8 \u3092\u30b3\u30df\u30c3\u30c8\u3057\u305f\u72b6\u614b\u306b\u306a\u308b\u3002 \u53d6\u308a\u6d88\u3057 \u30ed\u30fc\u30ab\u30eb\u306e\u5909\u66f4(\u672aadd\u3001\u672acommit)\u3092\u7834\u68c4 $ git checkout /path/to/file \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u524a\u9664\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u5fa9\u65e7\u3057\u305f\u3044\u5834\u5408\u3082\u3001\u524a\u9664\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308c\u3070OK \u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306a\u3044Git\u3067\u3042\u308c\u3070\u3001\u3053\u308c\u304b\u3089\u306f restore \u3092\u4f7f\u304a\u3046\u3002 $ git restore /path/to/file add\u306e\u53d6\u308a\u6d88\u3057 $ git reset HEAD <path> \u305f\u3060\u3057\u3001 git init \u76f4\u5f8c\u306e\u5834\u5408\u306f\u3053\u306e\u64cd\u4f5c\u306f\u4e0d\u53ef\u3002 git rm --cached \u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u304b\u3089\u5916\u3059\u64cd\u4f5c\u3092\u884c\u3046\u3002 $ git rm --cached <filename> $ git rm --cached -r <dirname> mv\u306e\u53d6\u308a\u6d88\u3057 $ git mv foo bar \u3057\u305f\u72b6\u614b\u3067\u3001\u7121\u304b\u3063\u305f\u3053\u3068\u306b\u3059\u308b\u306b\u306f $ git reset HEAD foo $ git reset HEAD bar \u306e\u4e21\u65b9\u3092\u5b9f\u884c\u3059\u308b\u3002 \u203b git mv \u306b\u3088\u3063\u3066\u3001 bar \u304c\u4f5c\u6210\u3055\u308c\u3001 foo \u306f\u524a\u9664\u5bfe\u8c61\u306b\u306a\u3063\u3066\u308b\u306e\u3067\u3001\u305d\u308c\u305e\u308c reset HEAD \u3067\u5143\u306b\u623b\u3059( bar \u306f\u524a\u9664\u3057\u3066 foo \u306e delete \u3092\u30ad\u30e3\u30f3\u30bb\u30eb) memo $ git reset --hard HEAD /path/to/file fatal: Cannot do hard reset with paths. merge\u306e\u53d6\u308a\u6d88\u3057(conflict) merge\u3057\u3088\u3046\u3068\u3057\u305f\u3089conflict\u3057\u3066\u3057\u307e\u3044\u3001\u7af6\u5408\u3092\u89e3\u6d88\u3059\u308b\u3088\u308a\u30de\u30fc\u30b8\u5143\u3092\u6539\u4fee\u3057\u3066\u30de\u30fc\u30b8\u3057\u306a\u304a\u3057\u305f\u307b\u3046\u304c\u65e9\u3044\u3088\u3046\u306a\u5834\u5408\u3002 \u30de\u30fc\u30b8\u3092\u53d6\u308a\u6d88\u3059\u306b\u306f $ git merge --abort","title":"\u3084\u3089\u304b\u3057\u305f\u3068\u304d"},{"location":"Git/trouble/#_1","text":"","title":"\u3084\u3089\u304b\u3057\u305f\u3068\u304d"},{"location":"Git/trouble/#commit","text":"\u30e1\u30c3\u30bb\u30fc\u30b8\u51fa\u308b\u306e\u3067\u305d\u306e\u901a\u308a\u3059\u308c\u3070\u3044\u3044 $ git config --global user.name \"Your Name\" $ git config --global user.email you@example.com $ git commit --amend --reset-author \u203b \u3053\u308c\u306f\u6700\u521d\u306e1\u56de\u306e\u307f( --amend \u306b\u3088\u308b\u76f4\u524d\u306e\u30b3\u30df\u30c3\u30c8\u306e\u307f\u4fee\u6b63) \u8907\u6570\u306ecommit\u304c\u3042\u308b\u5834\u5408\u306f\u4e00\u62ec\u5909\u66f4\u3082\u53ef\u80fd\u3002 \u203b \u6761\u4ef6\u8a2d\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001(fork\u306a\u3069\u3057\u3066\u304d\u305f)\u4ed6\u30e6\u30fc\u30b6\u30fc\u306e\u30b3\u30df\u30c3\u30c8\u3082\u66f8\u304d\u63db\u3048\u308b\u306e\u3067\u6ce8\u610f Git\u306eCommit\u30e6\u30fc\u30b6\u3092\u4fee\u6b63\u3059\u308b\u65b9\u6cd5 - Qiita","title":"\u30e6\u30fc\u30b6\u30fc\u8a2d\u5b9a\u524d\u306bcommit\u3057\u305f"},{"location":"Git/trouble/#_2","text":"stash save \u3067\u5909\u66f4\u3092\u9000\u907f -> \u30d6\u30e9\u30f3\u30c1\u306b\u79fb\u52d5 -> stash pop \u3067\u9000\u907f\u3057\u305f\u5909\u66f4\u70b9\u3092\u53d6\u308a\u51fa\u3059 $ git stash save $ git checkout <branch-name> $ git stash pop","title":"\u30d6\u30e9\u30f3\u30c1\u306b\u79fb\u52d5\u3059\u308b\u524d\u306b\u7de8\u96c6\u3057\u3066\u3057\u307e\u3063\u305f(\u672a\u30b3\u30df\u30c3\u30c8\u72b6\u614b)"},{"location":"Git/trouble/#-amendcommit","text":"\u672a\u30b3\u30df\u30c3\u30c8\u306e\u5909\u66f4\u3067\u306a\u304f\u3001\u30b3\u30df\u30c3\u30c8\u6e08\u307fA\u3068B\u3092\u307e\u3068\u3081\u308b\u306b\u306f git rebase \u3092\u4f7f\u3046","title":"--amend\u3092\u5fd8\u308c\u3066commit"},{"location":"Git/trouble/#_3","text":"\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u4e0a\u306f\u300c\u904e\u53bb\u30b3\u30df\u30c3\u30c8\u300d\u300c\u6253\u3061\u6d88\u3057\u30b3\u30df\u30c3\u30c8\u300d\u304c\u6b8b\u308b\u3082\u306e $ git revert <\u53d6\u308a\u6d88\u3057\u305f\u3044\u30b3\u30df\u30c3\u30c8ID> \u5bfe\u8c61\u30b3\u30df\u30c3\u30c8\u5f8c\u306b\u5909\u66f4\u304c\u3042\u3063\u305f\u308a\u3059\u308b\u3068\u30b3\u30f3\u30d5\u30ea\u30af\u30c8\u306b\u306a\u308b\u306e\u3067\u3001\u624b\u52d5\u3067\u4fee\u6b63\u3057\u3001 add , commit \u3059\u308b\u3002","title":"\u904e\u53bb\u306e\u30b3\u30df\u30c3\u30c8\u306b\u5bfe\u3059\u308b\u6253\u3061\u6d88\u3057\u30b3\u30df\u30c3\u30c8"},{"location":"Git/trouble/#_4","text":"","title":"\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u306e\u5909\u66f4"},{"location":"Git/trouble/#_5","text":"$ git commit --amend","title":"\u76f4\u8fd1\u306e\u30b3\u30df\u30c3\u30c8\u306e\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u5909\u66f4"},{"location":"Git/trouble/#2","text":"3\u3064\u524d\u306e\u5834\u5408\u306f $ git rebase -i HEAD~3 \u3053\u308c\u3067\u30a8\u30c7\u30a3\u30bf\u304c\u8d77\u52d5\u3057\u3066\u3069\u306e\u30b3\u30df\u30c3\u30c8\u3092\u5909\u66f4\u3059\u308b\u304b\u306e\u9078\u629e\u306b\u306a\u308b\u306e\u3067\u3001\u5bfe\u8c61\u306e\u884c\u982d\u306e pick \u3092 edit \u306b\u5909\u66f4\u3057\u3066 :wq \u3059\u308b\u3002 \u3053\u306e\u72b6\u614b\u3067 $ git commit --amend \u3092\u5b9f\u884c\u3059\u308b\u3068\u3001 edit \u5bfe\u8c61\u306e\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u306b\u5bfe\u3057\u3066\u306e\u518d\u30b3\u30df\u30c3\u30c8\u3068\u306a\u308b\u306e\u3067\u3001\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u3092\u4fee\u6b63\u3059\u308b\u3002 \u4fee\u6b63\u3057\u305f\u3089 $ git rebase --continue \u5bfe\u8c61\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u6b21\u306e\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u3092 git commit --amend \u3057\u3066 git rebase --continue \u3092\u4ef6\u6570\u5206\u7e70\u308a\u8fd4\u3057\u3002 \u6700\u5f8c\u306e rebase --continue \u3092\u5b9f\u884c\u3059\u308b\u3068\u5b8c\u4e86\u3059\u308b\u3002","title":"2\u3064\u4ee5\u4e0a\u524d\u306e\u30b3\u30df\u30c3\u30c8\u306e\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u3092\u5909\u66f4"},{"location":"Git/trouble/#_6","text":"\u9593\u9055\u3048\u3066\u30b3\u30df\u30c3\u30c8\u3057\u305f\u6642\u70b9\u3067\u300c\u3042\u300d\u3068\u601d\u3063\u305f\u3089","title":"\u30b3\u30df\u30c3\u30c8\u306e\u53d6\u308a\u6d88\u3057"},{"location":"Git/trouble/#git-reset-soft-head","text":"git commit \u3059\u308b\u524d\u3001 git add \u3057\u305f\u5f8c\u306e\u72b6\u614b\u306b\u623b\u3059","title":"git reset --soft HEAD^"},{"location":"Git/trouble/#git-reset-mixed-head","text":"git add \u3059\u308b\u524d\u3001\u7de8\u96c6\u6e08\u307f\u306e\u72b6\u614b\u306b\u623b\u3059","title":"git reset --mixed HEAD^"},{"location":"Git/trouble/#git-reset-hard-head","text":"\u7de8\u96c6\u524d\u3001\u76f4\u524d\u306e git commit \u5b8c\u4e86\u6642\u70b9\u306b\u623b\u3059 (\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u9593\u9055\u3048\u305f\u3068\u304b\u30b3\u30df\u30c3\u30c8\u3092\u9593\u9055\u3048\u305f\u3060\u3051\u3067\u7de8\u96c6\u5185\u5bb9\u306f\u6b63\u3057\u3044\u5834\u5408\u306f\u3053\u308c\u3084\u308b\u3068\u4e8b\u6545\u308b)","title":"git reset --hard HEAD^"},{"location":"Git/trouble/#reset","text":"$ git reflog \u3053\u308c\u3067reset\u3092\u542b\u3080git\u306e\u64cd\u4f5c\u5c65\u6b74\u304c\u8868\u793a\u3055\u308c\u308b\u3002 \u300c\u3053\u306e\u30b3\u30df\u30c3\u30c8\u306e\u72b6\u614b\u306b\u623b\u3057\u305f\u3044\u300d\u306eHEAD\u756a\u53f7\u3092\u63a2\u3057\u3066 $ git reset --mixed HEAD@ {8} \u306a\u3069\u5b9f\u884c\u3059\u308b\u3002 --mixed \u3084 --soft \u306b\u3064\u3044\u3066\u306f\u3001\u6700\u521d\u306breset\u3057\u305f\u3068\u304d\u3068\u540c\u3058\u306e\u3092\u6307\u5b9a\u3059\u308c\u3070\u3088\u3044\u304b\u306a\uff1f (\u672a\u78ba\u8a8d) $ git reflog de41fb8 ( HEAD -> linux ) HEAD@ {0} : reset: moving to HEAD@ {7} 7379519 HEAD@ {1} : reset: moving to HEAD@ {5} de41fb8 ( HEAD -> linux ) HEAD@ {2} : reset: moving to HEAD@ {5} de41fb8 ( HEAD -> linux ) HEAD@ {3} : reset: moving to HEAD@ {4} 22364c9 HEAD@ {4} : reset: moving to HEAD^ de41fb8 ( HEAD -> linux ) HEAD@ {5} : reset: moving to HEAD^ 7379519 HEAD@ {6} : reset: moving to HEAD 7379519 HEAD@ {7} : .... de41fb8 ( HEAD -> linux ) HEAD@ {8} : .... \u3053\u308c\u3067 HEAD@{8} \u306b reset \u3059\u308c\u3070\u3001 de41fb8 \u3092\u30b3\u30df\u30c3\u30c8\u3057\u305f\u72b6\u614b\u306b\u306a\u308b\u3002","title":"reset\u306e\u53d6\u308a\u6d88\u3057"},{"location":"Git/trouble/#_7","text":"","title":"\u53d6\u308a\u6d88\u3057"},{"location":"Git/trouble/#addcommit","text":"$ git checkout /path/to/file \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u524a\u9664\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u5fa9\u65e7\u3057\u305f\u3044\u5834\u5408\u3082\u3001\u524a\u9664\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308c\u3070OK \u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306a\u3044Git\u3067\u3042\u308c\u3070\u3001\u3053\u308c\u304b\u3089\u306f restore \u3092\u4f7f\u304a\u3046\u3002 $ git restore /path/to/file","title":"\u30ed\u30fc\u30ab\u30eb\u306e\u5909\u66f4(\u672aadd\u3001\u672acommit)\u3092\u7834\u68c4"},{"location":"Git/trouble/#add","text":"$ git reset HEAD <path> \u305f\u3060\u3057\u3001 git init \u76f4\u5f8c\u306e\u5834\u5408\u306f\u3053\u306e\u64cd\u4f5c\u306f\u4e0d\u53ef\u3002 git rm --cached \u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u304b\u3089\u5916\u3059\u64cd\u4f5c\u3092\u884c\u3046\u3002 $ git rm --cached <filename> $ git rm --cached -r <dirname>","title":"add\u306e\u53d6\u308a\u6d88\u3057"},{"location":"Git/trouble/#mv","text":"$ git mv foo bar \u3057\u305f\u72b6\u614b\u3067\u3001\u7121\u304b\u3063\u305f\u3053\u3068\u306b\u3059\u308b\u306b\u306f $ git reset HEAD foo $ git reset HEAD bar \u306e\u4e21\u65b9\u3092\u5b9f\u884c\u3059\u308b\u3002 \u203b git mv \u306b\u3088\u3063\u3066\u3001 bar \u304c\u4f5c\u6210\u3055\u308c\u3001 foo \u306f\u524a\u9664\u5bfe\u8c61\u306b\u306a\u3063\u3066\u308b\u306e\u3067\u3001\u305d\u308c\u305e\u308c reset HEAD \u3067\u5143\u306b\u623b\u3059( bar \u306f\u524a\u9664\u3057\u3066 foo \u306e delete \u3092\u30ad\u30e3\u30f3\u30bb\u30eb) memo $ git reset --hard HEAD /path/to/file fatal: Cannot do hard reset with paths.","title":"mv\u306e\u53d6\u308a\u6d88\u3057"},{"location":"Git/trouble/#mergeconflict","text":"merge\u3057\u3088\u3046\u3068\u3057\u305f\u3089conflict\u3057\u3066\u3057\u307e\u3044\u3001\u7af6\u5408\u3092\u89e3\u6d88\u3059\u308b\u3088\u308a\u30de\u30fc\u30b8\u5143\u3092\u6539\u4fee\u3057\u3066\u30de\u30fc\u30b8\u3057\u306a\u304a\u3057\u305f\u307b\u3046\u304c\u65e9\u3044\u3088\u3046\u306a\u5834\u5408\u3002 \u30de\u30fc\u30b8\u3092\u53d6\u308a\u6d88\u3059\u306b\u306f $ git merge --abort","title":"merge\u306e\u53d6\u308a\u6d88\u3057(conflict)"},{"location":"Kubernetes/","text":"Kubernetes pod CrashLoopBackOff describe \u307e\u305f\u306f event \u3067 Failed to pull image \"quay.io/ansible/awx-operator:0.16.1-12-g768bc2f\": rpc error: code = NotFound desc = failed to pull and unpack image \"quay.io/ansible/awx-operator:0.16.1-12-g768bc2f\": failed to resolve reference \"quay.io/ansible/awx-operator:0.16.1-12-g768bc2f\": quay.io/ansible/awx-operator:0.16.1-12-g768bc2f: not found \u3084\u3001 Error: ImagePullBackOff \u306e\u5834\u5408\u306f\u3001\u30a4\u30e1\u30fc\u30b8\u304c\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u7121\u3044\u3002\u6307\u5b9a\u304c\u5408\u3063\u3066\u308b\u304b\u78ba\u8a8d\u3002 pod\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3082 ErrImagePull \u306b\u306a\u308b\u3002 logs \u3067 standard_init_linux.go:228: exec user process caused: exec format error \u306e\u5834\u5408\u3001\u30a4\u30e1\u30fc\u30b8\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u5b9f\u884c\u74b0\u5883\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u304c\u5408\u3063\u3066\u306a\u3044\u3002 \u30a4\u30e1\u30fc\u30b8\u306famd64\u3060\u3051\u3069\u5b9f\u884c\u74b0\u5883\u304carm64\u306a\u3069\u3002 service FQCN (A/AAAA\u30ec\u30b3\u30fc\u30c9) pod\u304b\u3089\u306f <service-name>.<namespace-name>.svc.cluster.local \u3067\u540d\u524d\u89e3\u6c7a\u3067\u304d\u308b\u3002","title":"Kubernetes"},{"location":"Kubernetes/#kubernetes","text":"","title":"Kubernetes"},{"location":"Kubernetes/#pod","text":"","title":"pod"},{"location":"Kubernetes/#crashloopbackoff","text":"describe \u307e\u305f\u306f event \u3067 Failed to pull image \"quay.io/ansible/awx-operator:0.16.1-12-g768bc2f\": rpc error: code = NotFound desc = failed to pull and unpack image \"quay.io/ansible/awx-operator:0.16.1-12-g768bc2f\": failed to resolve reference \"quay.io/ansible/awx-operator:0.16.1-12-g768bc2f\": quay.io/ansible/awx-operator:0.16.1-12-g768bc2f: not found \u3084\u3001 Error: ImagePullBackOff \u306e\u5834\u5408\u306f\u3001\u30a4\u30e1\u30fc\u30b8\u304c\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u7121\u3044\u3002\u6307\u5b9a\u304c\u5408\u3063\u3066\u308b\u304b\u78ba\u8a8d\u3002 pod\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3082 ErrImagePull \u306b\u306a\u308b\u3002 logs \u3067 standard_init_linux.go:228: exec user process caused: exec format error \u306e\u5834\u5408\u3001\u30a4\u30e1\u30fc\u30b8\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u5b9f\u884c\u74b0\u5883\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u304c\u5408\u3063\u3066\u306a\u3044\u3002 \u30a4\u30e1\u30fc\u30b8\u306famd64\u3060\u3051\u3069\u5b9f\u884c\u74b0\u5883\u304carm64\u306a\u3069\u3002","title":"CrashLoopBackOff"},{"location":"Kubernetes/#service","text":"","title":"service"},{"location":"Kubernetes/#fqcn-aaaaa","text":"pod\u304b\u3089\u306f <service-name>.<namespace-name>.svc.cluster.local \u3067\u540d\u524d\u89e3\u6c7a\u3067\u304d\u308b\u3002","title":"FQCN (A/AAAA\u30ec\u30b3\u30fc\u30c9)"},{"location":"Kubernetes/helm/","text":"Helm \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb Helm | Helm \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb OS\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u3067\u5bfe\u5fdc\u3057\u3066\u306a\u3051\u308c\u3070\u3001\u30d0\u30a4\u30ca\u30ea\u3092 /usr/local/bin/helm \u306b\u7f6e\u3051\u3070OK. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u30b9\u30af\u30ea\u30d7\u30c8\u3082\u3042\u308b\u3002 apt\u306f\u3042\u308b\u3051\u3069\u3001\u4eca\u306e\u3068\u3053yun/dnf\u306f\u306a\u3044\u3093\u3060\u3088\u306a\u3002 \u30b3\u30de\u30f3\u30c9 \u30ea\u30dd\u30b8\u30c8\u30ea\u4e00\u89a7 $ helm repo list NAME URL prometheus-community https://prometheus-community.github.io/helm-charts rook-release https://charts.rook.io/release stable https://charts.helm.sh/stable grafana https://grafana.github.io/helm-charts elastic https://helm.elastic.co metallb https://metallb.github.io/metallb \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0 $ helm repo add stable https://charts.helm.sh/stable \u3068\u304b $ helm repo add prometheus-community https://prometheus-community.github.io/helm-charts \u3068\u304b \u30ed\u30fc\u30ab\u30eb\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u60c5\u5831\u3092\u66f4\u65b0 \u591a\u5206 apt-get update \u7684\u306a\u52d5\u4f5c\u3002 $ helm repo update \u30c1\u30e3\u30fc\u30c8\u306e\u691c\u7d22 $ helm search repo prometheus NAME CHART VERSION APP VERSION DESCRIPTION prometheus-community/kube-prometheus-stack 16.12.1 0.48.1 kube-prometheus-stack collects Kubernetes manif... prometheus-community/prometheus 14.3.0 2.26.0 Prometheus is a monitoring system and time seri... prometheus-community/prometheus-adapter 2.14.2 v0.8.4 A Helm chart for k8s prometheus adapter prometheus-community/prometheus-blackbox-exporter 4.15.0 0.19.0 Prometheus Blackbox Exporter prometheus-community/prometheus-cloudwatch-expo... 0.16.0 0.10.0 A Helm chart for prometheus cloudwatch-exporter : : \u30c1\u30e3\u30fc\u30c8\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024 $ helm show values metallb/metallb # Default values for metallb. # This is a YAML-formatted file. # Declare variables to be passed into your templates. imagePullSecrets: [] nameOverride: \"\" fullnameOverride: \"\" : : \u3053\u308c\u3092\u30d5\u30a1\u30a4\u30eb\u51fa\u529b\u3059\u308c\u3070\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30baYAML\u4f5c\u308c\u308b \u30ea\u30ea\u30fc\u30b9\u306e\u8a2d\u5b9a\u5024 \u30c1\u30e3\u30fc\u30c8\u304b\u3089\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u5024\u3092 helm get values \u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002 [zaki@fedora-node ~]$ helm ls -A NAME NAMESPACE REVISION UPDATED STATUS CHART APP VERSION grafana monitoring 1 2021-07-26 16:23:47.276215637 +0900 JST deployed grafana-6.14.1 8.0.5 prometheus monitoring 1 2021-07-26 14:24:12.737306448 +0900 JST deployed prometheus-14.4.1 2.26.0 [zaki@fedora-node ~]$ helm get values -n monitoring grafana USER-SUPPLIED VALUES: persistence: accessModes: - ReadWriteOnce enabled: true size: 1Gi type: pvc service: type: LoadBalancer \u74b0\u5883\u5909\u6570 Helm\u3067\u4f7f\u7528\u3059\u308b\u74b0\u5883\u7de8\u7d20\u306f helm env \u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002 $ helm env HELM_BIN=\"helm\" HELM_CACHE_HOME=\"/home/zaki/.cache/helm\" HELM_CONFIG_HOME=\"/home/zaki/.config/helm\" HELM_DATA_HOME=\"/home/zaki/.local/share/helm\" HELM_DEBUG=\"false\" HELM_KUBEAPISERVER=\"\" HELM_KUBEASGROUPS=\"\" HELM_KUBEASUSER=\"\" HELM_KUBECAFILE=\"\" HELM_KUBECONTEXT=\"\" HELM_KUBETOKEN=\"\" HELM_MAX_HISTORY=\"10\" HELM_NAMESPACE=\"default\" HELM_PLUGINS=\"/home/zaki/.local/share/helm/plugins\" HELM_REGISTRY_CONFIG=\"/home/zaki/.config/helm/registry.json\" HELM_REPOSITORY_CACHE=\"/home/zaki/.cache/helm/repository\" HELM_REPOSITORY_CONFIG=\"/home/zaki/.config/helm/repositories.yaml\" HELM_CONFIG_HOME \u3092\u8a2d\u5b9a\u3059\u308c\u3070\u3001 HELM_REGISTRY_CONFIG \u306a\u3069\u306f\u9023\u52d5\u3059\u308b\u3002 $ HELM_CONFIG_HOME = /var/tmp helm env | grep var HELM_CONFIG_HOME = \"/var/tmp\" HELM_REGISTRY_CONFIG = \"/var/tmp/registry.json\" HELM_REPOSITORY_CONFIG = \"/var/tmp/repositories.yaml\"","title":"Helm"},{"location":"Kubernetes/helm/#helm","text":"","title":"Helm"},{"location":"Kubernetes/helm/#_1","text":"Helm | Helm \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb OS\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u3067\u5bfe\u5fdc\u3057\u3066\u306a\u3051\u308c\u3070\u3001\u30d0\u30a4\u30ca\u30ea\u3092 /usr/local/bin/helm \u306b\u7f6e\u3051\u3070OK. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u30b9\u30af\u30ea\u30d7\u30c8\u3082\u3042\u308b\u3002 apt\u306f\u3042\u308b\u3051\u3069\u3001\u4eca\u306e\u3068\u3053yun/dnf\u306f\u306a\u3044\u3093\u3060\u3088\u306a\u3002","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"Kubernetes/helm/#_2","text":"","title":"\u30b3\u30de\u30f3\u30c9"},{"location":"Kubernetes/helm/#_3","text":"$ helm repo list NAME URL prometheus-community https://prometheus-community.github.io/helm-charts rook-release https://charts.rook.io/release stable https://charts.helm.sh/stable grafana https://grafana.github.io/helm-charts elastic https://helm.elastic.co metallb https://metallb.github.io/metallb","title":"\u30ea\u30dd\u30b8\u30c8\u30ea\u4e00\u89a7"},{"location":"Kubernetes/helm/#_4","text":"$ helm repo add stable https://charts.helm.sh/stable \u3068\u304b $ helm repo add prometheus-community https://prometheus-community.github.io/helm-charts \u3068\u304b","title":"\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0"},{"location":"Kubernetes/helm/#_5","text":"\u591a\u5206 apt-get update \u7684\u306a\u52d5\u4f5c\u3002 $ helm repo update","title":"\u30ed\u30fc\u30ab\u30eb\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u60c5\u5831\u3092\u66f4\u65b0"},{"location":"Kubernetes/helm/#_6","text":"$ helm search repo prometheus NAME CHART VERSION APP VERSION DESCRIPTION prometheus-community/kube-prometheus-stack 16.12.1 0.48.1 kube-prometheus-stack collects Kubernetes manif... prometheus-community/prometheus 14.3.0 2.26.0 Prometheus is a monitoring system and time seri... prometheus-community/prometheus-adapter 2.14.2 v0.8.4 A Helm chart for k8s prometheus adapter prometheus-community/prometheus-blackbox-exporter 4.15.0 0.19.0 Prometheus Blackbox Exporter prometheus-community/prometheus-cloudwatch-expo... 0.16.0 0.10.0 A Helm chart for prometheus cloudwatch-exporter : :","title":"\u30c1\u30e3\u30fc\u30c8\u306e\u691c\u7d22"},{"location":"Kubernetes/helm/#_7","text":"$ helm show values metallb/metallb # Default values for metallb. # This is a YAML-formatted file. # Declare variables to be passed into your templates. imagePullSecrets: [] nameOverride: \"\" fullnameOverride: \"\" : : \u3053\u308c\u3092\u30d5\u30a1\u30a4\u30eb\u51fa\u529b\u3059\u308c\u3070\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30baYAML\u4f5c\u308c\u308b","title":"\u30c1\u30e3\u30fc\u30c8\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024"},{"location":"Kubernetes/helm/#_8","text":"\u30c1\u30e3\u30fc\u30c8\u304b\u3089\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u5024\u3092 helm get values \u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002 [zaki@fedora-node ~]$ helm ls -A NAME NAMESPACE REVISION UPDATED STATUS CHART APP VERSION grafana monitoring 1 2021-07-26 16:23:47.276215637 +0900 JST deployed grafana-6.14.1 8.0.5 prometheus monitoring 1 2021-07-26 14:24:12.737306448 +0900 JST deployed prometheus-14.4.1 2.26.0 [zaki@fedora-node ~]$ helm get values -n monitoring grafana USER-SUPPLIED VALUES: persistence: accessModes: - ReadWriteOnce enabled: true size: 1Gi type: pvc service: type: LoadBalancer","title":"\u30ea\u30ea\u30fc\u30b9\u306e\u8a2d\u5b9a\u5024"},{"location":"Kubernetes/helm/#_9","text":"Helm\u3067\u4f7f\u7528\u3059\u308b\u74b0\u5883\u7de8\u7d20\u306f helm env \u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002 $ helm env HELM_BIN=\"helm\" HELM_CACHE_HOME=\"/home/zaki/.cache/helm\" HELM_CONFIG_HOME=\"/home/zaki/.config/helm\" HELM_DATA_HOME=\"/home/zaki/.local/share/helm\" HELM_DEBUG=\"false\" HELM_KUBEAPISERVER=\"\" HELM_KUBEASGROUPS=\"\" HELM_KUBEASUSER=\"\" HELM_KUBECAFILE=\"\" HELM_KUBECONTEXT=\"\" HELM_KUBETOKEN=\"\" HELM_MAX_HISTORY=\"10\" HELM_NAMESPACE=\"default\" HELM_PLUGINS=\"/home/zaki/.local/share/helm/plugins\" HELM_REGISTRY_CONFIG=\"/home/zaki/.config/helm/registry.json\" HELM_REPOSITORY_CACHE=\"/home/zaki/.cache/helm/repository\" HELM_REPOSITORY_CONFIG=\"/home/zaki/.config/helm/repositories.yaml\" HELM_CONFIG_HOME \u3092\u8a2d\u5b9a\u3059\u308c\u3070\u3001 HELM_REGISTRY_CONFIG \u306a\u3069\u306f\u9023\u52d5\u3059\u308b\u3002 $ HELM_CONFIG_HOME = /var/tmp helm env | grep var HELM_CONFIG_HOME = \"/var/tmp\" HELM_REGISTRY_CONFIG = \"/var/tmp/registry.json\" HELM_REPOSITORY_CONFIG = \"/var/tmp/repositories.yaml\"","title":"\u74b0\u5883\u5909\u6570"},{"location":"Kubernetes/k3s/","text":"K3s Always Free\u306eOCI(A1.Flex 2cpu/12gb ram)\u306b\u30b7\u30f3\u30b0\u30eb\u30ce\u30fc\u30c9\u30af\u30e9\u30b9\u30bf\u4f5c\u308b \u6a19\u6e96\u306eE2.1.Micro\u306e\u5834\u5408\u2193 [Oracle Cloud] K3s\u3067Always Free\u67a0\u30ce\u30fc\u30c9\u306bKubernetes\u30af\u30e9\u30b9\u30bf\u4f5c\u6210\u3057\u3066\u30ed\u30fc\u30ab\u30eb\u304b\u3089kubectl\u30a2\u30af\u30bb\u30b9\u307e\u3067 - Qiita $ curl -sfL https://get.k3s.io | sh - \u305f\u307e\u305f\u307e\u4f5c\u6210\u3067\u304d\u305f2cpus/12GB RAM\u3067\u4f5c\u6210 [opc@instance-20210704-1554 ~]$ curl -sfL https://get.k3s.io | sh - : : \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb: k3s-selinux.noarch 0:0.3-0.el7 \u4f9d\u5b58\u6027\u95a2\u9023\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u305f: container-selinux.noarch 2:2.119.2-1.911c772.el7_8 \u5b8c\u4e86\u3057\u307e\u3057\u305f! [INFO] Creating /usr/local/bin/kubectl symlink to k3s [INFO] Creating /usr/local/bin/crictl symlink to k3s [INFO] Creating /usr/local/bin/ctr symlink to k3s [INFO] Creating killall script /usr/local/bin/k3s-killall.sh [INFO] Creating uninstall script /usr/local/bin/k3s-uninstall.sh [INFO] env: Creating environment file /etc/systemd/system/k3s.service.env [INFO] systemd: Creating service file /etc/systemd/system/k3s.service [INFO] systemd: Enabling k3s unit Created symlink from /etc/systemd/system/multi-user.target.wants/k3s.service to /etc/systemd/system/k3s.service. [INFO] systemd: Starting k3s kubeconfig [opc@instance-20210704-1554 ~]$ sudo cp /etc/rancher/k3s/k3s.yaml ~ [opc@instance-20210704-1554 ~]$ ll \u5408\u8a08 4 -rw-------. 1 root root 2961 7\u6708 23 02:30 k3s.yaml [opc@instance-20210704-1554 ~]$ sudo hhown opc:opc k3s.yaml \u624b\u5143\u306b\u30b3\u30d4\u30fc $ scp oci-ap-n1:k3s.yaml oci-ap-n1-k3s.yaml server \u306e\u30a2\u30c9\u30ec\u30b9\u3092\u30b0\u30ed\u30fc\u30d0\u30ebIP\u306b\u5909\u66f4\u3057\u3001 insecure-skip-tls-verify: true \u3092\u8ffd\u52a0\u3002 (\u203b\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u3068\u304d\u306f kubectl \u306b --insecure-skip-tls-verify=true \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0) clusters : - cluster : certificate-authority-data : ... server : https://<host\u306egip>:6443 name : default contexts : - context : cluster : default user : default name : default insecure-skip-tls-verify : true \u7a74\u3042\u3051 [opc@instance-20210704-1554 ~]$ sudo firewall-cmd --add-port =6443 /tcp --permanent success [opc@instance-20210704-1554 ~]$ sudo firewall-cmd --reload success \u3042\u3068web\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u30016443/TCP\u3078\u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3092\u8ffd\u52a0\u3002 deploy sample [zaki@cloud-dev kubeconfig]$ KUBECONFIG = oci-ap-n1-k3s.yaml kubectl apply -n sample -f ~/src/k8s-samples/sample-web/httpd-clusterip/sample-http.yaml deployment.apps/sample-http created service/sample-http created [zaki@cloud-dev kubeconfig]$ KUBECONFIG = oci-ap-n1-k3s.yaml kubectl get pod -n sample NAME READY STATUS RESTARTS AGE sample-http-6c94f59975-65p6w 0/1 ContainerCreating 0 9s sample-http-6c94f59975-clzhp 0/1 ContainerCreating 0 9s [zaki@cloud-dev kubeconfig]$ KUBECONFIG = oci-ap-n1-k3s.yaml kubectl get pod -n sample -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES sample-http-6c94f59975-65p6w 1/1 Running 0 87s 10.42.0.9 instance-20210704-1554 <none> <none> sample-http-6c94f59975-clzhp 1/1 Running 0 87s 10.42.0.10 instance-20210704-1554 <none> <none> \u30ce\u30fc\u30c9\u30b9\u30da\u30c3\u30af [zaki@cloud-dev kubeconfig]$ KUBECONFIG = oci-ap-n1-k3s.yaml kubectl describe node [...] Capacity: cpu: 2 ephemeral-storage: 40223552Ki hugepages-16Gi: 0 hugepages-2Mi: 0 hugepages-512Mi: 0 memory: 11125568Ki pods: 110 Allocatable: cpu: 2 ephemeral-storage: 39129471355 hugepages-16Gi: 0 hugepages-2Mi: 0 hugepages-512Mi: 0 memory: 11125568Ki pods: 110 \u304a\u3049\u3001CPU\u306f\u3068\u3082\u304b\u304f\u30e1\u30e2\u30ea\u304c\u6f64\u6ca2\u3060\u3002 reboot\u3057\u3066\u3082OK \u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb $ k3s-uninstall.sh","title":"K3s"},{"location":"Kubernetes/k3s/#k3s","text":"","title":"K3s"},{"location":"Kubernetes/k3s/#always-freeocia1flex-2cpu12gb-ram","text":"\u6a19\u6e96\u306eE2.1.Micro\u306e\u5834\u5408\u2193 [Oracle Cloud] K3s\u3067Always Free\u67a0\u30ce\u30fc\u30c9\u306bKubernetes\u30af\u30e9\u30b9\u30bf\u4f5c\u6210\u3057\u3066\u30ed\u30fc\u30ab\u30eb\u304b\u3089kubectl\u30a2\u30af\u30bb\u30b9\u307e\u3067 - Qiita $ curl -sfL https://get.k3s.io | sh - \u305f\u307e\u305f\u307e\u4f5c\u6210\u3067\u304d\u305f2cpus/12GB RAM\u3067\u4f5c\u6210 [opc@instance-20210704-1554 ~]$ curl -sfL https://get.k3s.io | sh - : : \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb: k3s-selinux.noarch 0:0.3-0.el7 \u4f9d\u5b58\u6027\u95a2\u9023\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u305f: container-selinux.noarch 2:2.119.2-1.911c772.el7_8 \u5b8c\u4e86\u3057\u307e\u3057\u305f! [INFO] Creating /usr/local/bin/kubectl symlink to k3s [INFO] Creating /usr/local/bin/crictl symlink to k3s [INFO] Creating /usr/local/bin/ctr symlink to k3s [INFO] Creating killall script /usr/local/bin/k3s-killall.sh [INFO] Creating uninstall script /usr/local/bin/k3s-uninstall.sh [INFO] env: Creating environment file /etc/systemd/system/k3s.service.env [INFO] systemd: Creating service file /etc/systemd/system/k3s.service [INFO] systemd: Enabling k3s unit Created symlink from /etc/systemd/system/multi-user.target.wants/k3s.service to /etc/systemd/system/k3s.service. [INFO] systemd: Starting k3s","title":"Always Free\u306eOCI(A1.Flex 2cpu/12gb ram)\u306b\u30b7\u30f3\u30b0\u30eb\u30ce\u30fc\u30c9\u30af\u30e9\u30b9\u30bf\u4f5c\u308b"},{"location":"Kubernetes/k3s/#kubeconfig","text":"[opc@instance-20210704-1554 ~]$ sudo cp /etc/rancher/k3s/k3s.yaml ~ [opc@instance-20210704-1554 ~]$ ll \u5408\u8a08 4 -rw-------. 1 root root 2961 7\u6708 23 02:30 k3s.yaml [opc@instance-20210704-1554 ~]$ sudo hhown opc:opc k3s.yaml \u624b\u5143\u306b\u30b3\u30d4\u30fc $ scp oci-ap-n1:k3s.yaml oci-ap-n1-k3s.yaml server \u306e\u30a2\u30c9\u30ec\u30b9\u3092\u30b0\u30ed\u30fc\u30d0\u30ebIP\u306b\u5909\u66f4\u3057\u3001 insecure-skip-tls-verify: true \u3092\u8ffd\u52a0\u3002 (\u203b\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u3068\u304d\u306f kubectl \u306b --insecure-skip-tls-verify=true \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0) clusters : - cluster : certificate-authority-data : ... server : https://<host\u306egip>:6443 name : default contexts : - context : cluster : default user : default name : default insecure-skip-tls-verify : true","title":"kubeconfig"},{"location":"Kubernetes/k3s/#_1","text":"[opc@instance-20210704-1554 ~]$ sudo firewall-cmd --add-port =6443 /tcp --permanent success [opc@instance-20210704-1554 ~]$ sudo firewall-cmd --reload success \u3042\u3068web\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u30016443/TCP\u3078\u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3092\u8ffd\u52a0\u3002","title":"\u7a74\u3042\u3051"},{"location":"Kubernetes/k3s/#deploy-sample","text":"[zaki@cloud-dev kubeconfig]$ KUBECONFIG = oci-ap-n1-k3s.yaml kubectl apply -n sample -f ~/src/k8s-samples/sample-web/httpd-clusterip/sample-http.yaml deployment.apps/sample-http created service/sample-http created [zaki@cloud-dev kubeconfig]$ KUBECONFIG = oci-ap-n1-k3s.yaml kubectl get pod -n sample NAME READY STATUS RESTARTS AGE sample-http-6c94f59975-65p6w 0/1 ContainerCreating 0 9s sample-http-6c94f59975-clzhp 0/1 ContainerCreating 0 9s [zaki@cloud-dev kubeconfig]$ KUBECONFIG = oci-ap-n1-k3s.yaml kubectl get pod -n sample -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES sample-http-6c94f59975-65p6w 1/1 Running 0 87s 10.42.0.9 instance-20210704-1554 <none> <none> sample-http-6c94f59975-clzhp 1/1 Running 0 87s 10.42.0.10 instance-20210704-1554 <none> <none>","title":"deploy sample"},{"location":"Kubernetes/k3s/#_2","text":"[zaki@cloud-dev kubeconfig]$ KUBECONFIG = oci-ap-n1-k3s.yaml kubectl describe node [...] Capacity: cpu: 2 ephemeral-storage: 40223552Ki hugepages-16Gi: 0 hugepages-2Mi: 0 hugepages-512Mi: 0 memory: 11125568Ki pods: 110 Allocatable: cpu: 2 ephemeral-storage: 39129471355 hugepages-16Gi: 0 hugepages-2Mi: 0 hugepages-512Mi: 0 memory: 11125568Ki pods: 110 \u304a\u3049\u3001CPU\u306f\u3068\u3082\u304b\u304f\u30e1\u30e2\u30ea\u304c\u6f64\u6ca2\u3060\u3002 reboot\u3057\u3066\u3082OK","title":"\u30ce\u30fc\u30c9\u30b9\u30da\u30c3\u30af"},{"location":"Kubernetes/k3s/#_3","text":"$ k3s-uninstall.sh","title":"\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"Kubernetes/kind/","text":"kind Docker\u3084Podman\u4e0a\u306bKubernetes\u306e\u30ce\u30fc\u30c9\u3068\u3057\u3066\u52d5\u304f\u30b3\u30f3\u30c6\u30ca\u3092\u30c7\u30d7\u30ed\u30a4 kind [Kubernetes / kind] kind\u3092\u4f7f\u3063\u3066Docker\u4e0a\u306b\u30af\u30e9\u30b9\u30bf\u3092\u9ad8\u901f\u4f5c\u6210\u3057\u3001MetalLB\u3082\u4f75\u7528\u3057\u3066\u30af\u30e9\u30b9\u30bf\u6a2a\u65ad\u3057\u305f\u901a\u4fe1\u304a\u8a66\u3057 - zaki work log \u30af\u30e9\u30b9\u30bf\u4f5c\u6210 \u57fa\u672c ( kind \u3068\u3044\u3046\u540d\u524d\u306e\u30af\u30e9\u30b9\u30bf\u3092\u4f5c\u6210\u3059\uff52) $ kind create cluster \u540d\u524d\u6307\u5b9a $ kind create cluster --name sample-cluster \u505c\u6b62 kind\u30af\u30e9\u30b9\u30bf\u306e\u505c\u6b62\u306f\u7121\u3044\u3002 \u30af\u30e9\u30b9\u30bf\u3092\u524a\u9664\u3059\u308b\u304b\u3001\u30ce\u30fc\u30c9\u3068\u3057\u3066\u52d5\u4f5c\u3057\u3066\u308b\u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3059\u308b\u3002 \u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3059\u308b\u306b\u306f docker stop \u3059\u308b\u304c\u3001\u505c\u6b62\u5bfe\u8c61\u30b3\u30f3\u30c6\u30ca\u306f kind get nodes \u3067\u53d6\u5f97\u3067\u304d\u308b\u3002 $ kind get nodes kind-control-plane \u5f15\u6570\u7121\u3057\u306e\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u4f5c\u6210\u3057\u305f\u30af\u30e9\u30b9\u30bf\u540d kind \u306e\u30ce\u30fc\u30c9\u306b\u306a\u308b\u3002 \u30af\u30e9\u30b9\u30bf\u540d\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f $ kind get nodes --name cluster-name \u3053\u306e\u7d50\u679c\u3092 docker stop \u306b\u6e21\u3059\u305f\u3081\u306b\u3001\u5168\u4f53\u3068\u3057\u3066\u306f\u3053\u3093\u306a\u611f\u3058\u3002 $ kind get nodes --name cluster-name | xargs docker stop \u30de\u30eb\u30c1\u30ce\u30fc\u30c9 \u30ce\u30fc\u30c9\u8a2d\u5b9a\u7528\u306e\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u3059\u308b\u3002 # three node (two workers) cluster config kind : Cluster apiVersion : kind.x-k8s.io/v1alpha4 nodes : - role : control-plane - role : worker - role : worker \u3067\u3001\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u3066\u30af\u30e9\u30b9\u30bf\u4f5c\u6210\u3059\u308b\u3002 $ kind create cluster --config kind-config.yaml \u30af\u30e9\u30b9\u30bf\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u6307\u5b9a Releases \u00b7 kubernetes-sigs/kind \u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8\u306b\u5404\u7a2e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30b3\u30f3\u30c6\u30caID\u306e\u8a18\u8f09\u304c\u3042\u308b\u306e\u3067\u305d\u308c\u3092\u6307\u5b9a\u3059\u308b\u3002 v1.19\u306a\u3089\u3053\u3093\u306a\u611f\u3058\u3002 # three node (two workers) cluster config kind : Cluster apiVersion : kind.x-k8s.io/v1alpha4 nodes : - role : control-plane image : kindest/node:v1.19.11@sha256:07db187ae84b4b7de440a73886f008cf903fcf5764ba8106a9fd5243d6f32729 - role : worker image : kindest/node:v1.19.11@sha256:07db187ae84b4b7de440a73886f008cf903fcf5764ba8106a9fd5243d6f32729 - role : worker image : kindest/node:v1.19.11@sha256:07db187ae84b4b7de440a73886f008cf903fcf5764ba8106a9fd5243d6f32729","title":"kind"},{"location":"Kubernetes/kind/#kind","text":"Docker\u3084Podman\u4e0a\u306bKubernetes\u306e\u30ce\u30fc\u30c9\u3068\u3057\u3066\u52d5\u304f\u30b3\u30f3\u30c6\u30ca\u3092\u30c7\u30d7\u30ed\u30a4 kind [Kubernetes / kind] kind\u3092\u4f7f\u3063\u3066Docker\u4e0a\u306b\u30af\u30e9\u30b9\u30bf\u3092\u9ad8\u901f\u4f5c\u6210\u3057\u3001MetalLB\u3082\u4f75\u7528\u3057\u3066\u30af\u30e9\u30b9\u30bf\u6a2a\u65ad\u3057\u305f\u901a\u4fe1\u304a\u8a66\u3057 - zaki work log","title":"kind"},{"location":"Kubernetes/kind/#_1","text":"\u57fa\u672c ( kind \u3068\u3044\u3046\u540d\u524d\u306e\u30af\u30e9\u30b9\u30bf\u3092\u4f5c\u6210\u3059\uff52) $ kind create cluster \u540d\u524d\u6307\u5b9a $ kind create cluster --name sample-cluster","title":"\u30af\u30e9\u30b9\u30bf\u4f5c\u6210"},{"location":"Kubernetes/kind/#_2","text":"kind\u30af\u30e9\u30b9\u30bf\u306e\u505c\u6b62\u306f\u7121\u3044\u3002 \u30af\u30e9\u30b9\u30bf\u3092\u524a\u9664\u3059\u308b\u304b\u3001\u30ce\u30fc\u30c9\u3068\u3057\u3066\u52d5\u4f5c\u3057\u3066\u308b\u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3059\u308b\u3002 \u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3059\u308b\u306b\u306f docker stop \u3059\u308b\u304c\u3001\u505c\u6b62\u5bfe\u8c61\u30b3\u30f3\u30c6\u30ca\u306f kind get nodes \u3067\u53d6\u5f97\u3067\u304d\u308b\u3002 $ kind get nodes kind-control-plane \u5f15\u6570\u7121\u3057\u306e\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u4f5c\u6210\u3057\u305f\u30af\u30e9\u30b9\u30bf\u540d kind \u306e\u30ce\u30fc\u30c9\u306b\u306a\u308b\u3002 \u30af\u30e9\u30b9\u30bf\u540d\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f $ kind get nodes --name cluster-name \u3053\u306e\u7d50\u679c\u3092 docker stop \u306b\u6e21\u3059\u305f\u3081\u306b\u3001\u5168\u4f53\u3068\u3057\u3066\u306f\u3053\u3093\u306a\u611f\u3058\u3002 $ kind get nodes --name cluster-name | xargs docker stop","title":"\u505c\u6b62"},{"location":"Kubernetes/kind/#_3","text":"\u30ce\u30fc\u30c9\u8a2d\u5b9a\u7528\u306e\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u3059\u308b\u3002 # three node (two workers) cluster config kind : Cluster apiVersion : kind.x-k8s.io/v1alpha4 nodes : - role : control-plane - role : worker - role : worker \u3067\u3001\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u3066\u30af\u30e9\u30b9\u30bf\u4f5c\u6210\u3059\u308b\u3002 $ kind create cluster --config kind-config.yaml","title":"\u30de\u30eb\u30c1\u30ce\u30fc\u30c9"},{"location":"Kubernetes/kind/#_4","text":"Releases \u00b7 kubernetes-sigs/kind \u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8\u306b\u5404\u7a2e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30b3\u30f3\u30c6\u30caID\u306e\u8a18\u8f09\u304c\u3042\u308b\u306e\u3067\u305d\u308c\u3092\u6307\u5b9a\u3059\u308b\u3002 v1.19\u306a\u3089\u3053\u3093\u306a\u611f\u3058\u3002 # three node (two workers) cluster config kind : Cluster apiVersion : kind.x-k8s.io/v1alpha4 nodes : - role : control-plane image : kindest/node:v1.19.11@sha256:07db187ae84b4b7de440a73886f008cf903fcf5764ba8106a9fd5243d6f32729 - role : worker image : kindest/node:v1.19.11@sha256:07db187ae84b4b7de440a73886f008cf903fcf5764ba8106a9fd5243d6f32729 - role : worker image : kindest/node:v1.19.11@sha256:07db187ae84b4b7de440a73886f008cf903fcf5764ba8106a9fd5243d6f32729","title":"\u30af\u30e9\u30b9\u30bf\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u6307\u5b9a"},{"location":"Kubernetes/kubectl/","text":"kubectl \u5206\u985e\u5909\u3048\u308b\u304b\u3082\u2026 \u8a2d\u5b9a kubeconfig\u306e\u30de\u30fc\u30b8 $ KUBECONFIG = new-kubeconfig.yaml: $HOME /.kube/config kubectl config view --flatten > $HOME /.kube/tmp $ mv $HOME /.kube/tmp $HOME /.kube/config \u30bf\u30d6\u88dc\u5b8c source < ( kubectl completion bash ) complete -o default -F __start_kubectl kc [oc / kubectl] \u30b3\u30de\u30f3\u30c9\u3084\u5f15\u6570\u306e\u88dc\u5b8c\u8a2d\u5b9a \u3010completion\u3011 - zaki work log kind \u3084 helm \u3082\u540c\u3058\u8981\u9818\u3002 create secret \u30d5\u30a1\u30a4\u30eb\u306esecret \u30ad\u30fc\u540d: \u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u306esecret\u4f5c\u308b $ cat sample.txt hello kubernetes! $ kubectl create secret generic sample-secret --from-file = lines = sample.txt secret/sample-secret created $ kubectl get secret sample-secret NAME TYPE DATA AGE sample-secret Opaque 1 6s $ kubectl get secret sample-secret -o yaml apiVersion: v1 data : lines : aGVsbG8Ka3ViZXJuZXRlcyEK kind : Secret metadata : creationTimestamp : \"2021-07-07T12:12:03Z\" name : sample-secret namespace : default resourceVersion : \"1041860\" uid : 9675c818-cb9b-4b7f-a29c-c60bf5a908aa type : Opaque $ kubectl get secret sample-secret -o jsonpath = '{.data.lines}' | base64 -d hello kubernetes! \u3053\u308c\u306fConfigMap\u3068\u540c\u3058 key=value\u306esecret $ kubectl create secret generic sample-secret --from-literal = username = zaki secret/sample-secret created \u3053\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3067\u4ee5\u4e0b\u306esecret\u30ea\u30bd\u30fc\u30b9\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002 $ kubectl get secret sample-secret -o yaml apiVersion: v1 data : username : emFraQ== kind : Secret metadata : creationTimestamp : \"2022-03-24T02:57:06Z\" name : sample-secret namespace : default resourceVersion : \"298054\" uid : 35c9b58a-247d-4243-b292-193d811f140a type : Opaque \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3067secret \u30de\u30cb\u30e5\u30d5\u30a7\u30b9\u30c8\u304b\u3089\u4f5c\u6210\u3059\u308b\u5834\u5408\u306f\u3001base64\u30a8\u30f3\u30b3\u30fc\u30c9\u6e08\u307f\u3067\u3042\u308b\u3053\u3068\u3002 $ cat secret-sample.yaml apiVersion: v1 data : username : emFraQ== kind : Secret metadata : name : sample-secret2 namespace : default type : Opaque $ kubectl apply -f secret-sample.yaml secret/sample-secret2 created $ kubectl get secret sample-secret2 -o yaml apiVersion: v1 data : username : emFraQ== kind : Secret metadata : annotations : kubectl.kubernetes.io/last-applied-configuration : | {\"apiVersion\":\"v1\",\"data\":{\"username\":\"emFraQ==\"},\"kind\":\"Secret\",\"metadata\":{\"annotations\":{},\"name\":\"sample-secret2\",\"namespace\":\"default\"},\"type\":\"Opaque\"} creationTimestamp : \"2022-03-24T03:01:32Z\" name : sample-secret2 namespace : default resourceVersion : \"298241\" uid : a1ae0bf1-3434-4f3d-88d3-a1bb33dee6ac type : Opaque run \u30ef\u30fc\u30af\u7528\u306epod\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b $ kubectl run work-pod --image = fedora --command -- tail -f /dev/null config [kubectl / oc]\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3084\u30af\u30e9\u30b9\u30bf\u60c5\u5831\u306e\u78ba\u8a8d (\u30b3\u30de\u30f3\u30c9\u30e1\u30e2) - zaki work log ~/.kube/config ( $KUBECONFIG )\u306e\u5185\u5bb9\u304b\u3089\u8a3c\u660e\u66f8\u306e\u30c7\u30fc\u30bf\u3092\u30de\u30b9\u30af\u3057\u305f\u60c5\u5831 $ kubectl config view \u73fe\u5728\u306e\u30af\u30e9\u30b9\u30bf\u60c5\u5831 $ kubectl cluster-info Kubernetes control plane is running at https://192.168.0.121:6443 CoreDNS is running at https://192.168.0.121:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy Metrics-server is running at https://192.168.0.121:6443/api/v1/namespaces/kube-system/services/https:metrics-server:/proxy To further debug and diagnose cluster problems, use 'kubectl cluster-info dump' . KUBECONFIG\u3067\u6301\u3063\u3066\u3044\u308b\u30af\u30e9\u30b9\u30bf\u4e00\u89a7 $ kubectl config get-clusters NAME cluster-c2daobwhbsg kind-multi-1.15 zks kind-kind kind-multicluster kubernetes local-k3s oci-k3s-le oci-k3s sample-cluster \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u60c5\u5831 $ kubectl config get-contexts CURRENT NAME CLUSTER AUTHINFO NAMESPACE context-c2daobwhbsg cluster-c2daobwhbsg user-c2daobwhbsg kind-kind kind-kind kind-kind kind-multi-1.15 kind-multi-1.15 kind-multi-1.15 kind-multicluster kind-multicluster kind-multicluster kubernetes-admin@kubernetes kubernetes kubernetes-admin kubernetes-admin@zks zks kubernetes-admin local-k3s local-k3s local-k3s oci-k3s oci-k3s oci-k3s * oci-k3s-le oci-k3s-le oci-k3s-le sample-cluster sample-cluster clusterUser_sample-rg_sample-cluster \u73fe\u5728\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8 $ kubectl config current-context oci-k3s-le","title":"kubectl"},{"location":"Kubernetes/kubectl/#kubectl","text":"\u5206\u985e\u5909\u3048\u308b\u304b\u3082\u2026","title":"kubectl"},{"location":"Kubernetes/kubectl/#_1","text":"","title":"\u8a2d\u5b9a"},{"location":"Kubernetes/kubectl/#kubeconfig","text":"$ KUBECONFIG = new-kubeconfig.yaml: $HOME /.kube/config kubectl config view --flatten > $HOME /.kube/tmp $ mv $HOME /.kube/tmp $HOME /.kube/config","title":"kubeconfig\u306e\u30de\u30fc\u30b8"},{"location":"Kubernetes/kubectl/#_2","text":"source < ( kubectl completion bash ) complete -o default -F __start_kubectl kc [oc / kubectl] \u30b3\u30de\u30f3\u30c9\u3084\u5f15\u6570\u306e\u88dc\u5b8c\u8a2d\u5b9a \u3010completion\u3011 - zaki work log kind \u3084 helm \u3082\u540c\u3058\u8981\u9818\u3002","title":"\u30bf\u30d6\u88dc\u5b8c"},{"location":"Kubernetes/kubectl/#create","text":"","title":"create"},{"location":"Kubernetes/kubectl/#secret","text":"","title":"secret"},{"location":"Kubernetes/kubectl/#secret_1","text":"\u30ad\u30fc\u540d: \u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u306esecret\u4f5c\u308b $ cat sample.txt hello kubernetes! $ kubectl create secret generic sample-secret --from-file = lines = sample.txt secret/sample-secret created $ kubectl get secret sample-secret NAME TYPE DATA AGE sample-secret Opaque 1 6s $ kubectl get secret sample-secret -o yaml apiVersion: v1 data : lines : aGVsbG8Ka3ViZXJuZXRlcyEK kind : Secret metadata : creationTimestamp : \"2021-07-07T12:12:03Z\" name : sample-secret namespace : default resourceVersion : \"1041860\" uid : 9675c818-cb9b-4b7f-a29c-c60bf5a908aa type : Opaque $ kubectl get secret sample-secret -o jsonpath = '{.data.lines}' | base64 -d hello kubernetes! \u3053\u308c\u306fConfigMap\u3068\u540c\u3058","title":"\u30d5\u30a1\u30a4\u30eb\u306esecret"},{"location":"Kubernetes/kubectl/#keyvaluesecret","text":"$ kubectl create secret generic sample-secret --from-literal = username = zaki secret/sample-secret created \u3053\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3067\u4ee5\u4e0b\u306esecret\u30ea\u30bd\u30fc\u30b9\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002 $ kubectl get secret sample-secret -o yaml apiVersion: v1 data : username : emFraQ== kind : Secret metadata : creationTimestamp : \"2022-03-24T02:57:06Z\" name : sample-secret namespace : default resourceVersion : \"298054\" uid : 35c9b58a-247d-4243-b292-193d811f140a type : Opaque","title":"key=value\u306esecret"},{"location":"Kubernetes/kubectl/#secret_2","text":"\u30de\u30cb\u30e5\u30d5\u30a7\u30b9\u30c8\u304b\u3089\u4f5c\u6210\u3059\u308b\u5834\u5408\u306f\u3001base64\u30a8\u30f3\u30b3\u30fc\u30c9\u6e08\u307f\u3067\u3042\u308b\u3053\u3068\u3002 $ cat secret-sample.yaml apiVersion: v1 data : username : emFraQ== kind : Secret metadata : name : sample-secret2 namespace : default type : Opaque $ kubectl apply -f secret-sample.yaml secret/sample-secret2 created $ kubectl get secret sample-secret2 -o yaml apiVersion: v1 data : username : emFraQ== kind : Secret metadata : annotations : kubectl.kubernetes.io/last-applied-configuration : | {\"apiVersion\":\"v1\",\"data\":{\"username\":\"emFraQ==\"},\"kind\":\"Secret\",\"metadata\":{\"annotations\":{},\"name\":\"sample-secret2\",\"namespace\":\"default\"},\"type\":\"Opaque\"} creationTimestamp : \"2022-03-24T03:01:32Z\" name : sample-secret2 namespace : default resourceVersion : \"298241\" uid : a1ae0bf1-3434-4f3d-88d3-a1bb33dee6ac type : Opaque","title":"\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3067secret"},{"location":"Kubernetes/kubectl/#run","text":"","title":"run"},{"location":"Kubernetes/kubectl/#pod","text":"$ kubectl run work-pod --image = fedora --command -- tail -f /dev/null","title":"\u30ef\u30fc\u30af\u7528\u306epod\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b"},{"location":"Kubernetes/kubectl/#config","text":"[kubectl / oc]\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3084\u30af\u30e9\u30b9\u30bf\u60c5\u5831\u306e\u78ba\u8a8d (\u30b3\u30de\u30f3\u30c9\u30e1\u30e2) - zaki work log ~/.kube/config ( $KUBECONFIG )\u306e\u5185\u5bb9\u304b\u3089\u8a3c\u660e\u66f8\u306e\u30c7\u30fc\u30bf\u3092\u30de\u30b9\u30af\u3057\u305f\u60c5\u5831 $ kubectl config view \u73fe\u5728\u306e\u30af\u30e9\u30b9\u30bf\u60c5\u5831 $ kubectl cluster-info Kubernetes control plane is running at https://192.168.0.121:6443 CoreDNS is running at https://192.168.0.121:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy Metrics-server is running at https://192.168.0.121:6443/api/v1/namespaces/kube-system/services/https:metrics-server:/proxy To further debug and diagnose cluster problems, use 'kubectl cluster-info dump' . KUBECONFIG\u3067\u6301\u3063\u3066\u3044\u308b\u30af\u30e9\u30b9\u30bf\u4e00\u89a7 $ kubectl config get-clusters NAME cluster-c2daobwhbsg kind-multi-1.15 zks kind-kind kind-multicluster kubernetes local-k3s oci-k3s-le oci-k3s sample-cluster \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u60c5\u5831 $ kubectl config get-contexts CURRENT NAME CLUSTER AUTHINFO NAMESPACE context-c2daobwhbsg cluster-c2daobwhbsg user-c2daobwhbsg kind-kind kind-kind kind-kind kind-multi-1.15 kind-multi-1.15 kind-multi-1.15 kind-multicluster kind-multicluster kind-multicluster kubernetes-admin@kubernetes kubernetes kubernetes-admin kubernetes-admin@zks zks kubernetes-admin local-k3s local-k3s local-k3s oci-k3s oci-k3s oci-k3s * oci-k3s-le oci-k3s-le oci-k3s-le sample-cluster sample-cluster clusterUser_sample-rg_sample-cluster \u73fe\u5728\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8 $ kubectl config current-context oci-k3s-le","title":"config"},{"location":"Linux/","text":"Linux \u3044\u308d\u3044\u308d\u30e1\u30e2 Rufus - \u8d77\u52d5\u53ef\u80fd\u306aUSB\u30c9\u30e9\u30a4\u30d6\u3092\u7c21\u5358\u306b\u4f5c\u6210\u3067\u304d\u307e\u3059 Rufus\u4f7f\u7528 Windows\u3067Ubuntu\u306eUSB\u30d6\u30fc\u30c8\u30e1\u30c7\u30a3\u30a2\u3092\u4f5c\u6210\u3059\u308b\u624b\u9806 | \u673a\u4e0a\u306e\u81ea\u8ad6 Universal USB Installer Linux Ubuntu\u306e\u30d6\u30fc\u30bf\u30d6\u30ebUSB\u30c9\u30e9\u30a4\u30d6\u3092\u4f5c\u6210\u3059\u308b\u624b\u9806 | \u4ffa\u306e\u958b\u767a\u7814\u7a76\u6240 sudo \u30d1\u30b9\u30ef\u30fc\u30c9\u4e0d\u8981\u306b\u3059\u308b\u96d1\u306a\u8a2d\u5b9a # cat /etc/sudoers.d/nopass %wheel ALL = (ALL) NOPASSWD : ALL Debian\u7cfb\u306f\u30b0\u30eb\u30fc\u30d7\u540d\u306f wheel \u3067\u306a\u304f sudo \u306b\u306a\u308b\u3002 %sudo ALL = (ALL) NOPASSWD : ALL \u30b3\u30de\u30f3\u30c9\u3067\u30d1\u30b9\u4e0d\u8981\u8a2d\u5b9a rhel\u7cfb cat << __EOL__ > / etc / sudoers.d / nopass %wheel ALL = (ALL) NOPASSWD : ALL __EOL__ debian\u7cfb cat << __EOL__ > / etc / sudoers.d / nopass %sudo ALL = (ALL) NOPASSWD : ALL __EOL__ \u74b0\u5883\u5909\u6570 \u8a2d\u5b9a export PATH=$PATH:~/bin \u524a\u9664 \u74b0\u5883\u5909\u6570 EDITOR \u3092\u524a\u9664\u3059\u308b\u306b\u306f export -n EDITOR \u30b7\u30a7\u30eb\u5909\u6570\u306b\u6b8b\u308b\u306e\u3067 echo $EDITOR \u306e\u51fa\u529b\u306f\u5909\u5316\u3057\u306a\u3044\u304c\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u306f\u6d88\u3048\u308b\u3002","title":"Linux"},{"location":"Linux/#linux","text":"","title":"Linux"},{"location":"Linux/#_1","text":"Rufus - \u8d77\u52d5\u53ef\u80fd\u306aUSB\u30c9\u30e9\u30a4\u30d6\u3092\u7c21\u5358\u306b\u4f5c\u6210\u3067\u304d\u307e\u3059 Rufus\u4f7f\u7528 Windows\u3067Ubuntu\u306eUSB\u30d6\u30fc\u30c8\u30e1\u30c7\u30a3\u30a2\u3092\u4f5c\u6210\u3059\u308b\u624b\u9806 | \u673a\u4e0a\u306e\u81ea\u8ad6 Universal USB Installer Linux Ubuntu\u306e\u30d6\u30fc\u30bf\u30d6\u30ebUSB\u30c9\u30e9\u30a4\u30d6\u3092\u4f5c\u6210\u3059\u308b\u624b\u9806 | \u4ffa\u306e\u958b\u767a\u7814\u7a76\u6240","title":"\u3044\u308d\u3044\u308d\u30e1\u30e2"},{"location":"Linux/#sudo","text":"\u30d1\u30b9\u30ef\u30fc\u30c9\u4e0d\u8981\u306b\u3059\u308b\u96d1\u306a\u8a2d\u5b9a # cat /etc/sudoers.d/nopass %wheel ALL = (ALL) NOPASSWD : ALL Debian\u7cfb\u306f\u30b0\u30eb\u30fc\u30d7\u540d\u306f wheel \u3067\u306a\u304f sudo \u306b\u306a\u308b\u3002 %sudo ALL = (ALL) NOPASSWD : ALL","title":"sudo"},{"location":"Linux/#_2","text":"rhel\u7cfb cat << __EOL__ > / etc / sudoers.d / nopass %wheel ALL = (ALL) NOPASSWD : ALL __EOL__ debian\u7cfb cat << __EOL__ > / etc / sudoers.d / nopass %sudo ALL = (ALL) NOPASSWD : ALL __EOL__","title":"\u30b3\u30de\u30f3\u30c9\u3067\u30d1\u30b9\u4e0d\u8981\u8a2d\u5b9a"},{"location":"Linux/#_3","text":"","title":"\u74b0\u5883\u5909\u6570"},{"location":"Linux/#_4","text":"export PATH=$PATH:~/bin","title":"\u8a2d\u5b9a"},{"location":"Linux/#_5","text":"\u74b0\u5883\u5909\u6570 EDITOR \u3092\u524a\u9664\u3059\u308b\u306b\u306f export -n EDITOR \u30b7\u30a7\u30eb\u5909\u6570\u306b\u6b8b\u308b\u306e\u3067 echo $EDITOR \u306e\u51fa\u529b\u306f\u5909\u5316\u3057\u306a\u3044\u304c\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u306f\u6d88\u3048\u308b\u3002","title":"\u524a\u9664"},{"location":"Linux/cert/","text":"\u8a3c\u660e\u66f8 \u8a3c\u660e\u66f8\u3092\u30b7\u30b9\u30c6\u30e0\u30ef\u30a4\u30c9\u306b\u8a2d\u5b9a\u3059\u308b RHEL\u7cfb /etc/pki/ca-trust/source/anchors/ \u4ee5\u4e0b\u306bPEM\u5f62\u5f0f\u306e\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u3066 update-ca-trust \u3092\u5b9f\u884c\u3059\u308b\u3002 \u3061\u306a\u307f\u306b /etc/pki/ca-trust/extracted/openssl/ca-bundle.trust.crt \u306b\u30de\u30fc\u30b8\u3055\u308c\u308b\u3002 Debian\u7cfb /usr/local/share/ca-certificates/ \u4ee5\u4e0b\u306b\u540c\u3058\u3088\u3046\u306bPEM\u5f62\u5f0f\u306e\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057 update-ca-certificates \u3092\u5b9f\u884c\u3059\u308b\u3002 $ sudo update-ca-certificates Updating certificates in /etc/ssl/certs... 1 added, 0 removed; done . Running hooks in /etc/ca-certificates/update.d... done . \u3053\u3061\u3089\u306f /etc/ssl/certs/ \u4ee5\u4e0b\u306b\u5b9f\u30d5\u30a1\u30a4\u30eb\u3078\u306esymlink\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002 Root CA\u524a\u9664 trust RHEL\u7cfb\u304b\u306a\uff1f [root@cloud-dev ~]# trust list | grep local -3 pkcs11:id=%dd%14%05%0a%b1%7b%9b%09%41%2b%e6%90%a1%5d%6d%30%06%75%c7% 3f; type = cert type: certificate label: local.example.org trust: anchor category: other-entry [root @ cloud - dev ~ ] # trust anchor --remove \"pkcs11:id=%dd%14%05%0a%b1%7b%9b%09%41%2b%e6%90%a1%5d%6d%30%06%75%c7%3f;type=cert\" p11 - kit: couldn 't remove read-only certificate [root @ cloud - dev ~ ] # trust anchor --remove /var/tmp/ansible-work/ca.crt p11 - kit: couldn 't remove read-only certificate \u3053\u308c\u3067\u6d88\u305b\u308b\u3089\u3057\u3044\u3093\u3060\u3051\u3069\u3001 update-ca-trust \u3067\u8ffd\u52a0\u3057\u3066\u308bCA\u306f\u30c0\u30e1\u306a\u306e\u304b\u306a\u3002\u3002 \u7b2c6\u7ae0 \u5171\u901a\u30b7\u30b9\u30c6\u30e0\u8a3c\u660e\u66f8\u306e\u4f7f\u7528 Red Hat Enterprise Linux 8 | Red Hat Customer Portal trust\u3067\u8ffd\u52a0 [root@rhel8-ansible-ctrl ~]# trust anchor --store /var/tmp/ansible-work/ca.crt [root@rhel8-ansible-ctrl ~]# [ root@rhel8-ansible-ctrl ~ ] # trust list | grep local -3 pkcs11 :id =%8 C %88%6 C % FB %9 A % C8 % ED %0 E %65% DA %59%30%99% AF %3 D % FC % B6 %11%86%73 ;type = cert type : certificate label : localca.example.org trust : anchor category : other - entry trust anchor --store \u3067\u8ffd\u52a0\u3057\u305f\u306e\u3067\u3042\u308c\u3070 [root@rhel8-ansible-ctrl ~]# trust list | grep local -3 pkcs11:id=%8C%88%6C%FB%9A%C8%ED%0E%65%DA%59%30%99%AF%3D%FC%B6%11%86% 73 ; type = cert type: certificate label: localca.example.org trust: anchor category: other-entry [root@rhel8-ansible-ctrl ~]# trust anchor --remove /var/tmp/ansible-work/ca.crt [root@rhel8-ansible-ctrl ~]# trust list | grep local -3 [root@rhel8-ansible-ctrl ~]# \u6d88\u305b\u308b\u3002","title":"\u8a3c\u660e\u66f8"},{"location":"Linux/cert/#_1","text":"","title":"\u8a3c\u660e\u66f8"},{"location":"Linux/cert/#_2","text":"","title":"\u8a3c\u660e\u66f8\u3092\u30b7\u30b9\u30c6\u30e0\u30ef\u30a4\u30c9\u306b\u8a2d\u5b9a\u3059\u308b"},{"location":"Linux/cert/#rhel","text":"/etc/pki/ca-trust/source/anchors/ \u4ee5\u4e0b\u306bPEM\u5f62\u5f0f\u306e\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u3066 update-ca-trust \u3092\u5b9f\u884c\u3059\u308b\u3002 \u3061\u306a\u307f\u306b /etc/pki/ca-trust/extracted/openssl/ca-bundle.trust.crt \u306b\u30de\u30fc\u30b8\u3055\u308c\u308b\u3002","title":"RHEL\u7cfb"},{"location":"Linux/cert/#debian","text":"/usr/local/share/ca-certificates/ \u4ee5\u4e0b\u306b\u540c\u3058\u3088\u3046\u306bPEM\u5f62\u5f0f\u306e\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057 update-ca-certificates \u3092\u5b9f\u884c\u3059\u308b\u3002 $ sudo update-ca-certificates Updating certificates in /etc/ssl/certs... 1 added, 0 removed; done . Running hooks in /etc/ca-certificates/update.d... done . \u3053\u3061\u3089\u306f /etc/ssl/certs/ \u4ee5\u4e0b\u306b\u5b9f\u30d5\u30a1\u30a4\u30eb\u3078\u306esymlink\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002","title":"Debian\u7cfb"},{"location":"Linux/cert/#root-ca","text":"","title":"Root CA\u524a\u9664"},{"location":"Linux/cert/#trust","text":"RHEL\u7cfb\u304b\u306a\uff1f [root@cloud-dev ~]# trust list | grep local -3 pkcs11:id=%dd%14%05%0a%b1%7b%9b%09%41%2b%e6%90%a1%5d%6d%30%06%75%c7% 3f; type = cert type: certificate label: local.example.org trust: anchor category: other-entry [root @ cloud - dev ~ ] # trust anchor --remove \"pkcs11:id=%dd%14%05%0a%b1%7b%9b%09%41%2b%e6%90%a1%5d%6d%30%06%75%c7%3f;type=cert\" p11 - kit: couldn 't remove read-only certificate [root @ cloud - dev ~ ] # trust anchor --remove /var/tmp/ansible-work/ca.crt p11 - kit: couldn 't remove read-only certificate \u3053\u308c\u3067\u6d88\u305b\u308b\u3089\u3057\u3044\u3093\u3060\u3051\u3069\u3001 update-ca-trust \u3067\u8ffd\u52a0\u3057\u3066\u308bCA\u306f\u30c0\u30e1\u306a\u306e\u304b\u306a\u3002\u3002 \u7b2c6\u7ae0 \u5171\u901a\u30b7\u30b9\u30c6\u30e0\u8a3c\u660e\u66f8\u306e\u4f7f\u7528 Red Hat Enterprise Linux 8 | Red Hat Customer Portal","title":"trust"},{"location":"Linux/cert/#trust_1","text":"[root@rhel8-ansible-ctrl ~]# trust anchor --store /var/tmp/ansible-work/ca.crt [root@rhel8-ansible-ctrl ~]# [ root@rhel8-ansible-ctrl ~ ] # trust list | grep local -3 pkcs11 :id =%8 C %88%6 C % FB %9 A % C8 % ED %0 E %65% DA %59%30%99% AF %3 D % FC % B6 %11%86%73 ;type = cert type : certificate label : localca.example.org trust : anchor category : other - entry trust anchor --store \u3067\u8ffd\u52a0\u3057\u305f\u306e\u3067\u3042\u308c\u3070 [root@rhel8-ansible-ctrl ~]# trust list | grep local -3 pkcs11:id=%8C%88%6C%FB%9A%C8%ED%0E%65%DA%59%30%99%AF%3D%FC%B6%11%86% 73 ; type = cert type: certificate label: localca.example.org trust: anchor category: other-entry [root@rhel8-ansible-ctrl ~]# trust anchor --remove /var/tmp/ansible-work/ca.crt [root@rhel8-ansible-ctrl ~]# trust list | grep local -3 [root@rhel8-ansible-ctrl ~]# \u6d88\u305b\u308b\u3002","title":"trust\u3067\u8ffd\u52a0"},{"location":"Linux/command/","text":"\u30b3\u30de\u30f3\u30c9\u30e1\u30e2 less \u5236\u5fa1\u6587\u5b57\u3092\u8a8d\u8b58\u3055\u305b\u308b ESC[32m \u3068\u304b\u5927\u91cf\u306b\u8868\u793a\u3055\u308c\u305f\u3068\u304d\u306f\u3001\u8868\u793a\u4e2d\u306b -r \u62bc\u4e0b\u3057\u3066 enter \u5927\u6587\u5b57\u5c0f\u6587\u5b57\u7121\u8996\u3057\u3066\u691c\u7d22 \u8868\u793a\u4e2d\u306b -i \u62bc\u4e0b\u3057\u3066 enter find \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u9664\u5916 $ find /path/to -path ( \u9664\u5916\u30d1\u30b9 ) -prune -o ( \u691c\u7d22\u6761\u4ef6 ) -print find . -path \"*venv\" -prune -o -name \"*.py\" -print \u3068\u304b\u3002 \u30b9\u30da\u30fc\u30b9\u8fbc\u307f\u306e\u30d1\u30b9\u3068xargs\u306e\u9023\u643a \u4ee5\u4e0b\u3067\u3001find\u306e\u7d50\u679c\u304c\\0\u533a\u5207\u308a\u306b\u306a\u308a\u3001xargs\u306e\u30c7\u30ea\u30df\u30bf\u306e\u6271\u3044\u304c\\0\u306b\u306a\u308b\u3002 $ find path [ opt ] -print0 | xargs -0 command find \u306f\u7d50\u679c\u3092\u6539\u884c\u533a\u5207\u308a\u3067\u51fa\u529b\u3057\u3001 xargs \u306f\u6539\u884c\u3068\u30b9\u30da\u30fc\u30b9\u3092\u533a\u5207\u308a\u3068\u307f\u306a\u3059\u306e\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3002 find \u306b -print0 \u3092\u4ed8\u4e0e\u3059\u308b\u3068\u533a\u5207\u308a\u304c \\0 \u306b\u5909\u66f4\u3055\u308c\u3001 xargs \u306b -0 \u3092\u4ed8\u4e0e\u3059\u308b\u3068 \\0 \u533a\u5207\u308a\u3067\u52d5\u4f5c\u3059\u308b\u3002 zaki@salva% find . -name \"*txt\" ./a b.txt ./a.txt ./b.txt ./sub/a b.txt ./sub/a.txt ./sub/b.txt zaki@salva% find . -name \"*txt\" | od -c 0000000 . / a b . t x t \\n . / a . t x 0000020 t \\n . / b . t x t \\n . / s u b / 0000040 a b . t x t \\n . / s u b / a . 0000060 t x t \\n . / s u b / b . t x t \\n zaki@salva% find . -name \"*txt\" -print0 | od -c 0000000 . / a b . t x t \\0 . / a . t x 0000020 t \\0 . / b . t x t \\0 . / s u b / 0000040 a b . t x t \\0 . / s u b / a . 0000060 t x t \\0 . / s u b / b . t x t \\0 date \u66f8\u5f0f \u5165\u529b\u3092\u6307\u5b9a \u6587\u5b57\u5217 $ date -d \"2021/06/25 09:00\" 2021\u5e74 6\u6708 25\u65e5 \u91d1\u66dc\u65e5 09:00:00 JST $ date -d \"2021/06/25 09:00\" +%s 1624579200 epoch $ date -d @1624579200 2021\u5e74 6\u6708 25\u65e5 \u91d1\u66dc\u65e5 09:00:00 JST $ date -d @1624579200 \"+%Y-%m-%d %H-%M-%S\" 2021-06-25 09-00-00 man \u30bb\u30af\u30b7\u30e7\u30f3\u756a\u53f7\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f $ man 5 crontab \u306a\u3069 curl \u540d\u524d\u89e3\u6c7a\u30aa\u30d7\u30b7\u30e7\u30f3 curl --cacert ../myca_server.crt --resolve ansible.example.org:443:192.168.0.41 https://ansible.example.org/ ansible.example.org \u3068\u3044\u3046\u540d\u524d\u3067 192.168.0.41:443 \u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002 wget \u30ea\u30bd\u30fc\u30b9\u306e\u5185\u5bb9\u3092stdout\u3078\u51fa\u529b $ wget -q -O - https://storage.googleapis.com/kubernetes-release/release/stable.txt v1.24.3 sed $ sed -i -e 's/regexp/string/' file -i \u3067\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u3092\u884c\u3046\u3002 -ie \u3063\u3066\u66f8\u304f\u3068\u3001 -i.bak \u3067 file.bak \u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u4f5c\u6210\u3068\u89e3\u91c8\u3055\u308c\u308b\u306e\u3067\u5206\u3051\u308b\u3002 awk ps aux \u306e\u7d50\u679c\u306e3\u30ab\u30e9\u30e0\u76ee\u3092\u629c\u304d\u51fa\u3059\u3002 $ ps aux | awk '{print $3}' 3\u30ab\u30e9\u30e0\u76ee\u30684\u30ab\u30e9\u30e0\u76ee\u3092\u30bf\u30d6\u3067\u533a\u5207\u3063\u3066\u51fa\u529b\u3002 $ ps aux | awk '{print $3, \"\\t\", $4}' \u307e\u305f\u306f\u3001OFS\u5909\u6570(output field separator)\u306b\u30bf\u30d6\u3092\u30bb\u30c3\u30c8\u3057\u4ee5\u4e0b\u3002 $ ps aux | awk 'BEGIN { OFS=\"\\t\" } {print $3, $4}' diff \u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u7d50\u679c\u306estdout\u540c\u58eb\u3092\u6bd4\u8f03\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u3002 $ diff -u < ( command1 ) < ( command2 ) tar \u5c55\u958b\u6642\u306e\u5f62\u5f0f\u6307\u5b9a\u30aa\u30d7\u30b7\u30e7\u30f3 gz\u306e\u5834\u5408\u306fz\u3068\u304b\u306f\u4e0d\u8981\u3002 \u4eca\u306f tar xf hoge.tar.gz \u3060\u3051\u3067\u5f62\u5f0f\u306f\u81ea\u52d5\u8a8d\u8b58\u3059\u308b\u3002 \u6307\u5b9a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u5c55\u958b\u3057\u305f\u3044 $ tar xf archive.tar.gz -C /tmp tar\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u7279\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u308a\u51fa\u3057\u305f\u3044 $ tar xf archive.tar.gz hoge \u7279\u5b9a\u30d5\u30a1\u30a4\u30eb\u3060\u3051\u3092\u6307\u5b9a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5c55\u958b $ tar xf archive.tar.gz hoge -C /tmp \u307e\u305f\u306f $ tar -C /tmp -xf archive.tar.gz hoge \u307e\u3041\u306a\u3093\u3067\u3053\u308c\u8a66\u3057\u305f\u304b\u3063\u3066\u30fc\u3068\u3001-C\u306e\u8aac\u660e\u3088\u304f\u8aad\u3093\u3060\u3089\u300c\u30c7\u30a3\u30ec\u30af\u30c8\u30eaDIR\u3078\u79fb\u52d5\u300d\u3063\u3066\u3042\u308b\u3093\u3067\u3001\u30d5\u30a1\u30a4\u30eb\u6307\u5b9a\u3088\u308a\u524d\u306b\u3053\u308c\u6307\u5b9a\u3057\u305f\u3089\u3001\u3082\u3057\u304b\u3057\u3066\u79fb\u52d5\u51e6\u7406\u304c\u5148\u306b\u884c\u308f\u308c\u3066\u304b\u3089\u6307\u5b9a\u30d5\u30a1\u30a4\u30eb\u53d6\u308a\u51fa\u3057\u51e6\u7406\u304c\u8d70\u308b\u3093\u3058\u3083\u306d\uff1f \u3068\u601d\u3063\u305f\u306e\u304c\u305f\u307e\u305f\u307e\u5f53\u305f\u3063\u305f\u3068\u3044\u3046 \u2014 z a k i \ud83c\udf08 (@zaki_hmkc) September 18, 2020 zip [\u30b3\u30de\u30f3\u30c9\u30e1\u30e2] Linux\u3067zip\u64cd\u4f5c - zaki work log \u30d5\u30a1\u30a4\u30eb\u4e00\u89a7 $ zipinfo <zip-file> \u5c55\u958b -q \u4ed8\u3051\u308c\u3070quiet\u30e2\u30fc\u30c9\u3067\u30d5\u30a1\u30a4\u30eb\u540d\u304c\u51fa\u529b\u3055\u308c\u306a\u3044 $ unzip -q <zip-file> -d \u3067\u51fa\u529b\u5148\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u6307\u5b9a $ unzip <zip-file> -d <dirname> \u5727\u7e2e $ zip gitlab-compose.zip gitlab-compose/ -r -r \u306f\u5fc5\u9808 ps \u5b50\u30d7\u30ed\u30bb\u30b9\u30c4\u30ea\u30fc\u8868\u793a $ ps PID TTY TIME CMD 434128 pts/2 00:00:00 bash 456871 pts/2 00:00:00 ps $ ps f PID TTY STAT TIME COMMAND 434128 pts/2 Ss 0:00 /bin/bash 456875 pts/2 R+ 0:00 \\_ ps f \u5b50\u30d7\u30ed\u30bb\u30b9\u4e00\u89a7 $ ps auxf : : root 1961 0.0 1.1 1104052 91304 ? Ssl 5\u670812 6:00 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd root 241047 0.0 0.0 438492 4124 ? Sl 5\u670826 0:00 \\_ /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port root 241052 0.0 0.0 217040 5636 ? Sl 5\u670826 0:00 \\_ /usr/bin/docker-proxy -proto tcp -host-ip :: -host-port 8000 root 241066 0.0 0.0 298968 5572 ? Sl 5\u670826 0:00 \\_ /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port root 241073 0.0 0.0 218448 5628 ? Sl 5\u670826 0:00 \\_ /usr/bin/docker-proxy -proto tcp -host-ip :: -host-port 49155 : $ ps --ppid 1961 PID TTY TIME CMD 241047 ? 00:00:00 docker-proxy 241052 ? 00:00:00 docker-proxy 241066 ? 00:00:00 docker-proxy 241073 ? 00:00:00 docker-proxy \u5b6b\u30d7\u30ed\u30bb\u30b9\u306f\u51fa\u306a\u3044 \u30d8\u30c3\u30c0\u7121\u3057 $ ps --ppid 1961 --no-headers 241047 ? 00:00:00 docker-proxy 241052 ? 00:00:00 docker-proxy 241066 ? 00:00:00 docker-proxy 241073 ? 00:00:00 docker-proxy top \u30bd\u30fc\u30c8 \u5b9f\u884c\u4e2d\u306b P \u3067CPU\u4f7f\u7528\u7387\u3001 M \u3067\u30e1\u30e2\u30ea\u4f7f\u7528\u7387\u3067\u30bd\u30fc\u30c8\u3055\u308c\u308b\u3002 \u5206\u304b\u308a\u3065\u3089\u3044\u3051\u3069 x \u62bc\u4e0b\u3067\u30bd\u30fc\u30c8\u57fa\u6e96\u306e\u30ab\u30e9\u30e0\u304c\u592a\u5b57\u306b\u306a\u308b\u3002 CPU\u30b3\u30a2\u6bce \u5b9f\u884c\u4e2d\u306b 1 \u62bc\u4e0b top - 09:18:32 up 69 days, 11:39, 0 users, load average: 0.01, 0.02, 0.05 Tasks: 134 total, 1 running, 133 sleeping, 0 stopped, 0 zombie % Cpu0 : 2 .0 us, 0 .7 sy, 0 .0 ni, 97 .3 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st % Cpu1 : 0 .3 us, 0 .7 sy, 0 .0 ni, 99 .0 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st % Cpu2 : 1 .3 us, 0 .7 sy, 0 .0 ni, 98 .0 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st % Cpu3 : 0 .3 us, 0 .3 sy, 0 .0 ni, 99 .3 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st KiB Mem : 7990048 total, 717480 free, 1974248 used, 5298320 buff/cache KiB Swap: 3670012 total, 3670012 free, 0 used. 5665228 avail Mem \u30b3\u30de\u30f3\u30c9\u30d5\u30eb\u30d1\u30b9\u30fb\u5f15\u6570\u8868\u793a \u5b9f\u884c\u4e2d\u306b c \u62bc\u4e0b top - 09:20:43 up 69 days, 11:41, 0 users, load average: 0.00, 0.01, 0.05 Tasks: 134 total, 1 running, 133 sleeping, 0 stopped, 0 zombie % Cpu ( s ) : 0 .1 us, 0 .0 sy, 0 .0 ni, 99 .9 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st KiB Mem : 7990048 total, 715400 free, 1976168 used, 5298480 buff/cache KiB Swap: 3670012 total, 3670012 free, 0 used. 5663308 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 351149 zaki 20 0 1280996 358920 9912 S 0.0 4.5 8:37.98 /home/zaki/.vscode-server/data/User/globalStorage/hashicorp.terraform/bin/terraform-ls serve 350657 zaki 20 0 1029428 147820 21832 S 0.3 1.9 2:04.98 /home/zaki/.vscode-server/bin/899d46d82c4c95423fb7e10e68eba52050e30ba3/node /home/zaki/.vscode-server/bin/899d46d8+ 350535 zaki 20 0 963792 102092 18036 S 0.0 1.3 2:00.07 /home/zaki/.vscode-server/bin/899d46d82c4c95423fb7e10e68eba52050e30ba3/node /home/zaki/.vscode-server/bin/899d46d8+ 385441 root 20 0 1130612 62204 26536 S 0.0 0.8 0:10.18 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock dig \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u5b9f\u884c\u30db\u30b9\u30c8\u306eOS\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u306b\u5bfe\u3057\u3066A\u30ec\u30b3\u30fc\u30c9\u3092\u554f\u3044\u5408\u308f\u305b\u308b\u3002 $ dig gmail.com ; <<>> DiG 9.16.28-RH <<>> gmail.com ;; global options: +cmd ;; Got answer: ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 20838 ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1 ;; OPT PSEUDOSECTION: ; EDNS: version: 0, flags:; udp: 65494 ;; QUESTION SECTION: ;gmail.com. IN A ;; ANSWER SECTION: gmail.com. 180 IN A 142.251.42.197 ;; Query time: 7 msec ;; SERVER: 127.0.0.53#53(127.0.0.53) ;; WHEN: Thu Apr 28 10:31:34 JST 2022 ;; MSG SIZE rcvd: 54 NetworkManager \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u4e00\u89a7 \u63a5\u7d9a\u3057\u3066\u308b\u3082\u306e\u5168\u90e8 $ nmcli connection \u30c7\u30d0\u30a4\u30b9\u4e00\u89a7 $ nmcli device connection \u3068 device \u306f\u3001\u305d\u308c\u305e\u308c c \u3068 d \u306b\u77ed\u7e2e\u53ef\u80fd\u3002 \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u8a73\u7d30 s \u307e\u305f\u306f show \u306e\u5f15\u6570\u306b\u3001\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002 # nmcli c s ens192 connection.id: ens192 connection.uuid: fd81b589-db4b-445d-9e60-22524aab4e9f connection.stable-id: -- connection.type: 802-3-ethernet connection.interface-name: ens192 connection.autoconnect: \u306f\u3044 connection.autoconnect-priority: 0 connection.autoconnect-retries: -1 (default) connection.multi-connect: 0 (default) : : DNS\u306e\u30bb\u30ab\u30f3\u30c0\u30ea\u8ffd\u52a0 \u8ffd\u52a0\u3059\u308b\u9805\u76ee\u3067\u3042\u308b ipv4.dns \u306e\u624b\u524d\u306b + \u3092\u4ed8\u4e0e\u3059\u308b\u3068\u300c\u8ffd\u52a0\u300d\u306b\u306a\u308b\u3002 - \u3092\u4ed8\u4e0e\u3059\u308b\u3068\u5bfe\u8c61\u3092\u524a\u9664\u306b\u306a\u308b\u3002 DNS1 \u306e\u8a2d\u5b9a\u304c\u3042\u308b\u72b6\u614b\u3067\u4e0b\u8a18\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001 DNS2 \u306e\u8a2d\u5b9a\u3068\u3057\u3066\u8ffd\u52a0\u3055\u308c\u308b\u3002 # nmcli c m \"System ens192\" +ipv4.dns 192 .168.0.1 DNS\u306esearch\u884c\u8ffd\u52a0 my.example.org \u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f # nmcli c m ens192 ipv4.dns-search my.example.org # systemctl restart NetworkManager \u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u5909\u66f4 192.168.39.89 \u306b\u8a2d\u5b9a\u3059\u308b # nmcli c m ens192 ipv4.gateway 192 .168.39.89 \u8a2d\u5b9a\u524a\u9664\u3059\u308b # nmcli c m ens192 ipv4.gateway \"\" [Ansible] \u30bf\u30fc\u30b2\u30c3\u30c8\u30db\u30b9\u30c8\u306eIP\u30a2\u30c9\u30ec\u30b9\u306e\u53c2\u7167\u3068\u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306e\u30e1\u30e2 - zaki work log \u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30eb\u30fc\u30c8\u8ffd\u52a0 \u74b0\u5883: [VyOS] NAT\u8a2d\u5b9a\u3092\u4f7f\u3063\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u9593\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0 (\u624b\u52d5 & Ansible / vyos_config) - zaki work log \u3084\u308a\u305f\u3044\u3053\u3068 \u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306fens192\u5074\u306e192.168.0.1 NIC\u306f2\u9762 (ens192: 192.168.0.44/24, ens224: 172.16.0.44/23) 172.29.0.89 \u3078\u758e\u901a\u3092\u8ffd\u52a0\u3057\u305f\u3044 \u3053\u306e\u30a2\u30c9\u30ec\u30b9\u306fens224\u306e\u5148\u306e172.16.1.3/23\u304c\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3059\u308b \u30b3\u30de\u30f3\u30c9 # nmcli c m ens224 +ipv4.routes \"172.29.0.0/24 172.16.1.3\" # nmcli c u ens224 4.2. nmcli \u3092\u4f7f\u3063\u305f\u9759\u7684\u30eb\u30fc\u30c8\u306e\u8a2d\u5b9a Red Hat Enterprise Linux 7 | Red Hat Customer Portal \u3053\u306e\u8fba\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002 \u30ea\u30d6\u30fc\u30c8\u3057\u3066\u3082\u6709\u52b9 [root@fedora-node ~]# ip r default via 192.168.0.1 dev ens192 proto static metric 100 : : 172.29.0.0/24 via 172.16.1.3 dev ens224 proto static metric 101 Fedora34\u3060\u3068\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f /etc/NetworkManager/system-connections/ens224.nmconnection \u3067\u3001\u5185\u5bb9\u306f\u3053\u3093\u306a\u611f\u3058\u3002 [ipv4] address1 = 172.16.0.44/23 dns = 172.16.2.0; dns-search = method = manual route1 = 172.29.0.0/24,172.16.1.3 \u8a2d\u5b9a\u89e3\u9664\u306f - \u3092\u4ed8\u3051\u3066\u5b9f\u884c\u3002 # nmcli c m ens224 -ipv4.routes \"172.29.0.0/24 172.16.1.3\" \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb iptables \u30eb\u30fc\u30eb\u78ba\u8a8d # iptables -L TCP\u30dd\u30fc\u30c8\u8a31\u53ef\u8ffd\u52a0 # iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT \u30ea\u30c0\u30a4\u30ec\u30af\u30c8 10.0.0.1\u304b\u3089\u306e80/tcp\u30a2\u30af\u30bb\u30b9\u30928080/tcp\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u5834\u5408\u3002(8080/tcp\u3082\u8a31\u53ef\u306f\u5fc5\u8981) # iptables -t nat -A PREROUTING -p tcp -s 10 .0.0.1 --dport 80 -j REDIRECT --to 8080 \u81ea\u5206\u3078\u306e443/tcp\u30a2\u30af\u30bb\u30b9\u3092\u30ea\u30e2\u30fc\u30c8\u306e172.29.0.14:443\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u5834\u5408\u3002 iptables -t nat -A PREROUTING -p tcp --dport 443 -j DNAT --to-destination 172.29.0.14:443 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u30eb\u30fc\u30eb\u306e\u524a\u9664 \u307e\u305a\u30eb\u30fc\u30eb\u306e\u78ba\u8a8d\u3092 --line-numbers \u3092\u4ed8\u4e0e\u3057\u3066\u884c\u756a\u53f7\u3092\u78ba\u8a8d\u3002 # iptables -L -t nat --line-numbers \u756a\u53f7\u3092\u78ba\u8a8d\u3057\u305f\u3089\u3001\u305d\u308c\u3092\u5f15\u6570\u306b\u4ee5\u4e0b\u3092\u5b9f\u884c\u3002( PREROUTING \u30eb\u30fc\u30eb\u306e\u5834\u5408) # iptables -t nat -D PREROUTING 1 firewall-cmd [\u30b3\u30de\u30f3\u30c9\u30e1\u30e2] firewall-cmd\u5099\u5fd8\u9332 (firewalld) - zaki work log ufw \u73fe\u5728\u306e\u72b6\u614b\u3002 \u203b\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u306a\u3063\u3066\u3044\u306a\u3044 root@oci-g-a1-ubuntu:~# ufw status Status: inactive \u6709\u52b9\u5316\u3059\u308b\u3002 ssh\u7d4c\u7531\u306e\u5834\u5408\u8b66\u544a\u3055\u308c\u308b\u3002( iptables -nL \u3042\u305f\u308a\u306722/tcp\u304c\u958b\u3044\u3066\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u3066\u304a\u3051\u3070\u2026\u826f\u3044\u306e\u304b\u306a) root@oci-g-a1-ubuntu:~# ufw enable Command may disrupt existing ssh connections. Proceed with operation (y|n)? y Firewall is active and enabled on system startup \u518d\u8aad\u307f\u8fbc\u307f\u3068\u72b6\u614b\u78ba\u8a8d\u3002 root@oci-g-a1-ubuntu:~# ufw reload Firewall reloaded root@oci-g-a1-ubuntu:~# ufw status Status: active TCP\u30dd\u30fc\u30c8\u306e\u8a31\u53ef root@oci-g-a1-ubuntu:~# ufw allow 6443 Rule added Rule added (v6) root@oci-g-a1-ubuntu:~# ufw reload Firewall reloaded root@oci-g-a1-ubuntu:~# ufw status Status: active To Action From -- ------ ---- 6443 ALLOW Anywhere 6443 (v6) ALLOW Anywhere (v6) \u203b \u64cd\u4f5c\u306e\u307f\u3002\u3053\u306e\u74b0\u5883\u306fufw\u3092\u4f7f\u3063\u3066\u306a\u3044\u3089\u3057\u304f\u52d5\u4f5c\u306f\u672a\u78ba\u8a8d alternatives ubuntu\u3060\u3068 update-alternatives \u3067\u3001RHEL\u7cfb\u3060\u3068 alternatives \u306b\u306a\u308b\u3002 \u8a2d\u5b9a\u4e00\u89a7 ubuntu\u306e\u5834\u5408 root@oci-ap-a1-ubuntu:~# update-alternatives --get-selections arptables auto /usr/sbin/arptables-nft awk auto /usr/bin/gawk builtins.7.gz auto /usr/share/man/man7/bash-builtins.7.gz c++ auto /usr/bin/g++ : : Fedora\u306e\u5834\u5408 [ root@cloud-dev2 ~ ] # update - alternatives -- list libnssckbi.so.x86_64 auto / usr / lib64 / pkcs11 / p11 - kit - trust.so soelim auto / usr / bin / soelim.groff iptables auto / usr / sbin / iptables - nft : \u8a2d\u5b9a\u306e\u767b\u9332 python \u3068\u3044\u3046\u540d\u524d\u3067\u3001 /usr/bin/python \u3092\u512a\u5148\u5ea610\u3067\u767b\u9332\u3059\u308b\u3002 $ sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 10 update-alternatives: using /usr/bin/python3 to provide /usr/bin/python (python) in auto mode \u3053\u308c\u3067\u3001\u4ee5\u4e0b\u306e\u30ea\u30f3\u30af\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002 $ ls -l /usr/bin/python /etc/alternatives/python lrwxrwxrwx 1 root root 16 Mar 31 15:16 /etc/alternatives/python -> /usr/bin/python3 lrwxrwxrwx 1 root root 24 Mar 31 15:16 /usr/bin/python -> /etc/alternatives/python \u8a2d\u5b9a $ update-alternatives --display python python - auto mode link best version is /usr/bin/python3 link currently points to /usr/bin/python3 link python is /usr/bin/python /usr/bin/python3 - priority 10","title":"\u30b3\u30de\u30f3\u30c9\u30e1\u30e2"},{"location":"Linux/command/#_1","text":"","title":"\u30b3\u30de\u30f3\u30c9\u30e1\u30e2"},{"location":"Linux/command/#less","text":"","title":"less"},{"location":"Linux/command/#_2","text":"ESC[32m \u3068\u304b\u5927\u91cf\u306b\u8868\u793a\u3055\u308c\u305f\u3068\u304d\u306f\u3001\u8868\u793a\u4e2d\u306b -r \u62bc\u4e0b\u3057\u3066 enter","title":"\u5236\u5fa1\u6587\u5b57\u3092\u8a8d\u8b58\u3055\u305b\u308b"},{"location":"Linux/command/#_3","text":"\u8868\u793a\u4e2d\u306b -i \u62bc\u4e0b\u3057\u3066 enter","title":"\u5927\u6587\u5b57\u5c0f\u6587\u5b57\u7121\u8996\u3057\u3066\u691c\u7d22"},{"location":"Linux/command/#find","text":"","title":"find"},{"location":"Linux/command/#_4","text":"$ find /path/to -path ( \u9664\u5916\u30d1\u30b9 ) -prune -o ( \u691c\u7d22\u6761\u4ef6 ) -print find . -path \"*venv\" -prune -o -name \"*.py\" -print \u3068\u304b\u3002","title":"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u9664\u5916"},{"location":"Linux/command/#xargs","text":"\u4ee5\u4e0b\u3067\u3001find\u306e\u7d50\u679c\u304c\\0\u533a\u5207\u308a\u306b\u306a\u308a\u3001xargs\u306e\u30c7\u30ea\u30df\u30bf\u306e\u6271\u3044\u304c\\0\u306b\u306a\u308b\u3002 $ find path [ opt ] -print0 | xargs -0 command find \u306f\u7d50\u679c\u3092\u6539\u884c\u533a\u5207\u308a\u3067\u51fa\u529b\u3057\u3001 xargs \u306f\u6539\u884c\u3068\u30b9\u30da\u30fc\u30b9\u3092\u533a\u5207\u308a\u3068\u307f\u306a\u3059\u306e\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3002 find \u306b -print0 \u3092\u4ed8\u4e0e\u3059\u308b\u3068\u533a\u5207\u308a\u304c \\0 \u306b\u5909\u66f4\u3055\u308c\u3001 xargs \u306b -0 \u3092\u4ed8\u4e0e\u3059\u308b\u3068 \\0 \u533a\u5207\u308a\u3067\u52d5\u4f5c\u3059\u308b\u3002 zaki@salva% find . -name \"*txt\" ./a b.txt ./a.txt ./b.txt ./sub/a b.txt ./sub/a.txt ./sub/b.txt zaki@salva% find . -name \"*txt\" | od -c 0000000 . / a b . t x t \\n . / a . t x 0000020 t \\n . / b . t x t \\n . / s u b / 0000040 a b . t x t \\n . / s u b / a . 0000060 t x t \\n . / s u b / b . t x t \\n zaki@salva% find . -name \"*txt\" -print0 | od -c 0000000 . / a b . t x t \\0 . / a . t x 0000020 t \\0 . / b . t x t \\0 . / s u b / 0000040 a b . t x t \\0 . / s u b / a . 0000060 t x t \\0 . / s u b / b . t x t \\0","title":"\u30b9\u30da\u30fc\u30b9\u8fbc\u307f\u306e\u30d1\u30b9\u3068xargs\u306e\u9023\u643a"},{"location":"Linux/command/#date","text":"","title":"date"},{"location":"Linux/command/#_5","text":"","title":"\u66f8\u5f0f"},{"location":"Linux/command/#_6","text":"\u6587\u5b57\u5217 $ date -d \"2021/06/25 09:00\" 2021\u5e74 6\u6708 25\u65e5 \u91d1\u66dc\u65e5 09:00:00 JST $ date -d \"2021/06/25 09:00\" +%s 1624579200 epoch $ date -d @1624579200 2021\u5e74 6\u6708 25\u65e5 \u91d1\u66dc\u65e5 09:00:00 JST $ date -d @1624579200 \"+%Y-%m-%d %H-%M-%S\" 2021-06-25 09-00-00","title":"\u5165\u529b\u3092\u6307\u5b9a"},{"location":"Linux/command/#man","text":"\u30bb\u30af\u30b7\u30e7\u30f3\u756a\u53f7\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f $ man 5 crontab \u306a\u3069","title":"man"},{"location":"Linux/command/#curl","text":"","title":"curl"},{"location":"Linux/command/#_7","text":"curl --cacert ../myca_server.crt --resolve ansible.example.org:443:192.168.0.41 https://ansible.example.org/ ansible.example.org \u3068\u3044\u3046\u540d\u524d\u3067 192.168.0.41:443 \u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002","title":"\u540d\u524d\u89e3\u6c7a\u30aa\u30d7\u30b7\u30e7\u30f3"},{"location":"Linux/command/#wget","text":"\u30ea\u30bd\u30fc\u30b9\u306e\u5185\u5bb9\u3092stdout\u3078\u51fa\u529b $ wget -q -O - https://storage.googleapis.com/kubernetes-release/release/stable.txt v1.24.3","title":"wget"},{"location":"Linux/command/#sed","text":"$ sed -i -e 's/regexp/string/' file -i \u3067\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u3092\u884c\u3046\u3002 -ie \u3063\u3066\u66f8\u304f\u3068\u3001 -i.bak \u3067 file.bak \u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u4f5c\u6210\u3068\u89e3\u91c8\u3055\u308c\u308b\u306e\u3067\u5206\u3051\u308b\u3002","title":"sed"},{"location":"Linux/command/#awk","text":"ps aux \u306e\u7d50\u679c\u306e3\u30ab\u30e9\u30e0\u76ee\u3092\u629c\u304d\u51fa\u3059\u3002 $ ps aux | awk '{print $3}' 3\u30ab\u30e9\u30e0\u76ee\u30684\u30ab\u30e9\u30e0\u76ee\u3092\u30bf\u30d6\u3067\u533a\u5207\u3063\u3066\u51fa\u529b\u3002 $ ps aux | awk '{print $3, \"\\t\", $4}' \u307e\u305f\u306f\u3001OFS\u5909\u6570(output field separator)\u306b\u30bf\u30d6\u3092\u30bb\u30c3\u30c8\u3057\u4ee5\u4e0b\u3002 $ ps aux | awk 'BEGIN { OFS=\"\\t\" } {print $3, $4}'","title":"awk"},{"location":"Linux/command/#diff","text":"\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u7d50\u679c\u306estdout\u540c\u58eb\u3092\u6bd4\u8f03\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u3002 $ diff -u < ( command1 ) < ( command2 )","title":"diff"},{"location":"Linux/command/#tar","text":"","title":"tar"},{"location":"Linux/command/#_8","text":"gz\u306e\u5834\u5408\u306fz\u3068\u304b\u306f\u4e0d\u8981\u3002 \u4eca\u306f tar xf hoge.tar.gz \u3060\u3051\u3067\u5f62\u5f0f\u306f\u81ea\u52d5\u8a8d\u8b58\u3059\u308b\u3002","title":"\u5c55\u958b\u6642\u306e\u5f62\u5f0f\u6307\u5b9a\u30aa\u30d7\u30b7\u30e7\u30f3"},{"location":"Linux/command/#_9","text":"$ tar xf archive.tar.gz -C /tmp","title":"\u6307\u5b9a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u5c55\u958b\u3057\u305f\u3044"},{"location":"Linux/command/#tar_1","text":"$ tar xf archive.tar.gz hoge","title":"tar\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u7279\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u308a\u51fa\u3057\u305f\u3044"},{"location":"Linux/command/#_10","text":"$ tar xf archive.tar.gz hoge -C /tmp \u307e\u305f\u306f $ tar -C /tmp -xf archive.tar.gz hoge \u307e\u3041\u306a\u3093\u3067\u3053\u308c\u8a66\u3057\u305f\u304b\u3063\u3066\u30fc\u3068\u3001-C\u306e\u8aac\u660e\u3088\u304f\u8aad\u3093\u3060\u3089\u300c\u30c7\u30a3\u30ec\u30af\u30c8\u30eaDIR\u3078\u79fb\u52d5\u300d\u3063\u3066\u3042\u308b\u3093\u3067\u3001\u30d5\u30a1\u30a4\u30eb\u6307\u5b9a\u3088\u308a\u524d\u306b\u3053\u308c\u6307\u5b9a\u3057\u305f\u3089\u3001\u3082\u3057\u304b\u3057\u3066\u79fb\u52d5\u51e6\u7406\u304c\u5148\u306b\u884c\u308f\u308c\u3066\u304b\u3089\u6307\u5b9a\u30d5\u30a1\u30a4\u30eb\u53d6\u308a\u51fa\u3057\u51e6\u7406\u304c\u8d70\u308b\u3093\u3058\u3083\u306d\uff1f \u3068\u601d\u3063\u305f\u306e\u304c\u305f\u307e\u305f\u307e\u5f53\u305f\u3063\u305f\u3068\u3044\u3046 \u2014 z a k i \ud83c\udf08 (@zaki_hmkc) September 18, 2020","title":"\u7279\u5b9a\u30d5\u30a1\u30a4\u30eb\u3060\u3051\u3092\u6307\u5b9a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5c55\u958b"},{"location":"Linux/command/#zip","text":"[\u30b3\u30de\u30f3\u30c9\u30e1\u30e2] Linux\u3067zip\u64cd\u4f5c - zaki work log","title":"zip"},{"location":"Linux/command/#_11","text":"$ zipinfo <zip-file>","title":"\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7"},{"location":"Linux/command/#_12","text":"-q \u4ed8\u3051\u308c\u3070quiet\u30e2\u30fc\u30c9\u3067\u30d5\u30a1\u30a4\u30eb\u540d\u304c\u51fa\u529b\u3055\u308c\u306a\u3044 $ unzip -q <zip-file> -d \u3067\u51fa\u529b\u5148\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u6307\u5b9a $ unzip <zip-file> -d <dirname>","title":"\u5c55\u958b"},{"location":"Linux/command/#_13","text":"$ zip gitlab-compose.zip gitlab-compose/ -r -r \u306f\u5fc5\u9808","title":"\u5727\u7e2e"},{"location":"Linux/command/#ps","text":"","title":"ps"},{"location":"Linux/command/#_14","text":"$ ps PID TTY TIME CMD 434128 pts/2 00:00:00 bash 456871 pts/2 00:00:00 ps $ ps f PID TTY STAT TIME COMMAND 434128 pts/2 Ss 0:00 /bin/bash 456875 pts/2 R+ 0:00 \\_ ps f","title":"\u5b50\u30d7\u30ed\u30bb\u30b9\u30c4\u30ea\u30fc\u8868\u793a"},{"location":"Linux/command/#_15","text":"$ ps auxf : : root 1961 0.0 1.1 1104052 91304 ? Ssl 5\u670812 6:00 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd root 241047 0.0 0.0 438492 4124 ? Sl 5\u670826 0:00 \\_ /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port root 241052 0.0 0.0 217040 5636 ? Sl 5\u670826 0:00 \\_ /usr/bin/docker-proxy -proto tcp -host-ip :: -host-port 8000 root 241066 0.0 0.0 298968 5572 ? Sl 5\u670826 0:00 \\_ /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port root 241073 0.0 0.0 218448 5628 ? Sl 5\u670826 0:00 \\_ /usr/bin/docker-proxy -proto tcp -host-ip :: -host-port 49155 : $ ps --ppid 1961 PID TTY TIME CMD 241047 ? 00:00:00 docker-proxy 241052 ? 00:00:00 docker-proxy 241066 ? 00:00:00 docker-proxy 241073 ? 00:00:00 docker-proxy \u5b6b\u30d7\u30ed\u30bb\u30b9\u306f\u51fa\u306a\u3044","title":"\u5b50\u30d7\u30ed\u30bb\u30b9\u4e00\u89a7"},{"location":"Linux/command/#_16","text":"$ ps --ppid 1961 --no-headers 241047 ? 00:00:00 docker-proxy 241052 ? 00:00:00 docker-proxy 241066 ? 00:00:00 docker-proxy 241073 ? 00:00:00 docker-proxy","title":"\u30d8\u30c3\u30c0\u7121\u3057"},{"location":"Linux/command/#top","text":"","title":"top"},{"location":"Linux/command/#_17","text":"\u5b9f\u884c\u4e2d\u306b P \u3067CPU\u4f7f\u7528\u7387\u3001 M \u3067\u30e1\u30e2\u30ea\u4f7f\u7528\u7387\u3067\u30bd\u30fc\u30c8\u3055\u308c\u308b\u3002 \u5206\u304b\u308a\u3065\u3089\u3044\u3051\u3069 x \u62bc\u4e0b\u3067\u30bd\u30fc\u30c8\u57fa\u6e96\u306e\u30ab\u30e9\u30e0\u304c\u592a\u5b57\u306b\u306a\u308b\u3002","title":"\u30bd\u30fc\u30c8"},{"location":"Linux/command/#cpu","text":"\u5b9f\u884c\u4e2d\u306b 1 \u62bc\u4e0b top - 09:18:32 up 69 days, 11:39, 0 users, load average: 0.01, 0.02, 0.05 Tasks: 134 total, 1 running, 133 sleeping, 0 stopped, 0 zombie % Cpu0 : 2 .0 us, 0 .7 sy, 0 .0 ni, 97 .3 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st % Cpu1 : 0 .3 us, 0 .7 sy, 0 .0 ni, 99 .0 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st % Cpu2 : 1 .3 us, 0 .7 sy, 0 .0 ni, 98 .0 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st % Cpu3 : 0 .3 us, 0 .3 sy, 0 .0 ni, 99 .3 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st KiB Mem : 7990048 total, 717480 free, 1974248 used, 5298320 buff/cache KiB Swap: 3670012 total, 3670012 free, 0 used. 5665228 avail Mem","title":"CPU\u30b3\u30a2\u6bce"},{"location":"Linux/command/#_18","text":"\u5b9f\u884c\u4e2d\u306b c \u62bc\u4e0b top - 09:20:43 up 69 days, 11:41, 0 users, load average: 0.00, 0.01, 0.05 Tasks: 134 total, 1 running, 133 sleeping, 0 stopped, 0 zombie % Cpu ( s ) : 0 .1 us, 0 .0 sy, 0 .0 ni, 99 .9 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st KiB Mem : 7990048 total, 715400 free, 1976168 used, 5298480 buff/cache KiB Swap: 3670012 total, 3670012 free, 0 used. 5663308 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 351149 zaki 20 0 1280996 358920 9912 S 0.0 4.5 8:37.98 /home/zaki/.vscode-server/data/User/globalStorage/hashicorp.terraform/bin/terraform-ls serve 350657 zaki 20 0 1029428 147820 21832 S 0.3 1.9 2:04.98 /home/zaki/.vscode-server/bin/899d46d82c4c95423fb7e10e68eba52050e30ba3/node /home/zaki/.vscode-server/bin/899d46d8+ 350535 zaki 20 0 963792 102092 18036 S 0.0 1.3 2:00.07 /home/zaki/.vscode-server/bin/899d46d82c4c95423fb7e10e68eba52050e30ba3/node /home/zaki/.vscode-server/bin/899d46d8+ 385441 root 20 0 1130612 62204 26536 S 0.0 0.8 0:10.18 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock","title":"\u30b3\u30de\u30f3\u30c9\u30d5\u30eb\u30d1\u30b9\u30fb\u5f15\u6570\u8868\u793a"},{"location":"Linux/command/#dig","text":"\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u5b9f\u884c\u30db\u30b9\u30c8\u306eOS\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u306b\u5bfe\u3057\u3066A\u30ec\u30b3\u30fc\u30c9\u3092\u554f\u3044\u5408\u308f\u305b\u308b\u3002 $ dig gmail.com ; <<>> DiG 9.16.28-RH <<>> gmail.com ;; global options: +cmd ;; Got answer: ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 20838 ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1 ;; OPT PSEUDOSECTION: ; EDNS: version: 0, flags:; udp: 65494 ;; QUESTION SECTION: ;gmail.com. IN A ;; ANSWER SECTION: gmail.com. 180 IN A 142.251.42.197 ;; Query time: 7 msec ;; SERVER: 127.0.0.53#53(127.0.0.53) ;; WHEN: Thu Apr 28 10:31:34 JST 2022 ;; MSG SIZE rcvd: 54","title":"dig"},{"location":"Linux/command/#networkmanager","text":"","title":"NetworkManager"},{"location":"Linux/command/#_19","text":"\u63a5\u7d9a\u3057\u3066\u308b\u3082\u306e\u5168\u90e8 $ nmcli connection \u30c7\u30d0\u30a4\u30b9\u4e00\u89a7 $ nmcli device connection \u3068 device \u306f\u3001\u305d\u308c\u305e\u308c c \u3068 d \u306b\u77ed\u7e2e\u53ef\u80fd\u3002","title":"\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u4e00\u89a7"},{"location":"Linux/command/#_20","text":"s \u307e\u305f\u306f show \u306e\u5f15\u6570\u306b\u3001\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002 # nmcli c s ens192 connection.id: ens192 connection.uuid: fd81b589-db4b-445d-9e60-22524aab4e9f connection.stable-id: -- connection.type: 802-3-ethernet connection.interface-name: ens192 connection.autoconnect: \u306f\u3044 connection.autoconnect-priority: 0 connection.autoconnect-retries: -1 (default) connection.multi-connect: 0 (default) : :","title":"\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u8a73\u7d30"},{"location":"Linux/command/#dns","text":"\u8ffd\u52a0\u3059\u308b\u9805\u76ee\u3067\u3042\u308b ipv4.dns \u306e\u624b\u524d\u306b + \u3092\u4ed8\u4e0e\u3059\u308b\u3068\u300c\u8ffd\u52a0\u300d\u306b\u306a\u308b\u3002 - \u3092\u4ed8\u4e0e\u3059\u308b\u3068\u5bfe\u8c61\u3092\u524a\u9664\u306b\u306a\u308b\u3002 DNS1 \u306e\u8a2d\u5b9a\u304c\u3042\u308b\u72b6\u614b\u3067\u4e0b\u8a18\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001 DNS2 \u306e\u8a2d\u5b9a\u3068\u3057\u3066\u8ffd\u52a0\u3055\u308c\u308b\u3002 # nmcli c m \"System ens192\" +ipv4.dns 192 .168.0.1","title":"DNS\u306e\u30bb\u30ab\u30f3\u30c0\u30ea\u8ffd\u52a0"},{"location":"Linux/command/#dnssearch","text":"my.example.org \u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f # nmcli c m ens192 ipv4.dns-search my.example.org # systemctl restart NetworkManager","title":"DNS\u306esearch\u884c\u8ffd\u52a0"},{"location":"Linux/command/#_21","text":"192.168.39.89 \u306b\u8a2d\u5b9a\u3059\u308b # nmcli c m ens192 ipv4.gateway 192 .168.39.89 \u8a2d\u5b9a\u524a\u9664\u3059\u308b # nmcli c m ens192 ipv4.gateway \"\" [Ansible] \u30bf\u30fc\u30b2\u30c3\u30c8\u30db\u30b9\u30c8\u306eIP\u30a2\u30c9\u30ec\u30b9\u306e\u53c2\u7167\u3068\u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306e\u30e1\u30e2 - zaki work log","title":"\u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u5909\u66f4"},{"location":"Linux/command/#_22","text":"\u74b0\u5883: [VyOS] NAT\u8a2d\u5b9a\u3092\u4f7f\u3063\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u9593\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0 (\u624b\u52d5 & Ansible / vyos_config) - zaki work log \u3084\u308a\u305f\u3044\u3053\u3068 \u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306fens192\u5074\u306e192.168.0.1 NIC\u306f2\u9762 (ens192: 192.168.0.44/24, ens224: 172.16.0.44/23) 172.29.0.89 \u3078\u758e\u901a\u3092\u8ffd\u52a0\u3057\u305f\u3044 \u3053\u306e\u30a2\u30c9\u30ec\u30b9\u306fens224\u306e\u5148\u306e172.16.1.3/23\u304c\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3059\u308b \u30b3\u30de\u30f3\u30c9 # nmcli c m ens224 +ipv4.routes \"172.29.0.0/24 172.16.1.3\" # nmcli c u ens224 4.2. nmcli \u3092\u4f7f\u3063\u305f\u9759\u7684\u30eb\u30fc\u30c8\u306e\u8a2d\u5b9a Red Hat Enterprise Linux 7 | Red Hat Customer Portal \u3053\u306e\u8fba\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002 \u30ea\u30d6\u30fc\u30c8\u3057\u3066\u3082\u6709\u52b9 [root@fedora-node ~]# ip r default via 192.168.0.1 dev ens192 proto static metric 100 : : 172.29.0.0/24 via 172.16.1.3 dev ens224 proto static metric 101 Fedora34\u3060\u3068\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f /etc/NetworkManager/system-connections/ens224.nmconnection \u3067\u3001\u5185\u5bb9\u306f\u3053\u3093\u306a\u611f\u3058\u3002 [ipv4] address1 = 172.16.0.44/23 dns = 172.16.2.0; dns-search = method = manual route1 = 172.29.0.0/24,172.16.1.3 \u8a2d\u5b9a\u89e3\u9664\u306f - \u3092\u4ed8\u3051\u3066\u5b9f\u884c\u3002 # nmcli c m ens224 -ipv4.routes \"172.29.0.0/24 172.16.1.3\"","title":"\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30eb\u30fc\u30c8\u8ffd\u52a0"},{"location":"Linux/command/#_23","text":"","title":"\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb"},{"location":"Linux/command/#iptables","text":"\u30eb\u30fc\u30eb\u78ba\u8a8d # iptables -L TCP\u30dd\u30fc\u30c8\u8a31\u53ef\u8ffd\u52a0 # iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT \u30ea\u30c0\u30a4\u30ec\u30af\u30c8 10.0.0.1\u304b\u3089\u306e80/tcp\u30a2\u30af\u30bb\u30b9\u30928080/tcp\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u5834\u5408\u3002(8080/tcp\u3082\u8a31\u53ef\u306f\u5fc5\u8981) # iptables -t nat -A PREROUTING -p tcp -s 10 .0.0.1 --dport 80 -j REDIRECT --to 8080 \u81ea\u5206\u3078\u306e443/tcp\u30a2\u30af\u30bb\u30b9\u3092\u30ea\u30e2\u30fc\u30c8\u306e172.29.0.14:443\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u5834\u5408\u3002 iptables -t nat -A PREROUTING -p tcp --dport 443 -j DNAT --to-destination 172.29.0.14:443","title":"iptables"},{"location":"Linux/command/#_24","text":"\u307e\u305a\u30eb\u30fc\u30eb\u306e\u78ba\u8a8d\u3092 --line-numbers \u3092\u4ed8\u4e0e\u3057\u3066\u884c\u756a\u53f7\u3092\u78ba\u8a8d\u3002 # iptables -L -t nat --line-numbers \u756a\u53f7\u3092\u78ba\u8a8d\u3057\u305f\u3089\u3001\u305d\u308c\u3092\u5f15\u6570\u306b\u4ee5\u4e0b\u3092\u5b9f\u884c\u3002( PREROUTING \u30eb\u30fc\u30eb\u306e\u5834\u5408) # iptables -t nat -D PREROUTING 1","title":"\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u30eb\u30fc\u30eb\u306e\u524a\u9664"},{"location":"Linux/command/#firewall-cmd","text":"[\u30b3\u30de\u30f3\u30c9\u30e1\u30e2] firewall-cmd\u5099\u5fd8\u9332 (firewalld) - zaki work log","title":"firewall-cmd"},{"location":"Linux/command/#ufw","text":"\u73fe\u5728\u306e\u72b6\u614b\u3002 \u203b\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u306a\u3063\u3066\u3044\u306a\u3044 root@oci-g-a1-ubuntu:~# ufw status Status: inactive \u6709\u52b9\u5316\u3059\u308b\u3002 ssh\u7d4c\u7531\u306e\u5834\u5408\u8b66\u544a\u3055\u308c\u308b\u3002( iptables -nL \u3042\u305f\u308a\u306722/tcp\u304c\u958b\u3044\u3066\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u3066\u304a\u3051\u3070\u2026\u826f\u3044\u306e\u304b\u306a) root@oci-g-a1-ubuntu:~# ufw enable Command may disrupt existing ssh connections. Proceed with operation (y|n)? y Firewall is active and enabled on system startup \u518d\u8aad\u307f\u8fbc\u307f\u3068\u72b6\u614b\u78ba\u8a8d\u3002 root@oci-g-a1-ubuntu:~# ufw reload Firewall reloaded root@oci-g-a1-ubuntu:~# ufw status Status: active TCP\u30dd\u30fc\u30c8\u306e\u8a31\u53ef root@oci-g-a1-ubuntu:~# ufw allow 6443 Rule added Rule added (v6) root@oci-g-a1-ubuntu:~# ufw reload Firewall reloaded root@oci-g-a1-ubuntu:~# ufw status Status: active To Action From -- ------ ---- 6443 ALLOW Anywhere 6443 (v6) ALLOW Anywhere (v6) \u203b \u64cd\u4f5c\u306e\u307f\u3002\u3053\u306e\u74b0\u5883\u306fufw\u3092\u4f7f\u3063\u3066\u306a\u3044\u3089\u3057\u304f\u52d5\u4f5c\u306f\u672a\u78ba\u8a8d","title":"ufw"},{"location":"Linux/command/#alternatives","text":"ubuntu\u3060\u3068 update-alternatives \u3067\u3001RHEL\u7cfb\u3060\u3068 alternatives \u306b\u306a\u308b\u3002","title":"alternatives"},{"location":"Linux/command/#_25","text":"ubuntu\u306e\u5834\u5408 root@oci-ap-a1-ubuntu:~# update-alternatives --get-selections arptables auto /usr/sbin/arptables-nft awk auto /usr/bin/gawk builtins.7.gz auto /usr/share/man/man7/bash-builtins.7.gz c++ auto /usr/bin/g++ : : Fedora\u306e\u5834\u5408 [ root@cloud-dev2 ~ ] # update - alternatives -- list libnssckbi.so.x86_64 auto / usr / lib64 / pkcs11 / p11 - kit - trust.so soelim auto / usr / bin / soelim.groff iptables auto / usr / sbin / iptables - nft :","title":"\u8a2d\u5b9a\u4e00\u89a7"},{"location":"Linux/command/#_26","text":"python \u3068\u3044\u3046\u540d\u524d\u3067\u3001 /usr/bin/python \u3092\u512a\u5148\u5ea610\u3067\u767b\u9332\u3059\u308b\u3002 $ sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 10 update-alternatives: using /usr/bin/python3 to provide /usr/bin/python (python) in auto mode \u3053\u308c\u3067\u3001\u4ee5\u4e0b\u306e\u30ea\u30f3\u30af\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002 $ ls -l /usr/bin/python /etc/alternatives/python lrwxrwxrwx 1 root root 16 Mar 31 15:16 /etc/alternatives/python -> /usr/bin/python3 lrwxrwxrwx 1 root root 24 Mar 31 15:16 /usr/bin/python -> /etc/alternatives/python \u8a2d\u5b9a $ update-alternatives --display python python - auto mode link best version is /usr/bin/python3 link currently points to /usr/bin/python3 link python is /usr/bin/python /usr/bin/python3 - priority 10","title":"\u8a2d\u5b9a\u306e\u767b\u9332"},{"location":"Linux/disk/","text":"\u30c7\u30a3\u30b9\u30af \u30c7\u30a3\u30b9\u30af\u8ffd\u52a0 USB\u63a5\u7d9a\u306e\u5916\u4ed8\u3051HDD\u304c\u6b7b\u306b\u304b\u3051\u3066\u305f\u306e\u3067\u4ea4\u63db\u3057\u3066\u30c7\u30fc\u30bf\u79fb\u884c\u3002 HDD\u7e4b\u3050 \u30c7\u30d0\u30a4\u30b9\u306e\u756a\u53f7\u306f dmesg \u3067\u78ba\u8a8d [ 268.149764 ] sd 6 : 0 : 0 : 0 : Attached scsi generic sg1 type 0 [ 271.516612 ] sd 6 : 0 : 0 : 0 : [ sdb ] 3907029168 512- byte logical blocks : ( 2.00 TB /1.82 TiB) [ 271.517672 ] sd 6 : 0 : 0 : 0 : [ sdb ] Write Protect is off [ 271.517678 ] sd 6 : 0 : 0 : 0 : [ sdb ] Mode Sense : 73 00 10 08 [ 271.518739 ] sd 6 : 0 : 0 : 0 : [ sdb ] Write cache : enabled, read cache : enabled, supports DPO and FUA [ 271.543154 ] sdb : sdb1 [ 271.546268 ] sd 6 : 0 : 0 : 0 : [ sdb ] Attached SCSI disk fdisk -l \u3067\u78ba\u8a8d root @zaki - CF - J10YYBHR : ~ # fdisk - l / dev / sdb \u30c7\u30a3\u30b9\u30af / dev / sdb : 1.84 TiB, 2000398934016 \u30d0\u30a4\u30c8, 3907029168 \u30bb\u30af\u30bf Disk model : HD - LDS - A \u5358\u4f4d : \u30bb\u30af\u30bf ( 1 * 512 = 512 \u30d0\u30a4\u30c8) \u30bb\u30af\u30bf\u30b5\u30a4\u30ba (\u8ad6\u7406 / \u7269\u7406) : 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 I / O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968) : 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 \u30c7\u30a3\u30b9\u30af\u30e9\u30d9\u30eb\u306e\u30bf\u30a4\u30d7 : dos \u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50 : 0x0b27d361 \u30c7\u30d0\u30a4\u30b9 \u8d77\u52d5 \u958b\u59cb\u4f4d\u7f6e \u6700\u5f8c\u304b\u3089 \u30bb\u30af\u30bf \u30b5\u30a4\u30ba Id \u30bf\u30a4\u30d7 / dev / sdb1 64 3907029119 3907029056 1.8 T 7 HPFS / NTFS / exFAT \u65e2\u5b58\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u524a\u9664 root @zaki - CF - J10YYBHR : ~ # fdisk / dev / sdb fdisk (util - linux 2.34 ) \u3078\u3088\u3046\u3053\u305d \u3002 \u3053\u3053\u3067\u8a2d\u5b9a\u3057\u305f\u5185\u5bb9\u306f \u3001 \u66f8\u304d\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u307e\u3067\u30e1\u30e2\u30ea\u306e\u307f\u306b\u4fdd\u6301\u3055\u308c\u307e\u3059 \u3002 \u66f8\u304d\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u969b\u306f \u3001 \u6ce8\u610f\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044 \u3002 \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7) : \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): p \u30c7\u30a3\u30b9\u30af /dev/sdb: 1.84 TiB, 2000398934016 \u30d0\u30a4\u30c8, 3907029168 \u30bb\u30af\u30bf Disk model: HD-LDS-A \u5358\u4f4d: \u30bb\u30af\u30bf (1 * 512 = 512 \u30d0\u30a4\u30c8) \u30bb\u30af\u30bf\u30b5\u30a4\u30ba (\u8ad6\u7406 / \u7269\u7406): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 I/O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 \u30c7\u30a3\u30b9\u30af\u30e9\u30d9\u30eb\u306e\u30bf\u30a4\u30d7: dos \u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50: 0x0b27d361 \u30c7\u30d0\u30a4\u30b9 \u8d77\u52d5 \u958b\u59cb\u4f4d\u7f6e \u6700\u5f8c\u304b\u3089 \u30bb\u30af\u30bf \u30b5\u30a4\u30ba Id \u30bf\u30a4\u30d7 /dev/sdb1 64 3907029119 3907029056 1.8T 7 HPFS/NTFS/exFAT \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): d \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 1 \u3092\u9078\u629e \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 1 \u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002 \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): p \u30c7\u30a3\u30b9\u30af /dev/sdb: 1.84 TiB, 2000398934016 \u30d0\u30a4\u30c8, 3907029168 \u30bb\u30af\u30bf Disk model: HD-LDS-A \u5358\u4f4d: \u30bb\u30af\u30bf (1 * 512 = 512 \u30d0\u30a4\u30c8) \u30bb\u30af\u30bf\u30b5\u30a4\u30ba (\u8ad6\u7406 / \u7269\u7406): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 I/O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 \u30c7\u30a3\u30b9\u30af\u30e9\u30d9\u30eb\u306e\u30bf\u30a4\u30d7: dos \u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50: 0x0b27d361 \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c1\u500b\u3057\u304b\u306a\u3044\u304b\u3089\u304b\u3001 d \u3067\uff7c\uff6d\uff6f\u3068\u6d88\u3048\u305f\u3002 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210 \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): n \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30bf\u30a4\u30d7 p \u57fa\u672c\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 (0 \u30d7\u30e9\u30a4\u30de\u30ea, 0 \u62e1\u5f35, 4 \u7a7a\u304d) e \u62e1\u5f35\u9818\u57df (\u8ad6\u7406\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u5165\u308a\u307e\u3059) \u9078\u629e (\u65e2\u5b9a\u5024 p): \u65e2\u5b9a\u306e\u56de\u7b54 p \u3067\u3042\u308b\u3082\u306e\u3068\u307f\u306a\u3057\u307e\u3059\u3002 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-4, \u65e2\u5b9a\u5024 1): \u6700\u521d\u306e\u30bb\u30af\u30bf (2048-3907029167, \u65e2\u5b9a\u5024 2048): Last sector, +/-sectors or +/-size{K,M,G,T,P} (2048-3907029167, \u65e2\u5b9a\u5024 3907029167): \u65b0\u3057\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 1 \u3092\u30bf\u30a4\u30d7 Linux\u3001\u30b5\u30a4\u30ba 1.8 TiB \u3067\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002 \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): p \u30c7\u30a3\u30b9\u30af /dev/sdb: 1.84 TiB, 2000398934016 \u30d0\u30a4\u30c8, 3907029168 \u30bb\u30af\u30bf Disk model: HD-LDS-A \u5358\u4f4d: \u30bb\u30af\u30bf (1 * 512 = 512 \u30d0\u30a4\u30c8) \u30bb\u30af\u30bf\u30b5\u30a4\u30ba (\u8ad6\u7406 / \u7269\u7406): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 I/O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 \u30c7\u30a3\u30b9\u30af\u30e9\u30d9\u30eb\u306e\u30bf\u30a4\u30d7: dos \u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50: 0x0b27d361 \u30c7\u30d0\u30a4\u30b9 \u8d77\u52d5 \u958b\u59cb\u4f4d\u7f6e \u6700\u5f8c\u304b\u3089 \u30bb\u30af\u30bf \u30b5\u30a4\u30ba Id \u30bf\u30a4\u30d7 /dev/sdb1 2048 3907029167 3907027120 1.8T 83 Linux \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): \u66f8\u304d\u8fbc\u307f \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7) : w \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u60c5\u5831\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f \u3002 Failed to remove partition 1 from system : \u30c7\u30d0\u30a4\u30b9\u3082\u3057\u304f\u306f\u30ea\u30bd\u30fc\u30b9\u304c\u30d3\u30b8\u30fc\u72b6\u614b\u3067\u3059 Failed to add partition 1 to system : \u30c7\u30d0\u30a4\u30b9\u3082\u3057\u304f\u306f\u30ea\u30bd\u30fc\u30b9\u304c\u30d3\u30b8\u30fc\u72b6\u614b\u3067\u3059 The kernel still uses the old partitions. The new table will be used at the next reboot. \u30c7\u30a3\u30b9\u30af\u3092\u540c\u671f\u3057\u3066\u3044\u307e\u3059 \u3002 root @zaki - CF - J10YYBHR : ~ # \u3042\u30fc\u3001\u81ea\u52d5\u30de\u30a6\u30f3\u30c8\u3055\u308c\u305f\u307e\u307e\u3060\u3063\u305f\uff57\uff57\uff57 reboot \u3057\u3088\u3046\u3002 reboot\u524d root @zaki - CF - J10YYBHR : ~ # fdisk - l / dev / sdb \u30c7\u30a3\u30b9\u30af / dev / sdb : 1.84 TiB, 2000398934016 \u30d0\u30a4\u30c8, 3907029168 \u30bb\u30af\u30bf Disk model : HD - LDS - A \u5358\u4f4d : \u30bb\u30af\u30bf ( 1 * 512 = 512 \u30d0\u30a4\u30c8) \u30bb\u30af\u30bf\u30b5\u30a4\u30ba (\u8ad6\u7406 / \u7269\u7406) : 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 I / O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968) : 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 \u30c7\u30a3\u30b9\u30af\u30e9\u30d9\u30eb\u306e\u30bf\u30a4\u30d7 : dos \u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50 : 0x0b27d361 \u30c7\u30d0\u30a4\u30b9 \u8d77\u52d5 \u958b\u59cb\u4f4d\u7f6e \u6700\u5f8c\u304b\u3089 \u30bb\u30af\u30bf \u30b5\u30a4\u30ba Id \u30bf\u30a4\u30d7 / dev / sdb1 2048 3907029167 3907027120 1.8 T 83 Linux ext4\u30d5\u30a9\u30fc\u30de\u30c3\u30c8 mkfs -t ext4 root @zaki - CF - J10YYBHR : ~ # time mkfs - t ext4 / dev / sdb1 mke2fs 1.45.5 ( 07- Jan -2020 ) Creating filesystem with 488378390 4 k blocks and 122101760 inodes Filesystem UUID : fa5897f2 -39 b1 -4 ea4 -937 f - b63b7e34571f Superblock backups stored on blocks : 32768 , 98304 , 163840 , 229376 , 294912 , 819200 , 884736 , 1605632 , 2654208 , 4096000 , 7962624 , 11239424 , 20480000 , 23887872 , 71663616 , 78675968 , 102400000 , 214990848 Allocating group tables : done Writing inode tables : done Creating journal ( 262144 blocks) : done Writing superblocks and filesystem accounting information : done real 0 m16 .078 s user 0 m0 .045 s sys 0 m0 .171 s \u30e9\u30d9\u30eb\u8a2d\u5b9a e2label \u3067\u8a2d\u5b9a\u30fb\u78ba\u8a8d\u3002 root @zaki - CF - J10YYBHR : ~ # e2label / dev / sdb1 \"HD-LDS-A\" root @zaki - CF - J10YYBHR : ~ # e2label / dev / sdb1 HD - LDS - A","title":"\u30c7\u30a3\u30b9\u30af"},{"location":"Linux/disk/#_1","text":"","title":"\u30c7\u30a3\u30b9\u30af"},{"location":"Linux/disk/#_2","text":"USB\u63a5\u7d9a\u306e\u5916\u4ed8\u3051HDD\u304c\u6b7b\u306b\u304b\u3051\u3066\u305f\u306e\u3067\u4ea4\u63db\u3057\u3066\u30c7\u30fc\u30bf\u79fb\u884c\u3002","title":"\u30c7\u30a3\u30b9\u30af\u8ffd\u52a0"},{"location":"Linux/disk/#hdd","text":"\u30c7\u30d0\u30a4\u30b9\u306e\u756a\u53f7\u306f dmesg \u3067\u78ba\u8a8d [ 268.149764 ] sd 6 : 0 : 0 : 0 : Attached scsi generic sg1 type 0 [ 271.516612 ] sd 6 : 0 : 0 : 0 : [ sdb ] 3907029168 512- byte logical blocks : ( 2.00 TB /1.82 TiB) [ 271.517672 ] sd 6 : 0 : 0 : 0 : [ sdb ] Write Protect is off [ 271.517678 ] sd 6 : 0 : 0 : 0 : [ sdb ] Mode Sense : 73 00 10 08 [ 271.518739 ] sd 6 : 0 : 0 : 0 : [ sdb ] Write cache : enabled, read cache : enabled, supports DPO and FUA [ 271.543154 ] sdb : sdb1 [ 271.546268 ] sd 6 : 0 : 0 : 0 : [ sdb ] Attached SCSI disk fdisk -l \u3067\u78ba\u8a8d root @zaki - CF - J10YYBHR : ~ # fdisk - l / dev / sdb \u30c7\u30a3\u30b9\u30af / dev / sdb : 1.84 TiB, 2000398934016 \u30d0\u30a4\u30c8, 3907029168 \u30bb\u30af\u30bf Disk model : HD - LDS - A \u5358\u4f4d : \u30bb\u30af\u30bf ( 1 * 512 = 512 \u30d0\u30a4\u30c8) \u30bb\u30af\u30bf\u30b5\u30a4\u30ba (\u8ad6\u7406 / \u7269\u7406) : 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 I / O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968) : 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 \u30c7\u30a3\u30b9\u30af\u30e9\u30d9\u30eb\u306e\u30bf\u30a4\u30d7 : dos \u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50 : 0x0b27d361 \u30c7\u30d0\u30a4\u30b9 \u8d77\u52d5 \u958b\u59cb\u4f4d\u7f6e \u6700\u5f8c\u304b\u3089 \u30bb\u30af\u30bf \u30b5\u30a4\u30ba Id \u30bf\u30a4\u30d7 / dev / sdb1 64 3907029119 3907029056 1.8 T 7 HPFS / NTFS / exFAT","title":"HDD\u7e4b\u3050"},{"location":"Linux/disk/#_3","text":"root @zaki - CF - J10YYBHR : ~ # fdisk / dev / sdb fdisk (util - linux 2.34 ) \u3078\u3088\u3046\u3053\u305d \u3002 \u3053\u3053\u3067\u8a2d\u5b9a\u3057\u305f\u5185\u5bb9\u306f \u3001 \u66f8\u304d\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u307e\u3067\u30e1\u30e2\u30ea\u306e\u307f\u306b\u4fdd\u6301\u3055\u308c\u307e\u3059 \u3002 \u66f8\u304d\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u969b\u306f \u3001 \u6ce8\u610f\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044 \u3002 \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7) : \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): p \u30c7\u30a3\u30b9\u30af /dev/sdb: 1.84 TiB, 2000398934016 \u30d0\u30a4\u30c8, 3907029168 \u30bb\u30af\u30bf Disk model: HD-LDS-A \u5358\u4f4d: \u30bb\u30af\u30bf (1 * 512 = 512 \u30d0\u30a4\u30c8) \u30bb\u30af\u30bf\u30b5\u30a4\u30ba (\u8ad6\u7406 / \u7269\u7406): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 I/O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 \u30c7\u30a3\u30b9\u30af\u30e9\u30d9\u30eb\u306e\u30bf\u30a4\u30d7: dos \u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50: 0x0b27d361 \u30c7\u30d0\u30a4\u30b9 \u8d77\u52d5 \u958b\u59cb\u4f4d\u7f6e \u6700\u5f8c\u304b\u3089 \u30bb\u30af\u30bf \u30b5\u30a4\u30ba Id \u30bf\u30a4\u30d7 /dev/sdb1 64 3907029119 3907029056 1.8T 7 HPFS/NTFS/exFAT \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): d \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 1 \u3092\u9078\u629e \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 1 \u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002 \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): p \u30c7\u30a3\u30b9\u30af /dev/sdb: 1.84 TiB, 2000398934016 \u30d0\u30a4\u30c8, 3907029168 \u30bb\u30af\u30bf Disk model: HD-LDS-A \u5358\u4f4d: \u30bb\u30af\u30bf (1 * 512 = 512 \u30d0\u30a4\u30c8) \u30bb\u30af\u30bf\u30b5\u30a4\u30ba (\u8ad6\u7406 / \u7269\u7406): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 I/O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 \u30c7\u30a3\u30b9\u30af\u30e9\u30d9\u30eb\u306e\u30bf\u30a4\u30d7: dos \u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50: 0x0b27d361 \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c1\u500b\u3057\u304b\u306a\u3044\u304b\u3089\u304b\u3001 d \u3067\uff7c\uff6d\uff6f\u3068\u6d88\u3048\u305f\u3002","title":"\u65e2\u5b58\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u524a\u9664"},{"location":"Linux/disk/#_4","text":"\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): n \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30bf\u30a4\u30d7 p \u57fa\u672c\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 (0 \u30d7\u30e9\u30a4\u30de\u30ea, 0 \u62e1\u5f35, 4 \u7a7a\u304d) e \u62e1\u5f35\u9818\u57df (\u8ad6\u7406\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u5165\u308a\u307e\u3059) \u9078\u629e (\u65e2\u5b9a\u5024 p): \u65e2\u5b9a\u306e\u56de\u7b54 p \u3067\u3042\u308b\u3082\u306e\u3068\u307f\u306a\u3057\u307e\u3059\u3002 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-4, \u65e2\u5b9a\u5024 1): \u6700\u521d\u306e\u30bb\u30af\u30bf (2048-3907029167, \u65e2\u5b9a\u5024 2048): Last sector, +/-sectors or +/-size{K,M,G,T,P} (2048-3907029167, \u65e2\u5b9a\u5024 3907029167): \u65b0\u3057\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 1 \u3092\u30bf\u30a4\u30d7 Linux\u3001\u30b5\u30a4\u30ba 1.8 TiB \u3067\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002 \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): p \u30c7\u30a3\u30b9\u30af /dev/sdb: 1.84 TiB, 2000398934016 \u30d0\u30a4\u30c8, 3907029168 \u30bb\u30af\u30bf Disk model: HD-LDS-A \u5358\u4f4d: \u30bb\u30af\u30bf (1 * 512 = 512 \u30d0\u30a4\u30c8) \u30bb\u30af\u30bf\u30b5\u30a4\u30ba (\u8ad6\u7406 / \u7269\u7406): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 I/O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 \u30c7\u30a3\u30b9\u30af\u30e9\u30d9\u30eb\u306e\u30bf\u30a4\u30d7: dos \u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50: 0x0b27d361 \u30c7\u30d0\u30a4\u30b9 \u8d77\u52d5 \u958b\u59cb\u4f4d\u7f6e \u6700\u5f8c\u304b\u3089 \u30bb\u30af\u30bf \u30b5\u30a4\u30ba Id \u30bf\u30a4\u30d7 /dev/sdb1 2048 3907029167 3907027120 1.8T 83 Linux \u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7):","title":"\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210"},{"location":"Linux/disk/#_5","text":"\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7) : w \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u60c5\u5831\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f \u3002 Failed to remove partition 1 from system : \u30c7\u30d0\u30a4\u30b9\u3082\u3057\u304f\u306f\u30ea\u30bd\u30fc\u30b9\u304c\u30d3\u30b8\u30fc\u72b6\u614b\u3067\u3059 Failed to add partition 1 to system : \u30c7\u30d0\u30a4\u30b9\u3082\u3057\u304f\u306f\u30ea\u30bd\u30fc\u30b9\u304c\u30d3\u30b8\u30fc\u72b6\u614b\u3067\u3059 The kernel still uses the old partitions. The new table will be used at the next reboot. \u30c7\u30a3\u30b9\u30af\u3092\u540c\u671f\u3057\u3066\u3044\u307e\u3059 \u3002 root @zaki - CF - J10YYBHR : ~ # \u3042\u30fc\u3001\u81ea\u52d5\u30de\u30a6\u30f3\u30c8\u3055\u308c\u305f\u307e\u307e\u3060\u3063\u305f\uff57\uff57\uff57 reboot \u3057\u3088\u3046\u3002 reboot\u524d root @zaki - CF - J10YYBHR : ~ # fdisk - l / dev / sdb \u30c7\u30a3\u30b9\u30af / dev / sdb : 1.84 TiB, 2000398934016 \u30d0\u30a4\u30c8, 3907029168 \u30bb\u30af\u30bf Disk model : HD - LDS - A \u5358\u4f4d : \u30bb\u30af\u30bf ( 1 * 512 = 512 \u30d0\u30a4\u30c8) \u30bb\u30af\u30bf\u30b5\u30a4\u30ba (\u8ad6\u7406 / \u7269\u7406) : 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 I / O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968) : 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8 \u30c7\u30a3\u30b9\u30af\u30e9\u30d9\u30eb\u306e\u30bf\u30a4\u30d7 : dos \u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50 : 0x0b27d361 \u30c7\u30d0\u30a4\u30b9 \u8d77\u52d5 \u958b\u59cb\u4f4d\u7f6e \u6700\u5f8c\u304b\u3089 \u30bb\u30af\u30bf \u30b5\u30a4\u30ba Id \u30bf\u30a4\u30d7 / dev / sdb1 2048 3907029167 3907027120 1.8 T 83 Linux","title":"\u66f8\u304d\u8fbc\u307f"},{"location":"Linux/disk/#ext4","text":"mkfs -t ext4 root @zaki - CF - J10YYBHR : ~ # time mkfs - t ext4 / dev / sdb1 mke2fs 1.45.5 ( 07- Jan -2020 ) Creating filesystem with 488378390 4 k blocks and 122101760 inodes Filesystem UUID : fa5897f2 -39 b1 -4 ea4 -937 f - b63b7e34571f Superblock backups stored on blocks : 32768 , 98304 , 163840 , 229376 , 294912 , 819200 , 884736 , 1605632 , 2654208 , 4096000 , 7962624 , 11239424 , 20480000 , 23887872 , 71663616 , 78675968 , 102400000 , 214990848 Allocating group tables : done Writing inode tables : done Creating journal ( 262144 blocks) : done Writing superblocks and filesystem accounting information : done real 0 m16 .078 s user 0 m0 .045 s sys 0 m0 .171 s","title":"ext4\u30d5\u30a9\u30fc\u30de\u30c3\u30c8"},{"location":"Linux/disk/#_6","text":"e2label \u3067\u8a2d\u5b9a\u30fb\u78ba\u8a8d\u3002 root @zaki - CF - J10YYBHR : ~ # e2label / dev / sdb1 \"HD-LDS-A\" root @zaki - CF - J10YYBHR : ~ # e2label / dev / sdb1 HD - LDS - A","title":"\u30e9\u30d9\u30eb\u8a2d\u5b9a"},{"location":"Linux/kvm/","text":"KVM \u4e00\u89a7 $ virsh list --all VM\u306e\u8d77\u52d5 $ virsh start <domain-name> \u5b9f\u884c\u4e2dVM\u3078\u30b3\u30f3\u30bd\u30fc\u30eb\u63a5\u7d9a $ virsh console <domain-name> VM(domain)\u540d\u306f list \u3067\u78ba\u8a8d\u3059\u308b\u3002 \u505c\u6b62 \u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3059\u308b\u306b\u306f shutdown \u3059\u308b\u3002 $ virsh shutdown <domain-name> \u5f37\u5236\u505c\u6b62\u306f destroy \u3059\u308b\u3002 $ virsh destroy <domain-name> \u81ea\u52d5\u8d77\u52d5 \u6709\u52b9\u5316 $ virsh autostart <domain-name> \u7121\u52b9\u5316 $ virsh autostart --disable <domain-name> \u78ba\u8a8d\u306f virsh dominfo <domain-name> \u304b\u306a\uff1f","title":"KVM"},{"location":"Linux/kvm/#kvm","text":"","title":"KVM"},{"location":"Linux/kvm/#_1","text":"$ virsh list --all","title":"\u4e00\u89a7"},{"location":"Linux/kvm/#vm","text":"$ virsh start <domain-name>","title":"VM\u306e\u8d77\u52d5"},{"location":"Linux/kvm/#vm_1","text":"$ virsh console <domain-name> VM(domain)\u540d\u306f list \u3067\u78ba\u8a8d\u3059\u308b\u3002","title":"\u5b9f\u884c\u4e2dVM\u3078\u30b3\u30f3\u30bd\u30fc\u30eb\u63a5\u7d9a"},{"location":"Linux/kvm/#_2","text":"\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3059\u308b\u306b\u306f shutdown \u3059\u308b\u3002 $ virsh shutdown <domain-name> \u5f37\u5236\u505c\u6b62\u306f destroy \u3059\u308b\u3002 $ virsh destroy <domain-name>","title":"\u505c\u6b62"},{"location":"Linux/kvm/#_3","text":"\u6709\u52b9\u5316 $ virsh autostart <domain-name> \u7121\u52b9\u5316 $ virsh autostart --disable <domain-name> \u78ba\u8a8d\u306f virsh dominfo <domain-name> \u304b\u306a\uff1f","title":"\u81ea\u52d5\u8d77\u52d5"},{"location":"Linux/openssl/","text":"openssl \u8a3c\u660e\u66f8\u4f5c\u6210 \u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u4f5c\u6210(CommonName) openssl req -newkey rsa:4096 -nodes -sha256 -keyout /path/to/example.org.key -x509 -days 365 -out /path/to/example.org.crt -subj '/CN=example.org/' Alternative Name\u6307\u5b9a\u306e\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8 appserv \u3068 appserv.example.org \u3044\u3046\u540d\u524d\u306eSAN\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3002 openssl req -newkey rsa:4096 -nodes -sha256 -keyout server.key -x509 -days 365 -out server.crt -subj '/C=JP/' -addext \"subjectAltName=DNS:appserv,DNS:appserv.example.org\" \u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u78ba\u8a8d RSA\u79d8\u5bc6\u9375\u306e\u78ba\u8a8d -----BEGIN RSA PRIVATE KEY----- MIIJKAIBAAKCAgEAntBW2JpzhtCgXGjKsR........ : : ..... -----END RSA PRIVATE KEY----- \u3053\u3093\u306a\u5185\u5bb9\u306e\u300cBEGIN RSA PRIVATE KEY\u300d\u3067\u59cb\u307e\u3063\u3066END\u307e\u3067\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u3067\u78ba\u8a8d\u3002 # openssl rsa -text -noout -in account.key CSR(\u8a3c\u660e\u66f8\u7f72\u540d\u8981\u6c42)\u306e\u78ba\u8a8d -----BEGIN CERTIFICATE REQUEST----- MIIEkDCCAngCAQAwHDEaMB........ : : ..... -----END CERTIFICATE REQUEST----- \u300cBEGIN CERTIFICATE REQUEST\u300d\u3067\u59cb\u307e\u3063\u3066END\u3067\u7d42\u308f\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u3067\u78ba\u8a8d\u3002 # openssl req -text -noout -in server.csr \u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d -----BEGIN CERTIFICATE----- MIIGKTCCBRGg....... : : .... -----END CERTIFICATE----- \u300cBEGIN CERTIFICATE\u300d\u3067\u59cb\u307e\u3063\u3066END\u3067\u7d42\u308f\u3063\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u306f\u3001x509\u3092\u6307\u5b9a\u3057\u3066\u78ba\u8a8d\u3002 # openssl x509 -text -noout -in server.crt","title":"openssl"},{"location":"Linux/openssl/#openssl","text":"","title":"openssl"},{"location":"Linux/openssl/#_1","text":"","title":"\u8a3c\u660e\u66f8\u4f5c\u6210"},{"location":"Linux/openssl/#commonname","text":"openssl req -newkey rsa:4096 -nodes -sha256 -keyout /path/to/example.org.key -x509 -days 365 -out /path/to/example.org.crt -subj '/CN=example.org/'","title":"\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u4f5c\u6210(CommonName)"},{"location":"Linux/openssl/#alternative-name","text":"appserv \u3068 appserv.example.org \u3044\u3046\u540d\u524d\u306eSAN\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3002 openssl req -newkey rsa:4096 -nodes -sha256 -keyout server.key -x509 -days 365 -out server.crt -subj '/C=JP/' -addext \"subjectAltName=DNS:appserv,DNS:appserv.example.org\"","title":"Alternative Name\u6307\u5b9a\u306e\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8"},{"location":"Linux/openssl/#_2","text":"","title":"\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u78ba\u8a8d"},{"location":"Linux/openssl/#rsa","text":"-----BEGIN RSA PRIVATE KEY----- MIIJKAIBAAKCAgEAntBW2JpzhtCgXGjKsR........ : : ..... -----END RSA PRIVATE KEY----- \u3053\u3093\u306a\u5185\u5bb9\u306e\u300cBEGIN RSA PRIVATE KEY\u300d\u3067\u59cb\u307e\u3063\u3066END\u307e\u3067\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u3067\u78ba\u8a8d\u3002 # openssl rsa -text -noout -in account.key","title":"RSA\u79d8\u5bc6\u9375\u306e\u78ba\u8a8d"},{"location":"Linux/openssl/#csr","text":"-----BEGIN CERTIFICATE REQUEST----- MIIEkDCCAngCAQAwHDEaMB........ : : ..... -----END CERTIFICATE REQUEST----- \u300cBEGIN CERTIFICATE REQUEST\u300d\u3067\u59cb\u307e\u3063\u3066END\u3067\u7d42\u308f\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u3067\u78ba\u8a8d\u3002 # openssl req -text -noout -in server.csr","title":"CSR(\u8a3c\u660e\u66f8\u7f72\u540d\u8981\u6c42)\u306e\u78ba\u8a8d"},{"location":"Linux/openssl/#_3","text":"-----BEGIN CERTIFICATE----- MIIGKTCCBRGg....... : : .... -----END CERTIFICATE----- \u300cBEGIN CERTIFICATE\u300d\u3067\u59cb\u307e\u3063\u3066END\u3067\u7d42\u308f\u3063\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u306f\u3001x509\u3092\u6307\u5b9a\u3057\u3066\u78ba\u8a8d\u3002 # openssl x509 -text -noout -in server.crt","title":"\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d"},{"location":"Linux/package/","text":"\u30d1\u30c3\u30b1\u30fc\u30b8\u64cd\u4f5c \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u4e00\u89a7\u51fa\u529b $ dpkg -l # debian $ rpm -qa # redhat $ apk info # alpine \u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u3042\u308c\u3053\u308c / [cygwin][debian][redhat][Solaris][command] | \u622f\u8853\u8005\u306e\u65e5\u8a18 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u30d1\u30c3\u30b1\u30fc\u30b8 foo \u306b\u542b\u307e\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7 $ dpkg -L foo # debian $ rpm -ql foo # redhat $ apk manifest foo # alpine \u30d5\u30a1\u30a4\u30eb /foo/bar \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30d1\u30c3\u30b1\u30fc\u30b8 $ dpkg -S /foo/bar # debian $ rpm -qf /foo/bar # redhat \u66f4\u65b0\u78ba\u8a8d yum $ yum check-update \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u53ef\u80fd\u306a\u30d0\u30fc\u30b8\u30e7\u30f3\u4e00\u89a7 yum update\u3059\u308b\u3068\u304d\u306b\u7279\u5b9a\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u5bfe\u8c61\u5916\u306b\u3059\u308b - zaki work log [ root@rhel8 ~ ] # yum search httpd -- showduplicates Updating Subscription Management repositories. \u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u671f\u9650\u5207\u308c\u306e\u6700\u7d42\u78ba\u8a8d : 0 : 24 : 27 \u6642\u9593\u524d\u306e 2021 \u5e7406\u670821\u65e5 21 \u664236\u520650\u79d2 \u306b\u5b9f\u65bd\u3057\u307e\u3057\u305f \u3002 ================================================ \u540d\u524d \u5b8c\u5168\u4e00\u81f4 : httpd ================================================= httpd -2.4.37-39. module + el8 .4.0+9658+ b87b2deb.x86_64 : Apache HTTP Server httpd -2.4.37-10. module + el8 +2764+7127e69 e.x86_64 : Apache HTTP Server httpd -2.4.37-11. module + el8 .0.0+2969+90015743. x86_64 : Apache HTTP Server httpd -2.4.37-16. module + el8 .1.0+4134+ e6bad0ed.x86_64 : Apache HTTP Server httpd -2.4.37-12. module + el8 .0.0+4096+ eb40e6da.x86_64 : Apache HTTP Server httpd -2.4.37-21. module + el8 .2.0+5008+ cca404a3.x86_64 : Apache HTTP Server httpd -2.4.37-30. module + el8 .3.0+7001+0766 b9e7.x86_64 : Apache HTTP Server httpd -2.4.37-39. module + el8 .4.0+9658+ b87b2deb.x86_64 : Apache HTTP Server : : dnf \u3010 dnf \u3011\u30b3\u30de\u30f3\u30c9\uff08\u5fdc\u7528\u7de8\u305d\u306e7\uff09\u2015\u2015\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3059\u308b\uff1aLinux\u57fa\u672c\u30b3\u30de\u30f3\u30c9Tips\uff08375\uff09 - \uff20IT \u30ea\u30dd\u30b8\u30c8\u30ea\u4e00\u89a7 \u6709\u52b9\u306a\u3082\u306e\u306e\u4e00\u89a7\u3002 -v \u4ed8\u3051\u308b\u3068\u8a73\u7d30 # dnf repolist \u7121\u52b9\u306a\u3082\u306e\u306e\u4e00\u89a7\u3002 # dnf repolist --disabled \u6307\u5b9a\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u63d0\u4f9b\u3055\u308c\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u4e00\u89a7 dnf repository-packages <\u30ea\u30dd\u30b8\u30c8\u30ea\u540d> list # dnf repository - packages ansible -2 . 9- for - rhel -8- x86_64 - rpms list Updating Subscription Management repositories . \u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u671f\u9650\u5207\u308c\u306e\u6700\u7d42\u78ba\u8a8d: 0 : 07 : 08 \u6642\u9593\u524d\u306e 2021 \u5e74 08 \u6708 08 \u65e5 12 \u6642 00 \u5206 34 \u79d2 \u306b\u5b9f\u65bd\u3057\u307e\u3057\u305f\u3002 \u5229\u7528\u53ef\u80fd\u306a\u30d1\u30c3\u30b1\u30fc\u30b8 ansible . noarch 2 . 9 . 24-1 . el8ae ansible -2 . 9- for - rhel -8- x86_64 - rpms ansible - test . noarch 2 . 9 . 24-1 . el8ae ansible -2 . 9- for - rhel -8- x86_64 - rpms sshpass . x86_64 1 . 06-3 . el8ae ansible -2 . 9- for - rhel -8- x86_64 - rpms \u6307\u5b9a\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u6709\u52b9\u5316/\u7121\u52b9\u5316 # dnf config - manager -- enable ansible -2 . 9- for - rhel -8- x86_64 - rpms \u3053\u3046\u306a\u308b [ root@rhel8 ~ ] # dnf config - manager -- enable ansible -2.9- for - rhel -8- x86_64 - rpms Updating Subscription Management repositories. [ root@rhel8 ~ ] # dnf repolist Updating Subscription Management repositories. repo id repo \u306e\u540d\u524d ansible -2.9- for - rhel -8- x86_64 - rpms Red Hat Ansible Engine 2.9 for RHEL 8 x86_64 (RPMs) rhel -8- for - x86_64 - appstream - rpms Red Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs) rhel -8- for - x86_64 - baseos - rpms Red Hat Enterprise Linux 8 for x86_64 - BaseOS (RPMs) \u7121\u52b9\u5316\u306f --disable \u3067\u3002 # dnf config - manager -- disable ansible -2 . 9- for - rhel -8- x86_64 - rpms yum \u30ea\u30dd\u30b8\u30c8\u30ea\u4e00\u89a7 \u6709\u52b9\u306a\u3082\u306e\u4e00\u89a7 # yum repolist \u7121\u52b9\u306a\u3082\u306e\u4e00\u89a7 # yum repolist disabled \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u6709\u52b9\u5316 # yum-config-manager --enable ol7_developer_EPEL \u5f15\u6570\u306b\u6307\u5b9a\u3059\u308b\u306e\u306f\u30ea\u30dd\u30b8\u30c8\u30eaID\u3060\u3051\u3069\u3001\u30ea\u30b9\u30c8\u6642\u306b /arch \u304c\u4ed8\u3044\u3066\u308b\u5834\u5408\u306f\u305d\u308c\u306f\u9664\u304f\u3002 apt option \u3010 apt \u3011\u30b3\u30de\u30f3\u30c9\uff08\u57fa\u790e\u7de8\uff09\u2015\u2015\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\uff1aLinux\u57fa\u672c\u30b3\u30de\u30f3\u30c9Tips\uff08139\uff09 - \uff20IT apt - Is \"upgrade --with-new-pkgs\" safer than \"dist-upgrade\"? - Ask Ubuntu apt line\u95a2\u9023 APT \u306e\u8a2d\u5b9a (/etc/apt/sources.list) \u3092\u3061\u3083\u3093\u3068\u7406\u89e3\u3059\u308b - \u304f\u3058\u3089\u306b\u3063\u304d++ Ubuntu\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u306e\u30e1\u30e2 - \u84bc\u306e\u738b\u5ea7\u30fb\u88cf\u53e3 apk \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb # apk add squid \u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb # apk del squid \u30ea\u30dd\u30b8\u30c8\u30ea Debian -- \u30d1\u30c3\u30b1\u30fc\u30b8 Ubuntu \u2013 Ubuntu \u30d1\u30c3\u30b1\u30fc\u30b8\u691c\u7d22 Oracle Linux Yum Server","title":"\u30d1\u30c3\u30b1\u30fc\u30b8\u64cd\u4f5c"},{"location":"Linux/package/#_1","text":"","title":"\u30d1\u30c3\u30b1\u30fc\u30b8\u64cd\u4f5c"},{"location":"Linux/package/#_2","text":"$ dpkg -l # debian $ rpm -qa # redhat $ apk info # alpine \u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u3042\u308c\u3053\u308c / [cygwin][debian][redhat][Solaris][command] | \u622f\u8853\u8005\u306e\u65e5\u8a18","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u4e00\u89a7\u51fa\u529b"},{"location":"Linux/package/#foo","text":"$ dpkg -L foo # debian $ rpm -ql foo # redhat $ apk manifest foo # alpine","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u30d1\u30c3\u30b1\u30fc\u30b8 foo \u306b\u542b\u307e\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7"},{"location":"Linux/package/#foobar","text":"$ dpkg -S /foo/bar # debian $ rpm -qf /foo/bar # redhat","title":"\u30d5\u30a1\u30a4\u30eb /foo/bar \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30d1\u30c3\u30b1\u30fc\u30b8"},{"location":"Linux/package/#_3","text":"","title":"\u66f4\u65b0\u78ba\u8a8d"},{"location":"Linux/package/#yum","text":"$ yum check-update","title":"yum"},{"location":"Linux/package/#_4","text":"yum update\u3059\u308b\u3068\u304d\u306b\u7279\u5b9a\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u5bfe\u8c61\u5916\u306b\u3059\u308b - zaki work log [ root@rhel8 ~ ] # yum search httpd -- showduplicates Updating Subscription Management repositories. \u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u671f\u9650\u5207\u308c\u306e\u6700\u7d42\u78ba\u8a8d : 0 : 24 : 27 \u6642\u9593\u524d\u306e 2021 \u5e7406\u670821\u65e5 21 \u664236\u520650\u79d2 \u306b\u5b9f\u65bd\u3057\u307e\u3057\u305f \u3002 ================================================ \u540d\u524d \u5b8c\u5168\u4e00\u81f4 : httpd ================================================= httpd -2.4.37-39. module + el8 .4.0+9658+ b87b2deb.x86_64 : Apache HTTP Server httpd -2.4.37-10. module + el8 +2764+7127e69 e.x86_64 : Apache HTTP Server httpd -2.4.37-11. module + el8 .0.0+2969+90015743. x86_64 : Apache HTTP Server httpd -2.4.37-16. module + el8 .1.0+4134+ e6bad0ed.x86_64 : Apache HTTP Server httpd -2.4.37-12. module + el8 .0.0+4096+ eb40e6da.x86_64 : Apache HTTP Server httpd -2.4.37-21. module + el8 .2.0+5008+ cca404a3.x86_64 : Apache HTTP Server httpd -2.4.37-30. module + el8 .3.0+7001+0766 b9e7.x86_64 : Apache HTTP Server httpd -2.4.37-39. module + el8 .4.0+9658+ b87b2deb.x86_64 : Apache HTTP Server : :","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u53ef\u80fd\u306a\u30d0\u30fc\u30b8\u30e7\u30f3\u4e00\u89a7"},{"location":"Linux/package/#dnf","text":"\u3010 dnf \u3011\u30b3\u30de\u30f3\u30c9\uff08\u5fdc\u7528\u7de8\u305d\u306e7\uff09\u2015\u2015\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3059\u308b\uff1aLinux\u57fa\u672c\u30b3\u30de\u30f3\u30c9Tips\uff08375\uff09 - \uff20IT","title":"dnf"},{"location":"Linux/package/#_5","text":"\u6709\u52b9\u306a\u3082\u306e\u306e\u4e00\u89a7\u3002 -v \u4ed8\u3051\u308b\u3068\u8a73\u7d30 # dnf repolist \u7121\u52b9\u306a\u3082\u306e\u306e\u4e00\u89a7\u3002 # dnf repolist --disabled","title":"\u30ea\u30dd\u30b8\u30c8\u30ea\u4e00\u89a7"},{"location":"Linux/package/#_6","text":"dnf repository-packages <\u30ea\u30dd\u30b8\u30c8\u30ea\u540d> list # dnf repository - packages ansible -2 . 9- for - rhel -8- x86_64 - rpms list Updating Subscription Management repositories . \u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u671f\u9650\u5207\u308c\u306e\u6700\u7d42\u78ba\u8a8d: 0 : 07 : 08 \u6642\u9593\u524d\u306e 2021 \u5e74 08 \u6708 08 \u65e5 12 \u6642 00 \u5206 34 \u79d2 \u306b\u5b9f\u65bd\u3057\u307e\u3057\u305f\u3002 \u5229\u7528\u53ef\u80fd\u306a\u30d1\u30c3\u30b1\u30fc\u30b8 ansible . noarch 2 . 9 . 24-1 . el8ae ansible -2 . 9- for - rhel -8- x86_64 - rpms ansible - test . noarch 2 . 9 . 24-1 . el8ae ansible -2 . 9- for - rhel -8- x86_64 - rpms sshpass . x86_64 1 . 06-3 . el8ae ansible -2 . 9- for - rhel -8- x86_64 - rpms","title":"\u6307\u5b9a\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u63d0\u4f9b\u3055\u308c\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u4e00\u89a7"},{"location":"Linux/package/#_7","text":"# dnf config - manager -- enable ansible -2 . 9- for - rhel -8- x86_64 - rpms \u3053\u3046\u306a\u308b [ root@rhel8 ~ ] # dnf config - manager -- enable ansible -2.9- for - rhel -8- x86_64 - rpms Updating Subscription Management repositories. [ root@rhel8 ~ ] # dnf repolist Updating Subscription Management repositories. repo id repo \u306e\u540d\u524d ansible -2.9- for - rhel -8- x86_64 - rpms Red Hat Ansible Engine 2.9 for RHEL 8 x86_64 (RPMs) rhel -8- for - x86_64 - appstream - rpms Red Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs) rhel -8- for - x86_64 - baseos - rpms Red Hat Enterprise Linux 8 for x86_64 - BaseOS (RPMs) \u7121\u52b9\u5316\u306f --disable \u3067\u3002 # dnf config - manager -- disable ansible -2 . 9- for - rhel -8- x86_64 - rpms","title":"\u6307\u5b9a\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u6709\u52b9\u5316/\u7121\u52b9\u5316"},{"location":"Linux/package/#yum_1","text":"","title":"yum"},{"location":"Linux/package/#_8","text":"\u6709\u52b9\u306a\u3082\u306e\u4e00\u89a7 # yum repolist \u7121\u52b9\u306a\u3082\u306e\u4e00\u89a7 # yum repolist disabled","title":"\u30ea\u30dd\u30b8\u30c8\u30ea\u4e00\u89a7"},{"location":"Linux/package/#_9","text":"# yum-config-manager --enable ol7_developer_EPEL \u5f15\u6570\u306b\u6307\u5b9a\u3059\u308b\u306e\u306f\u30ea\u30dd\u30b8\u30c8\u30eaID\u3060\u3051\u3069\u3001\u30ea\u30b9\u30c8\u6642\u306b /arch \u304c\u4ed8\u3044\u3066\u308b\u5834\u5408\u306f\u305d\u308c\u306f\u9664\u304f\u3002","title":"\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u6709\u52b9\u5316"},{"location":"Linux/package/#apt","text":"option \u3010 apt \u3011\u30b3\u30de\u30f3\u30c9\uff08\u57fa\u790e\u7de8\uff09\u2015\u2015\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\uff1aLinux\u57fa\u672c\u30b3\u30de\u30f3\u30c9Tips\uff08139\uff09 - \uff20IT apt - Is \"upgrade --with-new-pkgs\" safer than \"dist-upgrade\"? - Ask Ubuntu apt line\u95a2\u9023 APT \u306e\u8a2d\u5b9a (/etc/apt/sources.list) \u3092\u3061\u3083\u3093\u3068\u7406\u89e3\u3059\u308b - \u304f\u3058\u3089\u306b\u3063\u304d++ Ubuntu\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u306e\u30e1\u30e2 - \u84bc\u306e\u738b\u5ea7\u30fb\u88cf\u53e3","title":"apt"},{"location":"Linux/package/#apk","text":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb # apk add squid \u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb # apk del squid","title":"apk"},{"location":"Linux/package/#_10","text":"Debian -- \u30d1\u30c3\u30b1\u30fc\u30b8 Ubuntu \u2013 Ubuntu \u30d1\u30c3\u30b1\u30fc\u30b8\u691c\u7d22 Oracle Linux Yum Server","title":"\u30ea\u30dd\u30b8\u30c8\u30ea"},{"location":"Linux/rhel/","text":"RHEL \u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u5236\u9650\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u74b0\u5883\u306eRHEL7\u3067proxy\u7d4c\u7531\u3067\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u767b\u9332\u3068Docker\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb - zaki work log \u4ee5\u4e0b\u3067\u767b\u9332\u3068\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u5272\u308a\u5f53\u3066\u3092\u307e\u3068\u3081\u3066\u3067\u304d\u308b\u3002 # subscription-manager register --auto-attach \u767b\u9332\u306e\u307f\u306f\u4ee5\u4e0b\u3002\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u3092\u5bfe\u8a71\u7684\u306b\u5165\u529b\u3059\u308b\u3002 # subscription-manager register \u767b\u9332\u5f8c\u306e\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u5272\u308a\u5f53\u3066\u306f\u4ee5\u4e0b\u3002 # subscription-manager attach \u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u5272\u308a\u5f53\u3066\u6642\u306bpool ID\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u3002 # subscription-manager attach --pool = **** package RHEL8\u306bEPEL\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0 EPEL8\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u307e\u3057\u305f\u3002\u4f7f\u3044\u59cb\u3081\u307e\u3057\u3087\u3046\u3002 - \u8d64\u5e3d\u30a8\u30f3\u30b8\u30cb\u30a2\u30d6\u30ed\u30b0 EPEL - Fedora Project Wiki RHEL8\u7528\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3059\u308b [zaki@rhel8-node ~]$ sudo dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm Updating Subscription Management repositories. Red Hat Enterprise Linux 8 for x86_64 - BaseOS (RPMs) 13 kB/s | 4.1 kB 00:00 Red Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs) 19 kB/s | 4.5 kB 00:00 Red Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs) 6.5 MB/s | 31 MB 00:04 epel-release-latest-8.noarch.rpm 30 kB/s | 23 kB 00:00 \u4f9d\u5b58\u95a2\u4fc2\u304c\u89e3\u6c7a\u3057\u307e\u3057\u305f\u3002 ======================================================================================================== \u30d1\u30c3\u30b1\u30fc\u30b8 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30fc \u30d0\u30fc\u30b8\u30e7\u30f3 \u30ea\u30dd\u30b8\u30c8\u30ea\u30fc \u30b5\u30a4\u30ba ======================================================================================================== \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb: epel-release noarch 8-11.el8 @commandline 23 k \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u6982\u8981 ======================================================================================================== \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 \u30d1\u30c3\u30b1\u30fc\u30b8 \u5408\u8a08\u30b5\u30a4\u30ba: 23 k \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u30b5\u30a4\u30ba: 35 k \u3053\u308c\u3067\u3088\u308d\u3057\u3044\u3067\u3059\u304b? [y/N]: y \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9: \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u78ba\u8a8d\u3092\u5b9f\u884c\u4e2d \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u78ba\u8a8d\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u4e2d \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u30c6\u30b9\u30c8\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u4e2d \u6e96\u5099 : 1/1 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d : epel-release-8-11.el8.noarch 1/1 scriptlet\u306e\u5b9f\u884c\u4e2d: epel-release-8-11.el8.noarch 1/1 \u691c\u8a3c : epel-release-8-11.el8.noarch 1/1 Installed products updated. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f: epel-release-8-11.el8.noarch \u5b8c\u4e86\u3057\u307e\u3057\u305f! [zaki@rhel8-node ~]$ [zaki@rhel8-node ~]$ ls -l /etc/yum.repos.d/ \u5408\u8a08 168 -rw-r--r--. 1 root root 1480 6\u6708 8 09:29 epel-modular.repo -rw-r--r--. 1 root root 1562 6\u6708 8 09:29 epel-playground.repo -rw-r--r--. 1 root root 1579 6\u6708 8 09:29 epel-testing-modular.repo -rw-r--r--. 1 root root 1516 6\u6708 8 09:29 epel-testing.repo -rw-r--r--. 1 root root 1417 6\u6708 8 09:29 epel.repo -rw-r--r--. 1 root root 149513 7\u6708 2 19:58 redhat.repo [zaki@rhel8-node ~]$ sudo dnf search sshpass Updating Subscription Management repositories. Extra Packages for Enterprise Linux Modular 8 - x86_64 652 kB/s | 798 kB 00:01 Extra Packages for Enterprise Linux 8 - x86_64 7.2 MB/s | 10 MB 00:01 ======================================== \u540d\u524d \u5b8c\u5168\u4e00\u81f4: sshpass ======================================== sshpass.x86_64 : Non-interactive SSH authentication utility Simple Content Access\u8a2d\u5b9a https://access.redhat.com/management \u3053\u3053\u304b\u3089\u3002","title":"RHEL"},{"location":"Linux/rhel/#rhel","text":"","title":"RHEL"},{"location":"Linux/rhel/#_1","text":"\u5236\u9650\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u74b0\u5883\u306eRHEL7\u3067proxy\u7d4c\u7531\u3067\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u767b\u9332\u3068Docker\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb - zaki work log \u4ee5\u4e0b\u3067\u767b\u9332\u3068\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u5272\u308a\u5f53\u3066\u3092\u307e\u3068\u3081\u3066\u3067\u304d\u308b\u3002 # subscription-manager register --auto-attach \u767b\u9332\u306e\u307f\u306f\u4ee5\u4e0b\u3002\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u3092\u5bfe\u8a71\u7684\u306b\u5165\u529b\u3059\u308b\u3002 # subscription-manager register \u767b\u9332\u5f8c\u306e\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u5272\u308a\u5f53\u3066\u306f\u4ee5\u4e0b\u3002 # subscription-manager attach \u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u5272\u308a\u5f53\u3066\u6642\u306bpool ID\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u3002 # subscription-manager attach --pool = ****","title":"\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3"},{"location":"Linux/rhel/#package","text":"","title":"package"},{"location":"Linux/rhel/#rhel8epel","text":"EPEL8\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u307e\u3057\u305f\u3002\u4f7f\u3044\u59cb\u3081\u307e\u3057\u3087\u3046\u3002 - \u8d64\u5e3d\u30a8\u30f3\u30b8\u30cb\u30a2\u30d6\u30ed\u30b0 EPEL - Fedora Project Wiki RHEL8\u7528\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3059\u308b [zaki@rhel8-node ~]$ sudo dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm Updating Subscription Management repositories. Red Hat Enterprise Linux 8 for x86_64 - BaseOS (RPMs) 13 kB/s | 4.1 kB 00:00 Red Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs) 19 kB/s | 4.5 kB 00:00 Red Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs) 6.5 MB/s | 31 MB 00:04 epel-release-latest-8.noarch.rpm 30 kB/s | 23 kB 00:00 \u4f9d\u5b58\u95a2\u4fc2\u304c\u89e3\u6c7a\u3057\u307e\u3057\u305f\u3002 ======================================================================================================== \u30d1\u30c3\u30b1\u30fc\u30b8 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30fc \u30d0\u30fc\u30b8\u30e7\u30f3 \u30ea\u30dd\u30b8\u30c8\u30ea\u30fc \u30b5\u30a4\u30ba ======================================================================================================== \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb: epel-release noarch 8-11.el8 @commandline 23 k \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u6982\u8981 ======================================================================================================== \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 \u30d1\u30c3\u30b1\u30fc\u30b8 \u5408\u8a08\u30b5\u30a4\u30ba: 23 k \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u30b5\u30a4\u30ba: 35 k \u3053\u308c\u3067\u3088\u308d\u3057\u3044\u3067\u3059\u304b? [y/N]: y \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9: \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u78ba\u8a8d\u3092\u5b9f\u884c\u4e2d \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u78ba\u8a8d\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u4e2d \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u30c6\u30b9\u30c8\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u4e2d \u6e96\u5099 : 1/1 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d : epel-release-8-11.el8.noarch 1/1 scriptlet\u306e\u5b9f\u884c\u4e2d: epel-release-8-11.el8.noarch 1/1 \u691c\u8a3c : epel-release-8-11.el8.noarch 1/1 Installed products updated. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f: epel-release-8-11.el8.noarch \u5b8c\u4e86\u3057\u307e\u3057\u305f! [zaki@rhel8-node ~]$ [zaki@rhel8-node ~]$ ls -l /etc/yum.repos.d/ \u5408\u8a08 168 -rw-r--r--. 1 root root 1480 6\u6708 8 09:29 epel-modular.repo -rw-r--r--. 1 root root 1562 6\u6708 8 09:29 epel-playground.repo -rw-r--r--. 1 root root 1579 6\u6708 8 09:29 epel-testing-modular.repo -rw-r--r--. 1 root root 1516 6\u6708 8 09:29 epel-testing.repo -rw-r--r--. 1 root root 1417 6\u6708 8 09:29 epel.repo -rw-r--r--. 1 root root 149513 7\u6708 2 19:58 redhat.repo [zaki@rhel8-node ~]$ sudo dnf search sshpass Updating Subscription Management repositories. Extra Packages for Enterprise Linux Modular 8 - x86_64 652 kB/s | 798 kB 00:01 Extra Packages for Enterprise Linux 8 - x86_64 7.2 MB/s | 10 MB 00:01 ======================================== \u540d\u524d \u5b8c\u5168\u4e00\u81f4: sshpass ======================================== sshpass.x86_64 : Non-interactive SSH authentication utility","title":"RHEL8\u306bEPEL\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0"},{"location":"Linux/rhel/#simple-content-access","text":"https://access.redhat.com/management \u3053\u3053\u304b\u3089\u3002","title":"Simple Content Access\u8a2d\u5b9a"},{"location":"Linux/selinux/","text":"SELinux port\u8ffd\u52a0 \u30a8\u30e9\u30fc\u30ed\u30b0 web\u30b5\u30fc\u30d0\u30fc\u3067\u9069\u5f53\u306b 8081 \u3067Listen\u3055\u305b\u3088\u3046\u3068\u3057\u3066\u3082\u30d0\u30a4\u30f3\u30c9\u3067\u304d\u305a\u306b\u8d77\u52d5\u3067\u304d\u306a\u3044\u3002 error_log [suexec:notice] [pid 1237:tid 1237] AH01232: suEXEC mechanism enabled (wrapper: /usr/sbin/suexec) AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 192.168.0.44. Set the 'ServerName' directive globally to suppress this message [Tue Jul 06 10:47:18.353422 2021] [lbmethod_heartbeat:notice] [pid 1237:tid 1237] AH02282: No slotmem from mod_heartmonitor message setroubleshoot[1462]: SELinux \u306b\u3088\u308a\u3001httpd \u306b\u3088\u308b name_bind \u30a2\u30af\u30bb\u30b9\u304c\u3001tcp_socket \u30dd\u30fc\u30c8 8081 \u3067\u62d2\u5426\u3055\u308c\u307e\u3057\u305f\u3002#012#012***** \u30d7\u30e9\u30b0\u30a4\u30f3 catchall (100. \u4fe1\u983c\u6027) \u306b\u3088\u308b\u793a\u5506****************************************#012#012httpd \u306b\u3001 \u30dd\u30fc\u30c8 8081 tcp_socket \u306e name_bind \u30a2\u30af\u30bb\u30b9\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a31\u53ef\u3055\u308c\u308b\u3079\u304d\u3068\u8003\u3048\u308b\u5834\u5408\u3002#012\u3053\u306e\u3088\u3046\u306b\u3057\u307e\u3059: \u30d0\u30b0\u3068\u3057\u3066\u5831\u544a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 #012\u30ed\u30fc\u30ab\u30eb\u306e\u30dd\u30ea\u30b7\u30fc\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u751f\u6210\u3059\u308b\u3068\u3001#012 \u3053\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002#012\u305d\u3057\u3066\u3001\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u307e\u3059: #012\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066\u3001\u3053\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u307e\u3059:#012# ausearch -c 'httpd' --raw | audit2allow -M my-httpd#012# semodule -X 300 -i my-httpd.pp#012 \u30dd\u30fc\u30c8\u72b6\u614b [root@fedora-node ~]# semanage port -l | grep -w \"http_port_t\" http_port_t tcp 80, 81, 443, 488, 8008, 8009, 8443, 9000 \u306a\u308b\u307b\u3069\u30018081\u306f\u7121\u3044\u3002 \u8ffd\u52a0 [root@fedora-node ~]# semanage port -a -t http_port_t -p tcp 8081 ValueError: \u30dd\u30fc\u30c8 tcp/8081 \u306f\u3059\u3067\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059 [root@fedora-node ~]# semanage port -l | grep -w 8081 transproxy_port_t tcp 8081 \u3042\u30fc\u3001\u5225\u3067\u4f7f\u3063\u3066\u308b\u306e\u304b\u3002\u306a\u308b\u307b\u3069\u3002 [root@fedora-node ~]# semanage port -l | grep -w 808 . http_cache_port_t tcp 8080, 8118, 8123, 10001-10010 luci_port_t tcp 8084 transproxy_port_t tcp 8081 us_cli_port_t tcp 8082, 8083 us_cli_port_t udp 8082, 8083 8085\u7a7a\u3044\u3066\u308b [root@fedora-node ~]# semanage port -a -t http_port_t -p tcp 8085 [root@fedora-node ~]# semanage port -l | grep -w \"http_port_t\" http_port_t tcp 8085, 80, 81, 443, 488, 8008, 8009, 8443, 9000 \u3046\u3080 [root@fedora-node ~]# vi /etc/httpd/conf/httpd.conf [root@fedora-node ~]# systemctl restart httpd [root@fedora-node ~]# curl http://localhost:8085 -I HTTP/1.1 403 Forbidden Date: Tue, 06 Jul 2021 01:55:15 GMT Server: Apache/2.4.48 (Fedora) Last-Modified: Fri, 26 Mar 2021 17:49:58 GMT ETag: \"211a-5be742910bd80\" Accept-Ranges: bytes Content-Length: 8474 Content-Type: text/html; charset=UTF-8 [root@fedora-node ~]# \u306f\u3044\u3002 \u66f4\u65b0 -a \u3060\u3068\u4ed6\u3067\u4f7f\u3063\u3066\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002 -m \u306a\u3089\u66f4\u65b0\u3055\u308c\u3001\u4ed6\u3067\u4f7f\u3063\u3066\u308b\u3082\u306e\u3068\u591a\u91cd\u306b\u5b9a\u7fa9\u3067\u304d\u308b\u3002 [root@fedora-node ~]# semanage port -a -t http_port_t -p tcp 8082 ValueError: \u30dd\u30fc\u30c8 tcp/8082 \u306f\u3059\u3067\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059 [root@fedora-node ~]# semanage port -l | grep -w 8082 us_cli_port_t tcp 8082, 8083 us_cli_port_t udp 8082, 8083 [root@fedora-node ~]# semanage port -m -t http_port_t -p tcp 8082 [root@fedora-node ~]# semanage port -l | grep -w 8082 http_port_t tcp 8082, 8081, 8087, 8086, 8085, 80, 81, 443, 488, 8008, 8009, 8443, 9000 us_cli_port_t tcp 8082, 8083 us_cli_port_t udp 8082, 8083 [ root@fedora-node ~ ] # systemctl restart httpd [ root@fedora-node ~ ] # curl http : // localhost : 8082 - I HTTP /1.1 403 Forbidden Date : Tue, 06 Jul 2021 04 : 06 : 38 GMT Server : Apache /2.4.48 (Fedora) Last - Modified : Fri, 26 Mar 2021 17 : 49 : 58 GMT ETag : \"211a-5be742910bd80\" Accept - Ranges : bytes Content - Length : 8474 Content - Type : text / html; charset = UTF -8 [ root@fedora-node ~ ] # sshd\u306e\u5834\u5408\u306f\u3053\u3061\u3089 semanage \u30b3\u30de\u30f3\u30c9\u304c\u306a\u3044\u5834\u5408\u306f policycoreutils-python-utils \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002 [zaki@cloud-dev2 ~]$ rpm -qf /usr/sbin/semanage policycoreutils-python-utils-3.3-1.fc35.noarch","title":"SELinux"},{"location":"Linux/selinux/#selinux","text":"","title":"SELinux"},{"location":"Linux/selinux/#port","text":"","title":"port\u8ffd\u52a0"},{"location":"Linux/selinux/#_1","text":"web\u30b5\u30fc\u30d0\u30fc\u3067\u9069\u5f53\u306b 8081 \u3067Listen\u3055\u305b\u3088\u3046\u3068\u3057\u3066\u3082\u30d0\u30a4\u30f3\u30c9\u3067\u304d\u305a\u306b\u8d77\u52d5\u3067\u304d\u306a\u3044\u3002 error_log [suexec:notice] [pid 1237:tid 1237] AH01232: suEXEC mechanism enabled (wrapper: /usr/sbin/suexec) AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 192.168.0.44. Set the 'ServerName' directive globally to suppress this message [Tue Jul 06 10:47:18.353422 2021] [lbmethod_heartbeat:notice] [pid 1237:tid 1237] AH02282: No slotmem from mod_heartmonitor message setroubleshoot[1462]: SELinux \u306b\u3088\u308a\u3001httpd \u306b\u3088\u308b name_bind \u30a2\u30af\u30bb\u30b9\u304c\u3001tcp_socket \u30dd\u30fc\u30c8 8081 \u3067\u62d2\u5426\u3055\u308c\u307e\u3057\u305f\u3002#012#012***** \u30d7\u30e9\u30b0\u30a4\u30f3 catchall (100. \u4fe1\u983c\u6027) \u306b\u3088\u308b\u793a\u5506****************************************#012#012httpd \u306b\u3001 \u30dd\u30fc\u30c8 8081 tcp_socket \u306e name_bind \u30a2\u30af\u30bb\u30b9\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a31\u53ef\u3055\u308c\u308b\u3079\u304d\u3068\u8003\u3048\u308b\u5834\u5408\u3002#012\u3053\u306e\u3088\u3046\u306b\u3057\u307e\u3059: \u30d0\u30b0\u3068\u3057\u3066\u5831\u544a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 #012\u30ed\u30fc\u30ab\u30eb\u306e\u30dd\u30ea\u30b7\u30fc\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u751f\u6210\u3059\u308b\u3068\u3001#012 \u3053\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002#012\u305d\u3057\u3066\u3001\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u307e\u3059: #012\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066\u3001\u3053\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u307e\u3059:#012# ausearch -c 'httpd' --raw | audit2allow -M my-httpd#012# semodule -X 300 -i my-httpd.pp#012","title":"\u30a8\u30e9\u30fc\u30ed\u30b0"},{"location":"Linux/selinux/#_2","text":"[root@fedora-node ~]# semanage port -l | grep -w \"http_port_t\" http_port_t tcp 80, 81, 443, 488, 8008, 8009, 8443, 9000 \u306a\u308b\u307b\u3069\u30018081\u306f\u7121\u3044\u3002","title":"\u30dd\u30fc\u30c8\u72b6\u614b"},{"location":"Linux/selinux/#_3","text":"[root@fedora-node ~]# semanage port -a -t http_port_t -p tcp 8081 ValueError: \u30dd\u30fc\u30c8 tcp/8081 \u306f\u3059\u3067\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059 [root@fedora-node ~]# semanage port -l | grep -w 8081 transproxy_port_t tcp 8081 \u3042\u30fc\u3001\u5225\u3067\u4f7f\u3063\u3066\u308b\u306e\u304b\u3002\u306a\u308b\u307b\u3069\u3002 [root@fedora-node ~]# semanage port -l | grep -w 808 . http_cache_port_t tcp 8080, 8118, 8123, 10001-10010 luci_port_t tcp 8084 transproxy_port_t tcp 8081 us_cli_port_t tcp 8082, 8083 us_cli_port_t udp 8082, 8083 8085\u7a7a\u3044\u3066\u308b [root@fedora-node ~]# semanage port -a -t http_port_t -p tcp 8085 [root@fedora-node ~]# semanage port -l | grep -w \"http_port_t\" http_port_t tcp 8085, 80, 81, 443, 488, 8008, 8009, 8443, 9000 \u3046\u3080 [root@fedora-node ~]# vi /etc/httpd/conf/httpd.conf [root@fedora-node ~]# systemctl restart httpd [root@fedora-node ~]# curl http://localhost:8085 -I HTTP/1.1 403 Forbidden Date: Tue, 06 Jul 2021 01:55:15 GMT Server: Apache/2.4.48 (Fedora) Last-Modified: Fri, 26 Mar 2021 17:49:58 GMT ETag: \"211a-5be742910bd80\" Accept-Ranges: bytes Content-Length: 8474 Content-Type: text/html; charset=UTF-8 [root@fedora-node ~]# \u306f\u3044\u3002","title":"\u8ffd\u52a0"},{"location":"Linux/selinux/#_4","text":"-a \u3060\u3068\u4ed6\u3067\u4f7f\u3063\u3066\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002 -m \u306a\u3089\u66f4\u65b0\u3055\u308c\u3001\u4ed6\u3067\u4f7f\u3063\u3066\u308b\u3082\u306e\u3068\u591a\u91cd\u306b\u5b9a\u7fa9\u3067\u304d\u308b\u3002 [root@fedora-node ~]# semanage port -a -t http_port_t -p tcp 8082 ValueError: \u30dd\u30fc\u30c8 tcp/8082 \u306f\u3059\u3067\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059 [root@fedora-node ~]# semanage port -l | grep -w 8082 us_cli_port_t tcp 8082, 8083 us_cli_port_t udp 8082, 8083 [root@fedora-node ~]# semanage port -m -t http_port_t -p tcp 8082 [root@fedora-node ~]# semanage port -l | grep -w 8082 http_port_t tcp 8082, 8081, 8087, 8086, 8085, 80, 81, 443, 488, 8008, 8009, 8443, 9000 us_cli_port_t tcp 8082, 8083 us_cli_port_t udp 8082, 8083 [ root@fedora-node ~ ] # systemctl restart httpd [ root@fedora-node ~ ] # curl http : // localhost : 8082 - I HTTP /1.1 403 Forbidden Date : Tue, 06 Jul 2021 04 : 06 : 38 GMT Server : Apache /2.4.48 (Fedora) Last - Modified : Fri, 26 Mar 2021 17 : 49 : 58 GMT ETag : \"211a-5be742910bd80\" Accept - Ranges : bytes Content - Length : 8474 Content - Type : text / html; charset = UTF -8 [ root@fedora-node ~ ] # sshd\u306e\u5834\u5408\u306f\u3053\u3061\u3089","title":"\u66f4\u65b0"},{"location":"Linux/selinux/#semanage","text":"\u30b3\u30de\u30f3\u30c9\u304c\u306a\u3044\u5834\u5408\u306f policycoreutils-python-utils \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002 [zaki@cloud-dev2 ~]$ rpm -qf /usr/sbin/semanage policycoreutils-python-utils-3.3-1.fc35.noarch","title":"semanage"},{"location":"Linux/server/","text":"\u30b5\u30fc\u30d0\u30fc\u95a2\u9023 samba \u30e6\u30fc\u30b6\u30fc\u8ffd\u52a0 \u30e6\u30fc\u30b6\u30fc zaki \u3092\u4f5c\u6210\u3059\u308b pdbedit -a zaki \u767b\u9332\u6e08\u307f\u30e6\u30fc\u30b6\u30fc\u4e00\u89a7 pdbedit -L","title":"\u30b5\u30fc\u30d0\u30fc\u95a2\u9023"},{"location":"Linux/server/#_1","text":"","title":"\u30b5\u30fc\u30d0\u30fc\u95a2\u9023"},{"location":"Linux/server/#samba","text":"","title":"samba"},{"location":"Linux/server/#_2","text":"\u30e6\u30fc\u30b6\u30fc zaki \u3092\u4f5c\u6210\u3059\u308b pdbedit -a zaki","title":"\u30e6\u30fc\u30b6\u30fc\u8ffd\u52a0"},{"location":"Linux/server/#_3","text":"pdbedit -L","title":"\u767b\u9332\u6e08\u307f\u30e6\u30fc\u30b6\u30fc\u4e00\u89a7"},{"location":"Linux/ssh/","text":"ssh\u95a2\u9023 ssh client \u9375\u4f5c\u308b $ ssh-keygen -t rsa -f ~/.ssh/id_rsa_nopass -N \"\" -C \"comments\" Generating public/private rsa key pair. Your identification has been saved in /home/zaki/.ssh/id_rsa_nopass. Your public key has been saved in /home/zaki/.ssh/id_rsa_nopass.pub. The key fingerprint is: SHA256:vDhmhHyGepTu929HGu0oPPKS/2HrJexF97CBWu9k0M4 zaki@cloud-dev The key's randomart image is: +---[RSA 2048]----+ | | | | | | | . + . o | | * + S .= = | | + + . o.+o* = | | . o =o. **o E .| | o o=.+o+*o+ | | .. *+B*. . | +----[SHA256]-----+ $ ls ~/.ssh/ id_rsa id_rsa.pub id_rsa_nopass id_rsa_nopass.pub known_hosts \u30ea\u30e2\u30fc\u30c8\u3078\u516c\u958b\u9375\u30b3\u30d4\u30fc $ ssh-copy-id -i ~/.ssh/id_rsa_nopass 192 .168.0.31 /usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: \"/home/zaki/.ssh/id_rsa_nopass.pub\" The authenticity of host '192.168.0.31 (192.168.0.31)' can't be established. ECDSA key fingerprint is SHA256:WQpvcX7UfYAmdFIMfhak4pCevQvOjZkIZ/fpE4Sofm4. ECDSA key fingerprint is MD5:97:15:37:72:88:ab:59:01:ad:3c:a2:e9:10:90:11:59. Are you sure you want to continue connecting (yes/no)? yes /usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed /usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys zaki@192.168.0.31's password: Number of key(s) added: 1 Now try logging into the machine, with: \"ssh '192.168.0.31'\" and check to make sure that only the key(s) you wanted were added. $ \u9375\u6307\u5b9a\u3057\u3066ssh $ ssh -i ~/.ssh/id_rsa_nopass 192 .168.0.31 Last login: Tue Aug 11 14:52:32 2020 from 192.168.0.18 $ \u591a\u6bb5\u30a2\u30af\u30bb\u30b9 \u8ffd\u8a18: \u8a73\u7d30\u306f\u3053\u3061\u3089 -> [Linux] ProxyJump\u8a2d\u5b9a\u3067SSH\u306e\u591a\u6bb5\u30a2\u30af\u30bb\u30b9\u3068scp/\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9 - zaki work log ProxyCommand \u3092\u4f7f\u3063\u305f\u60c5\u5831\u304c\u305f\u304f\u3055\u3093\u30d2\u30c3\u30c8\u3059\u308b\u3051\u3069\u3001 ProxyJump (-J) \u3092\u4f7f\u3046\u3068\u7c21\u5358\u3002 \u30ed\u30fc\u30ab\u30eb\u304b\u3089192.168.0.19\u2192172.16.1.0\u2192172.29.0.89\u3068\u3044\u3046\u9806\u3067ssh\u591a\u6bb5\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3002 $ ssh 172 .29.0.89 -J 192 .168.0.19,172.16.1.0 \u8a18\u8ff0\u306e\u4ed5\u65b9\u306f ssh \u30b4\u30fc\u30eb(\u7d42\u7740\u70b9) -J \u8e0f\u307f\u53f0\u30db\u30b9\u30c8\u3092\u30a2\u30af\u30bb\u30b9\u9806\u306b\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u7f85\u5217 \u30ed\u30fc\u30ab\u30eb\u304b\u3089192.168.0.19\u2192172.16.1.0\u2192172.29.0.89\u3068\u3044\u3046\u9806\u3067ssh\u591a\u6bb5\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u5834\u5408\u306f\u3001 $ ssh 172.29.0.89 -J 192.168.0.19,172.16.1.0 \u3067\u3044\u3051\u308b\u3002 pic.twitter.com/7xHlxvxFTr \u2014 z a k i \ud83c\udf08\ud83c\udf09 (@zaki_hmkc) January 29, 2022 \u591a\u6bb5\u30a2\u30af\u30bb\u30b9\u3068\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9\u306e\u30b3\u30f3\u30dc -L \u3067\u666e\u901a\u306b\u6307\u5b9a\u3059\u308c\u3070OK\u3002 \u6a5f\u80fd\u81ea\u4f53\u306f\u5f8c\u8ff0\u3002 \u4e0a\u306e\u591a\u6bb5\u30a2\u30af\u30bb\u30b9\u4f8b\u3067\u3042\u308c\u3070\u3001 $ ssh 172 .29.0.89 -J 192 .168.0.19,172.16.1.0 -L 8899 :localhost:8080 \u3068\u3059\u308c\u3070\u3001\u300c 172.29.0.89 \u304b\u3089\u898b\u305f localhost:8080 \u300d\u3078\u5bfe\u3057\u3066\u3001\u300c\u30ed\u30fc\u30ab\u30eb(ssh\u3092\u5b9f\u884c\u3057\u3066\u308b\u51fa\u767a\u70b9)\u306e localhost:8899 \u300d\u3092\u30d5\u30a9\u30ef\u30fc\u30c9\u3059\u308b\u3002 \u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9 \u30ed\u30fc\u30ab\u30eb\u30d5\u30a9\u30ef\u30fc\u30c9 $ ssh rhel8 -L 25080 :10.88.250.10:80 rhel8 \u3078ssh\u30ed\u30b0\u30a4\u30f3\u3057\u3064\u3064\u3001 rhel8 \u304b\u3089\u898b\u3066 10.88.250.10:80 \u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u30ed\u30fc\u30ab\u30eb\u306e 25080/TCP \u3067Listen\u3059\u308b\u3002 (\u30ed\u30fc\u30ab\u30eb\u306e 25080/TCP \u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068 rhel8 \u304b\u3089\u898b\u305f 10.88.250.10:80 \u3078\u8ee2\u9001\u3055\u308c\u308b) \u63a5\u7d9a\u4e2d\u306e\u30a8\u30b9\u30b1\u30fc\u30d7\u30ad\u30e3\u30e9\u30af\u30bf \u65b0\u3057\u3044\u884c\u3067 ~ \u62bc\u4e0b\u3067\u30a8\u30b9\u30b1\u30fc\u30d7\u30ad\u30e3\u30e9\u30af\u30bf\u3092\u9001\u4fe1\u3067\u304d\u3001ssh\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u81ea\u4f53\u306e\u6a5f\u80fd\u3092\u547c\u3073\u51fa\u305b\u308b\u3002 \u5207\u65ad\u3059\u308b \u30ea\u30e2\u30fc\u30c8\u30db\u30b9\u30c8\u304b\u3089\u5207\u65ad\u3059\u308b\u3002 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668\u306a\u3069\u3067ssh\u7d4c\u7531\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u63a5\u7d9a\u306a\u3069\u3067 exit \u304c\u6253\u3066\u306a\u3044\u3088\u3046\u306a\u5834\u5408\u306b\u4f7f\u3048\u308b\u3002 ~. sshd \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30ebsyntax check # sshd -t \u898f\u5b9a\u306b\u7121\u3044\u8a2d\u5b9a\u30ad\u30fc(\u3068\u3044\u3046\u304b\u30b4\u30df)\u304c\u3042\u3063\u305f\u308a\u3059\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b # sshd -t /etc/ssh/sshd_config: line 140: Bad configuration option: a /etc/ssh/sshd_config: terminating, 1 bad configuration options \u6709\u52b9\u306b\u306a\u308b\u8a2d\u5b9a\u306e\u30ea\u30b9\u30c8 \u5b9f\u884c\u3059\u308b\u74b0\u5883\u306e /etc/ssh/sshd_config \u306e\u7d50\u679c\u3001\u3069\u306e\u8a2d\u5b9a\u304c\u9069\u7528\u3055\u308c\u308b\u304b\u306e\u3059\u3079\u3066\u306e\u5185\u5bb9\u304c\u8868\u793a\u3055\u308c\u308b\u3002 ( /etc/ssh_sshd_config \u306b\u66f8\u304b\u306a\u304b\u3063\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u542b\u3081\u3066\u51fa\u529b\u3055\u308c\u308b) # sshd -T \u30c7\u30d5\u30a9\u30eb\u30c8\u3068\u306e\u5dee\u5206\u3092\u898b\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u3067\u898b\u3088\u3046\u3068\u601d\u3048\u3070\u898b\u308c\u308b\u3002 # diff -u < ( sshd -T -f /dev/null ) < ( sshd -T ) \u30dd\u30fc\u30c8\u756a\u53f7\u306e\u5909\u66f4 SELinux\u304c\u6709\u52b9\u306e\u5834\u5408\u306fsshd\u306e\u8a2d\u5b9a\u5909\u66f4\u3060\u3051\u3067\u306f\u6709\u52b9\u306b\u306a\u3089\u306a\u3044\u3002 Port 25022 \u3092\u8a2d\u5b9a\u3057\u305f\u3068\u304d\u306b\u3001\u3001 # systemctl restart sshd Job for sshd . service failed because the control process exited with error code . See \"systemctl status sshd.service\" and \"journalctl -xe\" for details . # journalctl - xe sshd [ 20141 ]: error : Bind to port 25022 on 0 . 0 . 0 . 0 failed : Permission denied . sshd [ 20141 ]: error : Bind to port 25022 on :: failed : Permission denied . sshd [ 20141 ]: fatal : Cannot bind any address . systemd [ 1 ]: sshd . service : main process exited , code = exited , status =255/ n / a systemd [ 1 ]: Failed to start OpenSSH server daemon . \u3053\u3093\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u3092\u5b9f\u884c\u3002 # semanage port -a -t ssh_port_t -p tcp 25022 \u3053\u308c\u3067 systemctl restart sshd \u304c\u6709\u52b9\u306b\u306a\u308b\u3002 \u307e\u3041sshd_config\u306e Port \u306e\u3059\u3050\u4e0a\u306b\u30b3\u30e1\u30f3\u30c8\u3067\u66f8\u304b\u308c\u3066\u308b\u3093\u3060\u3051\u3069\u3002 \u9375 \u30d5\u30a3\u30f3\u30ac\u30fc\u30d7\u30ea\u30f3\u30c8\u78ba\u8a8d $ ssh-keygen -l -f ~/.ssh/id_rsa.pub 4096 SHA256:6Qt0+Nikcx/NpgM4xu/4WnDpqhj8L+OjtDEP5O2a7lw no comment (RSA) \u79d8\u5bc6\u9375\u304b\u3089\u516c\u958b\u9375\u3092\u4f5c\u6210 $ ssh-keygen -y -f ~/.ssh/id_rsa STDOUT\u3078\u51fa\u529b\u3055\u308c\u308b\u306e\u3067\u3001 > id_rsa.pub \u3068\u304b\u30d5\u30a1\u30a4\u30eb\u3078\u51fa\u529b\u3059\u308c\u3070OK \u9375\u5f62\u5f0f\u306e\u6307\u5b9a \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u4ee5\u4e0b\u3067\u59cb\u307e\u308bOpenSSH\u5f62\u5f0f\u3067\u4f5c\u6210\u3055\u308c\u308b\u3002 -----BEGIN OPENSSH PRIVATE KEY----- -m \u3092\u4f7f\u3046\u3068\u3001\u5f62\u5f0f\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002 PEM\u5f62\u5f0f\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u306e\u901a\u308a\u3002 $ ssh-keygen -m PEM \u51fa\u529b\u3055\u308c\u308b\u9375\u306f\u4ee5\u4e0b\u3067\u59cb\u307e\u308b\u3002 -----BEGIN RSA PRIVATE KEY----- \u9375\u5f62\u5f0f\u306e\u5909\u66f4 -p \u3092\u4f7f\u3063\u305f\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u66f4\u65b0\u306e\u969b\u306b\u3001 -m \u3067\u9375\u5f62\u5f0f\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u5909\u63db\u3067\u304d\u308b\u3002 \u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u9375\u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u308b\u3002 PEM\u5f62\u5f0f\u306b\u5909\u63db\u3059\u308b\u306e\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u306e\u901a\u308a\u3002 $ ssh-keygen -p -m PEM -f ~/.ssh/id_rsa \u30c7\u30d5\u30a9\u30eb\u30c8\u306f RFC4716 \u3002OpenSSH\u5f62\u5f0f\u306b\u3059\u308b\u5834\u5408\u306f\u3001 -m RFC4716 \u3092\u6307\u5b9a\u3059\u308c\u3070OK \u9375\u30b5\u30a4\u30ba\u6307\u5b9a -b \u3067\u6307\u5b9a\u3059\u308b\u3002 $ ssh-keygen -t rsa -b 4096 ssh-copy-id $ ssh-copy-id [ -i identity_file ] [ -p port ] [ username@ ] hostname","title":"ssh\u95a2\u9023"},{"location":"Linux/ssh/#ssh","text":"","title":"ssh\u95a2\u9023"},{"location":"Linux/ssh/#ssh-client","text":"","title":"ssh client"},{"location":"Linux/ssh/#_1","text":"$ ssh-keygen -t rsa -f ~/.ssh/id_rsa_nopass -N \"\" -C \"comments\" Generating public/private rsa key pair. Your identification has been saved in /home/zaki/.ssh/id_rsa_nopass. Your public key has been saved in /home/zaki/.ssh/id_rsa_nopass.pub. The key fingerprint is: SHA256:vDhmhHyGepTu929HGu0oPPKS/2HrJexF97CBWu9k0M4 zaki@cloud-dev The key's randomart image is: +---[RSA 2048]----+ | | | | | | | . + . o | | * + S .= = | | + + . o.+o* = | | . o =o. **o E .| | o o=.+o+*o+ | | .. *+B*. . | +----[SHA256]-----+ $ ls ~/.ssh/ id_rsa id_rsa.pub id_rsa_nopass id_rsa_nopass.pub known_hosts","title":"\u9375\u4f5c\u308b"},{"location":"Linux/ssh/#_2","text":"$ ssh-copy-id -i ~/.ssh/id_rsa_nopass 192 .168.0.31 /usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: \"/home/zaki/.ssh/id_rsa_nopass.pub\" The authenticity of host '192.168.0.31 (192.168.0.31)' can't be established. ECDSA key fingerprint is SHA256:WQpvcX7UfYAmdFIMfhak4pCevQvOjZkIZ/fpE4Sofm4. ECDSA key fingerprint is MD5:97:15:37:72:88:ab:59:01:ad:3c:a2:e9:10:90:11:59. Are you sure you want to continue connecting (yes/no)? yes /usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed /usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys zaki@192.168.0.31's password: Number of key(s) added: 1 Now try logging into the machine, with: \"ssh '192.168.0.31'\" and check to make sure that only the key(s) you wanted were added. $","title":"\u30ea\u30e2\u30fc\u30c8\u3078\u516c\u958b\u9375\u30b3\u30d4\u30fc"},{"location":"Linux/ssh/#ssh_1","text":"$ ssh -i ~/.ssh/id_rsa_nopass 192 .168.0.31 Last login: Tue Aug 11 14:52:32 2020 from 192.168.0.18 $","title":"\u9375\u6307\u5b9a\u3057\u3066ssh"},{"location":"Linux/ssh/#_3","text":"\u8ffd\u8a18: \u8a73\u7d30\u306f\u3053\u3061\u3089 -> [Linux] ProxyJump\u8a2d\u5b9a\u3067SSH\u306e\u591a\u6bb5\u30a2\u30af\u30bb\u30b9\u3068scp/\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9 - zaki work log ProxyCommand \u3092\u4f7f\u3063\u305f\u60c5\u5831\u304c\u305f\u304f\u3055\u3093\u30d2\u30c3\u30c8\u3059\u308b\u3051\u3069\u3001 ProxyJump (-J) \u3092\u4f7f\u3046\u3068\u7c21\u5358\u3002 \u30ed\u30fc\u30ab\u30eb\u304b\u3089192.168.0.19\u2192172.16.1.0\u2192172.29.0.89\u3068\u3044\u3046\u9806\u3067ssh\u591a\u6bb5\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3002 $ ssh 172 .29.0.89 -J 192 .168.0.19,172.16.1.0 \u8a18\u8ff0\u306e\u4ed5\u65b9\u306f ssh \u30b4\u30fc\u30eb(\u7d42\u7740\u70b9) -J \u8e0f\u307f\u53f0\u30db\u30b9\u30c8\u3092\u30a2\u30af\u30bb\u30b9\u9806\u306b\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u7f85\u5217 \u30ed\u30fc\u30ab\u30eb\u304b\u3089192.168.0.19\u2192172.16.1.0\u2192172.29.0.89\u3068\u3044\u3046\u9806\u3067ssh\u591a\u6bb5\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u5834\u5408\u306f\u3001 $ ssh 172.29.0.89 -J 192.168.0.19,172.16.1.0 \u3067\u3044\u3051\u308b\u3002 pic.twitter.com/7xHlxvxFTr \u2014 z a k i \ud83c\udf08\ud83c\udf09 (@zaki_hmkc) January 29, 2022","title":"\u591a\u6bb5\u30a2\u30af\u30bb\u30b9"},{"location":"Linux/ssh/#_4","text":"-L \u3067\u666e\u901a\u306b\u6307\u5b9a\u3059\u308c\u3070OK\u3002 \u6a5f\u80fd\u81ea\u4f53\u306f\u5f8c\u8ff0\u3002 \u4e0a\u306e\u591a\u6bb5\u30a2\u30af\u30bb\u30b9\u4f8b\u3067\u3042\u308c\u3070\u3001 $ ssh 172 .29.0.89 -J 192 .168.0.19,172.16.1.0 -L 8899 :localhost:8080 \u3068\u3059\u308c\u3070\u3001\u300c 172.29.0.89 \u304b\u3089\u898b\u305f localhost:8080 \u300d\u3078\u5bfe\u3057\u3066\u3001\u300c\u30ed\u30fc\u30ab\u30eb(ssh\u3092\u5b9f\u884c\u3057\u3066\u308b\u51fa\u767a\u70b9)\u306e localhost:8899 \u300d\u3092\u30d5\u30a9\u30ef\u30fc\u30c9\u3059\u308b\u3002","title":"\u591a\u6bb5\u30a2\u30af\u30bb\u30b9\u3068\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9\u306e\u30b3\u30f3\u30dc"},{"location":"Linux/ssh/#_5","text":"","title":"\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9"},{"location":"Linux/ssh/#_6","text":"$ ssh rhel8 -L 25080 :10.88.250.10:80 rhel8 \u3078ssh\u30ed\u30b0\u30a4\u30f3\u3057\u3064\u3064\u3001 rhel8 \u304b\u3089\u898b\u3066 10.88.250.10:80 \u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u30ed\u30fc\u30ab\u30eb\u306e 25080/TCP \u3067Listen\u3059\u308b\u3002 (\u30ed\u30fc\u30ab\u30eb\u306e 25080/TCP \u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068 rhel8 \u304b\u3089\u898b\u305f 10.88.250.10:80 \u3078\u8ee2\u9001\u3055\u308c\u308b)","title":"\u30ed\u30fc\u30ab\u30eb\u30d5\u30a9\u30ef\u30fc\u30c9"},{"location":"Linux/ssh/#_7","text":"\u65b0\u3057\u3044\u884c\u3067 ~ \u62bc\u4e0b\u3067\u30a8\u30b9\u30b1\u30fc\u30d7\u30ad\u30e3\u30e9\u30af\u30bf\u3092\u9001\u4fe1\u3067\u304d\u3001ssh\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u81ea\u4f53\u306e\u6a5f\u80fd\u3092\u547c\u3073\u51fa\u305b\u308b\u3002","title":"\u63a5\u7d9a\u4e2d\u306e\u30a8\u30b9\u30b1\u30fc\u30d7\u30ad\u30e3\u30e9\u30af\u30bf"},{"location":"Linux/ssh/#_8","text":"\u30ea\u30e2\u30fc\u30c8\u30db\u30b9\u30c8\u304b\u3089\u5207\u65ad\u3059\u308b\u3002 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668\u306a\u3069\u3067ssh\u7d4c\u7531\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u63a5\u7d9a\u306a\u3069\u3067 exit \u304c\u6253\u3066\u306a\u3044\u3088\u3046\u306a\u5834\u5408\u306b\u4f7f\u3048\u308b\u3002 ~.","title":"\u5207\u65ad\u3059\u308b"},{"location":"Linux/ssh/#sshd","text":"","title":"sshd"},{"location":"Linux/ssh/#syntax-check","text":"# sshd -t \u898f\u5b9a\u306b\u7121\u3044\u8a2d\u5b9a\u30ad\u30fc(\u3068\u3044\u3046\u304b\u30b4\u30df)\u304c\u3042\u3063\u305f\u308a\u3059\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b # sshd -t /etc/ssh/sshd_config: line 140: Bad configuration option: a /etc/ssh/sshd_config: terminating, 1 bad configuration options","title":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30ebsyntax check"},{"location":"Linux/ssh/#_9","text":"\u5b9f\u884c\u3059\u308b\u74b0\u5883\u306e /etc/ssh/sshd_config \u306e\u7d50\u679c\u3001\u3069\u306e\u8a2d\u5b9a\u304c\u9069\u7528\u3055\u308c\u308b\u304b\u306e\u3059\u3079\u3066\u306e\u5185\u5bb9\u304c\u8868\u793a\u3055\u308c\u308b\u3002 ( /etc/ssh_sshd_config \u306b\u66f8\u304b\u306a\u304b\u3063\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u542b\u3081\u3066\u51fa\u529b\u3055\u308c\u308b) # sshd -T \u30c7\u30d5\u30a9\u30eb\u30c8\u3068\u306e\u5dee\u5206\u3092\u898b\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u3067\u898b\u3088\u3046\u3068\u601d\u3048\u3070\u898b\u308c\u308b\u3002 # diff -u < ( sshd -T -f /dev/null ) < ( sshd -T )","title":"\u6709\u52b9\u306b\u306a\u308b\u8a2d\u5b9a\u306e\u30ea\u30b9\u30c8"},{"location":"Linux/ssh/#_10","text":"SELinux\u304c\u6709\u52b9\u306e\u5834\u5408\u306fsshd\u306e\u8a2d\u5b9a\u5909\u66f4\u3060\u3051\u3067\u306f\u6709\u52b9\u306b\u306a\u3089\u306a\u3044\u3002 Port 25022 \u3092\u8a2d\u5b9a\u3057\u305f\u3068\u304d\u306b\u3001\u3001 # systemctl restart sshd Job for sshd . service failed because the control process exited with error code . See \"systemctl status sshd.service\" and \"journalctl -xe\" for details . # journalctl - xe sshd [ 20141 ]: error : Bind to port 25022 on 0 . 0 . 0 . 0 failed : Permission denied . sshd [ 20141 ]: error : Bind to port 25022 on :: failed : Permission denied . sshd [ 20141 ]: fatal : Cannot bind any address . systemd [ 1 ]: sshd . service : main process exited , code = exited , status =255/ n / a systemd [ 1 ]: Failed to start OpenSSH server daemon . \u3053\u3093\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u3092\u5b9f\u884c\u3002 # semanage port -a -t ssh_port_t -p tcp 25022 \u3053\u308c\u3067 systemctl restart sshd \u304c\u6709\u52b9\u306b\u306a\u308b\u3002 \u307e\u3041sshd_config\u306e Port \u306e\u3059\u3050\u4e0a\u306b\u30b3\u30e1\u30f3\u30c8\u3067\u66f8\u304b\u308c\u3066\u308b\u3093\u3060\u3051\u3069\u3002","title":"\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u5909\u66f4"},{"location":"Linux/ssh/#_11","text":"","title":"\u9375"},{"location":"Linux/ssh/#_12","text":"$ ssh-keygen -l -f ~/.ssh/id_rsa.pub 4096 SHA256:6Qt0+Nikcx/NpgM4xu/4WnDpqhj8L+OjtDEP5O2a7lw no comment (RSA)","title":"\u30d5\u30a3\u30f3\u30ac\u30fc\u30d7\u30ea\u30f3\u30c8\u78ba\u8a8d"},{"location":"Linux/ssh/#_13","text":"$ ssh-keygen -y -f ~/.ssh/id_rsa STDOUT\u3078\u51fa\u529b\u3055\u308c\u308b\u306e\u3067\u3001 > id_rsa.pub \u3068\u304b\u30d5\u30a1\u30a4\u30eb\u3078\u51fa\u529b\u3059\u308c\u3070OK","title":"\u79d8\u5bc6\u9375\u304b\u3089\u516c\u958b\u9375\u3092\u4f5c\u6210"},{"location":"Linux/ssh/#_14","text":"\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u4ee5\u4e0b\u3067\u59cb\u307e\u308bOpenSSH\u5f62\u5f0f\u3067\u4f5c\u6210\u3055\u308c\u308b\u3002 -----BEGIN OPENSSH PRIVATE KEY----- -m \u3092\u4f7f\u3046\u3068\u3001\u5f62\u5f0f\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002 PEM\u5f62\u5f0f\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u306e\u901a\u308a\u3002 $ ssh-keygen -m PEM \u51fa\u529b\u3055\u308c\u308b\u9375\u306f\u4ee5\u4e0b\u3067\u59cb\u307e\u308b\u3002 -----BEGIN RSA PRIVATE KEY-----","title":"\u9375\u5f62\u5f0f\u306e\u6307\u5b9a"},{"location":"Linux/ssh/#_15","text":"-p \u3092\u4f7f\u3063\u305f\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u66f4\u65b0\u306e\u969b\u306b\u3001 -m \u3067\u9375\u5f62\u5f0f\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u5909\u63db\u3067\u304d\u308b\u3002 \u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u9375\u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u308b\u3002 PEM\u5f62\u5f0f\u306b\u5909\u63db\u3059\u308b\u306e\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u306e\u901a\u308a\u3002 $ ssh-keygen -p -m PEM -f ~/.ssh/id_rsa \u30c7\u30d5\u30a9\u30eb\u30c8\u306f RFC4716 \u3002OpenSSH\u5f62\u5f0f\u306b\u3059\u308b\u5834\u5408\u306f\u3001 -m RFC4716 \u3092\u6307\u5b9a\u3059\u308c\u3070OK","title":"\u9375\u5f62\u5f0f\u306e\u5909\u66f4"},{"location":"Linux/ssh/#_16","text":"-b \u3067\u6307\u5b9a\u3059\u308b\u3002 $ ssh-keygen -t rsa -b 4096","title":"\u9375\u30b5\u30a4\u30ba\u6307\u5b9a"},{"location":"Linux/ssh/#ssh-copy-id","text":"$ ssh-copy-id [ -i identity_file ] [ -p port ] [ username@ ] hostname","title":"ssh-copy-id"},{"location":"Linux/wsl/","text":"WSL \u4e00\u89a7 wsl --list \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u53ef\u80fd\u306a\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u4e00\u89a7 wsl --list --online \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb wsl --install \u30c7\u30d5\u30a9\u30eb\u30c8\u306f Ubuntu \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3002 \u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u3002 wsl --install -d Ubuntu-20.04 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3059\u308b\u3068\u8d77\u52d5\u307e\u3067\u884c\u308f\u308c\u3001\u521d\u671f\u8a2d\u5b9a\u304c\u958b\u59cb\u3055\u308c\u308b\u3002 Ubuntu\u306e\u5834\u5408\u3001\u4f5c\u6210\u3059\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u5165\u529b\u3092\u884c\u3046\u3002 WSL\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u8a2d\u5b9a WSL 2\u306b\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u3002 wsl --set-version Ubuntu-20.04 2 \u5b9f\u884c\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u901a\u308a\u3002 PS C:\\Users\\h_miyazaki> wsl --set-version Ubuntu-20.04 2 \u5909\u63db\u4e2d\u3067\u3059\u3002\u3053\u306e\u51e6\u7406\u306b\u306f\u6570\u5206\u304b\u304b\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059... WSL 2 \u3068\u306e\u4e3b\u306a\u9055\u3044\u306b\u3064\u3044\u3066\u306f\u3001https://aka.ms/wsl2 \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044 \u5909\u63db\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002 \u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u3002 wsl -l -v reboot\u3059\u308b WSL\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067 reboot \u5b9f\u884c\u3057\u3066\u3082\u4ee5\u4e0b\u30a8\u30e9\u30fc\u3067\u5b9f\u884c\u3067\u304d\u306a\u3044\u3002 zaki@wensley:~$ sudo reboot [sudo] password for zaki: System has not been booted with systemd as init system (PID 1). Can't operate. Failed to connect to bus: Host is down Failed to talk to init daemon. \u518d\u8d77\u52d5\u3059\u308b\u306b\u306f\u3001\u30db\u30b9\u30c8OS\u306e wsl \u30b3\u30de\u30f3\u30c9\u3067terminate\u3059\u308b\u3053\u3068\u3067\u505c\u6b62\u3059\u308b\u306e\u3067\u3001\u518d\u63a5\u7d9a\u3059\u308b\u3002 wsl --terminate Ubuntu-20.04 \u505c\u6b62\u3059\u308b PS C:\\Users\\h_miyazaki> wsl -l -v NAME STATE VERSION * docker-desktop-data Running 2 Ubuntu-20.04 Running 1 Running \u306b\u306a\u3063\u3066\u3044\u308b\u30db\u30b9\u30c8\u3092\u505c\u6b62\u3059\u308b\u306b\u306f\u3001\u2191\u3068\u540c\u69d8 --terminate | -t \u3067\u505c\u6b62\u3059\u308b\u3002 wsl -t Ubuntu-20.04 \u74b0\u5883\u306e\u524a\u9664 > wsl --unregister ubuntu-20.04-container \u767b\u9332\u3092\u89e3\u9664\u3057\u3066\u3044\u307e\u3059... VM\u74b0\u5883\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8 tar\u5f62\u5f0f\u306b\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\u3002 wsl --export Ubuntu-20.04 Ubuntu-20.04.tar \u30ab\u30ec\u30f3\u30c8\u306b Ubuntu-20.04.tar \u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002 VM\u74b0\u5883\u306e\u30a4\u30f3\u30dd\u30fc\u30c8 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u305ftar\u30d5\u30a1\u30a4\u30eb\u3092WSL\u306b\u767b\u9332\u3059\u308b\u3002 \u540d\u524d\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u3001\u74b0\u5883\u306e\u30b3\u30d4\u30fc\u3068\u306a\u308b\u3002 \u66f8\u5f0f\u306f wsl --import \u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u540d \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9 \u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308btar\u30d5\u30a1\u30a4\u30eb \u3002 wsl --import ubuntu-20.04-container .\\work\\wsl\\ubuntu-20.04-container .\\Ubuntu-20.04.tar \u5236\u9650\u3068\u3057\u3066\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30e6\u30fc\u30b6\u30fc\u304c root \u306b\u306a\u3063\u3066\u3057\u307e\u3046\u4ed5\u69d8\u304c\u3042\u308b\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u30e6\u30fc\u30b6\u30fc\u306e\u5909\u66f4 PowerShell\u3067\u8a2d\u5b9a\u53ef\u80fd\u3002 PS C:\\Users\\zaki> Function WSL-SetDefaultUser ($distro, $user) { Get-ItemProperty Registry::HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Lxss\\*\\ DistributionName | Where-Object -Property DistributionName -eq $distro | Set-ItemProperty -Name DefaultUid -Value ((wsl -d $distro -u $user -e id -u) | Out-String); }; PS C:\\Users\\zaki> WSL-SetDefaultUser ubuntu-20.04-container zaki","title":"WSL"},{"location":"Linux/wsl/#wsl","text":"","title":"WSL"},{"location":"Linux/wsl/#_1","text":"wsl --list \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u53ef\u80fd\u306a\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u4e00\u89a7 wsl --list --online","title":"\u4e00\u89a7"},{"location":"Linux/wsl/#_2","text":"wsl --install \u30c7\u30d5\u30a9\u30eb\u30c8\u306f Ubuntu \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3002 \u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u3002 wsl --install -d Ubuntu-20.04 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3059\u308b\u3068\u8d77\u52d5\u307e\u3067\u884c\u308f\u308c\u3001\u521d\u671f\u8a2d\u5b9a\u304c\u958b\u59cb\u3055\u308c\u308b\u3002 Ubuntu\u306e\u5834\u5408\u3001\u4f5c\u6210\u3059\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u5165\u529b\u3092\u884c\u3046\u3002","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"Linux/wsl/#wsl_1","text":"WSL 2\u306b\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u3002 wsl --set-version Ubuntu-20.04 2 \u5b9f\u884c\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u901a\u308a\u3002 PS C:\\Users\\h_miyazaki> wsl --set-version Ubuntu-20.04 2 \u5909\u63db\u4e2d\u3067\u3059\u3002\u3053\u306e\u51e6\u7406\u306b\u306f\u6570\u5206\u304b\u304b\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059... WSL 2 \u3068\u306e\u4e3b\u306a\u9055\u3044\u306b\u3064\u3044\u3066\u306f\u3001https://aka.ms/wsl2 \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044 \u5909\u63db\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002 \u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u3002 wsl -l -v","title":"WSL\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u8a2d\u5b9a"},{"location":"Linux/wsl/#reboot","text":"WSL\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067 reboot \u5b9f\u884c\u3057\u3066\u3082\u4ee5\u4e0b\u30a8\u30e9\u30fc\u3067\u5b9f\u884c\u3067\u304d\u306a\u3044\u3002 zaki@wensley:~$ sudo reboot [sudo] password for zaki: System has not been booted with systemd as init system (PID 1). Can't operate. Failed to connect to bus: Host is down Failed to talk to init daemon. \u518d\u8d77\u52d5\u3059\u308b\u306b\u306f\u3001\u30db\u30b9\u30c8OS\u306e wsl \u30b3\u30de\u30f3\u30c9\u3067terminate\u3059\u308b\u3053\u3068\u3067\u505c\u6b62\u3059\u308b\u306e\u3067\u3001\u518d\u63a5\u7d9a\u3059\u308b\u3002 wsl --terminate Ubuntu-20.04","title":"reboot\u3059\u308b"},{"location":"Linux/wsl/#_3","text":"PS C:\\Users\\h_miyazaki> wsl -l -v NAME STATE VERSION * docker-desktop-data Running 2 Ubuntu-20.04 Running 1 Running \u306b\u306a\u3063\u3066\u3044\u308b\u30db\u30b9\u30c8\u3092\u505c\u6b62\u3059\u308b\u306b\u306f\u3001\u2191\u3068\u540c\u69d8 --terminate | -t \u3067\u505c\u6b62\u3059\u308b\u3002 wsl -t Ubuntu-20.04","title":"\u505c\u6b62\u3059\u308b"},{"location":"Linux/wsl/#_4","text":"> wsl --unregister ubuntu-20.04-container \u767b\u9332\u3092\u89e3\u9664\u3057\u3066\u3044\u307e\u3059...","title":"\u74b0\u5883\u306e\u524a\u9664"},{"location":"Linux/wsl/#vm","text":"tar\u5f62\u5f0f\u306b\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\u3002 wsl --export Ubuntu-20.04 Ubuntu-20.04.tar \u30ab\u30ec\u30f3\u30c8\u306b Ubuntu-20.04.tar \u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002","title":"VM\u74b0\u5883\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8"},{"location":"Linux/wsl/#vm_1","text":"\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u305ftar\u30d5\u30a1\u30a4\u30eb\u3092WSL\u306b\u767b\u9332\u3059\u308b\u3002 \u540d\u524d\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u3001\u74b0\u5883\u306e\u30b3\u30d4\u30fc\u3068\u306a\u308b\u3002 \u66f8\u5f0f\u306f wsl --import \u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u540d \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9 \u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308btar\u30d5\u30a1\u30a4\u30eb \u3002 wsl --import ubuntu-20.04-container .\\work\\wsl\\ubuntu-20.04-container .\\Ubuntu-20.04.tar \u5236\u9650\u3068\u3057\u3066\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30e6\u30fc\u30b6\u30fc\u304c root \u306b\u306a\u3063\u3066\u3057\u307e\u3046\u4ed5\u69d8\u304c\u3042\u308b\u3002","title":"VM\u74b0\u5883\u306e\u30a4\u30f3\u30dd\u30fc\u30c8"},{"location":"Linux/wsl/#_5","text":"PowerShell\u3067\u8a2d\u5b9a\u53ef\u80fd\u3002 PS C:\\Users\\zaki> Function WSL-SetDefaultUser ($distro, $user) { Get-ItemProperty Registry::HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Lxss\\*\\ DistributionName | Where-Object -Property DistributionName -eq $distro | Set-ItemProperty -Name DefaultUid -Value ((wsl -d $distro -u $user -e id -u) | Out-String); }; PS C:\\Users\\zaki> WSL-SetDefaultUser ubuntu-20.04-container zaki","title":"\u30c7\u30d5\u30a9\u30eb\u30c8\u30e6\u30fc\u30b6\u30fc\u306e\u5909\u66f4"},{"location":"Network/","text":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af Junos root\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b set system root-authentication plain-text-password \u3092\u5b9f\u884c\u3059\u308b\u3002 [edit] root# [edit] root# set system root-authentication plain-text-password New password: Retype new password: [edit] root# \u30db\u30b9\u30c8\u540d\u306e\u8a2d\u5b9a [edit] root# set system host-name srx100-demo [edit] root# commit [edit] root@srx100-demo# \u30da\u30fc\u30b8\u30e3\u30fc\u306e\u7121\u52b9\u5316 terminal length 0 \u76f8\u5f53\u306e\u64cd\u4f5c\u306f\u4ee5\u4e0b\u3002 set cli screen-length 0 \u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3 root\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066 cli \u3092\u5b9f\u884c\u3002 root@SRX% cli \u305d\u306e\u5f8c request system power-off \u3092\u5b9f\u884c\u3059\u308b\u3002 request system power-off Power Off the system ? [yes,no] (no) yes","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af"},{"location":"Network/#_1","text":"","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af"},{"location":"Network/#junos","text":"","title":"Junos"},{"location":"Network/#root","text":"set system root-authentication plain-text-password \u3092\u5b9f\u884c\u3059\u308b\u3002 [edit] root# [edit] root# set system root-authentication plain-text-password New password: Retype new password: [edit] root#","title":"root\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b"},{"location":"Network/#_2","text":"[edit] root# set system host-name srx100-demo [edit] root# commit [edit] root@srx100-demo#","title":"\u30db\u30b9\u30c8\u540d\u306e\u8a2d\u5b9a"},{"location":"Network/#_3","text":"terminal length 0 \u76f8\u5f53\u306e\u64cd\u4f5c\u306f\u4ee5\u4e0b\u3002 set cli screen-length 0","title":"\u30da\u30fc\u30b8\u30e3\u30fc\u306e\u7121\u52b9\u5316"},{"location":"Network/#_4","text":"root\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066 cli \u3092\u5b9f\u884c\u3002 root@SRX% cli \u305d\u306e\u5f8c request system power-off \u3092\u5b9f\u884c\u3059\u308b\u3002 request system power-off Power Off the system ? [yes,no] (no) yes","title":"\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3"},{"location":"Tools/github/","text":"GitHub API \u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1\u3092\u53d6\u5f97\u3059\u308b https://api.github.com/repos/{owner}/{repo} \u3092 GET \u3059\u308b\u3068\u3001\u5bfe\u8c61\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002 JSON\u5f62\u5f0f\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u3046\u3061\u3001 default_branch \u30ad\u30fc\u306e\u5024\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1\u304c\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u308b\u3002 $ curl https://api.github.com/repos/netbox-community/ansible_modules { \"id\": 204365310, \"node_id\": \"MDEwOlJlcG9zaXRvcnkyMDQzNjUzMTA=\", \"name\": \"ansible_modules\", \"full_name\": \"netbox-community/ansible_modules\", \"private\": false, : : \"visibility\": \"public\", \"forks\": 123, \"open_issues\": 46, \"watchers\": 200, \"default_branch\": \"devel\", : : }","title":"GitHub"},{"location":"Tools/github/#github","text":"","title":"GitHub"},{"location":"Tools/github/#api","text":"","title":"API"},{"location":"Tools/github/#_1","text":"https://api.github.com/repos/{owner}/{repo} \u3092 GET \u3059\u308b\u3068\u3001\u5bfe\u8c61\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002 JSON\u5f62\u5f0f\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u3046\u3061\u3001 default_branch \u30ad\u30fc\u306e\u5024\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1\u304c\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u308b\u3002 $ curl https://api.github.com/repos/netbox-community/ansible_modules { \"id\": 204365310, \"node_id\": \"MDEwOlJlcG9zaXRvcnkyMDQzNjUzMTA=\", \"name\": \"ansible_modules\", \"full_name\": \"netbox-community/ansible_modules\", \"private\": false, : : \"visibility\": \"public\", \"forks\": 123, \"open_issues\": 46, \"watchers\": 200, \"default_branch\": \"devel\", : : }","title":"\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1\u3092\u53d6\u5f97\u3059\u308b"},{"location":"Tools/gitlab/","text":"GitLab \u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u60c5\u5831 Upgrading GitLab | GitLab","title":"GitLab"},{"location":"Tools/gitlab/#gitlab","text":"","title":"GitLab"},{"location":"Tools/gitlab/#_1","text":"Upgrading GitLab | GitLab","title":"\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u60c5\u5831"},{"location":"Tools/googledrive/","text":"Google Drive \u76f4\u524d\u306e\u64cd\u4f5c\u306e\u7e70\u308a\u8fd4\u3057 \u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3068\u304b\u3067 Ctrl-y \u73fe\u5728\u65e5\u4ed8 (\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8) Ctrl + : \u73fe\u5728\u6642\u523b (\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8) Ctrl + Shift + :","title":"Google Drive"},{"location":"Tools/googledrive/#google-drive","text":"","title":"Google Drive"},{"location":"Tools/googledrive/#_1","text":"\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3068\u304b\u3067 Ctrl-y","title":"\u76f4\u524d\u306e\u64cd\u4f5c\u306e\u7e70\u308a\u8fd4\u3057"},{"location":"Tools/googledrive/#_2","text":"Ctrl + :","title":"\u73fe\u5728\u65e5\u4ed8 (\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8)"},{"location":"Tools/googledrive/#_3","text":"Ctrl + Shift + :","title":"\u73fe\u5728\u6642\u523b (\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8)"},{"location":"Tools/mkdocs/","text":"MkDocs Configuration - MkDocs Getting started - Material for MkDocs Deploying Your Docs - MkDocs \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u69cb\u7bc9\u5411\u3051\u9759\u7684\u30b5\u30a4\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u300eMkDocs\u300f\u53ca\u3073\u300eMaterial for MkDocs\u300f\u306e\u500b\u4eba\u7684\u5c0e\u5165\uff06\u8a2d\u5b9a\u307e\u3068\u3081 | DevelopersIO GitHub Pages\u8a2d\u5b9a \u624b\u52d5\u5b9f\u884c\u3057\u3066GitHub Pages\u516c\u958b \u30bd\u30fc\u30b9markdown\u7528\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u65e2\u306b\u5b58\u5728\u3057\u3001\u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u72b6\u614b\u3067 $ mkdocs gh-deploy --clean INFO - Cleaning site directory INFO - Building documentation to directory: /home/zaki/src/github-pages/site INFO - Documentation built in 0.19 seconds WARNING - Version check skipped: No version specified in previous deployment. INFO - Copying '/home/zaki/src/github-pages/site' to 'gh-pages' branch and pushing to GitHub. INFO - Your documentation should shortly be available at: https://zaki-lknr.github.io/pages/ \u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306b gh-pages \u30d6\u30e9\u30f3\u30c1\u304c\u4f5c\u6210\u3055\u308c\u3001\u3053\u3053\u306b\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30f3\u30c4\u304cpush\u3055\u308c\u3066\u4ee5\u4e0b\u306eURL\u306b\u30b3\u30f3\u30c6\u30f3\u30c4\u304c\u516c\u958b\u3055\u308c\u305f\u3002 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306b\u306a\u3063\u3066\u3044\u308b\u3002 https://zaki-lknr.github.io/pages/ GitHub Actions\u9023\u643a MkDocs \u3067\u4f5c\u3063\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092 GitHub Actions \u3092\u4f7f\u3063\u3066 GitHub Pages \u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3088\u3046 | ultra code \u4ee5\u4e0b\u3092\u7528\u610f \u30bd\u30fc\u30b9markdown\u7528\u30ea\u30dd\u30b8\u30c8\u30ea \u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306f\u4efb\u610f GitHub Pages\u516c\u958b\u30b3\u30f3\u30c6\u30f3\u30c4\u7528\u30ea\u30dd\u30b8\u30c8\u30ea \u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306f <GitHub\u30e6\u30fc\u30b6\u30fc\u540d>.github.io \u306b\u3059\u308b GitHub Pages\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3067\u516c\u958b \u516c\u958b\u7528\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u3092 .github.io \u306b\u3059\u308c\u3070OK\u3060\u3063\u305f\u3002 \u8a73\u7d30\u306f\u672a\u78ba\u8a8d\u3002 Github pages\u3067\u610f\u5730\u3067\u3082\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30eb\u30fc\u30c8\u306b\u3059\u308b | Matsuura Tomoya|\u677e\u6d66\u77e5\u4e5f \u30b3\u30f3\u30c6\u30f3\u30c4\u8a2d\u5b9a \u8272\u8a2d\u5b9a Changing the colors - Material for MkDocs MKDocs \u2013 \u57fa\u672c\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u914d\u8272\u8a2d\u5b9a\u65b9\u6cd5 | DevelopersIO \u30b3\u30fc\u30c9\u30cf\u30a4\u30e9\u30a4\u30c8 MKDocs \u2013 \u62e1\u5f35\u30d7\u30e9\u30b0\u30a4\u30f3\u96c6(1) | DevelopersIO \u3042\u3068\u3067\u516c\u5f0f\u3082\u30c1\u30a7\u30c3\u30af\u3059\u308b\u304b\u3002\u3002 \u3053\u306e\u8fba\u304b\u306a: Code blocks - Material for MkDocs \u65e5\u672c\u8a9e\u691c\u7d22 material\u30c6\u30fc\u30de\u306e\u5834\u5408 Material for MkDocs \u3092\u65e5\u672c\u8a9e\u5bfe\u5fdc\u3057\u305f\u8a71\uff06\u521d\u3081\u3066\u306eOSS\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30c8 - miyalog Google Analytics\u8a2d\u5b9a Setting up site analytics - Material for MkDocs google_analytics : - UA-XXXXXXXX-X - auto \u53d6\u308a\u6d88\u3057\u7dda\u306e\u6709\u52b9\u5316 Material for MkDocs\u3092\u4f7f\u3063\u3066\u3044\u308b\u3068(?)\u3001 ~~ \u306b\u3088\u308b\u53d6\u308a\u6d88\u3057\u7dda\u304c\u52d5\u4f5c\u3057\u306a\u3044\u3002 \u4ee5\u4e0b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3068\u6709\u52b9\u306b\u306a\u308b\u3002 markdown_extensions : - pymdownx.tilde","title":"MkDocs"},{"location":"Tools/mkdocs/#mkdocs","text":"Configuration - MkDocs Getting started - Material for MkDocs Deploying Your Docs - MkDocs \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u69cb\u7bc9\u5411\u3051\u9759\u7684\u30b5\u30a4\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u300eMkDocs\u300f\u53ca\u3073\u300eMaterial for MkDocs\u300f\u306e\u500b\u4eba\u7684\u5c0e\u5165\uff06\u8a2d\u5b9a\u307e\u3068\u3081 | DevelopersIO","title":"MkDocs"},{"location":"Tools/mkdocs/#github-pages","text":"","title":"GitHub Pages\u8a2d\u5b9a"},{"location":"Tools/mkdocs/#github-pages_1","text":"\u30bd\u30fc\u30b9markdown\u7528\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u65e2\u306b\u5b58\u5728\u3057\u3001\u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u72b6\u614b\u3067 $ mkdocs gh-deploy --clean INFO - Cleaning site directory INFO - Building documentation to directory: /home/zaki/src/github-pages/site INFO - Documentation built in 0.19 seconds WARNING - Version check skipped: No version specified in previous deployment. INFO - Copying '/home/zaki/src/github-pages/site' to 'gh-pages' branch and pushing to GitHub. INFO - Your documentation should shortly be available at: https://zaki-lknr.github.io/pages/ \u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306b gh-pages \u30d6\u30e9\u30f3\u30c1\u304c\u4f5c\u6210\u3055\u308c\u3001\u3053\u3053\u306b\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30f3\u30c4\u304cpush\u3055\u308c\u3066\u4ee5\u4e0b\u306eURL\u306b\u30b3\u30f3\u30c6\u30f3\u30c4\u304c\u516c\u958b\u3055\u308c\u305f\u3002 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306b\u306a\u3063\u3066\u3044\u308b\u3002 https://zaki-lknr.github.io/pages/","title":"\u624b\u52d5\u5b9f\u884c\u3057\u3066GitHub Pages\u516c\u958b"},{"location":"Tools/mkdocs/#github-actions","text":"MkDocs \u3067\u4f5c\u3063\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092 GitHub Actions \u3092\u4f7f\u3063\u3066 GitHub Pages \u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3088\u3046 | ultra code \u4ee5\u4e0b\u3092\u7528\u610f \u30bd\u30fc\u30b9markdown\u7528\u30ea\u30dd\u30b8\u30c8\u30ea \u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306f\u4efb\u610f GitHub Pages\u516c\u958b\u30b3\u30f3\u30c6\u30f3\u30c4\u7528\u30ea\u30dd\u30b8\u30c8\u30ea \u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306f <GitHub\u30e6\u30fc\u30b6\u30fc\u540d>.github.io \u306b\u3059\u308b","title":"GitHub Actions\u9023\u643a"},{"location":"Tools/mkdocs/#github-pages_2","text":"\u516c\u958b\u7528\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u3092 .github.io \u306b\u3059\u308c\u3070OK\u3060\u3063\u305f\u3002 \u8a73\u7d30\u306f\u672a\u78ba\u8a8d\u3002 Github pages\u3067\u610f\u5730\u3067\u3082\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30eb\u30fc\u30c8\u306b\u3059\u308b | Matsuura Tomoya|\u677e\u6d66\u77e5\u4e5f","title":"GitHub Pages\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3067\u516c\u958b"},{"location":"Tools/mkdocs/#_1","text":"","title":"\u30b3\u30f3\u30c6\u30f3\u30c4\u8a2d\u5b9a"},{"location":"Tools/mkdocs/#_2","text":"Changing the colors - Material for MkDocs MKDocs \u2013 \u57fa\u672c\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u914d\u8272\u8a2d\u5b9a\u65b9\u6cd5 | DevelopersIO","title":"\u8272\u8a2d\u5b9a"},{"location":"Tools/mkdocs/#_3","text":"MKDocs \u2013 \u62e1\u5f35\u30d7\u30e9\u30b0\u30a4\u30f3\u96c6(1) | DevelopersIO \u3042\u3068\u3067\u516c\u5f0f\u3082\u30c1\u30a7\u30c3\u30af\u3059\u308b\u304b\u3002\u3002 \u3053\u306e\u8fba\u304b\u306a: Code blocks - Material for MkDocs","title":"\u30b3\u30fc\u30c9\u30cf\u30a4\u30e9\u30a4\u30c8"},{"location":"Tools/mkdocs/#_4","text":"material\u30c6\u30fc\u30de\u306e\u5834\u5408 Material for MkDocs \u3092\u65e5\u672c\u8a9e\u5bfe\u5fdc\u3057\u305f\u8a71\uff06\u521d\u3081\u3066\u306eOSS\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30c8 - miyalog","title":"\u65e5\u672c\u8a9e\u691c\u7d22"},{"location":"Tools/mkdocs/#google-analytics","text":"Setting up site analytics - Material for MkDocs google_analytics : - UA-XXXXXXXX-X - auto","title":"Google Analytics\u8a2d\u5b9a"},{"location":"Tools/mkdocs/#_5","text":"Material for MkDocs\u3092\u4f7f\u3063\u3066\u3044\u308b\u3068(?)\u3001 ~~ \u306b\u3088\u308b\u53d6\u308a\u6d88\u3057\u7dda\u304c\u52d5\u4f5c\u3057\u306a\u3044\u3002 \u4ee5\u4e0b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3068\u6709\u52b9\u306b\u306a\u308b\u3002 markdown_extensions : - pymdownx.tilde","title":"\u53d6\u308a\u6d88\u3057\u7dda\u306e\u6709\u52b9\u5316"},{"location":"Tools/msedge/","text":"Microsoft Edge Browser \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u306e\u8d77\u52d5 \u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b \"C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe\" \u305f\u3060\u30d1\u30b9\u304c\u901a\u3063\u3066\u306a\u3044\u306e\u3067\u3001 msedge \u3092\u5b9f\u884c\u3057\u3066\u3082\u8d77\u52d5\u306f\u3057\u306a\u3044\u3002 \u30d1\u30b9\u6307\u5b9a\u3059\u308b\u304b\u30d5\u30eb\u30d1\u30b9\u6307\u5b9a\u3057\u3066\u3082\u8d77\u52d5\u3059\u308b\u3051\u3069\u3001Edge\u8d77\u52d5\u306e\u305f\u3081\u306e microsoft-edge: \u30b9\u30ad\u30fc\u30e0\u304c\u7528\u610f\u3055\u308c\u3066\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u4f7f\u3063\u3066\u8d77\u52d5\u3067\u304d\u308b\u3002 PS > start microsoft-edge:https://www.google.com Windows 10\u30df\u30cbTips(86) Microsoft Edge\u3092\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u8d77\u52d5\u3059\u308b | \u30de\u30a4\u30ca\u30d3\u30cb\u30e5\u30fc\u30b9","title":"Microsoft Edge Browser"},{"location":"Tools/msedge/#microsoft-edge-browser","text":"","title":"Microsoft Edge Browser"},{"location":"Tools/msedge/#_1","text":"\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b \"C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe\" \u305f\u3060\u30d1\u30b9\u304c\u901a\u3063\u3066\u306a\u3044\u306e\u3067\u3001 msedge \u3092\u5b9f\u884c\u3057\u3066\u3082\u8d77\u52d5\u306f\u3057\u306a\u3044\u3002 \u30d1\u30b9\u6307\u5b9a\u3059\u308b\u304b\u30d5\u30eb\u30d1\u30b9\u6307\u5b9a\u3057\u3066\u3082\u8d77\u52d5\u3059\u308b\u3051\u3069\u3001Edge\u8d77\u52d5\u306e\u305f\u3081\u306e microsoft-edge: \u30b9\u30ad\u30fc\u30e0\u304c\u7528\u610f\u3055\u308c\u3066\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u4f7f\u3063\u3066\u8d77\u52d5\u3067\u304d\u308b\u3002 PS > start microsoft-edge:https://www.google.com Windows 10\u30df\u30cbTips(86) Microsoft Edge\u3092\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u8d77\u52d5\u3059\u308b | \u30de\u30a4\u30ca\u30d3\u30cb\u30e5\u30fc\u30b9","title":"\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u306e\u8d77\u52d5"},{"location":"Tools/openssl/","text":"openssl \u8a3c\u660e\u66f8\u4f5c\u6210 \u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u4f5c\u6210(CommonName) openssl req -newkey rsa:4096 -nodes -sha256 -keyout /path/to/example.org.key -x509 -days 365 -out /path/to/example.org.crt -subj '/CN=example.org/' Alternative Name\u6307\u5b9a\u306e\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8 appserv \u3068 appserv.example.org \u3044\u3046\u540d\u524d\u306eSAN\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3002 openssl req -newkey rsa:4096 -nodes -sha256 -keyout server.key -x509 -days 365 -out server.crt -subj '/C=JP/' -addext \"subjectAltName=DNS:appserv,DNS:appserv.example.org\" \u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u78ba\u8a8d RSA\u79d8\u5bc6\u9375\u306e\u78ba\u8a8d -----BEGIN RSA PRIVATE KEY----- MIIJKAIBAAKCAgEAntBW2JpzhtCgXGjKsR........ : : ..... -----END RSA PRIVATE KEY----- \u3053\u3093\u306a\u5185\u5bb9\u306e\u300cBEGIN RSA PRIVATE KEY\u300d\u3067\u59cb\u307e\u3063\u3066END\u307e\u3067\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u3067\u78ba\u8a8d\u3002 # openssl rsa -text -noout -in account.key CSR(\u8a3c\u660e\u66f8\u7f72\u540d\u8981\u6c42)\u306e\u78ba\u8a8d -----BEGIN CERTIFICATE REQUEST----- MIIEkDCCAngCAQAwHDEaMB........ : : ..... -----END CERTIFICATE REQUEST----- \u300cBEGIN CERTIFICATE REQUEST\u300d\u3067\u59cb\u307e\u3063\u3066END\u3067\u7d42\u308f\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u3067\u78ba\u8a8d\u3002 # openssl req -text -noout -in server.csr \u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d -----BEGIN CERTIFICATE----- MIIGKTCCBRGg....... : : .... -----END CERTIFICATE----- \u300cBEGIN CERTIFICATE\u300d\u3067\u59cb\u307e\u3063\u3066END\u3067\u7d42\u308f\u3063\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u306f\u3001x509\u3092\u6307\u5b9a\u3057\u3066\u78ba\u8a8d\u3002 # openssl x509 -text -noout -in server.crt","title":"openssl"},{"location":"Tools/openssl/#openssl","text":"","title":"openssl"},{"location":"Tools/openssl/#_1","text":"","title":"\u8a3c\u660e\u66f8\u4f5c\u6210"},{"location":"Tools/openssl/#commonname","text":"openssl req -newkey rsa:4096 -nodes -sha256 -keyout /path/to/example.org.key -x509 -days 365 -out /path/to/example.org.crt -subj '/CN=example.org/'","title":"\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u4f5c\u6210(CommonName)"},{"location":"Tools/openssl/#alternative-name","text":"appserv \u3068 appserv.example.org \u3044\u3046\u540d\u524d\u306eSAN\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3002 openssl req -newkey rsa:4096 -nodes -sha256 -keyout server.key -x509 -days 365 -out server.crt -subj '/C=JP/' -addext \"subjectAltName=DNS:appserv,DNS:appserv.example.org\"","title":"Alternative Name\u6307\u5b9a\u306e\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8"},{"location":"Tools/openssl/#_2","text":"","title":"\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u78ba\u8a8d"},{"location":"Tools/openssl/#rsa","text":"-----BEGIN RSA PRIVATE KEY----- MIIJKAIBAAKCAgEAntBW2JpzhtCgXGjKsR........ : : ..... -----END RSA PRIVATE KEY----- \u3053\u3093\u306a\u5185\u5bb9\u306e\u300cBEGIN RSA PRIVATE KEY\u300d\u3067\u59cb\u307e\u3063\u3066END\u307e\u3067\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u3067\u78ba\u8a8d\u3002 # openssl rsa -text -noout -in account.key","title":"RSA\u79d8\u5bc6\u9375\u306e\u78ba\u8a8d"},{"location":"Tools/openssl/#csr","text":"-----BEGIN CERTIFICATE REQUEST----- MIIEkDCCAngCAQAwHDEaMB........ : : ..... -----END CERTIFICATE REQUEST----- \u300cBEGIN CERTIFICATE REQUEST\u300d\u3067\u59cb\u307e\u3063\u3066END\u3067\u7d42\u308f\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u3067\u78ba\u8a8d\u3002 # openssl req -text -noout -in server.csr","title":"CSR(\u8a3c\u660e\u66f8\u7f72\u540d\u8981\u6c42)\u306e\u78ba\u8a8d"},{"location":"Tools/openssl/#_3","text":"-----BEGIN CERTIFICATE----- MIIGKTCCBRGg....... : : .... -----END CERTIFICATE----- \u300cBEGIN CERTIFICATE\u300d\u3067\u59cb\u307e\u3063\u3066END\u3067\u7d42\u308f\u3063\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u306f\u3001x509\u3092\u6307\u5b9a\u3057\u3066\u78ba\u8a8d\u3002 # openssl x509 -text -noout -in server.crt","title":"\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d"},{"location":"Tools/slack/","text":"Slack \u30ad\u30fc\u30dc\u30fc\u30c9\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8 Windows\u57fa\u6e96 \u9805\u76ee \u64cd\u4f5c \u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u4e00\u89a7\u306e\u8868\u793aon/off Ctrl + / (\u4f1a\u8a71\u30c4\u30ea\u30fc\u306a\u3069\u306e)\u53f3\u30b5\u30a4\u30c9\u753b\u9762\u306eon/off Ctrl + . (\u30c1\u30e3\u30f3\u30cd\u30eb\u4e00\u89a7\u306a\u3069\u306e)\u5de6\u30b5\u30a4\u30c9\u30d0\u30fcon/off Ctrl + Shift + d \u30b9\u30ec\u30c3\u30c9\u306e\u8868\u793a Ctrl + Shift + t \u30c1\u30e3\u30f3\u30cd\u30eb\u306a\u3069\u306e\u79fb\u52d5 Ctrl + k","title":"Slack"},{"location":"Tools/slack/#slack","text":"","title":"Slack"},{"location":"Tools/slack/#_1","text":"Windows\u57fa\u6e96 \u9805\u76ee \u64cd\u4f5c \u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u4e00\u89a7\u306e\u8868\u793aon/off Ctrl + / (\u4f1a\u8a71\u30c4\u30ea\u30fc\u306a\u3069\u306e)\u53f3\u30b5\u30a4\u30c9\u753b\u9762\u306eon/off Ctrl + . (\u30c1\u30e3\u30f3\u30cd\u30eb\u4e00\u89a7\u306a\u3069\u306e)\u5de6\u30b5\u30a4\u30c9\u30d0\u30fcon/off Ctrl + Shift + d \u30b9\u30ec\u30c3\u30c9\u306e\u8868\u793a Ctrl + Shift + t \u30c1\u30e3\u30f3\u30cd\u30eb\u306a\u3069\u306e\u79fb\u52d5 Ctrl + k","title":"\u30ad\u30fc\u30dc\u30fc\u30c9\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8"},{"location":"Tools/terraform/","text":"Terraform \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb Install Terraform | Terraform - HashiCorp Learn apt $ sudo apt-get update && sudo apt-get install -y gnupg software-properties-common curl $ curl -fsSL https://apt.releases.hashicorp.com/gpg | sudo apt-key add - $ sudo apt-add-repository \"deb [arch=amd64] https://apt.releases.hashicorp.com $( lsb_release -cs ) main\" $ sudo apt-get update && sudo apt-get install terraform backend\u8a2d\u5b9a S3 backend\u306e\u5b9a\u7fa9\u3092\u8ffd\u52a0 terraform { required_providers { aws = { source = \"hashicorp/aws\" version = \"~> 3.0\" } } backend \"s3\" { bucket = \"bucket-name\" key = \"terraform.tfstate\" region = \"ap-northeast-1\" } } provider \"aws\" { region = \"ap-northeast-1\" } \u3082\u3068\u3082\u3068\u30ed\u30fc\u30ab\u30eb\u3067tfstate\u4f5c\u3063\u3066\u3044\u305f\u72b6\u614b\u304b\u3089S3\u3078\u79fb\u884c\u3059\u308b\u5834\u5408\u306f\u3001 S3\u30d0\u30b1\u30c3\u30c8\u4f5c\u6210 tfstate\u3092S3\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9 \u30bd\u30fc\u30b9\u306b backend \u5b9a\u7fa9\u8ffd\u52a0 (\u30d0\u30b1\u30c3\u30c8\u540d\u30fb\u30ad\u30fc(\u30d5\u30a1\u30a4\u30eb)\u540d\u30fb\u30ea\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a) \u3053\u3053\u307e\u3067\u306f\u30bb\u30c3\u30c8\u3067\u3002 \u3067\u3001 \u30ed\u30fc\u30ab\u30eb\u306etfstate\u3092\u9000\u907f terraform init \u5b9f\u884c (S3\u8a2d\u5b9a\u304c\u53cd\u6620\u3055\u308c\u308b) terraform plan \u3067\u5dee\u5206\u304c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d \u3067\u3044\u3051\u308b\u3002","title":"Terraform"},{"location":"Tools/terraform/#terraform","text":"","title":"Terraform"},{"location":"Tools/terraform/#_1","text":"Install Terraform | Terraform - HashiCorp Learn","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"Tools/terraform/#apt","text":"$ sudo apt-get update && sudo apt-get install -y gnupg software-properties-common curl $ curl -fsSL https://apt.releases.hashicorp.com/gpg | sudo apt-key add - $ sudo apt-add-repository \"deb [arch=amd64] https://apt.releases.hashicorp.com $( lsb_release -cs ) main\" $ sudo apt-get update && sudo apt-get install terraform","title":"apt"},{"location":"Tools/terraform/#backend","text":"","title":"backend\u8a2d\u5b9a"},{"location":"Tools/terraform/#s3","text":"backend\u306e\u5b9a\u7fa9\u3092\u8ffd\u52a0 terraform { required_providers { aws = { source = \"hashicorp/aws\" version = \"~> 3.0\" } } backend \"s3\" { bucket = \"bucket-name\" key = \"terraform.tfstate\" region = \"ap-northeast-1\" } } provider \"aws\" { region = \"ap-northeast-1\" } \u3082\u3068\u3082\u3068\u30ed\u30fc\u30ab\u30eb\u3067tfstate\u4f5c\u3063\u3066\u3044\u305f\u72b6\u614b\u304b\u3089S3\u3078\u79fb\u884c\u3059\u308b\u5834\u5408\u306f\u3001 S3\u30d0\u30b1\u30c3\u30c8\u4f5c\u6210 tfstate\u3092S3\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9 \u30bd\u30fc\u30b9\u306b backend \u5b9a\u7fa9\u8ffd\u52a0 (\u30d0\u30b1\u30c3\u30c8\u540d\u30fb\u30ad\u30fc(\u30d5\u30a1\u30a4\u30eb)\u540d\u30fb\u30ea\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a) \u3053\u3053\u307e\u3067\u306f\u30bb\u30c3\u30c8\u3067\u3002 \u3067\u3001 \u30ed\u30fc\u30ab\u30eb\u306etfstate\u3092\u9000\u907f terraform init \u5b9f\u884c (S3\u8a2d\u5b9a\u304c\u53cd\u6620\u3055\u308c\u308b) terraform plan \u3067\u5dee\u5206\u304c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d \u3067\u3044\u3051\u308b\u3002","title":"S3"},{"location":"Tools/vscode/","text":"VS Code \u62e1\u5f35 Markdown\u7cfb Markdown PDF - Visual Studio Marketplace markdownlint - Visual Studio Marketplace Text Tables - Visual Studio Marketplace Paste Image - Visual Studio Marketplace Markdown\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3044\u3066\u3044\u308b\u72b6\u614b\u3067\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306e\u753b\u50cf\u3068\u304b\u3092 Ctrl-Alt-V \u3067\u30da\u30fc\u30b9\u30c8\u3059\u308b\u3053\u3068\u3067\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306b\u30d5\u30a1\u30a4\u30eb\u751f\u6210 & \u753b\u50cf\u8868\u793a\u306e\u30bf\u30b0\u304c\u633f\u5165\u3055\u308c\u308b \u8a2d\u5b9a\u7cfb Modelines - Visual Studio Marketplace \u30bd\u30fc\u30b9\u306e\u5148\u982d\u90e8\u5206\u306b # -*- mode: hogehoeg -*- \u3063\u3066\u66f8\u3044\u305f\u5185\u5bb9\u304c\u6709\u52b9\u306b\u306a\u308b \u88dc\u52a9 Bracket Pair Colorizer 2 - Visual Studio Marketplace \u62ec\u5f27\u306e\u958b\u59cb\u7d42\u4e86\u9593\u306e\u88dc\u52a9\u7dda\u8868\u793a indent-rainbow - Visual Studio Marketplace \u30a4\u30f3\u30c7\u30f3\u30c8\u30ec\u30d9\u30eb\u6bce\u306b\u30b9\u30da\u30fc\u30b9\u90e8\u5206\u3092\u30cf\u30a4\u30e9\u30a4\u30c8 TODO Highlight - Visual Studio Marketplace \u30d5\u30a1\u30a4\u30eb\u4e2d\u30c6\u30ad\u30b9\u30c8\u306e TODO: \u3068\u304b FIXME: \u3092\u30cf\u30a4\u30e9\u30a4\u30c8\u3057\u3066\u304f\u308c\u308b \u8a2d\u5b9a \u81ea\u52d5\u540c\u671f\u8a2d\u5b9a\u3057\u3066\u308b\u304b\u3089\u500b\u5225\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u306a\u304f\u306a\u3063\u305f\u2026\u3051\u3069\u3001\u30af\u30ed\u30fc\u30ba\u30c9\u306aPC\u306e\u8a2d\u5b9a\u7528\u306b\u3002 item value description files.autoSave afterDelay \u81ea\u52d5\u4fdd\u5b58 files.autoGuessEncoding true \u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f\u3068\u304d\u306e\u30a8\u30f3\u30b3\u30fc\u30c9\u3092\u81ea\u52d5\u5224\u5225 editor.mouseWheelZoom true Ctrl+wheel\u3067\u30d5\u30a9\u30f3\u30c8\u30b5\u30a4\u30ba\u5909\u66f4 editor.renderWhitespace all \u30b9\u30da\u30fc\u30b9\u3084tab\u306e\u53ef\u8996\u5316 files.insertFinalNewline true \u30d5\u30a1\u30a4\u30eb\u672b\u5c3e\u306b\u6539\u884c\u3092\u4ed8\u3051\u308b \"files.insertFinalNewline\" : true , \"files.autoGuessEncoding\" : true , \"editor.renderControlCharacters\" : true , \"editor.renderWhitespace\" : \"all\" , \"files.autoSave\" : \"afterDelay\" , \"editor.suggestSelection\" : \"first\" , \"editor.wordSeparators\" : \"`~!@#$%^&*()-=+[{]}\\\\|;:'\\\",.<>/?\u3001\u3002\u3000\u300c\u300d\u300e\u300f\u3010\u3011\uff08\uff09\" , \"vsintellicode.modify.editor.suggestSelection\" : \"automaticallyOverrodeDefaultValue\" , \"window.zoomLevel\" : 0 , \"editor.mouseWheelZoom\" : true , \"terminal.integrated.scrollback\" : 100000 , \"markdownlint.config\" : { \"MD025\" : false , // \u898b\u51fa\u3057level1\u306f\u6587\u66f8\u4e2d\u306b\u4e00\u3064:off \"MD007\" : { \"indent\" : 4 }, // \u30ea\u30b9\u30c8\u306e\u30a4\u30f3\u30c7\u30f3\u30c8\u91cf \"MD040\" : false , // \u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u306e\u8a00\u8a9e\u6307\u5b9a }, \"files.watcherExclude\" : { \"**/venv*/**\" : true , \"**/env*/**\" : true , }, \u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8 \u203b windows\u524d\u63d0 \u30a8\u30c7\u30a3\u30bf \u64cd\u4f5c \u30ad\u30fc \u5206\u5272\u3057\u305f\u30a6\u30a4\u30f3\u30c9\u30a6\u3067\u30a6\u30a4\u30f3\u30c9\u30a6\u9593\u30ab\u30fc\u30bd\u30eb\u79fb\u52d5 Ctrl + k , Ctrl + \u79fb\u52d5\u5148\u753b\u9762\u306e\u65b9\u5411\u306e\u30ab\u30fc\u30bd\u30eb\u30ad\u30fc \u958b\u3044\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u5272\u3057\u305f\u5225\u306e\u30a6\u30a4\u30f3\u30c9\u30a6\u3067\u958b\u304d\u305f\u3044 Ctrl + Alt + \u5de6\u53f3\u30ad\u30fc \u3067\u96a3\u306e\u30a6\u30a4\u30f3\u30c9\u30a6\u306b\u79fb\u52d5 \u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9 \u64cd\u4f5c \u30ad\u30fc \u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u3067\u958b\u304f Shift + Alt + R \u30bf\u30fc\u30df\u30ca\u30eb\u64cd\u4f5c \u64cd\u4f5c \u30ad\u30fc \u30bf\u30fc\u30df\u30ca\u30eb\u306e\u8868\u793a/\u975e\u8868\u793a Ctrl + @ \u30bf\u30fc\u30df\u30ca\u30eb\u3092\u958b\u3044\u305f\u307e\u307e\u30a8\u30c7\u30a3\u30bf\u306b\u30d5\u30a9\u30fc\u30ab\u30b9\u79fb\u52d5 Ctrl + 1 (\u6b63\u78ba\u306b\u306f\u30a8\u30c7\u30a3\u30bf\u30b0\u30eb\u30fc\u30d71\u306b\u79fb\u52d5) \u65b0\u3057\u3044\u30bf\u30fc\u30df\u30ca\u30eb\u306e\u4f5c\u6210 Ctrl + Shift + @ \u5de6\u53f32\u5206\u5272\u3057\u305f\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5de6\u53f3\u306b\u30d5\u30a9\u30fc\u30ab\u30b9\u3092\u884c\u304d\u6765\u3059\u308b Alt + \u2190 or Alt + \u2192 \u30bf\u30fc\u30df\u30ca\u30eb\u30da\u30a4\u30f3\u306e\u6700\u5927\u5316 \u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u7121\u3057 / \u30b3\u30de\u30f3\u30c9\u30d1\u30ec\u30c3\u30c8\u3067 View: Toggle Maxmized Panel \u30ad\u30fc\u30d0\u30a4\u30f3\u30c9\u8a2d\u5b9a \u30bf\u30fc\u30df\u30ca\u30eb\u306e\u30ad\u30fc\u30d0\u30a4\u30f3\u30c9 // \u65e2\u5b9a\u5024\u3092\u4e0a\u66f8\u304d\u3059\u308b\u306b\u306f\u3001\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u5185\u306b\u30ad\u30fc \u30d0\u30a4\u30f3\u30c9\u3092\u633f\u5165\u3057\u307e\u3059 [ { \"key\" : \"ctrl+a\" , \"command\" : \"cursorHome\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+e\" , \"command\" : \"cursorEnd\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+p\" , \"command\" : \"cursorUp\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+n\" , \"command\" : \"cursorDown\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+f\" , \"command\" : \"cursorRight\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+b\" , \"command\" : \"cursorLeft\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+alt+right\" , \"command\" : \"workbench.action.terminal.focusNext\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+alt+left\" , \"command\" : \"workbench.action.terminal.focusPrevious\" , \"when\" : \"terminalFocus\" }, ] terminal\u3067Ctrl-k\u304c\u6b21\u30b3\u30de\u30f3\u30c9\u5f85\u3061\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u5834\u5408\u306f\u4ee5\u4e0b\u3082\u8ffd\u52a0 { \"key\" : \"ctrl+k\" , \"command\" : \"deleteAllRight\" , \"when\" : \"terminalFocus\" } diff \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3 $ code -d <file1> <file2> \u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30d5\u30a1\u30a4\u30eb\u3068open\u6e08\u307f\u30d5\u30a1\u30a4\u30eb \u30b3\u30de\u30f3\u30c9\u30d1\u30ec\u30c3\u30c8\u3067 File: Compare Active File with... \u3092\u9078\u629e\u3057\u3001\u6bd4\u8f03\u5bfe\u8c61\u3092\u9078\u629e\u3059\u308b\u3002 Remote SSH git clone\u306e\u8a8d\u8a3c \u901a\u5e38\u3060\u3068\u8a8d\u8a3c\u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u8868\u793a\u3055\u308c\u308b\u64cd\u4f5c\u3067\u3053\u306e\u3088\u3046\u306b\u306a\u308b\u5834\u5408\u3001 Missing or invalid credentials. Error: connect ECONNREFUSED /run/user/1000/vscode-git-fce9cdb56d.sock at PipeConnectWrap.afterConnect [as oncomplete] (net.js:1146:16) { errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '/run/user/1000/vscode-git-fce9cdb56d.sock' } Missing or invalid credentials. \u30a2\u30af\u30bb\u30b9\u3057\u3066\u308b\u30ea\u30e2\u30fc\u30c8\u74b0\u5883\u3078\u3001 GitLens \u3092\u5165\u308c\u3066Reload Window\u3059\u308c\u3070VS Code\u306e\u753b\u9762\u3067\u8a8d\u8a3c\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u8868\u793a\u3055\u308c\u3066\u30a2\u30ab\u30a6\u30f3\u30c8\u8a2d\u5b9a\u3067\u304d\u305f\u3002 Remote Container ubuntu / focal \u8d77\u52d5\u5f8c\u306e\u74b0\u5883 git \u521d\u3081\u304b\u3089\u3042\u308b\u306e\u3067 git clone \u306f\u3059\u3050\u3067\u304d\u308b\u3002 \u9375\u8a2d\u5b9a \u4f5c\u308b\u304b\u6301\u3063\u3066\u304f\u308b\u3002 ~/.ssh/config \u3082\u8a2d\u5b9a\u3002","title":"VS Code"},{"location":"Tools/vscode/#vs-code","text":"","title":"VS Code"},{"location":"Tools/vscode/#_1","text":"Markdown\u7cfb Markdown PDF - Visual Studio Marketplace markdownlint - Visual Studio Marketplace Text Tables - Visual Studio Marketplace Paste Image - Visual Studio Marketplace Markdown\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3044\u3066\u3044\u308b\u72b6\u614b\u3067\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306e\u753b\u50cf\u3068\u304b\u3092 Ctrl-Alt-V \u3067\u30da\u30fc\u30b9\u30c8\u3059\u308b\u3053\u3068\u3067\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306b\u30d5\u30a1\u30a4\u30eb\u751f\u6210 & \u753b\u50cf\u8868\u793a\u306e\u30bf\u30b0\u304c\u633f\u5165\u3055\u308c\u308b \u8a2d\u5b9a\u7cfb Modelines - Visual Studio Marketplace \u30bd\u30fc\u30b9\u306e\u5148\u982d\u90e8\u5206\u306b # -*- mode: hogehoeg -*- \u3063\u3066\u66f8\u3044\u305f\u5185\u5bb9\u304c\u6709\u52b9\u306b\u306a\u308b \u88dc\u52a9 Bracket Pair Colorizer 2 - Visual Studio Marketplace \u62ec\u5f27\u306e\u958b\u59cb\u7d42\u4e86\u9593\u306e\u88dc\u52a9\u7dda\u8868\u793a indent-rainbow - Visual Studio Marketplace \u30a4\u30f3\u30c7\u30f3\u30c8\u30ec\u30d9\u30eb\u6bce\u306b\u30b9\u30da\u30fc\u30b9\u90e8\u5206\u3092\u30cf\u30a4\u30e9\u30a4\u30c8 TODO Highlight - Visual Studio Marketplace \u30d5\u30a1\u30a4\u30eb\u4e2d\u30c6\u30ad\u30b9\u30c8\u306e TODO: \u3068\u304b FIXME: \u3092\u30cf\u30a4\u30e9\u30a4\u30c8\u3057\u3066\u304f\u308c\u308b","title":"\u62e1\u5f35"},{"location":"Tools/vscode/#_2","text":"\u81ea\u52d5\u540c\u671f\u8a2d\u5b9a\u3057\u3066\u308b\u304b\u3089\u500b\u5225\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u306a\u304f\u306a\u3063\u305f\u2026\u3051\u3069\u3001\u30af\u30ed\u30fc\u30ba\u30c9\u306aPC\u306e\u8a2d\u5b9a\u7528\u306b\u3002 item value description files.autoSave afterDelay \u81ea\u52d5\u4fdd\u5b58 files.autoGuessEncoding true \u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f\u3068\u304d\u306e\u30a8\u30f3\u30b3\u30fc\u30c9\u3092\u81ea\u52d5\u5224\u5225 editor.mouseWheelZoom true Ctrl+wheel\u3067\u30d5\u30a9\u30f3\u30c8\u30b5\u30a4\u30ba\u5909\u66f4 editor.renderWhitespace all \u30b9\u30da\u30fc\u30b9\u3084tab\u306e\u53ef\u8996\u5316 files.insertFinalNewline true \u30d5\u30a1\u30a4\u30eb\u672b\u5c3e\u306b\u6539\u884c\u3092\u4ed8\u3051\u308b \"files.insertFinalNewline\" : true , \"files.autoGuessEncoding\" : true , \"editor.renderControlCharacters\" : true , \"editor.renderWhitespace\" : \"all\" , \"files.autoSave\" : \"afterDelay\" , \"editor.suggestSelection\" : \"first\" , \"editor.wordSeparators\" : \"`~!@#$%^&*()-=+[{]}\\\\|;:'\\\",.<>/?\u3001\u3002\u3000\u300c\u300d\u300e\u300f\u3010\u3011\uff08\uff09\" , \"vsintellicode.modify.editor.suggestSelection\" : \"automaticallyOverrodeDefaultValue\" , \"window.zoomLevel\" : 0 , \"editor.mouseWheelZoom\" : true , \"terminal.integrated.scrollback\" : 100000 , \"markdownlint.config\" : { \"MD025\" : false , // \u898b\u51fa\u3057level1\u306f\u6587\u66f8\u4e2d\u306b\u4e00\u3064:off \"MD007\" : { \"indent\" : 4 }, // \u30ea\u30b9\u30c8\u306e\u30a4\u30f3\u30c7\u30f3\u30c8\u91cf \"MD040\" : false , // \u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u306e\u8a00\u8a9e\u6307\u5b9a }, \"files.watcherExclude\" : { \"**/venv*/**\" : true , \"**/env*/**\" : true , },","title":"\u8a2d\u5b9a"},{"location":"Tools/vscode/#_3","text":"\u203b windows\u524d\u63d0","title":"\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8"},{"location":"Tools/vscode/#_4","text":"\u64cd\u4f5c \u30ad\u30fc \u5206\u5272\u3057\u305f\u30a6\u30a4\u30f3\u30c9\u30a6\u3067\u30a6\u30a4\u30f3\u30c9\u30a6\u9593\u30ab\u30fc\u30bd\u30eb\u79fb\u52d5 Ctrl + k , Ctrl + \u79fb\u52d5\u5148\u753b\u9762\u306e\u65b9\u5411\u306e\u30ab\u30fc\u30bd\u30eb\u30ad\u30fc \u958b\u3044\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u5272\u3057\u305f\u5225\u306e\u30a6\u30a4\u30f3\u30c9\u30a6\u3067\u958b\u304d\u305f\u3044 Ctrl + Alt + \u5de6\u53f3\u30ad\u30fc \u3067\u96a3\u306e\u30a6\u30a4\u30f3\u30c9\u30a6\u306b\u79fb\u52d5","title":"\u30a8\u30c7\u30a3\u30bf"},{"location":"Tools/vscode/#_5","text":"\u64cd\u4f5c \u30ad\u30fc \u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u3067\u958b\u304f Shift + Alt + R","title":"\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9"},{"location":"Tools/vscode/#_6","text":"\u64cd\u4f5c \u30ad\u30fc \u30bf\u30fc\u30df\u30ca\u30eb\u306e\u8868\u793a/\u975e\u8868\u793a Ctrl + @ \u30bf\u30fc\u30df\u30ca\u30eb\u3092\u958b\u3044\u305f\u307e\u307e\u30a8\u30c7\u30a3\u30bf\u306b\u30d5\u30a9\u30fc\u30ab\u30b9\u79fb\u52d5 Ctrl + 1 (\u6b63\u78ba\u306b\u306f\u30a8\u30c7\u30a3\u30bf\u30b0\u30eb\u30fc\u30d71\u306b\u79fb\u52d5) \u65b0\u3057\u3044\u30bf\u30fc\u30df\u30ca\u30eb\u306e\u4f5c\u6210 Ctrl + Shift + @ \u5de6\u53f32\u5206\u5272\u3057\u305f\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5de6\u53f3\u306b\u30d5\u30a9\u30fc\u30ab\u30b9\u3092\u884c\u304d\u6765\u3059\u308b Alt + \u2190 or Alt + \u2192 \u30bf\u30fc\u30df\u30ca\u30eb\u30da\u30a4\u30f3\u306e\u6700\u5927\u5316 \u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u7121\u3057 / \u30b3\u30de\u30f3\u30c9\u30d1\u30ec\u30c3\u30c8\u3067 View: Toggle Maxmized Panel","title":"\u30bf\u30fc\u30df\u30ca\u30eb\u64cd\u4f5c"},{"location":"Tools/vscode/#_7","text":"\u30bf\u30fc\u30df\u30ca\u30eb\u306e\u30ad\u30fc\u30d0\u30a4\u30f3\u30c9 // \u65e2\u5b9a\u5024\u3092\u4e0a\u66f8\u304d\u3059\u308b\u306b\u306f\u3001\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u5185\u306b\u30ad\u30fc \u30d0\u30a4\u30f3\u30c9\u3092\u633f\u5165\u3057\u307e\u3059 [ { \"key\" : \"ctrl+a\" , \"command\" : \"cursorHome\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+e\" , \"command\" : \"cursorEnd\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+p\" , \"command\" : \"cursorUp\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+n\" , \"command\" : \"cursorDown\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+f\" , \"command\" : \"cursorRight\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+b\" , \"command\" : \"cursorLeft\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+alt+right\" , \"command\" : \"workbench.action.terminal.focusNext\" , \"when\" : \"terminalFocus\" }, { \"key\" : \"ctrl+alt+left\" , \"command\" : \"workbench.action.terminal.focusPrevious\" , \"when\" : \"terminalFocus\" }, ] terminal\u3067Ctrl-k\u304c\u6b21\u30b3\u30de\u30f3\u30c9\u5f85\u3061\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u5834\u5408\u306f\u4ee5\u4e0b\u3082\u8ffd\u52a0 { \"key\" : \"ctrl+k\" , \"command\" : \"deleteAllRight\" , \"when\" : \"terminalFocus\" }","title":"\u30ad\u30fc\u30d0\u30a4\u30f3\u30c9\u8a2d\u5b9a"},{"location":"Tools/vscode/#diff","text":"","title":"diff"},{"location":"Tools/vscode/#_8","text":"$ code -d <file1> <file2>","title":"\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3"},{"location":"Tools/vscode/#open","text":"\u30b3\u30de\u30f3\u30c9\u30d1\u30ec\u30c3\u30c8\u3067 File: Compare Active File with... \u3092\u9078\u629e\u3057\u3001\u6bd4\u8f03\u5bfe\u8c61\u3092\u9078\u629e\u3059\u308b\u3002","title":"\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30d5\u30a1\u30a4\u30eb\u3068open\u6e08\u307f\u30d5\u30a1\u30a4\u30eb"},{"location":"Tools/vscode/#remote-ssh","text":"","title":"Remote SSH"},{"location":"Tools/vscode/#git-clone","text":"\u901a\u5e38\u3060\u3068\u8a8d\u8a3c\u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u8868\u793a\u3055\u308c\u308b\u64cd\u4f5c\u3067\u3053\u306e\u3088\u3046\u306b\u306a\u308b\u5834\u5408\u3001 Missing or invalid credentials. Error: connect ECONNREFUSED /run/user/1000/vscode-git-fce9cdb56d.sock at PipeConnectWrap.afterConnect [as oncomplete] (net.js:1146:16) { errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '/run/user/1000/vscode-git-fce9cdb56d.sock' } Missing or invalid credentials. \u30a2\u30af\u30bb\u30b9\u3057\u3066\u308b\u30ea\u30e2\u30fc\u30c8\u74b0\u5883\u3078\u3001 GitLens \u3092\u5165\u308c\u3066Reload Window\u3059\u308c\u3070VS Code\u306e\u753b\u9762\u3067\u8a8d\u8a3c\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u8868\u793a\u3055\u308c\u3066\u30a2\u30ab\u30a6\u30f3\u30c8\u8a2d\u5b9a\u3067\u304d\u305f\u3002","title":"git clone\u306e\u8a8d\u8a3c"},{"location":"Tools/vscode/#remote-container","text":"","title":"Remote Container"},{"location":"Tools/vscode/#ubuntu-focal","text":"","title":"ubuntu / focal"},{"location":"Tools/vscode/#_9","text":"","title":"\u8d77\u52d5\u5f8c\u306e\u74b0\u5883"},{"location":"Tools/vscode/#git","text":"\u521d\u3081\u304b\u3089\u3042\u308b\u306e\u3067 git clone \u306f\u3059\u3050\u3067\u304d\u308b\u3002","title":"git"},{"location":"Tools/vscode/#_10","text":"\u4f5c\u308b\u304b\u6301\u3063\u3066\u304f\u308b\u3002 ~/.ssh/config \u3082\u8a2d\u5b9a\u3002","title":"\u9375\u8a2d\u5b9a"},{"location":"Tools/windows/","text":"Windows \u8a55\u4fa1\u7248 Windows10 \u5fc5\u8981\u4e8b\u9805\u3092\u5165\u529b\u3057\u3066\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fISO\u306f\u3001\u30e9\u30a4\u30bb\u30f3\u30b9\u30ad\u30fc\u5165\u529b\u304c\u306a\u304f90\u65e5\u691c\u8a3c\u306b\u4f7f\u7528\u3067\u304d\u308b\u3002 Microsoft Evaluation Center \u3067 Windows 10 Enterprise \u3092\u8a66\u3059","title":"Windows"},{"location":"Tools/windows/#windows","text":"","title":"Windows"},{"location":"Tools/windows/#windows10","text":"\u5fc5\u8981\u4e8b\u9805\u3092\u5165\u529b\u3057\u3066\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fISO\u306f\u3001\u30e9\u30a4\u30bb\u30f3\u30b9\u30ad\u30fc\u5165\u529b\u304c\u306a\u304f90\u65e5\u691c\u8a3c\u306b\u4f7f\u7528\u3067\u304d\u308b\u3002 Microsoft Evaluation Center \u3067 Windows 10 Enterprise \u3092\u8a66\u3059","title":"\u8a55\u4fa1\u7248 Windows10"},{"location":"lang/powershell/","text":"PowerShell \u5b9f\u884c\u521d\u671f\u8a2d\u5b9a \u3053\u306e\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\u304c\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u30d5\u30a1\u30a4\u30eb C:\\path\\to\\foobar.ps1 \u3092\u8aad\u307f\u8fbc\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001\u300cabout_Execution_Policies\u300d(https://go.microsoft.c om/fwlink/?LinkID=135170) \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 + CategoryInfo : \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \u30a8\u30e9\u30fc: (: ) []\u3001ParentContainsErrorRecordException + FullyQualifiedErrorId : UnauthorizedAccess \u305d\u306e\u3068\u304d\u306b\u4e00\u6642\u7684\u306b\u8a31\u53ef\u3059\u308b\u306b\u306f PS> Set-ExecutionPolicy RemoteSigned -Scope Process \u30b7\u30b9\u30c6\u30e0\u30ef\u30a4\u30c9\u306b\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u3001\u7ba1\u7406\u8005\u6a29\u9650\u3067 PS> Set-ExecutionPolicy RemoteSigned version\u78ba\u8a8d PS> $PSVersionTable http\u30a2\u30af\u30bb\u30b9 curl/PowerShell\u3067HTTP\u30a2\u30af\u30bb\u30b9\u3044\u308d\u3044\u308d - Qiita","title":"PowerShell"},{"location":"lang/powershell/#powershell","text":"","title":"PowerShell"},{"location":"lang/powershell/#_1","text":"\u3053\u306e\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\u304c\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u30d5\u30a1\u30a4\u30eb C:\\path\\to\\foobar.ps1 \u3092\u8aad\u307f\u8fbc\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001\u300cabout_Execution_Policies\u300d(https://go.microsoft.c om/fwlink/?LinkID=135170) \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 + CategoryInfo : \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \u30a8\u30e9\u30fc: (: ) []\u3001ParentContainsErrorRecordException + FullyQualifiedErrorId : UnauthorizedAccess \u305d\u306e\u3068\u304d\u306b\u4e00\u6642\u7684\u306b\u8a31\u53ef\u3059\u308b\u306b\u306f PS> Set-ExecutionPolicy RemoteSigned -Scope Process \u30b7\u30b9\u30c6\u30e0\u30ef\u30a4\u30c9\u306b\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u3001\u7ba1\u7406\u8005\u6a29\u9650\u3067 PS> Set-ExecutionPolicy RemoteSigned","title":"\u5b9f\u884c\u521d\u671f\u8a2d\u5b9a"},{"location":"lang/powershell/#version","text":"PS> $PSVersionTable","title":"version\u78ba\u8a8d"},{"location":"lang/powershell/#http","text":"curl/PowerShell\u3067HTTP\u30a2\u30af\u30bb\u30b9\u3044\u308d\u3044\u308d - Qiita","title":"http\u30a2\u30af\u30bb\u30b9"},{"location":"lang/python/","text":"Python pip requirements.txt\u306e\u5229\u7528 ansible==2.9.7 jmespath=0.10.0 \u3068\u3044\u3046\u5185\u5bb9\u306e requirements.txt \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\u3053\u308c\u3067 $ pip install -r requirements.txt \u203b \u30d5\u30a1\u30a4\u30eb\u540d\u306f\u4efb\u610f pip\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 venv\u3068\u304b\u4f5c\u3063\u305f\u76f4\u5f8c\u306f pip \u81ea\u4f53\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u306e\u3067(\u76ee\u7684\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u5165\u308c\u308b\u3068\u304d\u306b\u30a8\u30e9\u30fc\u306b\u306a\u308b\u524d\u306b\u5148\u306b)\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b $ pip install --upgrade pip \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9 \u57fa\u672c\u7684\u306b\u306f\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u3066\u4ee5\u4e0b\u3067OK $ pip install hogehoge =0 .0.1 requirements.txt \u8a18\u8f09\u306e\u5834\u5408\u3082\u3001\u8a18\u8f09\u3057\u305f\u6307\u5b9a\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u3082\u306e\u3088\u308a\u53e4\u3051\u308c\u3070\u81ea\u52d5\u3067\u66f4\u65b0\u3055\u308c\u308b\u3002 \u4ee5\u4e0b\u306f rich==11.0.0 \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u72b6\u614b\u3067 rich==9.5.1 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5834\u5408\u306e\u30ed\u30b0\u3002 Installing collected packages: typing-extensions, rich Attempting uninstall: rich Found existing installation: rich 11.0.0 Uninstalling rich-11.0.0: Successfully uninstalled rich-11.0.0 Successfully installed rich-9.5.1 typing-extensions-3.10.0.2 \u30d1\u30c3\u30b1\u30fc\u30b8\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb $ pip uninstall docker Found existing installation: docker 5.0.3 Uninstalling docker-5.0.3: Would remove: /home/ubuntu/.local/lib/python3.8/site-packages/docker-5.0.3.dist-info/* /home/ubuntu/.local/lib/python3.8/site-packages/docker/* Proceed (y/n)? y Successfully uninstalled docker-5.0.3 -y \u3092\u4ed8\u3051\u308c\u3070\u5f37\u5236\u524a\u9664\u306b\u306a\u308b\u3063\u307d\u3044\u3002 Uninstall Options: -r, --requirement <file> Uninstall all the packages listed in the given requirements file. This option can be used multiple times. -y, --yes Don't ask for confirmation of uninstall deletions. \u5168\u3066\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb $ pip uninstall -r < ( pip freeze ) tool http\u30b5\u30fc\u30d0 $ python3 -m http.server 8080 $ python2 -m SimpleHTTPServer 8080 \u30a4\u30f3\u30d5\u30e9\u7cfb\u30a8\u30f3\u30b8\u30cb\u30a2\u304c\u552f\u4e00\u899a\u3048\u308b\u3079\u304dPython\u306e\u4f7f\u3044\u65b9 - Qiita \u5b9f\u88c5 \u6f14\u7b97\u5b50 \u6bd4\u8f03(==) Python\u306f\u6587\u5b57\u5217\u3082 == \u3092\u4f7f\u3046\u3002 \u4ee5\u4e0b\u306e\u6bd4\u8f03\u51e6\u7406\u306f\u771f\u3002 string = \"foobar\" if string == \"foobar\" : print ( \"string is 'foobar'\" ) \u914d\u5217\u306e\u6bd4\u8f03\u3082 == \u3067\u884c\u3046\u3002\u4ee5\u4e0b\u306ftrue obj_list = [ 1 , 2 , 3 , \"abc\" ] if obj_list == [ 1 , 2 , 3 , \"abc\" ]: print ( \"true\" ) \u3068\u3044\u3046\u304b == \u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u6bd4\u8f03\u306b\u4f7f\u3048\u308b\u3063\u3066\u3053\u3068\u304b\u306a\u3002 \u5236\u5fa1\u69cb\u6587 for foreach\u5f0f\u306e\u30eb\u30fc\u30d7\u51e6\u7406\u306f\u4ee5\u4e0b\u3002 for item in items: # item\u306b\u30ea\u30b9\u30c8\u306e\u8981\u7d20\u304c\u30bb\u30c3\u30c8\u3055\u308c\u308b \u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u3067\u3082\u66f8\u3051\u308b\u3002 \u30eb\u30fc\u30d7\u51e6\u7406\u3057\u305f\u7d50\u679c\u3092\u30ea\u30b9\u30c8\u306b\u30bb\u30c3\u30c8\u3057\u305f\u3044\u5834\u5408\u306a\u3069\u3002 \u305d\u306e\u969b\u306f [...] \u3067\u56f2\u3080\u3002 result = [ .. item\u306b\u5bfe\u3059\u308b\u51e6\u7406 .. for item in items] BeautifulSoup\u3092\u4f7f\u3063\u305f\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306e\u8a18\u8ff0\u4f8b links = [li . find( 'a' ) . get( 'href' ) for li in s . find_all( 'li' , class_ = 'toctree-l2' )] print (links) \u30ea\u30b9\u30c8\u51e6\u7406 \u30ea\u30b9\u30c8\u306e\u5b9a\u7fa9 items = [ 'foo' , 'bar' , 'baz' , ] \u7a7a\u30ea\u30b9\u30c8 items = [] \u8981\u7d20\u306e\u8ffd\u52a0 \u30ea\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e append() \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3046\u3002 items . append( 'qux' ) length array = [] array . append( '2' ) array . append( '3' ) array . append( '4' ) print ( len (array)) 3\u306b\u306a\u308b\u3002 \u8981\u7d20\u306eindex array = [ 'curry' , 'beef' , 'chicken' , 'vegetable' ] beef_index = array . index( 'chicken' ) print (beef_index) \u5f15\u6570\u306b\u6307\u5b9a\u3057\u305f\u8981\u7d20\u304c\u914d\u5217\u4e2d\u306e\u4f55\u756a\u76ee\u306b\u3042\u308b\u304b\u3092\u8fd4\u3059\u3002\u4e0a\u8a18\u306e\u51fa\u529b\u306f 2 \u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306fValueError\u306b\u306a\u308b\u3002 array = [ 'curry' , 'beef' , 'chicken' , 'vegetable' ] beef_index = array . index( 'zzz' ) print (beef_index) $ python3 index.py Traceback (most recent call last): File \"index.py\", line 3, in <module> beef_index = array.index('zzz') ValueError: 'zzz' is not in list \u8981\u7d20\u306e\u6709\u7121 in \u3092\u4f7f\u3046\u3002 array = [ 'curry' , 'beef' , 'chicken' , 'vegetable' ] print ( 'curry' in array) print ( 'pork' in array) \u51fa\u529b\u306f\u4ee5\u4e0b\u306b\u306a\u308b\u3002 True False \u30b9\u30e9\u30a4\u30b9 array = [ 'curry' , 'beef' , 'chicken' , 'vegetable' ] print (array[ 2 :]) print (array[: 3 ]) print (array[ 1 : 2 ]) \u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b $ python3 slice.py ['chicken', 'vegetable'] ['curry', 'beef', 'chicken'] ['beef'] \u66f8\u5f0f\u306f array[\u59cb\u70b9:\u7d42\u70b9] \u3002\u7701\u7565\u6642\u306f\u6700\u521d\u304b\u3089or\u6700\u5f8c\u307e\u3067\u3002 \u59cb\u70b9\u306findex\u3092\u300c\u542b\u3080\u300d\u304c\u3001\u7d42\u70b9\u306findex\u3092\u300c\u542b\u307e\u306a\u3044\u300d\u306e\u3067\u6ce8\u610f\u3002 (\u8981\u7d20\u306eindex\u3068\u3044\u3046\u3088\u308a\u3001\u533a\u5207\u308a\u4f4d\u7f6e\u306eindex\u3068\u898b\u306a\u3059\u3068\u826f\u3044) \u8f9e\u66f8 \u8f9e\u66f8\u306e\u5b9a\u7fa9 dict1 = { \"key1\" : \"value1\" , \"key2\" : \"value2\" } dict2 = dict (key1 = \"value1\" , key2 = \"value2\" ) \u3053\u306e\u5834\u5408\u3001 dict1 \u3068 dict2 \u306e\u4e2d\u8eab\u306f\u540c\u3058\u3002 dict1 == dict2 \u306e\u7d50\u679c\u3082true\u306b\u306a\u308b\u3002 \u8f9e\u66f8\u8981\u7d20\u306e\u30eb\u30fc\u30d7(\u30ad\u30fc\u3068\u5024\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u53d6\u5f97) sample_dict = { \"key1\" : \"value1\" , \"key2\" : \"value2\" , \"key3\" : \"value3\" , } for k, v in sample_dict . items(): print ( \"key: \" + k + \", value: \" + v) \u8f9e\u66f8.items() \u3067\u3001\u30ad\u30fc\u3068\u5024\u306e\u30da\u30a2\u306e\u30ea\u30b9\u30c8\u3092\u5f97\u3089\u308c\u308b\u306e\u3067\u3001\u3053\u308c\u3067\u30eb\u30fc\u30d7\u3067\u304d\u308b\u3002 \u4e0a\u306e\u30b3\u30fc\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 key: key1, value: value1 key: key2, value: value2 key: key3, value: value3 \u6587\u5b57\u5217 splitlines() \u30c6\u30ad\u30b9\u30c8\u306e\u672b\u5c3e\u306b\u6539\u884c\u304c\u3042\u308b\u5834\u5408\u3001 split('\\n') \u3092\u4f7f\u3046\u3068\u672b\u5c3e\u306e\u6539\u884c\u3082\u30c7\u30ea\u30df\u30bf\u3068\u8a8d\u8b58\u3057\u3001\u30ea\u30b9\u30c8\u306e\u6700\u7d42\u8981\u7d20\u306f\u7a7a\u6587\u5b57\u306b\u306a\u308b\u304c\u3001 splitlines() \u3067\u3042\u308c\u3070\u672b\u5c3e\u306e\u6539\u884c\u5206\u306f\u7121\u8996\u3055\u308c\u308b\u3002\u884c\u3054\u3068\u306b\u51e6\u7406\u3057\u305f\u3044\u5834\u5408\u306f\u3053\u3061\u3089\u304c\u4fbf\u5229\u3002 \u30bc\u30ed\u30d1\u30c7\u30a3\u30f3\u30b0 \u6587\u5b57\u5217\u306ezfill()\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3046\u3002 \u5f15\u6570\u306e\u6570\u5024\u306e\u6841\u6570\u9577\u306b\u30bc\u30ed\u30d1\u30c7\u30a3\u30f3\u30b0\u3055\u308c\u305f\u6587\u5b57\u5217\u3092\u8fd4\u3059\u3002 int_sample = '123' str_sample = 'foo' print (int_sample . zfill( 8 )) print (str_sample . zfill( 8 )) \u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u3002 00000123 00000foo \u6b63\u898f\u8868\u73fe\u51e6\u7406 re.sub()\u3067\u7f6e\u63db import re string = '/path/to/sample.txt' # s/a/A/ string = re . sub( r'a' , 'A' , string) print (string) # \u672b\u5c3e\u306e.txt\u3092\u524a\u308b string = re . sub( r'\\.txt$' , '' , string) print (string) # 't'\u3068'p'\u3092(t)\u304b(p)\u306b\u5909\u63db string = re . sub( r'([tp])' , r'(\\1)' , string) print (string) # r'...'\u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\u306f'\\\\1'\u3068\u66f8\u304f # a\u3092\u5909\u63db\u3002\u305f\u3060\u3057\u5927\u6587\u5b57\u5c0f\u6587\u5b57\u7121\u8996 string = re . sub( r'a' , r'_' , string, flags = re . IGNORECASE) print (string) # re.sub(pattern, repl, string, count=0, flags=0) \u306a\u306e\u3067\u3001count\u3092\u7701\u7565\u3059\u308b\u305f\u3081\u306b\u306f\"flags=\"\u3068\u3044\u3046\u540d\u524d\u4ed8\u304d\u5f15\u6570\u3092\u4f7f\u3046 \u4e0a\u8a18\u30b3\u30fc\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 $ python replace.py /pAth/to/sAmple.txt /pAth/to/sAmple /(p)A(t)h/(t)o/sAm(p)le /(p)_(t)h/(t)o/s_m(p)le path \u30e6\u30fc\u30b6\u30fc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5c55\u958b os.path.expanduser \u3092\u4f7f\u3046\u3002 [zaki@cloud-dev2 ~]$ grep -e ^zaki -e ^root /etc/passwd root:x:0:0:root:/root:/bin/bash zaki:x:1000:1000:zaki:/home/zaki:/bin/bash \u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 [zaki @cloud - dev2 ~ ] $ whoami zaki [zaki @cloud - dev2 ~ ] $ python Python 3.10.2 (main, Jan 17 2022 , 00 : 00 : 00 ) [GCC 11.2.1 20211203 (Red Hat 11.2.1-7 )] on linux Type \"help\" , \"copyright\" , \"credits\" or \"license\" for more information . >>> import os.path >>> print (os . path . expanduser( '~zaki' )) / home / zaki >>> print (os . path . expanduser( '~root' )) / root >>> print (os . path . expanduser( '~' )) / home / zaki >>> isinstance()\u3067\u578b\u30c1\u30a7\u30c3\u30af bool_val = True if ( isinstance (bool_val, bool )): print ( \"bool_val is bool\" ) int_val = 123 if ( isinstance (int_val, int )): print ( \"int_val is int\" ) list_val = [ 1 , 2 , 3 ] if ( isinstance (list_val, list )): print ( \"list_val is list\" ) dict_val = { \"key1\" : \"value1\" , \"key2\" : \"value2\" } if ( isinstance (dict_val, dict )): print ( \"dict_val is dict\" ) \u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b bool_val is bool int_val is int list_val is list dict_val is dict \u90e8\u5206\u9069\u7528(partial application) functiontools#partial() \u3092\u4f7f\u3046\u3002 \u5f15\u6570(\u306e\u4e00\u90e8\u3092)\u56fa\u5b9a\u3057\u305f\u95a2\u6570\u3092\u4f5c\u308b Python\u306efunctools.partial(\u90e8\u5206\u9069\u7528)\u3092\u89e3\u8aac\u3059\u308b - Qiita functools --- \u9ad8\u968e\u95a2\u6570\u3068\u547c\u3073\u51fa\u3057\u53ef\u80fd\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u64cd\u4f5c \u2014 Python 3.9.4 \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3053\u3093\u306a\u611f\u3058\u3002 https://github.com/ansible/ansible/blob/stable-2.10/lib/ansible/playbook/base.py#L105-L114 method = \"_get_attr_ %s \" % attr_name if method in src_dict or method in dst_dict: getter = partial(_generic_g_method, attr_name) elif ( '_get_parent_attribute' in dst_dict or '_get_parent_attribute' in src_dict) and value . inherit: getter = partial(_generic_g_parent, attr_name) else : getter = partial(_generic_g, attr_name) setter = partial(_generic_s, attr_name) deleter = partial(_generic_d, attr_name) \u306a\u308b\u307b\u3069\u308f\u304b\u3089\u3093 [Ansible] \u305d\u306etag\u8a2d\u5b9a\u3001\u60f3\u5b9a\u901a\u308a\u306b\u52d5\u3044\u3066\u307e\u3059\u304b\uff1f (\u7d99\u627f\u6a5f\u80fd\u3068\u305d\u306e\u5b9f\u88c5\u3092\u78ba\u8a8d\u3059\u308b) - zaki work log \u30e1\u30bf\u30af\u30e9\u30b9 python\u3067\u8003\u3048\u308b\u30e1\u30bf\u30af\u30e9\u30b9\u3068\u306f\uff1f - Qiita __new__\u3068__init__\u3068\u30e1\u30bf\u30af\u30e9\u30b9\u3068 - Qiita \u30af\u30e9\u30b9\u306e\u5b9a\u7fa9\u3092\u30b3\u30fc\u30c9\u3067\u52d5\u7684\u306b\u5b9f\u88c5\u3059\u308b\u611f\u3058\u3002 https://github.com/ansible/ansible/blob/stable-2.10/lib/ansible/playbook/base.py#L105-L114 method = \"_get_attr_ %s \" % attr_name if method in src_dict or method in dst_dict: getter = partial(_generic_g_method, attr_name) elif ( '_get_parent_attribute' in dst_dict or '_get_parent_attribute' in src_dict) and value . inherit: getter = partial(_generic_g_parent, attr_name) else : getter = partial(_generic_g, attr_name) setter = partial(_generic_s, attr_name) deleter = partial(_generic_d, attr_name) [Ansible] \u305d\u306etag\u8a2d\u5b9a\u3001\u60f3\u5b9a\u901a\u308a\u306b\u52d5\u3044\u3066\u307e\u3059\u304b\uff1f (\u7d99\u627f\u6a5f\u80fd\u3068\u305d\u306e\u5b9f\u88c5\u3092\u78ba\u8a8d\u3059\u308b) - zaki work log \u4eee\u60f3\u74b0\u5883 venv \u4f5c\u6210 $ python3 -m venv venv/ansible system\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30d1\u30b9\u3082\u53c2\u7167 $ python3 -m venv venv-sys --system-site-packages pyvenv RHEL8\u306b\u5165\u3063\u3066\u308b\u3084\u3064\u3002 [zaki@rhel8-node ~]$ pyvenv-3 venv3 WARNING: the pyenv script is deprecated in favour of `platform-python -m venv` [zaki@rhel8-node ~]$ . venv3/bin/activate (venv3) [zaki@rhel8-node ~]$ (venv3) [zaki@rhel8-node ~]$ pip install --upgrade pip Cache entry deserialization failed, entry ignored Collecting pip Downloading https://files.pythonhosted.org/packages/47/ca/f0d790b6e18b3a6f3bd5e80c2ee4edbb5807286c21cdd0862ca933f751dd/pip-21.1.3-py3-none-any.whl (1.5MB) 100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1.6MB 641kB/s Installing collected packages: pip Found existing installation: pip 9.0.3 Uninstalling pip-9.0.3: Successfully uninstalled pip-9.0.3 Successfully installed pip-21.1.3 (venv3) [zaki@rhel8-node ~]$ pip list Package Version ---------- ------- pip 21.1.3 setuptools 39.2.0 --system-site-packages \u3082\u4f75\u7528\u53ef [zaki@rhel8-node ~]$ pyvenv-3.6 venv --system-site-packages WARNING: the pyenv script is deprecated in favour of `platform-python -m venv` [zaki@rhel8-ansible-node ~]$ . venv/bin/activate (venv) [zaki@rhel8-node ~]$ pip list DEPRECATION: The default format will switch to columns in the future. You can use --format=(legacy|columns) (or define a format=(legacy|columns) in your pip.conf under the [list] section) to disable this warning. cffi (1.11.5) chardet (3.0.4) configobj (5.0.6) configshell-fb (1.1.28) cryptography (3.2.1) dbus-python (1.2.4) decorator (4.2.1) ethtool (0.14) : : RHEL / Ansible Ansible \u304c\u5229\u7528\u3059\u308b Python \u5b9f\u884c\u74b0\u5883 - \u8d64\u5e3d\u30a8\u30f3\u30b8\u30cb\u30a2\u30d6\u30ed\u30b0","title":"Python"},{"location":"lang/python/#python","text":"","title":"Python"},{"location":"lang/python/#pip","text":"","title":"pip"},{"location":"lang/python/#requirementstxt","text":"ansible==2.9.7 jmespath=0.10.0 \u3068\u3044\u3046\u5185\u5bb9\u306e requirements.txt \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\u3053\u308c\u3067 $ pip install -r requirements.txt \u203b \u30d5\u30a1\u30a4\u30eb\u540d\u306f\u4efb\u610f","title":"requirements.txt\u306e\u5229\u7528"},{"location":"lang/python/#pip_1","text":"venv\u3068\u304b\u4f5c\u3063\u305f\u76f4\u5f8c\u306f pip \u81ea\u4f53\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u306e\u3067(\u76ee\u7684\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u5165\u308c\u308b\u3068\u304d\u306b\u30a8\u30e9\u30fc\u306b\u306a\u308b\u524d\u306b\u5148\u306b)\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b $ pip install --upgrade pip","title":"pip\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8"},{"location":"lang/python/#_1","text":"\u57fa\u672c\u7684\u306b\u306f\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u3066\u4ee5\u4e0b\u3067OK $ pip install hogehoge =0 .0.1 requirements.txt \u8a18\u8f09\u306e\u5834\u5408\u3082\u3001\u8a18\u8f09\u3057\u305f\u6307\u5b9a\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u3082\u306e\u3088\u308a\u53e4\u3051\u308c\u3070\u81ea\u52d5\u3067\u66f4\u65b0\u3055\u308c\u308b\u3002 \u4ee5\u4e0b\u306f rich==11.0.0 \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u72b6\u614b\u3067 rich==9.5.1 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5834\u5408\u306e\u30ed\u30b0\u3002 Installing collected packages: typing-extensions, rich Attempting uninstall: rich Found existing installation: rich 11.0.0 Uninstalling rich-11.0.0: Successfully uninstalled rich-11.0.0 Successfully installed rich-9.5.1 typing-extensions-3.10.0.2","title":"\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9"},{"location":"lang/python/#_2","text":"$ pip uninstall docker Found existing installation: docker 5.0.3 Uninstalling docker-5.0.3: Would remove: /home/ubuntu/.local/lib/python3.8/site-packages/docker-5.0.3.dist-info/* /home/ubuntu/.local/lib/python3.8/site-packages/docker/* Proceed (y/n)? y Successfully uninstalled docker-5.0.3 -y \u3092\u4ed8\u3051\u308c\u3070\u5f37\u5236\u524a\u9664\u306b\u306a\u308b\u3063\u307d\u3044\u3002 Uninstall Options: -r, --requirement <file> Uninstall all the packages listed in the given requirements file. This option can be used multiple times. -y, --yes Don't ask for confirmation of uninstall deletions.","title":"\u30d1\u30c3\u30b1\u30fc\u30b8\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"lang/python/#_3","text":"$ pip uninstall -r < ( pip freeze )","title":"\u5168\u3066\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"lang/python/#tool","text":"","title":"tool"},{"location":"lang/python/#http","text":"$ python3 -m http.server 8080 $ python2 -m SimpleHTTPServer 8080 \u30a4\u30f3\u30d5\u30e9\u7cfb\u30a8\u30f3\u30b8\u30cb\u30a2\u304c\u552f\u4e00\u899a\u3048\u308b\u3079\u304dPython\u306e\u4f7f\u3044\u65b9 - Qiita","title":"http\u30b5\u30fc\u30d0"},{"location":"lang/python/#_4","text":"","title":"\u5b9f\u88c5"},{"location":"lang/python/#_5","text":"","title":"\u6f14\u7b97\u5b50"},{"location":"lang/python/#_6","text":"Python\u306f\u6587\u5b57\u5217\u3082 == \u3092\u4f7f\u3046\u3002 \u4ee5\u4e0b\u306e\u6bd4\u8f03\u51e6\u7406\u306f\u771f\u3002 string = \"foobar\" if string == \"foobar\" : print ( \"string is 'foobar'\" ) \u914d\u5217\u306e\u6bd4\u8f03\u3082 == \u3067\u884c\u3046\u3002\u4ee5\u4e0b\u306ftrue obj_list = [ 1 , 2 , 3 , \"abc\" ] if obj_list == [ 1 , 2 , 3 , \"abc\" ]: print ( \"true\" ) \u3068\u3044\u3046\u304b == \u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u6bd4\u8f03\u306b\u4f7f\u3048\u308b\u3063\u3066\u3053\u3068\u304b\u306a\u3002","title":"\u6bd4\u8f03(==)"},{"location":"lang/python/#_7","text":"","title":"\u5236\u5fa1\u69cb\u6587"},{"location":"lang/python/#for","text":"foreach\u5f0f\u306e\u30eb\u30fc\u30d7\u51e6\u7406\u306f\u4ee5\u4e0b\u3002 for item in items: # item\u306b\u30ea\u30b9\u30c8\u306e\u8981\u7d20\u304c\u30bb\u30c3\u30c8\u3055\u308c\u308b \u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u3067\u3082\u66f8\u3051\u308b\u3002 \u30eb\u30fc\u30d7\u51e6\u7406\u3057\u305f\u7d50\u679c\u3092\u30ea\u30b9\u30c8\u306b\u30bb\u30c3\u30c8\u3057\u305f\u3044\u5834\u5408\u306a\u3069\u3002 \u305d\u306e\u969b\u306f [...] \u3067\u56f2\u3080\u3002 result = [ .. item\u306b\u5bfe\u3059\u308b\u51e6\u7406 .. for item in items] BeautifulSoup\u3092\u4f7f\u3063\u305f\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306e\u8a18\u8ff0\u4f8b links = [li . find( 'a' ) . get( 'href' ) for li in s . find_all( 'li' , class_ = 'toctree-l2' )] print (links)","title":"for"},{"location":"lang/python/#_8","text":"","title":"\u30ea\u30b9\u30c8\u51e6\u7406"},{"location":"lang/python/#_9","text":"items = [ 'foo' , 'bar' , 'baz' , ] \u7a7a\u30ea\u30b9\u30c8 items = []","title":"\u30ea\u30b9\u30c8\u306e\u5b9a\u7fa9"},{"location":"lang/python/#_10","text":"\u30ea\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e append() \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3046\u3002 items . append( 'qux' )","title":"\u8981\u7d20\u306e\u8ffd\u52a0"},{"location":"lang/python/#length","text":"array = [] array . append( '2' ) array . append( '3' ) array . append( '4' ) print ( len (array)) 3\u306b\u306a\u308b\u3002","title":"length"},{"location":"lang/python/#index","text":"array = [ 'curry' , 'beef' , 'chicken' , 'vegetable' ] beef_index = array . index( 'chicken' ) print (beef_index) \u5f15\u6570\u306b\u6307\u5b9a\u3057\u305f\u8981\u7d20\u304c\u914d\u5217\u4e2d\u306e\u4f55\u756a\u76ee\u306b\u3042\u308b\u304b\u3092\u8fd4\u3059\u3002\u4e0a\u8a18\u306e\u51fa\u529b\u306f 2 \u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306fValueError\u306b\u306a\u308b\u3002 array = [ 'curry' , 'beef' , 'chicken' , 'vegetable' ] beef_index = array . index( 'zzz' ) print (beef_index) $ python3 index.py Traceback (most recent call last): File \"index.py\", line 3, in <module> beef_index = array.index('zzz') ValueError: 'zzz' is not in list","title":"\u8981\u7d20\u306eindex"},{"location":"lang/python/#_11","text":"in \u3092\u4f7f\u3046\u3002 array = [ 'curry' , 'beef' , 'chicken' , 'vegetable' ] print ( 'curry' in array) print ( 'pork' in array) \u51fa\u529b\u306f\u4ee5\u4e0b\u306b\u306a\u308b\u3002 True False","title":"\u8981\u7d20\u306e\u6709\u7121"},{"location":"lang/python/#_12","text":"array = [ 'curry' , 'beef' , 'chicken' , 'vegetable' ] print (array[ 2 :]) print (array[: 3 ]) print (array[ 1 : 2 ]) \u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b $ python3 slice.py ['chicken', 'vegetable'] ['curry', 'beef', 'chicken'] ['beef'] \u66f8\u5f0f\u306f array[\u59cb\u70b9:\u7d42\u70b9] \u3002\u7701\u7565\u6642\u306f\u6700\u521d\u304b\u3089or\u6700\u5f8c\u307e\u3067\u3002 \u59cb\u70b9\u306findex\u3092\u300c\u542b\u3080\u300d\u304c\u3001\u7d42\u70b9\u306findex\u3092\u300c\u542b\u307e\u306a\u3044\u300d\u306e\u3067\u6ce8\u610f\u3002 (\u8981\u7d20\u306eindex\u3068\u3044\u3046\u3088\u308a\u3001\u533a\u5207\u308a\u4f4d\u7f6e\u306eindex\u3068\u898b\u306a\u3059\u3068\u826f\u3044)","title":"\u30b9\u30e9\u30a4\u30b9"},{"location":"lang/python/#_13","text":"","title":"\u8f9e\u66f8"},{"location":"lang/python/#_14","text":"dict1 = { \"key1\" : \"value1\" , \"key2\" : \"value2\" } dict2 = dict (key1 = \"value1\" , key2 = \"value2\" ) \u3053\u306e\u5834\u5408\u3001 dict1 \u3068 dict2 \u306e\u4e2d\u8eab\u306f\u540c\u3058\u3002 dict1 == dict2 \u306e\u7d50\u679c\u3082true\u306b\u306a\u308b\u3002","title":"\u8f9e\u66f8\u306e\u5b9a\u7fa9"},{"location":"lang/python/#_15","text":"sample_dict = { \"key1\" : \"value1\" , \"key2\" : \"value2\" , \"key3\" : \"value3\" , } for k, v in sample_dict . items(): print ( \"key: \" + k + \", value: \" + v) \u8f9e\u66f8.items() \u3067\u3001\u30ad\u30fc\u3068\u5024\u306e\u30da\u30a2\u306e\u30ea\u30b9\u30c8\u3092\u5f97\u3089\u308c\u308b\u306e\u3067\u3001\u3053\u308c\u3067\u30eb\u30fc\u30d7\u3067\u304d\u308b\u3002 \u4e0a\u306e\u30b3\u30fc\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 key: key1, value: value1 key: key2, value: value2 key: key3, value: value3","title":"\u8f9e\u66f8\u8981\u7d20\u306e\u30eb\u30fc\u30d7(\u30ad\u30fc\u3068\u5024\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u53d6\u5f97)"},{"location":"lang/python/#_16","text":"","title":"\u6587\u5b57\u5217"},{"location":"lang/python/#splitlines","text":"\u30c6\u30ad\u30b9\u30c8\u306e\u672b\u5c3e\u306b\u6539\u884c\u304c\u3042\u308b\u5834\u5408\u3001 split('\\n') \u3092\u4f7f\u3046\u3068\u672b\u5c3e\u306e\u6539\u884c\u3082\u30c7\u30ea\u30df\u30bf\u3068\u8a8d\u8b58\u3057\u3001\u30ea\u30b9\u30c8\u306e\u6700\u7d42\u8981\u7d20\u306f\u7a7a\u6587\u5b57\u306b\u306a\u308b\u304c\u3001 splitlines() \u3067\u3042\u308c\u3070\u672b\u5c3e\u306e\u6539\u884c\u5206\u306f\u7121\u8996\u3055\u308c\u308b\u3002\u884c\u3054\u3068\u306b\u51e6\u7406\u3057\u305f\u3044\u5834\u5408\u306f\u3053\u3061\u3089\u304c\u4fbf\u5229\u3002","title":"splitlines()"},{"location":"lang/python/#_17","text":"\u6587\u5b57\u5217\u306ezfill()\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3046\u3002 \u5f15\u6570\u306e\u6570\u5024\u306e\u6841\u6570\u9577\u306b\u30bc\u30ed\u30d1\u30c7\u30a3\u30f3\u30b0\u3055\u308c\u305f\u6587\u5b57\u5217\u3092\u8fd4\u3059\u3002 int_sample = '123' str_sample = 'foo' print (int_sample . zfill( 8 )) print (str_sample . zfill( 8 )) \u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u3002 00000123 00000foo","title":"\u30bc\u30ed\u30d1\u30c7\u30a3\u30f3\u30b0"},{"location":"lang/python/#_18","text":"","title":"\u6b63\u898f\u8868\u73fe\u51e6\u7406"},{"location":"lang/python/#resub","text":"import re string = '/path/to/sample.txt' # s/a/A/ string = re . sub( r'a' , 'A' , string) print (string) # \u672b\u5c3e\u306e.txt\u3092\u524a\u308b string = re . sub( r'\\.txt$' , '' , string) print (string) # 't'\u3068'p'\u3092(t)\u304b(p)\u306b\u5909\u63db string = re . sub( r'([tp])' , r'(\\1)' , string) print (string) # r'...'\u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\u306f'\\\\1'\u3068\u66f8\u304f # a\u3092\u5909\u63db\u3002\u305f\u3060\u3057\u5927\u6587\u5b57\u5c0f\u6587\u5b57\u7121\u8996 string = re . sub( r'a' , r'_' , string, flags = re . IGNORECASE) print (string) # re.sub(pattern, repl, string, count=0, flags=0) \u306a\u306e\u3067\u3001count\u3092\u7701\u7565\u3059\u308b\u305f\u3081\u306b\u306f\"flags=\"\u3068\u3044\u3046\u540d\u524d\u4ed8\u304d\u5f15\u6570\u3092\u4f7f\u3046 \u4e0a\u8a18\u30b3\u30fc\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 $ python replace.py /pAth/to/sAmple.txt /pAth/to/sAmple /(p)A(t)h/(t)o/sAm(p)le /(p)_(t)h/(t)o/s_m(p)le","title":"re.sub()\u3067\u7f6e\u63db"},{"location":"lang/python/#path","text":"","title":"path"},{"location":"lang/python/#_19","text":"os.path.expanduser \u3092\u4f7f\u3046\u3002 [zaki@cloud-dev2 ~]$ grep -e ^zaki -e ^root /etc/passwd root:x:0:0:root:/root:/bin/bash zaki:x:1000:1000:zaki:/home/zaki:/bin/bash \u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002 [zaki @cloud - dev2 ~ ] $ whoami zaki [zaki @cloud - dev2 ~ ] $ python Python 3.10.2 (main, Jan 17 2022 , 00 : 00 : 00 ) [GCC 11.2.1 20211203 (Red Hat 11.2.1-7 )] on linux Type \"help\" , \"copyright\" , \"credits\" or \"license\" for more information . >>> import os.path >>> print (os . path . expanduser( '~zaki' )) / home / zaki >>> print (os . path . expanduser( '~root' )) / root >>> print (os . path . expanduser( '~' )) / home / zaki >>>","title":"\u30e6\u30fc\u30b6\u30fc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5c55\u958b"},{"location":"lang/python/#isinstance","text":"bool_val = True if ( isinstance (bool_val, bool )): print ( \"bool_val is bool\" ) int_val = 123 if ( isinstance (int_val, int )): print ( \"int_val is int\" ) list_val = [ 1 , 2 , 3 ] if ( isinstance (list_val, list )): print ( \"list_val is list\" ) dict_val = { \"key1\" : \"value1\" , \"key2\" : \"value2\" } if ( isinstance (dict_val, dict )): print ( \"dict_val is dict\" ) \u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b bool_val is bool int_val is int list_val is list dict_val is dict","title":"isinstance()\u3067\u578b\u30c1\u30a7\u30c3\u30af"},{"location":"lang/python/#partial-application","text":"functiontools#partial() \u3092\u4f7f\u3046\u3002 \u5f15\u6570(\u306e\u4e00\u90e8\u3092)\u56fa\u5b9a\u3057\u305f\u95a2\u6570\u3092\u4f5c\u308b Python\u306efunctools.partial(\u90e8\u5206\u9069\u7528)\u3092\u89e3\u8aac\u3059\u308b - Qiita functools --- \u9ad8\u968e\u95a2\u6570\u3068\u547c\u3073\u51fa\u3057\u53ef\u80fd\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u64cd\u4f5c \u2014 Python 3.9.4 \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3053\u3093\u306a\u611f\u3058\u3002 https://github.com/ansible/ansible/blob/stable-2.10/lib/ansible/playbook/base.py#L105-L114 method = \"_get_attr_ %s \" % attr_name if method in src_dict or method in dst_dict: getter = partial(_generic_g_method, attr_name) elif ( '_get_parent_attribute' in dst_dict or '_get_parent_attribute' in src_dict) and value . inherit: getter = partial(_generic_g_parent, attr_name) else : getter = partial(_generic_g, attr_name) setter = partial(_generic_s, attr_name) deleter = partial(_generic_d, attr_name) \u306a\u308b\u307b\u3069\u308f\u304b\u3089\u3093 [Ansible] \u305d\u306etag\u8a2d\u5b9a\u3001\u60f3\u5b9a\u901a\u308a\u306b\u52d5\u3044\u3066\u307e\u3059\u304b\uff1f (\u7d99\u627f\u6a5f\u80fd\u3068\u305d\u306e\u5b9f\u88c5\u3092\u78ba\u8a8d\u3059\u308b) - zaki work log","title":"\u90e8\u5206\u9069\u7528(partial application)"},{"location":"lang/python/#_20","text":"python\u3067\u8003\u3048\u308b\u30e1\u30bf\u30af\u30e9\u30b9\u3068\u306f\uff1f - Qiita __new__\u3068__init__\u3068\u30e1\u30bf\u30af\u30e9\u30b9\u3068 - Qiita \u30af\u30e9\u30b9\u306e\u5b9a\u7fa9\u3092\u30b3\u30fc\u30c9\u3067\u52d5\u7684\u306b\u5b9f\u88c5\u3059\u308b\u611f\u3058\u3002 https://github.com/ansible/ansible/blob/stable-2.10/lib/ansible/playbook/base.py#L105-L114 method = \"_get_attr_ %s \" % attr_name if method in src_dict or method in dst_dict: getter = partial(_generic_g_method, attr_name) elif ( '_get_parent_attribute' in dst_dict or '_get_parent_attribute' in src_dict) and value . inherit: getter = partial(_generic_g_parent, attr_name) else : getter = partial(_generic_g, attr_name) setter = partial(_generic_s, attr_name) deleter = partial(_generic_d, attr_name) [Ansible] \u305d\u306etag\u8a2d\u5b9a\u3001\u60f3\u5b9a\u901a\u308a\u306b\u52d5\u3044\u3066\u307e\u3059\u304b\uff1f (\u7d99\u627f\u6a5f\u80fd\u3068\u305d\u306e\u5b9f\u88c5\u3092\u78ba\u8a8d\u3059\u308b) - zaki work log","title":"\u30e1\u30bf\u30af\u30e9\u30b9"},{"location":"lang/python/#_21","text":"","title":"\u4eee\u60f3\u74b0\u5883"},{"location":"lang/python/#venv","text":"","title":"venv"},{"location":"lang/python/#_22","text":"$ python3 -m venv venv/ansible","title":"\u4f5c\u6210"},{"location":"lang/python/#system","text":"$ python3 -m venv venv-sys --system-site-packages","title":"system\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30d1\u30b9\u3082\u53c2\u7167"},{"location":"lang/python/#pyvenv","text":"RHEL8\u306b\u5165\u3063\u3066\u308b\u3084\u3064\u3002 [zaki@rhel8-node ~]$ pyvenv-3 venv3 WARNING: the pyenv script is deprecated in favour of `platform-python -m venv` [zaki@rhel8-node ~]$ . venv3/bin/activate (venv3) [zaki@rhel8-node ~]$ (venv3) [zaki@rhel8-node ~]$ pip install --upgrade pip Cache entry deserialization failed, entry ignored Collecting pip Downloading https://files.pythonhosted.org/packages/47/ca/f0d790b6e18b3a6f3bd5e80c2ee4edbb5807286c21cdd0862ca933f751dd/pip-21.1.3-py3-none-any.whl (1.5MB) 100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1.6MB 641kB/s Installing collected packages: pip Found existing installation: pip 9.0.3 Uninstalling pip-9.0.3: Successfully uninstalled pip-9.0.3 Successfully installed pip-21.1.3 (venv3) [zaki@rhel8-node ~]$ pip list Package Version ---------- ------- pip 21.1.3 setuptools 39.2.0 --system-site-packages \u3082\u4f75\u7528\u53ef [zaki@rhel8-node ~]$ pyvenv-3.6 venv --system-site-packages WARNING: the pyenv script is deprecated in favour of `platform-python -m venv` [zaki@rhel8-ansible-node ~]$ . venv/bin/activate (venv) [zaki@rhel8-node ~]$ pip list DEPRECATION: The default format will switch to columns in the future. You can use --format=(legacy|columns) (or define a format=(legacy|columns) in your pip.conf under the [list] section) to disable this warning. cffi (1.11.5) chardet (3.0.4) configobj (5.0.6) configshell-fb (1.1.28) cryptography (3.2.1) dbus-python (1.2.4) decorator (4.2.1) ethtool (0.14) : :","title":"pyvenv"},{"location":"lang/python/#rhel-ansible","text":"Ansible \u304c\u5229\u7528\u3059\u308b Python \u5b9f\u884c\u74b0\u5883 - \u8d64\u5e3d\u30a8\u30f3\u30b8\u30cb\u30a2\u30d6\u30ed\u30b0","title":"RHEL / Ansible"},{"location":"lang/yaml/","text":"YAML tools Online YAML Parser \u8907\u6570\u884c [YAML] \u8907\u6570\u884c\u30c6\u30ad\u30b9\u30c8\u306e\u884c\u982d\u306b\u30a4\u30f3\u30c7\u30f3\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f (Ansible/Kubernetes) - zaki work log \u30a4\u30f3\u30c7\u30f3\u30c8 block : | hoge foo bar \u3053\u306e\u5834\u5408\u306e block \u306e\u5024\u306f hoge foo bar \u3068\u306a\u308b\u3002 \u3053\u308c\u306f\u30a4\u30f3\u30c7\u30f3\u30c8\u91cf\u3092(\u5404\u884c\u540c\u3058\u91cf\u305a\u3064)\u5909\u5316\u3055\u305b\u3066\u3082\u540c\u3058\u3002 block \u306e\u5024\u306e\u6587\u5b57\u5217\u5185\u3067\u30a4\u30f3\u30c7\u30f3\u30c8\u304c\u6b32\u3057\u3044\u5834\u5408\u306f block : |2 hoge foo bar \u3068\u66f8\u304f\u3053\u3068\u3067\u3001\u300c2\u6587\u5b57\u5206\u306fYAML\u306e\u66f8\u5f0f\u3068\u3057\u3066\u306e\u30a4\u30f3\u30c7\u30f3\u30c8\u300d\u3068\u89e3\u91c8\u3055\u308c\u3001\u6b8b\u308a\u306e\u30b9\u30da\u30fc\u30b9\u306f\u6587\u5b57\u5217\u90e8\u5206\u3068\u3057\u3066\u89e3\u91c8\u3055\u308c\u308b\u3002","title":"YAML"},{"location":"lang/yaml/#yaml","text":"","title":"YAML"},{"location":"lang/yaml/#tools","text":"Online YAML Parser","title":"tools"},{"location":"lang/yaml/#_1","text":"[YAML] \u8907\u6570\u884c\u30c6\u30ad\u30b9\u30c8\u306e\u884c\u982d\u306b\u30a4\u30f3\u30c7\u30f3\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f (Ansible/Kubernetes) - zaki work log","title":"\u8907\u6570\u884c"},{"location":"lang/yaml/#_2","text":"block : | hoge foo bar \u3053\u306e\u5834\u5408\u306e block \u306e\u5024\u306f hoge foo bar \u3068\u306a\u308b\u3002 \u3053\u308c\u306f\u30a4\u30f3\u30c7\u30f3\u30c8\u91cf\u3092(\u5404\u884c\u540c\u3058\u91cf\u305a\u3064)\u5909\u5316\u3055\u305b\u3066\u3082\u540c\u3058\u3002 block \u306e\u5024\u306e\u6587\u5b57\u5217\u5185\u3067\u30a4\u30f3\u30c7\u30f3\u30c8\u304c\u6b32\u3057\u3044\u5834\u5408\u306f block : |2 hoge foo bar \u3068\u66f8\u304f\u3053\u3068\u3067\u3001\u300c2\u6587\u5b57\u5206\u306fYAML\u306e\u66f8\u5f0f\u3068\u3057\u3066\u306e\u30a4\u30f3\u30c7\u30f3\u30c8\u300d\u3068\u89e3\u91c8\u3055\u308c\u3001\u6b8b\u308a\u306e\u30b9\u30da\u30fc\u30b9\u306f\u6587\u5b57\u5217\u90e8\u5206\u3068\u3057\u3066\u89e3\u91c8\u3055\u308c\u308b\u3002","title":"\u30a4\u30f3\u30c7\u30f3\u30c8"}]}